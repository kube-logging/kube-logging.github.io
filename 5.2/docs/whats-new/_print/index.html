<!doctype html><html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="https://kube-logging.dev/5.2/docs/whats-new/">
<link rel="alternate" type="text/releases" href="https://kube-logging.dev/5.2/docs/whats-new/releases.releases">
<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/5.2/favicons/favicon.ico">
<link rel="apple-touch-icon" href="/5.2/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/5.2/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/5.2/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/5.2/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/5.2/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/5.2/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/5.2/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/5.2/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/5.2/favicons/android-192x192.png" sizes="192x192">
<title>What's new | Logging operator</title><meta name="description" content="Documentation for the Logging operator">
<meta property="og:title" content="What's new">
<meta property="og:description" content="Documentation for the Logging operator">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kube-logging.dev/5.2/docs/whats-new/"><meta property="og:site_name" content="Logging operator">
<meta itemprop="name" content="What's new">
<meta itemprop="description" content="Documentation for the Logging operator"><meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What's new">
<meta name="twitter:description" content="Documentation for the Logging operator">
<link rel="preload" href="/5.2/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" as="style">
<link href="/5.2/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" rel="stylesheet" integrity>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/5.2/css/prism.css">
<script src="/js/w3.js" type="application/x-javascript"></script>
<link rel="canonical" href="https://kube-logging.dev/docs/whats-new/">
<script src="/pagefind/pagefind-highlight.js" type="application/x-javascript"></script>
<script type="module">
        await import('/pagefind/pagefind-highlight.js');
        new PagefindHighlight({ highlightParam: "highlight" });
    </script>
<script>window.__SJ_MESSAGE__="We collect cookies to analyze our website traffic and performance. We never collect any personal data.",window.__SJ_ACCEPT_BTN_TEXT__="Accept",window.__SJ_REJECT_BTN_TEXT__="Reject"</script>
<script src="https://cdn.jsdelivr.net/gh/sprucejoy/cookie-consent-autoblock-gdpr/cookie-consent.js" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM8C8QXCN7"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LM8C8QXCN7")}</script>
</head><body class="td-section">
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/5.2/"><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 3237.738 490.023" id="svg142" sodipodi:docname="logo-new2.svg" inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs146"/><sodipodi:namedview id="namedview144" pagecolor="#505050" bordercolor="#ffffff" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="1" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom=".37340884" inkscape:cx="1620.208" inkscape:cy="243.70071" inkscape:window-width="705" inkscape:window-height="480" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg142"/><g id="Group_2068" data-name="Group 2068" transform="translate(-43577.297 -34456.625)"><g id="Group_2067" data-name="Group 2067" transform="translate(27723.789 24565.273)"><path id="Path_4217" data-name="Path 4217" d="M47842.219 34024.414l-276.027 475.07h71.242l240.227-414.1z" transform="translate(-31703.996 -24123.111)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4218" data-name="Path 4218" d="M47831.324 34080.781l166.754 287.355h-333.035z" transform="translate(-31640.254 -24086.76)" fill="#fff" stroke="#fff" stroke-width="10"/><path id="Path_4220" data-name="Path 4220" d="M47668.742 34274.2l-37.727 64.1h442.43l-37.156-64.1z" transform="translate(-31662.199 -23962.018)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4222" data-name="Path 4222" d="M11294.989 10157.944l311.97-.01-156.218-269.074-78.621 135.83z" transform="translate(4740.338 117.39)" fill="#fff"/><path id="Path_4224" data-name="Path 4224" d="M47787.594 34159.125l-54.391 93.035h108.039z" transform="translate(-31596.297 -24036.238)" fill="#13142c" stroke="#13132d" stroke-width="10"/></g><text id="Logging_Operator" data-name="Logging operator" transform="translate(45475.035 34799.609)" fill="#fff" font-size="267" font-family="Montserrat-Bold, Montserrat" font-weight="700" letter-spacing=".046em"><tspan x="-1339.806" y="0" id="tspan138">Logging operator</tspan></text></g></svg></span><span class="navbar-brand__name">Logging operator</span>
<span class="font-weight-bold navbar-logo navbar-version">5.2</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="https://github.com/kube-logging/logging-operator" title="Go to GitHub project page" target="_blank"><span>Project page</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/5.2/docs/" title="Read the documentation"><span>Documentation</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/5.2/docs/community/" title="Come chat with us!"><span>Community</span></a>
</li><li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
<div w3-include-html="/docs/whats-new//releases.releases" w3-include-html-default='<a class="dropdown-item" href="/docs/releases.releases">Latest</a>'></div><script type="application/x-javascript">w3.includeHTML()</script>
</div></li></ul></div><div class="navbar-nav d-none d-lg-block">
<div class="main-menu-search">
<a href="/search">
<span class="nav-link"><i class="fa fa-search" aria-hidden="true"></i> Search</span>
</a>
</div></div></nav></header><div class="container-fluid td-outer">
<div class="td-main">
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href="/5.2/docs/whats-new/">Return to the regular view of this page</a>.
</p></div><h1 class="title">What's new</h1><ul>
</ul><div class="content">
<h2 id="version-52">Version 5.2</h2><p>The following are the highlights and main changes of Logging operator 5.2. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/5.2.0">Logging operator 5.2 releases page</a>.</p><p>You can now disable mounting the <code>/var/lib/docker/containers</code> volume using the <code>DisableVarLibDockerContainers</code> option in the <code>loggings</code> or <code>FluentbitAgent</code> CRD. This solves an installation error on GKE Autopilot.</p><p>In this release we&rsquo;ve moved <code>config-reloader</code> and <code>syslog-ng-reloader</code> into the Logging operator repository. From now on, we build these images from our repository (<a href="https://github.com/kube-logging/logging-operator/tree/master/images/">https://github.com/kube-logging/logging-operator/tree/master/images/</a>) and their version numbering follows the version numbers of Logging operator.</p><h2 id="version-51">Version 5.1</h2><p>The following are the highlights and main changes of Logging operator 5.1. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/5.1.1">Logging operator 5.1 releases page</a>.</p><h3 id="fluentd-http-output-improvements">Fluentd http output improvements</h3><ul>
<li>Set the <code>compress</code> option to <code>gzip</code> to compress the HTTP request body.</li><li>You can use the <code>headers_from_placeholders</code> option to add headers to the HTTP requests.</li><li>Set the <code>reuse_connection</code> option to <code>true</code> to try to reuse HTTP connections to improve performance.</li></ul><h3 id="multiple-hosttailer-support">Multiple hosttailer support</h3><p>You can now define multiple hosttailers in your logging configuration, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">logging</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">enabled</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">hostTailers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">enabled</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">instances</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kubeauditane</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">enabled</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">workloadOverrides</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">nodeSelector</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">node-role.kubernetes.io/control-plane</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">tolerations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">node-role.kubernetes.io/control-plane</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">operator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Exists</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">effect</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">NoSchedule</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">fileTailers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kube-audit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/lib/rancher/rke2/server/logs/*.log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">workersnodesonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">enabled</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">workloadOverrides</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">nodeSelector</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">node-role.kubernetes.io/worker</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">fileTailers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kube-audit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/lib/rancher/rke2/agent/logs/*.log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>This also means that <code>logging.hostTailer</code> has been deprecated and is superseded by <code>logging.hostTailers</code> and will be removed in a future release.</p><h2 id="graceful-reload-in-fluentd">Graceful reload in Fluentd</h2><p>You can now enable graceful reloading via a webhook using the <a href="/5.2/docs/configuration/crds/v1beta1/fluentd_types/#fluentdspec-configreloaderusegracefulreloadwebhook"><code>configReloaderUseGracefulReloadWebhook</code> option</a>.</p><h3 id="memory-usage">Memory usage</h3><p>In order to reduce the memory usage of the operator in large environments, you can now use the following flags during installation:</p><ul>
<li><code>watch-labeled-children</code> to watch only child resources created by the operator. This option will be enabled by default in a future new minor version.</li><li><code>watch-labeled-secrets</code> to watch secrets with <code>logging.banzaicloud.io/watch: enabled</code> label. This option will be enabled by default in a future new major version.</li></ul><h3 id="changes-in-fluentd-images">Changes in Fluentd images</h3><p>Earlier, Logging operator used Fluentd images published at <a href="https://github.com/kube-logging/fluentd-images">https://github.com/kube-logging/fluentd-images</a>, and its version numbers followed the official Fluentd version numbers. From now on, we build Fluentd images from our repository (<a href="https://github.com/kube-logging/logging-operator/tree/master/images/fluentd">https://github.com/kube-logging/logging-operator/tree/master/images/fluentd</a>) and its version numbering follows the version numbers of Logging operator, for example: ghcr.io/kube-logging/logging-operator/fluentd:5.1.1-base/filters/full</p><h2 id="version-50">Version 5.0</h2><p>The following are the highlights and main changes of Logging operator 5.0. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/5.0">Logging operator 5.0 releases page</a>.</p><h3 id="breaking-changes">Breaking changes</h3><ul>
<li>The Sumo Logic filter, the Sumo Logic output, and the <code>enhance_k8s</code> filter are no longer supported, as they are not available in the new Fluentd image (v1.17-5.0). If you want to continue using them, keep using the 4.x version of Logging operator.</li><li>The name of the <code>crd</code> subchart changed to <code>logging-operator-crds</code>. This new subchart is also available as an OCI artifact.</li></ul><h3 id="clean-up-stuck-finalizers">Clean up stuck finalizers</h3><p>When uninstalling Logging operator using Helm, some finalizers may be stuck because Helm uninstalls the resources in a non-deterministic order. You can use the new <code>finalizer-cleanup</code> flag in conjunction with <code>.Values.rbac.retainOnDelete</code> to avoid this problem. When both options are set during uninstall, then:</p><ul>
<li>Helm will retain the operator&rsquo;s service account, cluster role, and cluster role binding. This is necessary because Helm uninstalls resources in an unpredictable order.</li><li>The operator will attempt to free up its managed logging resources by removing finalizers, which would otherwise remain stuck.</li></ul><p>For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>helm install logging-operator ./charts/logging-operator/ --set rbac.retainOnDelete<span style="color:#ce5c00;font-weight:700">=</span><span style="color:#204a87">true</span> --set <span style="color:#000">extraArgs</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#4e9a06">&#39;{&#34;-enable-leader-election=true&#34;,&#34;-finalizer-cleanup=true&#34;}&#39;</span>
</span></span></code></pre></div><h3 id="experimental-telemetry-controller-support">Experimental Telemetry Controller support</h3><p>You can now use the <a href="https://github.com/kube-logging/telemetry-controller">Telemetry Controller</a> as a log collector agent instead of Fluent Bit. To test this feature, you have to:</p><ol>
<li>
<p>Install Logging operator with the <code>enable-telemetry-controller-route</code> flag and the <code>telemetry-controller.install</code> options enabled:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>helm install logging-operator ./charts/logging-operator/ --set <span style="color:#000">extraArgs</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#4e9a06">&#39;{&#34;-enable-leader-election=true&#34;,&#34;-enable-telemetry-controller-route&#34;}&#39;</span> --set telemetry-controller.install<span style="color:#ce5c00;font-weight:700">=</span><span style="color:#204a87">true</span>
</span></span></code></pre></div></li><li>
<p>Configure the <code>routeConfig</code> option in the <code>Logging</code> resource to specify how the Telemetry Controller resources are created:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tc-config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">routeConfig</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">enableTelemetryControllerRoute</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Determines whether to create TC resources for log-collection and routing purposes.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disableLoggingRoute</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Determines whether to use Logging-routes for routing purposes and Fluentbit-agents for log-collection.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tenantLabels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Will be placed on TC&#39;s tenant resources, must be matched with the same field on the Collector resource. (Deployed by the cluster administrator.)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tenant</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li></ol><p><strong>NOTE: There is a hands-on example available to try: <a href="https://github.com/kube-logging/logging-operator/tree/master/config/samples/telemetry-controller-routing">https://github.com/kube-logging/logging-operator/tree/master/config/samples/telemetry-controller-routing</a></strong></p><h3 id="improved-ipv6-support">Improved IPv6 support</h3><ul>
<li>Fluent Bit couldn&rsquo;t listen on an IPv6 http socket because its HTTP_Listen address was hardcoded. Now this is set using the <code>POD_IP</code>, so it works in IPv6 environments as well.</li><li>Until now, IPv6-only clusters couldn&rsquo;t scrape metrics from the Fluentd aggregator. This has been fixed.</li></ul><h3 id="rdkafka-option-support">rdkafka option support</h3><p>You can now set <code>rdkafka_options</code> in for rdkafka2 in the <a href="/5.2/docs/configuration/plugins/outputs/kafka/#kafka-rdkafka_options">Kafka Fluentd output</a>.</p><h3 id="other-fluent-bit-changes">Other Fluent Bit changes</h3><ul>
<li>You can now specify whether to pause or drop data when the buffer is full. This helps to make sure we apply backpressure on the input. For details, see <a href="/5.2/docs/configuration/crds/v1beta1/fluentbit_types/#inputtail-storage.pause_on_chunks_overlimit">storage.pause_on_chunks_overlimit (string, optional)</a>.</li><li>HotReload pauses all inputs and waits until they finish. However, this can block the reload indefinitely, for example, if an output is down for a longer time. You can now force the reload to happen after a grace period using the <a href="/5.2/docs/configuration/crds/v1beta1/fluentbit_types/#fluentbitspec-forcehotreloadaftergrace"><code>forceHotReloadAfterGrace</code></a> option.</li></ul><h2 id="version-411">Version 4.11</h2><p>The following are the highlights and main changes of Logging operator 4.11. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.11.0">Logging operator 4.11 releases page</a>.</p><ul>
<li>
<p>You can now set the <code>protected</code> flag for SyslogNGClusterOutput kinds.</p></li><li>
<p>Charts and images are now signed. To verify the signature, see <a href="/5.2/docs/install/#verify">Image and chart verification</a>.</p></li><li>
<p>You can now add annotations and labels to Persistent Volume Claims of the Fluentd StatefulSet. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">all-to-file</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">controlNamespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">fluentd</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">bufferStorageVolume</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">pvc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">source</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">claimName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">manual</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">readOnly</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p>You can now set liveness probes to the buffer-metrics sidecar container using the <code>bufferVolumeLivenessProbe</code> option.</p></li><li>
<p>IPv6 improvements:</p><ul>
<li>You can now scrape the metrics of Fluentd on clusters that only have IPv6 addresses.</li><li>Fluent Bit can now listen on IPv6 addresses.</li></ul></li><li>
<p>The <a href="/5.2/docs/configuration/plugins/outputs/opensearch/">OpenSearch Fluentd output</a> now supports the <code>remove_keys</code> option.</p></li><li>
<p>You can now set the <code>strategy</code> and <code>topologySpreadConstraints</code> in the Logging operator chart.</p></li></ul><h2 id="version-410">Version 4.10</h2><p>The following are the highlights and main changes of Logging operator 4.10. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.10.0">Logging operator 4.10 releases page</a>.</p><ul>
<li>
<p>You can now control the memory usage of Fluent Bit in persistent buffering mode using the <a href="/5.2/docs/configuration/crds/v1beta1/fluentbit_types/#bufferstorage-storage.max_chunks_up"><code>storage.max_chunks_up</code></a> option.</p></li><li>
<p>When using <a href="/5.2/docs/configuration/crds/extensions/hosttailer_types/#systemdtailer-systemdfilter"><code>systemdFilters</code></a> in <code>HostTailers</code>, you can now specify the journal field to use.</p></li><li>
<p>The documentation of the <a href="/5.2/docs/configuration/plugins/outputs/gelf/">Gelf Fluentd output</a> has been improved, and now includes the <code>max_bytes</code> option that can limit the size of the messages.</p></li><li>
<p>You can now configure image repository overrides in the syslog-ng spec (both in the <code>Logging</code> resource and in the <code>SyslogNGConfig</code> resource):</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">syslogNGImage</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">configReloadImage</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metricsExporterImage</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">bufferVolumeMetricsImage</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p>When using the <a href="/5.2/docs/configuration/plugins/outputs/kafka/#kafka-max_send_limit_bytes">Kafka Fluentd output</a>, you can now set the maximal size of the messages using the <code>max_send_limit_bytes</code> option.</p></li></ul><h2 id="version-49">Version 4.9</h2><p>The following are the highlights and main changes of Logging operator 4.9. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.9.0">Logging operator 4.9 releases page</a>.</p><h3 id="opentelemetry-output">OpenTelemetry output</h3><p>When using the <a href="/5.2/docs/configuration/output/#syslogngoutput">syslog-ng aggretor</a>, you can now send data directly to an OpenTelemetry endpoint. All metadata and the original log record are available in the body of the log record. Resource attributes will be available in a future release, when we switch to an OpenTelemetry input and receive standard OTLP logs. For details, see <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/opentelemetry/">OpenTelemetry output</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">2024-07-05T09:00:23.407Z</span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#000">info	LogsExporter	{&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;logs&#34;, &#34;name&#34;: &#34;debug&#34;, &#34;resource logs&#34;: 1, &#34;log records&#34;: 1}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">2024-07-05T09:00:23.407Z</span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#000">info	ResourceLog</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Resource SchemaURL</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">ScopeLogs</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">ScopeLogs SchemaURL</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">InstrumentationScope</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">LogRecord</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">ObservedTimestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2024-07-05 09:00:23.405798 +0000</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UTC</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Timestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2024-07-05 09:00:23.406049 +0000</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UTC</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">SeverityText</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">SeverityNumber</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Info2(10)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Body</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Str({&#34;ts&#34;:&#34;2024-07-05T09:00:22.424670Z&#34;,&#34;log&#34;:&#34;107.147.239.123 - - [05/Jul/2024:09:00:22 +0000] \&#34;POST /index.html HTTP/1.1\&#34; 200 14184 \&#34;-\&#34; \&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3191.0 Safari/537.36\&#34; \&#34;-\&#34;\n&#34;,&#34;stream&#34;:&#34;stdout&#34;,&#34;time&#34;:&#34;2024-07-05T09:00:22.424670292Z&#34;,&#34;kubernetes&#34;:{&#34;pod_name&#34;:&#34;log-generator-55867b6d4c-66fdv&#34;,&#34;namespace_name&#34;:&#34;log-generator&#34;,&#34;pod_id&#34;:&#34;682c9ed9-9421-406f-9c7b-cf2b2e62f406&#34;,&#34;labels&#34;:{&#34;app.kubernetes.io/instance&#34;:&#34;log-generator&#34;,&#34;app.kubernetes.io/name&#34;:&#34;log-generator&#34;,&#34;pod-template-hash&#34;:&#34;55867b6d4c&#34;},&#34;host&#34;:&#34;logging&#34;,&#34;container_name&#34;:&#34;log-generator&#34;,&#34;docker_id&#34;:&#34;dba14a358990c4b6ab82acdf75069952f3b180b3f16dd9527adc7eb11f6d2167&#34;,&#34;container_hash&#34;:&#34;ghcr.io/kube-logging/log-generator@sha256:e26102ef2d28201240fa6825e39efdf90dec0da9fa6b5aea6cf9113c0d3e93aa&#34;,&#34;container_image&#34;:&#34;ghcr.io/kube-logging/log-generator:0.7.0&#34;}})</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Trace ID</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Span ID</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">Flags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>{<span style="color:#204a87;font-weight:700">&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;logs&#34;, &#34;name&#34;: </span><span style="color:#4e9a06">&#34;debug&#34;</span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="elasticsearch-data-streams">Elasticsearch data streams</h3><p>You can now send messages and metrics to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/data-streams.html">Elasticsearch data streams</a> to store your log and metrics data as time series data. You have to use the <a href="/5.2/docs/configuration/output/#syslogngoutput">syslog-ng aggretor</a> to use this output. For details, see <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/elasticsearch_datastream/">Elasticsearch datastream</a>.</p><h3 id="improved-kafka-performance">Improved Kafka performance</h3><p>The <a href="/5.2/docs/configuration/plugins/outputs/kafka/">Kafka</a> Fluentd output now supports using the rdkafka2 client, which offers higher performance than ruby-kafka. Set <code>use_rdkafka</code> to <code>true</code> to use the rdkafka2 client. (If you&rsquo;re using a custom Fluentd image, note that rdkafka2 requires v1.16-4.9-full or higher.)</p><h3 id="containerd-compatibility">Containerd compatibility</h3><p>As many users prefer Containerd instead of Docker as their container runtime, the slight differences between these CRIs are causing some problems. Now you can enable a compatibility layer with the <code>enableDockerParserCompatibilityForCRI</code> option of the <code>logging</code> CRD, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">containerd</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">enableDockerParserCompatibilityForCRI</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>This option enables a log parser that is compatible with the docker parser. This has the following benefits:</p><ul>
<li>automatically parses JSON logs using the Merge_Log feature</li><li>downstream parsers can use the <code>log</code> field instead of the <code>message</code> field, just like with the docker runtime</li><li>the <code>concat</code> and <code>parser</code> filters are automatically set back to use the <code>log</code> field.</li></ul><p>Here is a sample log message with the option enabled:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="display:flex"><span><span style="color:#000;font-weight:700">{</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&#34;log&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;2024-08-12T14:19:29.672991171Z stderr F [2024/08/12 14:19:29] [ info] [input:tail:tail.0] inotify_fs_add(): inode=2939617 watch_fd=17 name=/var/log/containers/containerd-fluentd-0_default_fluentd-e46f1fcb1b63e7458fc43c079b7455f8e1305e551939ca128361a9574a194ed7.log&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&#34;kubernetes&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#000;font-weight:700">{</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;pod_name&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;containerd-fluentbit-mchwz&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;namespace_name&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;default&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;pod_id&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;22f86078-26f1-4202-bbc7-1dd5ddce20ec&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;labels&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#000;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;app.kubernetes.io/instance&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;containerd&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;app.kubernetes.io/managed-by&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;containerd&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;app.kubernetes.io/name&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;fluentbit&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;controller-revision-hash&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;6bb6f7f5f4&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;pod-template-generation&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;2&#34;</span>
</span></span><span style="display:flex"><span>    <span style="color:#000;font-weight:700">},</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;annotations&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#000;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;checksum/cri-log-parser.conf&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;d902a0ee964e9398e637b581be851cdf50ab2846e82003d2f5e2feef82bef95d&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&#34;checksum/fluent-bit.conf&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;dc9727d915c447b414dc05df2d9a6f23246cdca345309eb3107cc16ae8369b53&#34;</span>
</span></span><span style="display:flex"><span>    <span style="color:#000;font-weight:700">},</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;host&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;logging&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;container_name&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;fluent-bit&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;docker_id&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;5cf032406344fdf41d76ce4489ee6f3ca092e9207ec49ab6209cc2bcf950e593&#34;</span><span style="color:#000;font-weight:700">,</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&#34;container_image&#34;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#4e9a06">&#34;fluent/fluent-bit:3.0.4&#34;</span>
</span></span><span style="display:flex"><span>  <span style="color:#000;font-weight:700">}</span>
</span></span><span style="display:flex"><span><span style="color:#000;font-weight:700">}</span>
</span></span></code></pre></div><h3 id="set-the-severity-of-prometheusrules">Set the severity of PrometheusRules</h3><p>You can now configure <code>PrometheusRulesOverride</code> in your <a href="/5.2/docs/configuration/crds/v1beta1/common_types/#PrometheusRulesOverride"><code>logging</code> CRDs</a>. The content of <code>PrometheusRulesOverride</code> is identical to the v1.Rule Prometheus rule type. The controller will match overrides by their names with the original rules. All of the override attributes are optional and whenever an attribute is set, it will replace the original attribute.</p><p>For example, you can change the severity of a rule like this:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">fluentd</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">metrics</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">prometheusRules</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">prometheusRulesOverride</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">alert</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentdPredictedBufferGrowth</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">rulegroup</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">fluentd</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">service</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">fluentd</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">severity</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="other-changes">Other changes</h3><ul>
<li><a href="#fluent-bit-hot-reload">Fluent Bit hot reload</a> now reloads imagePullSecrets as well.</li><li>From now on, the entire <code>spec.Security.SecurityContext</code> is passed to Fluent Bit.</li><li>Kubernetes namespace labels are added to the metadata by default. (The default of the <code>namespace_labels</code> option in the FluentBitAgent CRD is <code>on</code>.)</li></ul><h2 id="version-48">Version 4.8</h2><p>The following are the highlights and main changes of Logging operator 4.8. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.8.0">Logging operator 4.8 releases page</a> and the <a href="https://axoflow.com/logging-operator-4.8-release">Logging operator 4.8 release blog post</a>.</p><h3 id="routing-based-on-namespace-labels">Routing based on namespace labels</h3><p>In your Fluentd ClusterFlows you can now route your messages based on namespace labels.</p><blockquote>
<p>Note: This feature requires a new Fluentd image: <code>ghcr.io/kube-logging/fluentd:v1.16-4.8-full</code>. If you&rsquo;re using a custom Fluentd image, make sure to update it!</p></blockquote><p>If you have <a href="https://kube-logging.dev/docs/whats-new/#kubernetes-namespace-labels-and-annotations">enabled namespace labeling in Fluent Bit</a>, you can use namespace labels in your selectors, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dev-logs</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">namespace_labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">tenant</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="breaking-change">Breaking change</h3><p>If you&rsquo;re using <code>hostTailer</code> or <code>eventTailer</code> and configured it through the helm chart&rsquo;s <code>logging.hostTailer</code> or <code>logging.eventTailer</code> option, note that now both components have an <code>enabled</code> flag. Set this flag to true if you used any of these components from the chart. For details, see the <a href="https://github.com/kube-logging/logging-operator/pull/1576">pull request</a>.</p><h3 id="go-templates-in-metrics-probe-label-values">Go templates in metrics-probe label values</h3><p>You can now use go templates that resolve to destination information (<code>name</code>, <code>namespace</code>, <code>scope:local/global</code> and the <code>logging</code> name) in metrics-probe label values. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">outputMetrics</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">custom_output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flow</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># define your own label for output name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">my-key-for-the-output</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;{{ .Destination.Name }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># do not add the output_name label to the metric</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">output_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">http</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="other-changes-1">Other changes</h3><ul>
<li>
<p>You can set the maximal number of TCP connections Fluent Bit can open towards the aggregator to avoid overloading it.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">controlNamespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">fluentbit</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># The below network configurations allow fluentbit to retry indefinitely on a limited number of connections to avoid overloading the aggregator (syslog-ng in this case)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">network</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">maxWorkerConnections</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslogng_output</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">Workers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">Retry_Limit</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;no_limits&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p>In the Logging operator helm chart you can include extra manifests to deploy together with the chart using the <code>extraManifests</code> field, similarly to other popular charts.</p></li></ul><h2 id="version-47">Version 4.7</h2><p>The following are the highlights and main changes of Logging operator 4.7. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.7.0">Logging operator 4.7 releases page</a> and the <a href="https://axoflow.com/logging-operator-4.7-release">Logging operator 4.7 release blog post</a>.</p><h3 id="breaking-change-for-fluentd">Breaking change for Fluentd</h3><p>When using the Fluentd aggregator, Logging operator has overridden the default <code>chunk_limit_size</code> for the Fluentd disk buffers. Since Fluentd updated the default value to a much saner default, Logging operator won&rsquo;t override that to avoid creating too many small buffer chunks. (Having too many small chunks can lead to <code>too many open files</code> errors.)</p><p>This isn&rsquo;t an intrusive breaking change, it only affects your deployments if you intentionally or accidentally depended on this value.</p><h3 id="json-output-format-for-fluentd">JSON output format for Fluentd</h3><p>In addition to the default text format, Fluentd can now format the output as JSON:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">fluentd</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">logFormat</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="disk-buffer-support-for-more-outputs">Disk buffer support for more outputs</h3><p>Enabling disk buffers wasn&rsquo;t available for some of the outputs, this has been fixed for: <a href="/5.2/docs/configuration/plugins/outputs/gelf/">Gelf</a>, <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/elasticsearch/">Elasticsearch</a>, <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/openobserve/">OpenObserve</a>, <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/s3/">S3</a>, <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/splunk_hec/">Splunk HEC</a>.</p><h3 id="compression-support-for-elasticsearch">Compression support for Elasticsearch</h3><p>The <a href="/5.2/docs/configuration/plugins/outputs/elasticsearch/#elasticsearch-compression_level">Elasticsearch output of the Fluentd aggregator</a> now supports compressing the output data using gzip. You can use the <code>compression_level</code> option to set <code>default_compression</code>, <code>best_compression</code>, or <code>best_speed</code>. By default, compression is disabled.</p><h3 id="protected-clusteroutputs-for-fluentd">Protected ClusterOutputs for Fluentd</h3><p>By default, ClusterOutputs can be referenced in any Flow. In certain scenarios, this means that users can send logs from Flows to the ClusterOutput, possibly spamming the output with user logs. From now on, you can set the <code>protected</code> flag for ClusterOutputs and prevent Flows from sending logs to the protected ClusterOutput.</p><h3 id="configcheck-settings-for-aggregators">ConfigCheck settings for aggregators</h3><p>You can now specify <code>configCheck</code> settings globally in the Loggings CRD, and override them if needed on the aggregator level in the <a href="/5.2/docs/configuration/crds/v1beta1/fluentd_types/">Fluentd</a> or <a href="/5.2/docs/configuration/crds/v1beta1/syslogng_types/">SyslogNG</a> CRD.</p><h3 id="limit-connections-for-fluent-bit">Limit connections for Fluent Bit</h3><p>You can now limit the number of TCP connections that each Fluent Bit worker can open toward the aggregator endpoints. The <code>max_worker_connections</code> is set to unlimited by default, and should be used together with the <code>Workers</code> option (which defaults to 2 according to the <a href="https://docs.fluentbit.io/manual/pipeline/outputs/tcp-and-tls#:~:text=double-,Workers,-Enables%20dedicated%20thread">Fluent Bit documentation</a>). The following example uses a single worker with a single connection:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentbitAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">network</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">maxWorkerConnections</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslogng_output</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">Workers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="version-46">Version 4.6</h2><p>The following are the highlights and main changes of Logging operator 4.6. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.6.0">Logging operator 4.6 releases page</a> and the <a href="https://axoflow.com/fluent-bit-hot-reload-kubernetes-namespace-labels-vmware-outputs-logging-operator-4-6">Logging operator 4.6 release blog post</a>.</p><h3 id="fluent-bit-hot-reload">Fluent Bit hot reload</h3><p>As a Fluent Bit restart can take a long time when there are many files to index, Logging operator now supports <a href="https://docs.fluentbit.io/manual/administration/hot-reload">hot reload for Fluent Bit</a> to reload its configuration on the fly.</p><p>You can enable hot reloads under the Logging&rsquo;s <code>spec.fluentbit.configHotReload</code> (legacy method) option, or the new FluentbitAgent&rsquo;s <code>spec.configHotReload</code> option:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentbitAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">reload-example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">configHotReload</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>You can configure the <code>resources</code> and <code>image</code> options:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentbitAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">reload-example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">configHotReload</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">resources</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">image</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ghcr.io/kube-logging/config-reloader</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">v0.0.5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Many thanks to @aslafy-z for contributing this feature!</p><h3 id="vmware-aria-operations-output-for-fluentd">VMware Aria Operations output for Fluentd</h3><p>When using the Fluentd aggregator with the Logging operator, you can now send your logs to <a href="https://www.vmware.com/products/aria-operations-for-logs.html">VMware Aria Operations for Logs</a>. This output uses the <a href="https://github.com/vmware/fluent-plugin-vmware-loginsight">vmwareLogInsight plugin</a>.</p><p>Here is a sample output snippet:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">vmwareLogInsight</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">MY_LOGINSIGHT_HOST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9543</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">agent_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">log_text_keys</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">msg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">http_conn_debug</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Many thanks to @logikone for contributing this feature!</p><h3 id="vmware-log-intelligence-output-for-fluentd">VMware Log Intelligence output for Fluentd</h3><p>When using the Fluentd aggregator with the Logging operator, you can now send your logs to <a href="https://aria.vmware.com/t/vmware-log-intelligence/">VMware Log Intelligence</a>. This output uses the <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence">vmware_log_intelligence plugin</a>.</p><p>Here is a sample output snippet:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">vmwarelogintelligence</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint_url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://data.upgrade.symphony-dev.com/le-mans/v1/streams/ingestion-pipeline-stream</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">verify_ssl</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">http_compress</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">content_type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">authorization</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">vmware-log-intelligence-token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">authorization</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">structure</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">simple</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">chunk_limit_records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">300</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">retry_max_times</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Many thanks to @zrobisho for contributing this feature!</p><h3 id="kubernetes-namespace-labels-and-annotations">Kubernetes namespace labels and annotations</h3><p>Logging operator 4.6 supports the new Fluent Bit Kubernetes filter options that will be released in Fluent Bit 3.0. That way you&rsquo;ll be able to enrich your logs with Kubernetes namespace labels and annotations right at the source of the log messages.</p><p>Fluent Bit 3.0 hasn&rsquo;t been released yet (at the time of this writing), but you can use a developer image to test the feature, using a <code>FluentbitAgent</code> resource like this:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentbitAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">namespace-label-test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filterKubernetes</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">namespace_annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;On&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">namespace_labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;On&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">image</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">repository</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ghcr.io/fluent/fluent-bit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">3.0.0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="other-changes-2">Other changes</h3><ul>
<li>Enabling ServiceMonitor checks if Prometheus is already available.</li><li>You can now use a custom PVC without a template for the statefulset.</li><li>You can now configure PodDisruptionBudget for Fluentd.</li><li>Event tailer metrics are now automatically exposed.</li><li>You can configure <a href="https://kube-logging.dev/docs/whats-new/#timeout-based-configuration-checks">timeout-based configuration checks</a> using the <code>logging.configCheck</code> object of the <code>logging-operator</code> chart.</li><li>You can now specify the event tailer image to use in the <code>logging-operator</code> chart.</li><li>Fluent Bit can now automatically delete irrecoverable chunks.</li><li>The Fluentd statefulset and its components created by the Logging operator now include the whole securityContext object.</li><li>The Elasticsearch output of the syslog-ng aggregator now supports the template option.</li><li>To avoid problems that might occur when a tenant has a faulty output and backpressure kicks in, Logging operator now creates a dedicated tail input for each tenant.</li></ul><h3 id="removed-feature">Removed feature</h3><p>We have removed support for <a href="https://kubernetes.io/docs/concepts/security/pod-security-policy/">Pod Security Policies (PSPs)</a>, which were deprecated in Kubernetes v1.21, and removed from Kubernetes in v1.25.</p><p>Note that the API was left intact, it just doesn&rsquo;t do anything.</p><h2 id="version-45">Version 4.5</h2><p>The following are the highlights and main changes of Logging operator 4.5. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.5.0">Logging operator 4.5 releases page</a>.</p><h3 id="standalone-fluentdconfig-and-syslogngconfig-crds">Standalone FluentdConfig and SyslogNGConfig CRDs</h3><p>Starting with Logging operator version 4.5, you can either configure Fluentd in the <code>Logging</code> CR, or you can use a standalone <code>FluentdConfig</code> CR. Similarly, you can use a standalone <code>SyslogNGConfig</code> CRD to configure syslog-ng.</p><p>These standalone CRDs are namespaced resources that allow you to configure the Fluentd/syslog-ng aggregator in the control namespace, separately from the Logging resource. That way you can use a multi-tenant model, where tenant owners are responsible for operating their own aggregator, while the Logging resource is in control of the central operations team.</p><p>For details, see <a href="/5.2/docs/logging-infrastructure/fluentd/">Configure Fluentd</a> and <a href="/5.2/docs/logging-infrastructure/syslog-ng/">Configure syslog-ng</a>.</p><h3 id="new-syslog-ng-features">New syslog-ng features</h3><p>When using syslog-ng as the log aggregator, you can now:</p><ul>
<li>Send data to <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/openobserve/">OpenObserve</a></li><li>Use a <a href="/5.2/docs/examples/date-parser/">custom date-parser</a></li><li>Create <a href="/5.2/docs/examples/custom-syslog-ng-metrics/">custom log metrics for sources and outputs</a></li><li>Set the permitted <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/tls/#tls-ssl_version">SSL versions in HTTP based outputs</a></li><li>Configure the <a href="/5.2/docs/configuration/crds/v1beta1/syslogng_types/#syslogngspec-maxconnections">maxConnections parameter of the sources</a></li></ul><h3 id="new-fluentd-features">New Fluentd features</h3><p>When using Fluentd as the log aggregator, you can now:</p><ul>
<li>Use the <a href="/5.2/docs/configuration/plugins/filters/useragent/">useragent Fluent filter</a></li><li>Configure <a href="/5.2/docs/configuration/crds/v1beta1/fluentd_types/#fluentdspec-sidecarcontainers">sidecar container in Fluentd pods</a></li><li>Configure the <a href="/5.2/docs/configuration/crds/v1beta1/fluentd_types/#fluentdspec-sidecarcontainers#fluentddrainconfig-securitycontext">security-context of every container</a></li><li>Set which <a href="/5.2/docs/configuration/plugins/outputs/azurestore/#output-config-azure_cloud">Azure Cloud to use</a> (for example, AzurePublicCloud), when using the Azure Storage output</li><li>Customize the <code>image</code> to use in <a href="/5.2/docs/configuration/crds/extensions/">event and host tailers</a></li></ul><h3 id="other-changes-3">Other changes</h3><ul>
<li>LoggingStatus now includes the number (problemsCount) and the related watchNamespaces to help troubleshooting</li></ul><h3 id="image-and-dependency-updates">Image and dependency updates</h3><p>For the list of images used in Logging operator, see <a href="/5.2/docs/image-versions/">Images used by Logging operator</a>.</p><h2 id="version-44">Version 4.4</h2><p>The following are the highlights and main changes of Logging operator 4.4. For a complete list of changes and bugfixes, see the <a href="https://github.com/kube-logging/logging-operator/releases/tag/4.4.0">Logging operator 4.4 releases page</a>.</p><h3 id="new-syslog-ng-features-1">New syslog-ng features</h3><p>When using syslog-ng as the log aggregator, you can now use the following new outputs:</p><ul>
<li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/elasticsearch/">ElasticSearch</a></li><li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/loki/">Grafana Loki</a></li><li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/mongodb/">MongoDB</a></li><li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/redis/">Redis</a></li><li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/s3/">Amazon S3</a></li><li><a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/splunk_hec/">Splunk HEC</a></li><li>The <a href="/5.2/docs/configuration/plugins/syslog-ng-outputs/http/">HTTP</a> output now supports the <code>log-fifo-size</code>, <code>response-action</code>, and <code>timeout</code> fields.</li></ul><p>You can now use the <code>metrics-probe()</code> parser of syslog-ng in syslogNGFLow and SyslogNGClusterFlow. For details, see <a href="/5.2/docs/configuration/plugins/syslog-ng-filters/parser/#metricsprobe">MetricsProbe</a>.</p><h3 id="multitenancy-with-namespace-based-routing">Multitenancy with namespace-based routing</h3><p>Logging operator now supports namespace based routing for efficient aggregator-level multi-tenancy.</p><p>In the project repository you can:</p><ul>
<li>find an <a href="https://github.com/kube-logging/logging-operator/blob/master/docs/multi-tenancy.md">overview about multitenancy</a>.</li><li>find more detailed information about the new <a href="https://github.com/kube-logging/logging-operator/blob/master/docs/logging-route.md">LoggingRoute</a> resource that enables this new behaviour.</li><li>find a <a href="https://github.com/kube-logging/logging-operator/tree/master/config/samples/multitenant-routing">simple example</a> to demonstrate the new behaviour</li></ul><p>On a side note, nodegroup level isolation for hard multitenancy is also supported, see the <a href="/5.2/docs/examples/multitenancy/">Nodegroup-based multitenancy</a> example.</p><h3 id="forwarder-logs">Forwarder logs</h3><p>Fluent-bit now doesn&rsquo;t process the logs of the Fluentd and syslog-ng forwarders by default to avoid infinitely growing message loops. With this change, you can access Fluentd and syslog-ng logs simply by running <code>kubectl logs &lt;name-of-forwarder-pod></code></p><p>In a future Logging operator version the logs of the aggregators will also be available for routing to external outputs.</p><h3 id="timeout-based-configuration-checks">Timeout-based configuration checks</h3><p>Timeout-based configuration checks are different from the normal method: they start a Fluentd or syslog-ng instance
without the dry-run or syntax-check flags, so output plugins or destination drivers actually try to establish
connections and will fail if there are any issues , for example, with the credentials.</p><p>Add the following to you <code>Logging</code> resource spec:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">configCheck</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">strategy</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">StartWithTimeout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timeoutSeconds</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="istio-support">Istio support</h3><p>For jobs/individual pods that run to completion, Istio sidecar injection needs to be disabled, otherwise the affected pods would live forever with the running sidecar container. Configuration checkers and Fluentd drainer pods can be configured with the label <code>sidecar.istio.io/inject</code> set to <code>false</code>. You can configure Fluentd drainer labels in the Logging spec.</p><h3 id="improved-buffer-metrics">Improved buffer metrics</h3><p>The buffer metrics are now available for both the Fluentd and the SyslogNG based aggregators.</p><p>The sidecar configuration has been rewritten to add a new metric and improve performance by avoiding unnecessary cardinality.</p><p>The name of the metric has been changed as well, but the original metric was kept in place to avoid breaking existing clients.</p><p><strong>Metrics currently supported by the sidecar</strong></p><p>Old</p><pre tabindex="0"><code>+# HELP node_buffer_size_bytes Disk space used [deprecated]
+# TYPE node_buffer_size_bytes gauge
+node_buffer_size_bytes{entity=&#34;/buffers&#34;} 32253
</code></pre><p>New</p><pre tabindex="0"><code>+# HELP logging_buffer_files File count
+# TYPE logging_buffer_files gauge
+logging_buffer_files{entity=&#34;/buffers&#34;,host=&#34;all-to-file-fluentd-0&#34;} 2
+# HELP logging_buffer_size_bytes Disk space used
+# TYPE logging_buffer_size_bytes gauge
+logging_buffer_size_bytes{entity=&#34;/buffers&#34;,host=&#34;all-to-file-fluentd-0&#34;} 32253
</code></pre><h3 id="other-improvements">Other improvements</h3><ul>
<li>You can now configure the resources of the buffer metrics sidecar.</li><li>You can now rerun failed configuration checks if there is no configcheck pod.</li><li>The <a href="/5.2/docs/configuration/plugins/outputs/elasticsearch/">Fluentd ElasticSearch output</a> now supports the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.13/index-templates.html">composable index template</a> format. To use it, set the <code>use_legacy_template</code> option to <code>false</code>.</li><li>The metrics for the syslog-ng forwarder are now exported using <a href="https://github.com/axoflow/axosyslog-metrics-exporter">axosyslog-metrics-exporter</a>.</li></ul><h3 id="image-and-dependency-updates-1">Image and dependency updates</h3><p>For the list of images used in Logging operator, see <a href="/5.2/docs/image-versions/">Images used by Logging operator</a>.</p><p>Fluentd images with versions <code>v1.14</code> and <code>v1.15</code> are now EOL due to the fact they are based on ruby 2.7 which is EOL as well.</p><p>The currently supported image is <a href="https://github.com/kube-logging/fluentd-images/tree/main/v1.15-ruby3">v1.15-ruby3</a> and build configuration for <a href="https://github.com/kube-logging/fluentd-images/tree/main/v1.15-staging">v1.15-staging</a> is available for staging experimental changes.</p></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class="row">
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
<a class="text-white" target="_blank" rel="noopener" href="https://github.com/kube-logging/logging-operator" aria-label="GitHub">
<i class="fab fa-github"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
<a class="text-white" target="_blank" rel="noopener" href="/docs/community/" aria-label="Slack">
<i class="fab fa-slack"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discord" aria-label="Discord">
<a class="text-white" target="_blank" rel="noopener" href="https://discord.gg/9ACY4RDsYN" aria-label="Discord">
<i class="fab fa-discord"></i>
</a>
</li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class="text-white"><a class="text-white" href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> | </small>
<small class="text-white">&copy; 2023-2025 kube-logging authors | All Rights Reserved</small>
</div></div></div></footer></div><script src="/5.2/js/main.min.fbba072c428886a4a2c3e718328b3795b5ad816d66f4941c6b4508dbcc4ec863.js" integrity="sha256-+7oHLEKIhqSiw+cYMos3lbWtgW1m9JQca0UI28xOyGM=" crossorigin="anonymous"></script>
<script src='/5.2/js/prism.js'></script>
<script src='/5.2/js/tabpane-persist.js'></script>
<script src="/js/tocbot.min.js"></script>
<script type="text/javascript">tocbot.init({tocSelector:".td-toc",contentSelector:".td-content",headingSelector:"h2, h3, h4",ignoreHiddenElements:!0})</script>
<script>(function(){var e=document.querySelector("#td-section-nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</body></html>