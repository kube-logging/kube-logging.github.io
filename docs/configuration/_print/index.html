<!doctype html><html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="https://kube-logging.dev/docs/configuration/">
<link rel="alternate" type="text/releases" href="https://kube-logging.dev/docs/configuration/releases.releases">
<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/favicons/favicon.ico">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">
<title>Configure log routing | Logging operator</title><meta name="description" content="Documentation for the Logging operator">
<meta property="og:title" content="Configure log routing">
<meta property="og:description" content="Documentation for the Logging operator">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kube-logging.dev/docs/configuration/"><meta property="og:site_name" content="Logging operator">
<meta itemprop="name" content="Configure log routing">
<meta itemprop="description" content="Documentation for the Logging operator"><meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Configure log routing">
<meta name="twitter:description" content="Documentation for the Logging operator">
<meta name="twitter:site" content="@calisti12">
<link rel="preload" href="/scss/main.min.ea124d1a5ca55adb367f0f334ac1055fd60c2385e8ffc34d5f01caac50a69f6c.css" as="style">
<link href="/scss/main.min.ea124d1a5ca55adb367f0f334ac1055fd60c2385e8ffc34d5f01caac50a69f6c.css" rel="stylesheet" integrity>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
<script defer src="https://unpkg.com/lunr@2.3.9/lunr.min.js" integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css">
<script src="/js/w3.js" type="application/x-javascript"></script>
<link rel="canonical" href="https://kube-logging.dev/docs/configuration/">
</head><body class="td-section">
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 3237.738 490.023" id="svg142" sodipodi:docname="logo-new2.svg" inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs146"/><sodipodi:namedview id="namedview144" pagecolor="#505050" bordercolor="#ffffff" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="1" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom=".37340884" inkscape:cx="1620.208" inkscape:cy="243.70071" inkscape:window-width="705" inkscape:window-height="480" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg142"/><g id="Group_2068" data-name="Group 2068" transform="translate(-43577.297 -34456.625)"><g id="Group_2067" data-name="Group 2067" transform="translate(27723.789 24565.273)"><path id="Path_4217" data-name="Path 4217" d="M47842.219 34024.414l-276.027 475.07h71.242l240.227-414.1z" transform="translate(-31703.996 -24123.111)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4218" data-name="Path 4218" d="M47831.324 34080.781l166.754 287.355h-333.035z" transform="translate(-31640.254 -24086.76)" fill="#fff" stroke="#fff" stroke-width="10"/><path id="Path_4220" data-name="Path 4220" d="M47668.742 34274.2l-37.727 64.1h442.43l-37.156-64.1z" transform="translate(-31662.199 -23962.018)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4222" data-name="Path 4222" d="M11294.989 10157.944l311.97-.01-156.218-269.074-78.621 135.83z" transform="translate(4740.338 117.39)" fill="#fff"/><path id="Path_4224" data-name="Path 4224" d="M47787.594 34159.125l-54.391 93.035h108.039z" transform="translate(-31596.297 -24036.238)" fill="#13142c" stroke="#13132d" stroke-width="10"/></g><text id="Logging_Operator" data-name="Logging Operator" transform="translate(45475.035 34799.609)" fill="#fff" font-size="267" font-family="Montserrat-Bold, Montserrat" font-weight="700" letter-spacing=".046em"><tspan x="-1339.806" y="0" id="tspan138">Logging Operator</tspan></text></g></svg></span><span class="navbar-brand__name">Logging operator</span>
<span class="font-weight-bold navbar-logo navbar-version">4.2.0</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="https://github.com/kube-logging/logging-operator" target="_blank"><span>Project page</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/docs/"><span>Documentation</span></a>
</li><li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
<div w3-include-html="/docs/configuration//releases.releases" w3-include-html-default='<a class="dropdown-item" href="/docs/releases.releases">Latest</a>'></div><script type="application/x-javascript">w3.includeHTML()</script>
</div></li></ul></div><div class="navbar-nav d-none d-lg-block">
<div class="td-search td-search--offline">
<div class="td-search__icon"></div><input type="search" class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete="off" data-offline-search-index-json-src="/offline-search-index.6688d162782cdb767954e00149f24ac5.json" data-offline-search-base-href="/" data-offline-search-max-results="10">
</div></div></nav></header><div class="container-fluid td-outer">
<div class="td-main">
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href="/docs/configuration/">Return to the regular view of this page</a>.
</p></div><h1 class="title">Configure log routing</h1><ul>
<li>1: <a href="#pg-c5c6ecdc3cc510bf60493ff486193ff0">Which log forwarder to use</a></li><li>2: <a href="#pg-ba978670e30a52baf4356021adabc84e">Output and ClusterOutput</a></li><li>3: <a href="#pg-6d5ebd4108d840b1126282c775c2e0dd">Flow and ClusterFlow</a></li><li>4: <a href="#pg-b31cd9cdcf163cc38c88156ce33e62f1">Routing your logs with Fluentd match directives</a></li><li>5: <a href="#pg-1af6b8a7150b57e6f6af4991d03afabf">Routing your logs with syslog-ng</a></li><li>6: <a href="#pg-ac7f8f2de0bfec29f800c2742a2d0127">Kubernetes events, node logs, and logfiles</a></li><ul>
<li>6.1: <a href="#pg-04413fd144b07886f11cf231a5113cbc">Kubernetes Event Tailer</a></li><li>6.2: <a href="#pg-18c73f8f2b09bffa26f060f563c9b14a">Kubernetes host logs, journals, and logfiles</a></li><li>6.3: <a href="#pg-064cf3669ed75479a61d9edba52b81d4">Tail logfiles with a webhook</a></li></ul><li>7: <a href="#pg-e717e7a286f2e387a96139f1e780a80f">Custom Resource Definitions</a></li><ul>
<li>7.1: <a href="#pg-44379ccd6059a94ad3c04f41ddd93d31">Available CRDs</a></li><ul>
<li>7.1.1: <a href="#pg-4e72a83b9fd0f217cf5e4c1787a014b6">ClusterFlow</a></li><li>7.1.2: <a href="#pg-12aea1089d22dc7b1ec3e444ebae4bc3">ClusterOutput</a></li><li>7.1.3: <a href="#pg-aba3be1da4e9fa0884cceaab7336a25b">Common</a></li><li>7.1.4: <a href="#pg-9c0c5afa7fb47abe7a0d1dee1e0cbc7b">FlowSpec</a></li><li>7.1.5: <a href="#pg-b9b388c411066f5f6dd5a2eef91b8474">FluentbitSpec</a></li><li>7.1.6: <a href="#pg-19e14e51b926eaba460288b329a9c8ce">FluentdSpec</a></li><li>7.1.7: <a href="#pg-d295f1a0ca0a93108b789e0cfa709b32">LoggingSpec</a></li><li>7.1.8: <a href="#pg-2c2339470c0f0e05b2453d914e401e3a">NodeAgent</a></li><li>7.1.9: <a href="#pg-8718fca65b6b82a0865b8f450c52a288">OutputSpec</a></li><li>7.1.10: <a href="#pg-9d8ed361c6ac392becad14253fc27fd4">SyslogNGClusterFlow</a></li><li>7.1.11: <a href="#pg-8b95a382d4b401c66683fec0554bf659">SyslogNGClusterOutput</a></li><li>7.1.12: <a href="#pg-de7a2ad119020fdf1efa724f2230d938">SyslogNGFlowSpec</a></li><li>7.1.13: <a href="#pg-eea1110e47d17724202c6751b18af627">SyslogNGOutputSpec</a></li><li>7.1.14: <a href="#pg-b5fd5711d1786f5011e175001c26f721">SyslogNGSpec</a></li></ul><li>7.2: <a href="#pg-e07d1bc49d964a7c40eb66abea5f2677">Logging extensions CRDs</a></li><ul>
<li>7.2.1: <a href="#pg-1dd2e29e6fc6677a064f9d79bc2429ff">EventTailer</a></li><li>7.2.2: <a href="#pg-f24e78a067096c5c4a1cb33b2be8447b">HostTailer</a></li></ul></ul><li>8: <a href="#pg-9e73eeb4ad3474fcbb18858c80510ec4">Supported Plugins</a></li><ul>
<li>8.1: <a href="#pg-8a164ca77d26df7144202dbce9fc83ed">Security</a></li><li>8.2: <a href="#pg-417b2dcf5d345902aeedec3805d3b518">Transport</a></li><li>8.3: <a href="#pg-054b25caf1e92a922927809d3e403385">Fluentd filters</a></li><ul>
<li>8.3.1: <a href="#pg-349fa261ad6602912c90010a75fa2c8a">Concat</a></li><li>8.3.2: <a href="#pg-bb097fab5840c448f215a8825f17af78">Dedot</a></li><li>8.3.3: <a href="#pg-55a61951fa9d47c3fc701c2b0c2534d4">ElasticsearchGenId</a></li><li>8.3.4: <a href="#pg-d00173400a3863deca0bf67dceca225a">Enhance K8s Metadata</a></li><li>8.3.5: <a href="#pg-1e14b035cd2fa8152fe231991dc9b922">Exception Detector</a></li><li>8.3.6: <a href="#pg-91b6e53e4bb1647d0973b03564f40336">Geo IP</a></li><li>8.3.7: <a href="#pg-d911e67edeb675049a9637d612f14d1a">Grep</a></li><li>8.3.8: <a href="#pg-4ed899f75f815259c224810fdfb84730">Kubernetes Events Timestamp</a></li><li>8.3.9: <a href="#pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">Parser</a></li><li>8.3.10: <a href="#pg-b1ababb8fff927a359f5ee10ddd9740d">Prometheus</a></li><li>8.3.11: <a href="#pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">Record Modifier</a></li><li>8.3.12: <a href="#pg-2adc391c4bf236f17f4dff5d5236127b">Record Transformer</a></li><li>8.3.13: <a href="#pg-06af9b3099c8f9f37d675b5aee19c604">StdOut</a></li><li>8.3.14: <a href="#pg-e5531904143c5008a8a49d371504912d">SumoLogic</a></li><li>8.3.15: <a href="#pg-9f71d81ccc4b25c0f75938abbc9a158d">Tag Normaliser</a></li><li>8.3.16: <a href="#pg-c86a56fc7e085e5aea4460c0e18e5990">Throttle</a></li></ul><li>8.4: <a href="#pg-506383d863d6db46f320e08de47fb0c7">Outputs</a></li><ul>
<li>8.4.1: <a href="#pg-28f1e98e5b5c5f770fb8b2e592e1abf0">Alibaba Cloud</a></li><li>8.4.2: <a href="#pg-aeea1cd1922e8ddddba7f377f910cc60">Amazon CloudWatch</a></li><li>8.4.3: <a href="#pg-2b59c5fb4b2ccfdb47e90229617f245a">Amazon Elasticsearch</a></li><li>8.4.4: <a href="#pg-dec03311d9f65d4bec85b8a63c46e105">Amazon Kinesis</a></li><li>8.4.5: <a href="#pg-0309d186051d45cea94e4ea4a3d95907">Amazon Kinesis</a></li><li>8.4.6: <a href="#pg-f6b80b815b14c83b2fe835b820aa13d0">Amazon S3</a></li><li>8.4.7: <a href="#pg-3fa3b93039c08434aba115eb9ab22b12">Azure Storage</a></li><li>8.4.8: <a href="#pg-67bcee478125d9574288135a71954591">Buffer</a></li><li>8.4.9: <a href="#pg-cfa15a5d894da7ae0606dc5571b76531">Datadog</a></li><li>8.4.10: <a href="#pg-d4855c4f7dc79bc11e74c046473de585">Elasticsearch</a></li><li>8.4.11: <a href="#pg-11b10c2ba394f448a129e3e87a7da45d">File</a></li><li>8.4.12: <a href="#pg-ebcbedef5be28c9f30752486b0b2b01b">Format</a></li><li>8.4.13: <a href="#pg-88fc6991b80563054a472b95a994e01b">Format rfc5424</a></li><li>8.4.14: <a href="#pg-ed0a10704a55da5f7330009ec393e387">Forward</a></li><li>8.4.15: <a href="#pg-18e50786ba4697ffac3ab83b4c57e6e5">GELF</a></li><li>8.4.16: <a href="#pg-a6993ae75e6633de7954ded98992861c">Google Cloud Storage</a></li><li>8.4.17: <a href="#pg-a56bffbadd1b6a7c1ede4f727316205c">Grafana Loki</a></li><li>8.4.18: <a href="#pg-ae38f1f9de3603c1e55fe2fb4eeba9b0">Http</a></li><li>8.4.19: <a href="#pg-1b992ac5779a83a537b40f5defa1bfa5">Kafka</a></li><li>8.4.20: <a href="#pg-3736a73536ae2ea19873950bfc5c1521">LogDNA</a></li><li>8.4.21: <a href="#pg-f5b4f39075d38f596892cbc946ca5735">LogZ</a></li><li>8.4.22: <a href="#pg-683bbb879ced9c27f3943b7a4809b29e">Mattermost</a></li><li>8.4.23: <a href="#pg-434371d7a3888abd2a15c4cd22f941cc">NewRelic</a></li><li>8.4.24: <a href="#pg-bb72140946679f3fa6eaf82e404ea444">OpenSearch</a></li><li>8.4.25: <a href="#pg-ef25dbf7203fc85cd0c4a189a702360a">Redis</a></li><li>8.4.26: <a href="#pg-67b66da64354abd24b6cf4012f300c3a">Relabel</a></li><li>8.4.27: <a href="#pg-65dde214a849324898de8fc0878b8ff4">Splunk</a></li><li>8.4.28: <a href="#pg-f239285458b59ea6270063a2b99b095d">SQS</a></li><li>8.4.29: <a href="#pg-ae2cf65122129146578f128193f9e75d">SumoLogic</a></li><li>8.4.30: <a href="#pg-014aa24ff26bb6369dc8484f097d845d">Syslog</a></li><li>8.4.31: <a href="#pg-3effea023502f5f282b1bcfc984721f7">Secret definition</a></li></ul><li>8.5: <a href="#pg-f82c0e1c4bdef1d77adef0a24aa2326c">syslog-ng filters</a></li><ul>
<li>8.5.1: <a href="#pg-ed56f7c86144eb14193213bc7f89126f">Match</a></li><li>8.5.2: <a href="#pg-4afe8af7a86227831c993a592f328feb">Parser</a></li><li>8.5.3: <a href="#pg-71055e789d2740b4a21574d9424fd407">Rewrite</a></li></ul><li>8.6: <a href="#pg-810c80c2dbdca02f7ade52079fd88712">syslog-ng outputs</a></li><ul>
<li>8.6.1: <a href="#pg-0125a4a4d818b30d9054879982e084a1">Disk buffer</a></li><li>8.6.2: <a href="#pg-def8416dfd78030f291e4e2fee600a97">File</a></li><li>8.6.3: <a href="#pg-f64978e87cfa5c2c0a8c6ad06c690873">HTTP</a></li><li>8.6.4: <a href="#pg-db09f336e539e97c3a4b6ae4786aded5">Loggly output</a></li><li>8.6.5: <a href="#pg-18b36b379ed9690f5568e3f8d7088d0f">LogScale</a></li><li>8.6.6: <a href="#pg-31ea9edde3a649f6c3772919f9e7a156">MQTT</a></li><li>8.6.7: <a href="#pg-764b7c70899b4d51e51a8ba401f96cd2">Sumo Logic HTTP</a></li><li>8.6.8: <a href="#pg-1721ec291a25f8230ddeedf2a20018f9">Sumo Logic Syslog</a></li><li>8.6.9: <a href="#pg-17c2f3cac6d1fd9cb831fa66c2daf727">Syslog (RFC5424) output</a></li><li>8.6.10: <a href="#pg-56a41f3fbc6007034e66766bff690bfa">TLS config for syslog-ng outputs</a></li></ul></ul></ul><div class="content">
<p>You can configure the various features and parameters of the Logging operator using Custom Resource Definitions (CRDs).</p><p>The Logging operator manages the log collectors and log forwarders of your logging infrastructure, and the routing rules that specify where you want to send your different log messages.</p><p>The <strong>log collectors</strong> are endpoint agents that collect the logs of your Kubernetes nodes and send them to the log forwarders. Logging operator currently uses Fluent Bit as log collector agents.</p><p>The <strong>log forwarder</strong> instance receives, filters, and transforms the incoming logs, and transfers them to one or more destination outputs. The Logging operator supports Fluentd and syslog-ng as log forwarders. Which log forwarder is best for you depends on your logging requirements. For tips, see <a href="/docs/configuration/fluentd-vs-syslog-ng/">Which log forwarder to use</a>.</p><p>You can filter and process the incoming log messages using the <a href="/docs/configuration/flow/"><strong>flow</strong></a> custom resource of the log forwarder to route them to the appropriate <a href="/docs/configuration/output/"><strong>output</strong></a>. The outputs are the destinations where you want to send your log messages, for example, Elasticsearch, or an Amazon S3 bucket. You can also define cluster-wide outputs and flows, for example, to use a centralized output that namespaced users can reference but cannot modify. Note that flows and outputs are specific to the type of log forwarder you use (Fluentd or syslog-ng).</p><p>You can configure the Logging operator using the following Custom Resource Definitions.</p><ul>
<li><a href="/docs/logging-infrastructure/logging/">logging</a> - The <code>logging</code> resource defines the logging infrastructure (the log collectors and forwarders) for your cluster that collects and transports your log messages. It also contains configurations for Fluent Bit, Fluentd, and syslog-ng.</li><li>CRDs for Fluentd:
<ul>
<li><a href="/docs/configuration/output/">output</a> - Defines a Fluentd Output for a logging flow, where the log messages are sent using Fluentd. This is a namespaced resource. See also <code>clusteroutput</code>. To configure syslog-ng outputs, see <code>SyslogNGOutput</code>.</li><li><a href="/docs/configuration/flow/">flow</a> - Defines a Fluentd logging flow using <code>filters</code> and <code>outputs</code>. Basically, the flow routes the selected log messages to the specified outputs. This is a namespaced resource. See also <code>clusterflow</code>. To configure syslog-ng flows, see <code>SyslogNGFlow</code>.</li><li><a href="/docs/configuration/output/">clusteroutput</a> - Defines a Fluentd output that is available from all flows and clusterflows. The operator evaluates clusteroutputs in the <code>controlNamespace</code> only unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true.</li><li><a href="/docs/configuration/flow/">clusterflow</a> - Defines a Fluentd logging flow that collects logs from all namespaces by default. The operator evaluates clusterflows in the <code>controlNamespace</code> only unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true. To configure syslog-ng clusterflows, see <code>SyslogNGClusterFlow</code>.</li></ul></li><li>CRDs for syslog-ng (these resources like their Fluentd counterparts, but are tailored to features available via syslog-ng):
<ul>
<li><a href="/docs/configuration/output/#syslogngoutput">SyslogNGOutput</a> - Defines a syslog-ng Output for a logging flow, where the log messages are sent using Fluentd. This is a namespaced resource. See also <code>SyslogNGClusterOutput</code>. To configure Fluentd outputs, see <code>output</code>.</li><li><a href="/docs/configuration/flow/#syslogngflow">SyslogNGFlow</a> - Defines a syslog-ng logging flow using <code>filters</code> and <code>outputs</code>. Basically, the flow routes the selected log messages to the specified outputs. This is a namespaced resource. See also <code>SyslogNGClusterFlow</code>. To configure Fluentd flows, see <code>flow</code>.</li><li><a href="/docs/configuration/output/#syslogngoutput">SyslogNGClusterOutput</a> - Defines a syslog-ng output that is available from all flows and clusterflows. The operator evaluates clusteroutputs in the <code>controlNamespace</code> only unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true.</li><li><a href="/docs/configuration/flow/#syslogngflow">SyslogNGClusterFlow</a> - Defines a syslog-ng logging flow that collects logs from all namespaces by default. The operator evaluates clusterflows in the <code>controlNamespace</code> only unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true. To configure Fluentd clusterflows, see <code>clusterflow</code>.</li></ul></li></ul><p>The following sections show examples on configuring the various components to configure outputs and to filter and route your log messages to these outputs. For a list of available CRDs, see <a href="/docs/configuration/crds/">Custom Resource Definitions</a>.</p></div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-c5c6ecdc3cc510bf60493ff486193ff0">1 - Which log forwarder to use</h1><p>The Logging operator supports Fluentd and syslog-ng as log forwarders. The log forwarder instance receives, filters, and transforms the incoming the logs, and transfers them to one or more destination outputs. Which one to use depends on your logging requirements.</p><p>The following points help you decide which forwarder to use.</p><ul>
<li>The forwarders support different outputs. If the output you want to use is supported only by one forwarder, use that.</li><li>If the volume of incoming log messages is high, use syslog-ng, as its multithreaded processing provides higher performance.</li><li>If you have lots of logging flows or need complex routing or log message processing, use syslog-ng.</li></ul><blockquote>
<p>Note: Depending on which log forwarder you use, some of the CRDs you have to create and configure are different.</p></blockquote><p>syslog-ng is supported only in Logging operator 4.0 or newer.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ba978670e30a52baf4356021adabc84e">2 - Output and ClusterOutput</h1><p>Outputs are the destinations where your log forwarder sends the log messages, for example, to Sumo Logic, or to a file. Depending on which log forwarder you use, you have to configure different custom resources.</p><h2 id="fluentd-outputs">Fluentd outputs</h2><ul>
<li>The <code>Output</code> resource defines an output where your <strong>Fluentd</strong> Flows can send the log messages. The output is a <code>namespaced</code> resource which means only a <code>Flow</code> within the <em>same</em> namespace can access it. You can use <code>secrets</code> in these definitions, but they must also be in the same namespace.
Outputs are the final stage for a <code>logging flow</code>. You can define multiple <code>outputs</code> and attach them to multiple <code>flows</code>.</li><li><code>ClusterOutput</code> defines an Output <strong>without</strong> namespace restrictions. It is only evaluated in the <code>controlNamespace</code> by default unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true.</li></ul><blockquote>
<p>Note: <code>Flow</code> can be connected to <code>Output</code> and <code>ClusterOutput</code>, but <code>ClusterFlow</code> can be attached only to <code>ClusterOutput</code>.</p></blockquote><ul>
<li>For the details of the supported output plugins, see <a href="/docs/configuration/plugins/outputs/">Outputs</a>.</li><li>For the details of <code>Output</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/output_types/">OutputSpec</a>.</li><li>For the details of <code>ClusterOutput</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/clusteroutput_types/">ClusterOutput</a>.</li></ul><h3 id="fluentd-s3-output-example">Fluentd S3 output example</h3><p>The following snippet defines an Amazon S3 bucket as an output.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">s3</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsAccessKeyId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">aws_sec_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsSecretAccessKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">s3_bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example-logging-bucket</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">s3_region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">eu-west-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logs/${tag}/%Y/%m/%d/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="syslogngoutput">syslog-ng outputs</h2><ul>
<li>The <code>SyslogNGOutput</code> resource defines an output for <strong>syslog-ng</strong> where your SyslogNGFlows can send the log messages. The output is a <code>namespaced</code> resource which means only a <code>SyslogNGFlow</code> within the <em>same</em> namespace can access it. You can use <code>secrets</code> in these definitions, but they must also be in the same namespace.
Outputs are the final stage for a <code>logging flow</code>. You can define multiple <code>SyslogNGoutputs</code> and attach them to multiple <code>SyslogNGFlows</code>.</li><li><code>SyslogNGClusterOutput</code> defines a SyslogNGOutput <strong>without</strong> namespace restrictions. It is only evaluated in the <code>controlNamespace</code> by default unless <code>allowClusterResourcesFromAllNamespaces</code> is set to true.</li></ul><blockquote>
<p>Note: <code>SyslogNGFlow</code> can be connected to <code>SyslogNGOutput</code> and <code>SyslogNGClusterOutput</code>, but <code>SyslogNGClusterFlow</code> can be attached only to <code>SyslogNGClusterOutput</code>.</p></blockquote><h3 id="rfc5424-syslog-ng-output-example">RFC5424 syslog-ng output example</h3><p>The following example defines a simple <code>SyslogNGOutput</code> resource that sends the logs to the specified syslog server using the RFC5424 Syslog protocol in a TLS-encrypted connection.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10.20.9.89</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">601</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">template</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(format-json
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --subkeys json.
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.labels.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.labels=literal($(format-flat-json --subkeys json.kubernetes.labels.)))\n&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">ca_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">cert_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">transport</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><ul>
<li>For the details of the supported output plugins, see <a href="/docs/configuration/plugins/syslog-ng-outputs/">syslog-ng outputs</a>.</li><li>For the details of <code>SyslogNGOutput</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/syslogng_output_types/">SyslogNGOutputSpec</a>.</li><li>For the details of <code>SyslogNGClusterOutput</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/syslogng_clusteroutput_types/">SyslogNGClusterOutput</a>.</li></ul></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-6d5ebd4108d840b1126282c775c2e0dd">3 - Flow and ClusterFlow</h1><p>Flows route the selected log messages to the specified outputs. Depending on which log forwarder you use, you can use different filters and outputs, and have to configure different custom resources.</p><h2 id="fluentd-flows">Fluentd flows</h2><p><code>Flow</code> defines a logging flow for <strong>Fluentd</strong> with <strong>filters</strong> and <strong>outputs</strong>.</p><p>The Flow is a <code>namespaced</code> resource, so only logs from the same namespaces are collected. You can specify <code>match</code> statements to select or exclude logs according to Kubernetes <code>labels</code>, container and host names. (Match statements are evaluated in the order they are defined and processed only until the first matching <code>select</code> or <code>exclude</code> rule applies.) For detailed examples on using the match statement, see <a href="/docs/configuration/log-routing/">log routing</a>.</p><p>You can define one or more <code>filters</code> within a Flow. Filters can perform various actions on the logs, for example, add additional data, transform the logs, or parse values from the records.
The filters in the flow are applied in the order in the definition. You can find the <a href="/docs/configuration/plugins/filters/">list of supported filters here</a>.</p><p>At the end of the Flow, you can attach one or more <a href="/docs/configuration/output/">outputs</a>, which may also be <code>Output</code> or <code>ClusterOutput</code> resources.</p><blockquote>
<p><code>Flow</code> resources are <code>namespaced</code>, the <code>selector</code> only select <code>Pod</code> logs within namespace.
<code>ClusterFlow</code> defines a Flow <strong>without</strong> namespace restrictions. It is also only effective in the <code>controlNamespace</code>.
<code>ClusterFlow</code> selects logs from <strong>ALL</strong> namespace.</p></blockquote><p>The following example transforms the log messages from the <code>default</code> namespace and sends them to an S3 output.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${namespace_name}.${pod_name}.${container_name}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">s3-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><blockquote>
<p>Note: In a multi-cluster setup you cannot easily determine which cluster the logs come from. You can append your own labels to each log
using the <a href="/docs/configuration/plugins/filters/record_modifier/">record modifier filter</a>.</p></blockquote><ul>
<li>For the details of <code>Flow</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/flow_types/">FlowSpec</a>.</li><li>For the details of <code>ClusterFlow</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/clusterflow_types/">ClusterFlow</a>.</li><li>For details on selecting messages, see <a href="/docs/configuration/log-routing/">Routing your logs with Fluentd match directives</a></li><li>See the <a href="/docs/configuration/plugins/filters/">list of supported filters</a>.</li></ul><h2 id="syslogngflow">syslog-ng flows</h2><p><code>SyslogNGFlow</code> defines a logging flow for <strong>syslog-ng</strong> with <strong>filters</strong> and <strong>outputs</strong>.</p><p>syslog-ng is supported only in Logging operator 4.0 or newer.</p><p>The Flow is a <code>namespaced</code> resource, so only logs from the same namespaces are collected. You can specify <code>match</code> statements to select or exclude logs according to Kubernetes <code>labels</code>, container and host names. For detailed examples on using the match statement, see <a href="/docs/configuration/log-routing-syslog-ng/">log routing with syslog-ng</a>.</p><p>You can define one or more filters within a Flow. Filters can perform various actions on the logs, for example, add additional data, transform the logs, or parse values from the records.
The filters in the flow are applied in the order in the definition. You can find the <a href="/docs/configuration/plugins/syslog-ng-filters/">list of supported filters here</a>.</p><p>At the end of the Flow, you can attach one or more <a href="/docs/configuration/output/">outputs</a>, which may also be <code>Output</code> or <code>ClusterOutput</code> resources.</p><blockquote>
<p><code>SyslogNGFlow</code> resources are <code>namespaced</code>, the <code>selector</code> only select <code>Pod</code> logs within namespace.
<code>SyslogNGClusterFlow</code> defines a SyslogNGFlow <strong>without</strong> namespace restrictions. It is also only effective in the <code>controlNamespace</code>.
<code>SyslogNGClusterFlow</code> selects logs from <strong>ALL</strong> namespace.</p></blockquote><p>The following example selects only messages sent by the log-generator application and forwards them to a syslog output.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">TestFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><ul>
<li>For the details of the <code>SyslogNGFlow</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/syslogng_flow_types/">SyslogNGFlowSpec</a>.</li><li>For the details of the <code>SyslogNGClusterFlow</code> custom resource, see <a href="/docs/configuration/crds/v1beta1/syslogng_clusterflow_types/">SyslogNGClusterFlow</a>.</li><li>For details on selecting messages, see <a href="/docs/configuration/log-routing-syslog-ng/">Routing your logs with syslog-ng</a></li><li>See the <a href="/docs/configuration/plugins/syslog-ng-filters/">list of supported filters</a>.</li></ul></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b31cd9cdcf163cc38c88156ce33e62f1">4 - Routing your logs with Fluentd match directives</h1><blockquote>
<p>Note: This page describes routing logs with <strong>Fluentd</strong>. If you are using syslog-ng to route your log messages, see <a href="/docs/configuration/log-routing-syslog-ng/">Routing your logs with syslog-ng</a>.</p></blockquote><p>The first step to process your logs is to select which logs go where.
The Logging operator uses Kubernetes labels, namespaces and other metadata
to separate different log flows.</p><p>Available routing metadata keys:</p><table>
<thead>
<tr>
<th>Name</th><th>Type</th><th>Description</th><th>Empty</th></tr></thead><tbody>
<tr>
<td>namespaces</td><td>[]string</td><td>List of matching namespaces</td><td>All namespaces</td></tr><tr>
<td>labels</td><td>map[string]string</td><td>Key - Value pairs of labels</td><td>All labels</td></tr><tr>
<td>hosts</td><td>[]string</td><td>List of matching hosts</td><td>All hosts</td></tr><tr>
<td>container_names</td><td>[]string</td><td>List of matching containers (not Pods)</td><td>All containers</td></tr></tbody></table><h2 id="match-statement">Match statement</h2><p>To select or exclude logs you can use the <code>match</code> statement. Match is a collection
of <code>select</code> and <code>exclude</code> expressions. In both expression you can use the <code>labels</code>
attribute to filter for pod&rsquo;s labels. Moreover, in Cluster flow you can use <code>namespaces</code>
as a selecting or excluding criteria.</p><p>If you specify more than one label in a <code>select</code> or <code>exclude</code> expression, the labels have a logical AND connection between them. For example, an <code>exclude</code> expression with two labels excludes messages that have both labels. If you want an OR connection between labels, list them in separate expressions. For example, to exclude messages that have one of two specified labels, create a separate <code>exclude</code> expression for each label.</p><p>The <code>select</code> and <code>exclude</code> statements are evaluated <strong>in order</strong>!</p><p>Without at least one <code>select</code> criteria, no messages will be selected!</p><p>Flow:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">exclude-this</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">label</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">label/xxx</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>ClusterFlow:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">exclude-this</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">label</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespaces</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">developer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">label/xxx</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespaces</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">production</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">beta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="examples">Examples</h2><h3 id="example-0-select-all-logs">Example 0. Select all logs</h3><p>To select all logs, or if you only want to exclude some logs but retain others you need an empty select statement.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-1-select-logs-by-label">Example 1. Select logs by label</h3><p>Select logs with <code>app: nginx</code> labels from the namespace:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-2-exclude-logs-by-label">Example 2. Exclude logs by label</h3><p>Exclude logs with <code>app: nginx</code> labels from the namespace</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-3-exclude-and-select-logs-by-label">Example 3. Exclude and select logs by label</h3><p>Select logs with <code>app: nginx</code> labels from the <code>default</code> namespace but exclude logs with <code>env: dev</code> labels</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">env</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-4-exclude-cluster-logs-by-namespace">Example 4. Exclude cluster logs by namespace</h3><p>Select <code>app: nginx</code> from all namespaces except from <code>dev</code> and <code>sandbox</code></p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">clusterflow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">namespaces</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">sandbox</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-5-exclude-and-select-cluster-logs-by-namespace">Example 5. Exclude and select cluster logs by namespace</h3><p>Select <code>app: nginx</code> from all <code>prod</code> and <code>infra</code> namespaces but exclude cluster logs from <code>dev</code>, <code>sandbox</code> namespaces</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">clusterflow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">namespaces</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">sandbox</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">namespaces</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">prod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">infra</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-6-multiple-labels---and">Example 6. Multiple labels - AND</h3><p>Exclude logs that have both the <code>app: nginx</code> and <code>app.kubernetes.io/instance: nginx-demo</code> labels</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app.kubernetes.io/instance</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx-demo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="example-6-multiple-labels---or">Example 6. Multiple labels - OR</h3><p>Exclude logs that have either the <code>app: nginx</code> or the <code>app.kubernetes.io/instance: nginx-demo</code> labels</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">app.kubernetes.io/instance</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx-demo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1af6b8a7150b57e6f6af4991d03afabf">5 - Routing your logs with syslog-ng</h1><blockquote>
<p>Note: This page describes routing logs with <strong>syslog-ng</strong>. If you are using Fluentd to route your log messages, see <a href="/docs/configuration/log-routing/">Routing your logs with Fluentd match directives</a>.</p></blockquote><p>syslog-ng is supported only in Logging operator 4.0 or newer.</p><p>The first step to process your logs is to select which logs go where.</p><p>The <code>match</code> field of the <code>SyslogNGFlow</code> and <code>SyslogNGClusterFlow</code> resources define the routing rules of the logs.</p><blockquote>
<p>Note: Fluentd can use only metadata to route the logs. When using <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/65#TOPIC-1829159">syslog-ng filter expressions</a>, you can filter both on metadata and log content as well.</p><p>The syntax of syslog-ng match statement is slightly different from the Fluentd match statements.</p></blockquote><p>Available routing metadata keys:</p><table>
<thead>
<tr>
<th>Name</th><th>Type</th><th>Description</th><th>Empty</th></tr></thead><tbody>
<tr>
<td>namespaces</td><td>[]string</td><td>List of matching namespaces</td><td>All namespaces</td></tr><tr>
<td>labels</td><td>map[string]string</td><td>Key - Value pairs of labels</td><td>All labels</td></tr><tr>
<td>hosts</td><td>[]string</td><td>List of matching hosts</td><td>All hosts</td></tr><tr>
<td>container_names</td><td>[]string</td><td>List of matching containers (not Pods)</td><td>All containers</td></tr></tbody></table><h2 id="match-statement">Match statement</h2><p>Match expressions select messages by applying patterns on the content or metadata of the messages. You can use simple string matching, and also complex regular expressions. You can combine matches using the <code>and</code>, <code>or</code>, and <code>not</code> boolean operators to create complex expressions to select or exclude messages as needed for your use case.</p><p>Currently, only a pattern matching function is supported (called <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/68#TOPIC-1829171"><code>match</code></a> in syslog-ng parlance, but renamed to <code>regexp</code> in the CRD to avoid confusion).</p><p>The <code>match</code> field can have one of the following options:</p><ul>
<li>
<p><code>regexp</code>: A pattern that matches the value of a field or a templated value. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;parameters&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p><code>and</code>: Combines the nested match expressions with the logical AND operator.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;list of nested match expressions&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p><code>or</code>: Combines the nested match expressions with the logical OR operator.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;list of nested match expressions&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p><code>not</code>: Matches the logical NOT of the nested match expressions with the logical AND operator.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">not</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;list of nested match expressions&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li></ul><h2 id="regexp-patterns"><code>regexp</code> patterns</h2><p>The <code>regexp</code> field (called <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/68#TOPIC-1829171"><code>match</code></a> in syslog-ng parlance, but renamed to <code>regexp</code> in the CRD to avoid confusion) defines the pattern that selects the matching messages. You can do two different kinds of matching:</p><ul>
<li>Find a pattern in the value of a field of the messages, for example, to select the messages of a specific application. To do that, set the <code>pattern</code> and <code>value</code> fields (and optionally the <code>type</code> and <code>flags</code> fields).</li><li>Find a pattern in a template expression created from multiple fields of the message. To do that, set the <code>pattern</code> and <code>template</code> fields (and optionally the <code>type</code> and <code>flags</code> fields).</li></ul><div class="warning-block">
<p><strong>CAUTION:</strong></p>You need to use the <code>json.</code> prefix in field names.
</div><p>You can reference fields using the <em>dot notation</em>. For example, if the log contains <code>{"kubernetes": {"namespace_name": "default"}}</code>, then you can reference the <code>namespace_name</code> field using <code>json.kubernetes.namespace_name</code>.</p><p>The following example filters for specific Pod labels:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="regexp-parameters"><code>regexp</code> parameters</h2><p>The <code>regexp</code> field can have the following parameters:</p><h3 id="regexp-pattern" class="property-required"><code>pattern</code> (string)</h3><p>Defines the pattern to match against the messages. The <a href="#regexp-type"><code>type</code> field</a> determines how the pattern is interpreted (for example, string or regular expression).</p><h3 id="regexp-value" class="property-optional"><code>value</code> (string)</h3><p>References a field of the message. The <code>pattern</code> is applied to the value of this field. If the <code>value</code> field is set, you cannot use the <code>template</code> field.</p><div class="warning-block">
<p><strong>CAUTION:</strong></p>You need to use the <code>json.</code> prefix in field names.
</div><p>You can reference fields using the <em>dot notation</em>. For example, if the log contains <code>{"kubernetes": {"namespace_name": "default"}}</code>, then you can reference the <code>namespace_name</code> field using <code>json.kubernetes.namespace_name</code>.</p><p>For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="regexp-template" class="property-optional"><code>template</code> (string)</h3><p>Specifies a template expression that combines fields. The <code>pattern</code> is matched against the value of these combined fields. If the <code>template</code> field is set, you cannot use the <code>value</code> field. For details on template expressions, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/74#TOPIC-1829197">syslog-ng documentation</a>.</p><h3 id="regexp-type" class="property-optional"><code>type</code> (string)</h3><p>Specifies how the <code>pattern</code> is interpreted. For details, see <a href="#regexp-types">Types of <code>regexp</code></a>.</p><h3 id="regexp-flags" class="property-optional"><code>flags</code> (list)</h3><p>Specifies flags for the <code>type</code> field.</p><h2 id="regexp-types"><code>regexp</code> types</h2><p>By default, syslog-ng uses PCRE-style regular expressions. Since evaluating complex regular expressions can greatly increase CPU usage and are not always needed, you can following expression types:</p><ul>
<li><a href="#pcre">Perl Compatible Regular Expressions (PCRE)</a></li><li><a href="#string">Literal string searches</a></li><li><a href="#glob">Glob patterns</a> (without regular expression support)</li></ul><h3 id="pcre"><code>pcre</code></h3><p>Description: Use Perl Compatible Regular Expressions (PCRE). If the type() parameter is not specified, syslog-ng uses PCRE regular expressions by default.</p><h3 id="pcre-flags"><code>pcre</code> flags</h3><p>PCRE regular expressions have the following flag options:</p><ul>
<li>
<p><code>disable-jit</code>: Disable the <a href="https://www.pcre.org/current/doc/html/pcre2jit.html">just-in-time compilation function</a> for PCRE regular expressions.</p></li><li>
<p><code>dupnames</code>: Allow using <a href="https://www.pcre.org/original/doc/html/pcrepattern.html#SEC16">duplicate names for named subpatterns</a>.</p></li><li>
<p><code>global</code>: Usable only in rewrite rules: match for every occurrence of the expression, not only the first one.</p></li><li>
<p><code>ignore-case</code>: Disable case-sensitivity.</p></li><li>
<p><code>newline</code>: When configured, it changes the newline definition used in PCRE regular expressions to accept either of the following:</p><ul>
<li>a single carriage-return</li><li>linefeed</li><li>the sequence carriage-return and linefeed (\r, \n and \r\n, respectively)</li></ul><p>This newline definition is used when the circumflex and dollar patterns (^ and $) are matched against an input. By default, PCRE interprets the linefeed character as indicating the end of a line. It does not affect the \r, \n or \R characters used in patterns.</p></li><li>
<p><code>store-matches</code>: Store the matches of the regular expression into the $0, &mldr; $255 variables. The $0 stores the entire match, $1 is the first group of the match (parentheses), and so on. Named matches (also called named subpatterns), for example (<code>?&lt;name>...</code>), are stored as well. Matches from the last filter expression can be referenced in regular expressions.</p></li><li>
<p><code>unicode</code>: Use Unicode support for UTF-8 matches. UTF-8 character sequences are handled as single characters.</p></li><li>
<p><code>utf8</code>: An alias for the unicode flag.</p></li></ul><p>For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ignore-case</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="string"><code>string</code></h3><p>Description: Match the strings literally, without regular expression support. By default, only identical strings are matched. For partial matches, use the <code>flags: prefix</code> or <code>flags: substring</code> flags. For example, if the consider the following patterns.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prefix</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log-generator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">substring</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><ul>
<li>The first matches only the <code>log-generator</code> label.</li><li>The second matches labels beginning with <code>log-generator</code>, for example, <code>log-generator-1</code>.</li><li>The third one matches labels that contain the <code>log-generator</code> string, for example, <code>my-log-generator</code>.</li></ul><h3 id="string-flags"><code>string</code> flags</h3><p>Literal string searches have the following flags() options:</p><ul>
<li>
<p><code>global</code>: Usable only in rewrite rules, match for every occurrence of the expression, not only the first one.</p></li><li>
<p><code>ignore-case</code>: Disables case-sensitivity.</p></li><li>
<p><code>prefix</code>: During the matching process, patterns (also called search expressions) are matched against the input string starting from the beginning of the input string, and the input string is matched only for the maximum character length of the pattern. The initial characters of the pattern and the input string must be identical in the exact same order, and the pattern&rsquo;s length is definitive for the matching process (that is, if the pattern is longer than the input string, the match will fail).</p><p>For example, for the input string <code>exam</code>:</p><ul>
<li>the following patterns will match:
<ul>
<li><code>ex</code> (the pattern contains the initial characters of the input string in the exact same order)</li><li><code>exam</code> (the pattern is an exact match for the input string)</li></ul></li><li>the following patterns will not match:
<ul>
<li><code>example</code> (the pattern is longer than the input string)</li><li><code>hexameter</code> (the pattern&rsquo;s initial characters do not match the input string&rsquo;s characters in the exact same order, and the pattern is longer than the input string)</li></ul></li></ul></li><li>
<p><code>store-matches</code>: Stores the matches of the regular expression into the $0, &mldr; $255 variables. The $0 stores the entire match, $1 is the first group of the match (parentheses), and so on. Named matches (also called named subpatterns), for example, (<code>?&lt;name>...</code>), are stored as well. Matches from the last filter expression can be referenced in regular expressions.</p><blockquote>
<p>NOTE: To convert match variables into a syslog-ng list, use the $* macro, which can be further manipulated using <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/76#TOPIC-1829203">List manipulation</a>, or turned into a list in type-aware destinations.</p></blockquote></li><li>
<p><code>substring</code>: The given literal string will match when the pattern is found within the input. Unlike <code>flags: prefix</code>, the pattern does not have to be identical with the given literal string.</p></li></ul><h3 id="glob"><code>glob</code></h3><p>Description: Match the strings against a pattern containing &lsquo;*&rsquo; and &lsquo;?&rsquo; wildcards, without regular expression and character range support. The advantage of glob patterns to regular expressions is that globs can be processed much faster.</p><ul>
<li><code>*</code>: matches an arbitrary string, including an empty string</li><li><code>?</code>: matches an arbitrary character</li></ul><blockquote>
<p>NOTE:</p><ul>
<li>The wildcards can match the <code>/</code> character.</li><li>You cannot use the <code>*</code> and <code>?</code> characters literally in the pattern.</li></ul></blockquote><p>Glob patterns cannot have any flags.</p><h2 id="examples">Examples</h2><h3 id="select-all-logs">Select all logs</h3><p>To select all logs, or if you only want to exclude some logs but retain others you need an empty select statement.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="select-logs-by-label">Select logs by label</h3><p>Select logs with <code>app: nginx</code> labels from the namespace:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-app-nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="exclude-logs-by-label">Exclude logs by label</h3><p>Exclude logs with <code>app: nginx</code> labels from the namespace.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-not-nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">not</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="exclude-and-select-logs-by-label">Exclude and select logs by label</h3><p>Exclude logs with <code>env: dev</code> labels but select <code>app: nginx</code> labels from the namespace.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-not-nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">not</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">syslog-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><!--### Exclude cluster logs by namespace

Exclude cluster logs from the `dev`, `sandbox` namespaces and select `app: nginx` from all namespaces

```yaml
apiVersion: logging.banzaicloud.io/v1beta1
kind: SyslogNGClusterFlow
metadata:
  name: clusterflow-sample
spec:
  globalOutputRefs:
    - forward-output-sample
  match:
    - exclude:
        namespaces:
          - dev
          - sandbox
    - select:
        labels:
          app: nginx
```

### Exclude and select cluster logs by namespace

Exclude cluster logs from  `dev`, `sandbox` namespaces and select `app: nginx` from all `prod` and `infra` namespaces

  ```yaml
  apiVersion: logging.banzaicloud.io/v1beta1
  kind: ClusterFlow
  metadata:
    name: clusterflow-sample
  spec:
    globalOutputRefs:
      - forward-output-sample
    match:
      - exclude:
          namespaces:
            - dev
            - sandbox
      - select:
          labels:
            app: nginx
          namespaces:
            - prod
            - infra
  ```
--><h3 id="multiple-labels---and">Multiple labels - AND</h3><p>Exclude logs that have both the <code>app: nginx</code> and <code>app.kubernetes.io/instance: nginx-demo</code> labels.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">not</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx-demo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="multiple-labels---or">Multiple labels - OR</h3><p>Exclude logs that have either the <code>app: nginx</code> or the <code>app.kubernetes.io/instance: nginx-demo</code> labels</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">forward-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">not</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx-demo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">glob</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ac7f8f2de0bfec29f800c2742a2d0127">6 - Kubernetes events, node logs, and logfiles</h1><p>The Logging extensions part of the Logging operator solves the following problems:</p><ul>
<li>Collect Kubernetes events to provide insight into what is happening inside a cluster, such as decisions made by the scheduler, or why some pods were evicted from the node.</li><li>Collect logs from the nodes like <code>kubelet</code> logs.</li><li>Collect logs from files on the nodes, for example, <code>audit</code> logs, or the <code>systemd</code> journal.</li><li>Collect logs from legacy application log files.</li></ul><p>Starting with Logging operator version 3.17.0, logging-extensions are open source and part of Logging operator.</p><h2 id="features">Features</h2><p>Logging-operator handles the new features the well-known way: it uses custom resources to access the features. This way a simple <code>kubectl apply</code> with a particular parameter set initiates a new feature. Extensions supports three different custom resource types:</p><ul>
<li>
<p>Logging-operator handles the new features the well-known way: it uses custom resources to access the features. This way a simple <code>kubectl apply</code> with a particular parameter set initiates a new feature. Extensions supports three different custom resource types:</p></li><li>
<p><a href="/docs/configuration/extensions/kubernetes-event-tailer/">Event-tailer</a> listens for Kubernetes events and transmits their changes to stdout, so the Logging operator can process them.</p></li><li>
<p><a href="/docs/configuration/extensions/kubernetes-host-tailer/">Host-tailer</a> tails custom files and transmits their changes to stdout. This way the Logging operator can process them.
Kubernetes host tailer allows you to tail logs like <code>kubelet</code>, <code>audit</code> logs, or the <code>systemd</code> journal from the nodes.</p></li><li>
<p><a href="/docs/configuration/extensions/tailer-webhook/">Tailer-webhook</a> is a different approach for the same problem: parsing legacy application&rsquo;s log file. Instead of running a <code>host-tailer</code> instance on every node, <code>tailer-webhook</code> attaches a <code>sidecar container</code> to the pod, and reads the specified file(s).</p></li></ul><blockquote>
<p>Check our <a href="https://github.com/kube-logging/logging-operator/tree/master/config/samples/extensions">configuration snippets</a> for examples.</p></blockquote></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-04413fd144b07886f11cf231a5113cbc">6.1 - Kubernetes Event Tailer</h1><p>Kubernetes events are objects that provide insight into what is happening inside a cluster, such as what decisions were made by the scheduler or why some pods were evicted from the node. Event tailer listens for Kubernetes events and transmits their changes to stdout, so the Logging operator can process them.</p><p><img src="../logging-extensions-event-tailer.png" alt="Event tailer"></p><p>The operator handles this CR and generates the following required resources:</p><ul>
<li>ServiceAccount: new account for <code>event-tailer</code></li><li>ClusterRole: sets the <code>event-tailer's</code> roles</li><li>ClusterRoleBinding: links the account with the roles</li><li>ConfigMap: contains the configuration for the <code>event-tailer</code> pod</li><li>StatefulSet: manages the lifecycle of the <code>event-tailer</code> pod, which uses the <code>banzaicloud/eventrouter:v0.1.0</code> image to tail events</li></ul><h2 id="create-event-tailer">Create event tailer</h2><ol>
<li>
<p>The simplest way to init an <code>event-tailer</code> is to create a new <code>event-tailer</code> resource with a <code>name</code> and <code>controlNamespace</code> field specified. The following command creates an event tailer called <code>sample</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: EventTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  controlNamespace: default
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div></li><li>
<p>Check that the new object has been created by running:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl get eventtailer
</span></span></code></pre></div><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>NAME     AGE
</span></span><span style="display:flex"><span>sample   22m
</span></span></code></pre></div></li><li>
<p>You can see the events in JSON format by checking the log of the <code>event-tailer</code> pod. This way Logging operator can collect the events, and handle them as any other log. Run:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl logs -l app.kubernetes.io/instance<span style="color:#ce5c00;font-weight:700">=</span>sample-event-tailer <span style="color:#000;font-weight:700">|</span> head -1 <span style="color:#000;font-weight:700">|</span> jq
</span></span></code></pre></div><p>The output should be similar to:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>  <span style="color:#4e9a06">&#34;verb&#34;</span>: <span style="color:#4e9a06">&#34;UPDATED&#34;</span>,
</span></span><span style="display:flex"><span>  <span style="color:#4e9a06">&#34;event&#34;</span>: <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;metadata&#34;</span>: <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;kube-scheduler-kind-control-plane.17145dad77f0e528&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;namespace&#34;</span>: <span style="color:#4e9a06">&#34;kube-system&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;uid&#34;</span>: <span style="color:#4e9a06">&#34;c2416fa6-7b7f-4a7d-a5f1-b2f2241bd599&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;resourceVersion&#34;</span>: <span style="color:#4e9a06">&#34;424&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;creationTimestamp&#34;</span>: <span style="color:#4e9a06">&#34;2022-09-13T08:19:22Z&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;managedFields&#34;</span>: <span style="color:#ce5c00;font-weight:700">[</span>
</span></span><span style="display:flex"><span>        <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>          <span style="color:#4e9a06">&#34;manager&#34;</span>: <span style="color:#4e9a06">&#34;kube-controller-manager&#34;</span>,
</span></span><span style="display:flex"><span>          <span style="color:#4e9a06">&#34;operation&#34;</span>: <span style="color:#4e9a06">&#34;Update&#34;</span>,
</span></span><span style="display:flex"><span>          <span style="color:#4e9a06">&#34;apiVersion&#34;</span>: <span style="color:#4e9a06">&#34;v1&#34;</span>,
</span></span><span style="display:flex"><span>          <span style="color:#4e9a06">&#34;time&#34;</span>: <span style="color:#4e9a06">&#34;2022-09-13T08:19:22Z&#34;</span>
</span></span><span style="display:flex"><span>        <span style="color:#ce5c00;font-weight:700">}</span>
</span></span><span style="display:flex"><span>      <span style="color:#ce5c00;font-weight:700">]</span>
</span></span><span style="display:flex"><span>    <span style="color:#ce5c00;font-weight:700">}</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;involvedObject&#34;</span>: <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;kind&#34;</span>: <span style="color:#4e9a06">&#34;Pod&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;namespace&#34;</span>: <span style="color:#4e9a06">&#34;kube-system&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;kube-scheduler-kind-control-plane&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;uid&#34;</span>: <span style="color:#4e9a06">&#34;7bd2c626-84f2-49c3-8e8e-8a7c0514b686&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;apiVersion&#34;</span>: <span style="color:#4e9a06">&#34;v1&#34;</span>,
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;resourceVersion&#34;</span>: <span style="color:#4e9a06">&#34;322&#34;</span>
</span></span><span style="display:flex"><span>    <span style="color:#ce5c00;font-weight:700">}</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;reason&#34;</span>: <span style="color:#4e9a06">&#34;NodeNotReady&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;message&#34;</span>: <span style="color:#4e9a06">&#34;Node is not ready&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;source&#34;</span>: <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      <span style="color:#4e9a06">&#34;component&#34;</span>: <span style="color:#4e9a06">&#34;node-controller&#34;</span>
</span></span><span style="display:flex"><span>    <span style="color:#ce5c00;font-weight:700">}</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;firstTimestamp&#34;</span>: <span style="color:#4e9a06">&#34;2022-09-13T08:19:22Z&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;lastTimestamp&#34;</span>: <span style="color:#4e9a06">&#34;2022-09-13T08:19:22Z&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;count&#34;</span>: 1,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;type&#34;</span>: <span style="color:#4e9a06">&#34;Warning&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;eventTime&#34;</span>: null,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;reportingComponent&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span>,
</span></span><span style="display:flex"><span>    <span style="color:#4e9a06">&#34;reportingInstance&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span>
</span></span><span style="display:flex"><span>  <span style="color:#ce5c00;font-weight:700">}</span>,...
</span></span></code></pre></div></li><li>
<p>Once you have an <code>event-tailer</code>, you can bind your events to a specific logging flow. The following example configures a flow to route the previously created <code>sample-eventtailer</code> to the <code>sample-output</code>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging.banzaicloud.io/v1beta1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: Flow
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: eventtailer-flow
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  namespace: default
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  filters:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - tag_normaliser: {}
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  match:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # keeps data matching to label, the rest of the data will be discarded by this flow implicitly
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - select:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      labels:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        app.kubernetes.io/name: sample-event-tailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  outputRefs:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - sample-output
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div></li></ol><h2 id="delete-event-tailer">Delete event tailer</h2><p>To remove an unwanted tailer, delete the related <code>event-tailer</code> custom resource. This terminates the <code>event-tailer</code> pod. For example, run the following command to delete the event tailer called <code>sample</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl delete eventtailer sample <span style="color:#ce5c00;font-weight:700">&amp;&amp;</span> kubectl get pod
</span></span></code></pre></div><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>eventtailer.logging-extensions.banzaicloud.io <span style="color:#4e9a06">&#34;sample&#34;</span> deleted
</span></span><span style="display:flex"><span>NAME                    READY   STATUS        RESTARTS   AGE
</span></span><span style="display:flex"><span>sample-event-tailer-0   1/1     Terminating   <span style="color:#0000cf;font-weight:700">0</span>          12s
</span></span></code></pre></div><h2 id="persist-event-logs">Persist event logs</h2><p>Event-tailer supports persist mode. In this case, the logs generated from events are stored on a persistent volume. Add the following configuration to your event-tailer spec. In this example, the event tailer is called <code>sample</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: EventTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  controlNamespace: default
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  positionVolume:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    pvc:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        accessModes:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">          - ReadWriteOnce
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        resources:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">          requests:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">            storage: 1Gi
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        volumeMode: Filesystem
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>Logging operator manages the persistent volume of event-tailer automatically, you don&rsquo;t have any further task with it. To check that the persistent volume has been created, run:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl get pvc <span style="color:#ce5c00;font-weight:700">&amp;&amp;</span> kubectl get pv
</span></span></code></pre></div><p>The output should be similar to:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>NAME                                        STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
</span></span><span style="display:flex"><span>sample-event-tailer-sample-event-tailer-0   Bound    pvc-6af02cb2-3a62-4d24-8201-dc749034651e   1Gi        RWO            standard       43s
</span></span><span style="display:flex"><span>NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                               STORAGECLASS   REASON   AGE
</span></span><span style="display:flex"><span>pvc-6af02cb2-3a62-4d24-8201-dc749034651e   1Gi        RWO            Delete           Bound    default/sample-event-tailer-sample-event-tailer-0   standard                42s
</span></span></code></pre></div><h2 id="configuration-options">Configuration options</h2><p>For the detailed list of configuration options, see the <a href="/docs/configuration/crds/extensions/eventtailer_types/">EventTailer CRD reference</a>.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-18c73f8f2b09bffa26f060f563c9b14a">6.2 - Kubernetes host logs, journals, and logfiles</h1><p>Kubernetes host tailer allows you to tail logs like <code>kubelet</code>, <code>audit</code> logs, or the <code>systemd</code> journal from the nodes.</p><p><img src="../logging-extensions-host-tailer.png" alt="Host-tailer"></p><h2 id="create-host-tailer">Create host tailer</h2><p>To tail logs from the node&rsquo;s host filesystem, define one or more file tailers in the <code>host-tailer</code> configuration.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: HostTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: multi-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # list of File tailers
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  fileTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-access
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/access.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-error
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/error.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # list of Systemd tailers
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  systemdTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: my-systemd-tailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      maxEntries: 100
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      systemdFilter: kubelet.service
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h2 id="create-file-tailer">Create file tailer</h2><p>When an application (mostly legacy programs) is not logging in a Kubernetes-native way, Logging operator cannot process its logs. (For example, an old application does not send its logs to <code>stdout</code>, but uses some log files instead.) <code>File-tailer</code> helps to solve this problem: It configures Fluent Bit to tail the given file(s), and sends the logs to the <code>stdout</code>, to implement Kubernetes-native logging.</p><p><img src="../logging-extensions-host-tailer2.png" alt="Host-tailer"></p><p>However, <code>file-tailer</code> cannot access the pod&rsquo;s local dir, so the logfiles need to be written on a mounted volume.</p><p>Let&rsquo;s assume the following code represents a legacy application that generates logs into the <code>/legacy-logs/date.log</code> file. While the legacy-logs directory is mounted, it&rsquo;s accessible from other pods by mounting the same volume.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: v1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: Pod
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: test-pod
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  containers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - image: busybox
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    name: test
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    volumeMounts:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - mountPath: /legacy-logs
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      name: test-volume
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    command: [&#34;/bin/sh&#34;, &#34;-c&#34;]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    args:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      - while true; do
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">          date &gt;&gt; /legacy-logs/date.log;
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">          sleep 1;
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        done
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  volumes:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - name: test-volume
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    hostPath:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /legacy-logs
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>To tail the logs of the previous example application, you can use the following <code>host-tailer</code> custom resource:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: HostTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: file-hosttailer-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  fileTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: sample-logfile
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /legacy-logs/date.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      disabled: false
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>Logging operator configure the environment and start a <code>file-tailer</code> pod. It&rsquo;s also able to deal with multi-node clusters, since is starts the <code>host-tailer</code> pod through a <code>daemonset</code>.</p><p>Check the created file tailer pod:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl get pod
</span></span></code></pre></div><p>The output should be similar to:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>NAME                                       READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex"><span>file-hosttailer-sample-host-tailer-5tqhv   1/1     Running   <span style="color:#0000cf;font-weight:700">0</span>          117s
</span></span><span style="display:flex"><span>test-pod                                   1/1     Running   <span style="color:#0000cf;font-weight:700">0</span>          5m40s
</span></span></code></pre></div><p>Checking the logs of the <code>file-tailer's</code> pod. You will see the logfile&rsquo;s content on <code>stdout</code>. This way Logging operator can process those logs as well.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl logs file-hosttailer-sample-host-tailer-5tqhv
</span></span></code></pre></div><p>The logs of the sample application should be similar to:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>Fluent Bit v1.9.5
</span></span><span style="display:flex"><span>* Copyright <span style="color:#ce5c00;font-weight:700">(</span>C<span style="color:#ce5c00;font-weight:700">)</span> 2015-2022 The Fluent Bit Authors
</span></span><span style="display:flex"><span>* Fluent Bit is a CNCF sub-project under the umbrella of Fluentd
</span></span><span style="display:flex"><span>* https://fluentbit.io
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>fluent bit<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>1.9.5, <span style="color:#000">commit</span><span style="color:#ce5c00;font-weight:700">=</span>9ec43447b6, <span style="color:#000">pid</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">1</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>storage<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>1.2.0, <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:700">=</span>memory-only, <span style="color:#000">sync</span><span style="color:#ce5c00;font-weight:700">=</span>normal, <span style="color:#000">checksum</span><span style="color:#ce5c00;font-weight:700">=</span>disabled, <span style="color:#000">max_chunks_up</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">128</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>cmetrics<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>0.3.4
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>sp<span style="color:#ce5c00;font-weight:700">]</span> stream processor started
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>output:file:file.0<span style="color:#ce5c00;font-weight:700">]</span> worker <span style="color:#8f5902;font-style:italic">#0 started</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/13 12:26:02<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>input:tail:tail.0<span style="color:#ce5c00;font-weight:700">]</span> inotify_fs_add<span style="color:#ce5c00;font-weight:700">()</span>: <span style="color:#000">inode</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">418051</span> <span style="color:#000">watch_fd</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">1</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:700">=</span>/legacy-logs/date.log
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:51 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:52 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:53 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:54 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:55 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Tue Sep <span style="color:#0000cf;font-weight:700">13</span> 12:22:56 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span></code></pre></div><h3 id="file-tailer-configuration-options">File Tailer configuration options</h3><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>name</td><td>string</td><td>Yes</td><td>-</td><td>Name for the tailer<br></td></tr><tr>
<td>path</td><td>string</td><td>No</td><td>-</td><td>Path to the loggable file<br></td></tr><tr>
<td>disabled</td><td>bool</td><td>No</td><td>-</td><td>Disable tailing the file<br></td></tr><tr>
<td>containerOverrides</td><td>*types.ContainerBase</td><td>No</td><td>-</td><td>Override container fields for the given tailer<br></td></tr></tbody></table><h2 id="tail-systemd-journal">Tail systemd journal</h2><p>This is a special case of <code>file-tailer</code>, since it tails the <code>systemd</code> journal file specifically.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: HostTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: systemd-tailer-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # list of Systemd tailers
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  systemdTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: my-systemd-tailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      maxEntries: 100
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      systemdFilter: kubelet.service
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h3 id="systemd-tailer-configuration-options">Systemd tailer configuration options</h3><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>name</td><td>string</td><td>Yes</td><td>-</td><td>Name for the tailer<br></td></tr><tr>
<td>path</td><td>string</td><td>No</td><td>-</td><td>Override systemd log path<br></td></tr><tr>
<td>disabled</td><td>bool</td><td>No</td><td>-</td><td>Disable component<br></td></tr><tr>
<td>systemdFilter</td><td>string</td><td>No</td><td>-</td><td>Filter to select systemd unit example: kubelet.service<br></td></tr><tr>
<td>maxEntries</td><td>int</td><td>No</td><td>-</td><td>Maximum entries to read when starting to tail logs to avoid high pressure<br></td></tr><tr>
<td>containerOverrides</td><td>*types.ContainerBase</td><td>No</td><td>-</td><td>Override container fields for the given tailer<br></td></tr></tbody></table><h2 id="example-configure-logging-flow-to-route-logs-from-a-host-tailer">Example: Configure logging Flow to route logs from a host tailer</h2><p>The following example uses the flow&rsquo;s match term to listen the previously created <code>file-hosttailer-sample</code> Hosttailer&rsquo;s log.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging.banzaicloud.io/v1beta1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: Flow
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: hosttailer-flow
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  namespace: default
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  filters:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - tag_normaliser: {}
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # keeps data matching to label, the rest of the data will be discarded by this flow implicitly
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  match:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - select:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      labels: 
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        app.kubernetes.io/name: file-hosttailer-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      # there might be a need to match on container name too (in case of multiple containers)
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      container_names:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        - nginx-access
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  outputRefs:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - sample-output
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h2 id="example-kubernetes-host-tailer-with-multiple-tailers">Example: Kubernetes host tailer with multiple tailers</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: HostTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: multi-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # list of File tailers
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  fileTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-access
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/access.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-error
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/error.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # list of Systemd tailers
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  systemdTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: my-systemd-tailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      maxEntries: 100
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      systemdFilter: kubelet.service
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h2 id="set-custom-priority">Set custom priority</h2><p>Create your own custom priority class in Kubernetes. Set its value between 0 and 2000000000. Note that:</p><ul>
<li>0 is the default priority</li><li>To change the default priority, set the <code>globalDefault</code> key.</li><li>2000000000 and above are reserved for the Kubernetes system</li><li>PriorityClass is a non-namespaced object.</li></ul><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: scheduling.k8s.io/v1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: PriorityClass
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: hosttailer-priority
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">value: 1000000
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">globalDefault: false
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">description: &#34;This priority class should be used for hosttailer pods only.&#34;
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>Now you can use your private priority class name to start hosttailer/eventtailer, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f -<span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: logging-extensions.banzaicloud.io/v1alpha1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: HostTailer
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: priority-sample
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  controlNamespace: default
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  # Override podSpecBase variables here
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  workloadOverrides:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    priorityClassName: hosttailer-priority
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  fileTailers:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-access
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/access.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: nginx-error
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      path: /var/log/nginx/error.log
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h2 id="configuration-options">Configuration options</h2><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>fileTailers</td><td>[]FileTailer</td><td>No</td><td>-</td><td>List of file tailers<br></td></tr><tr>
<td>c</td><td>[]SystemdTailer</td><td>No</td><td>-</td><td>List of systemd tailers<br></td></tr><tr>
<td>enableRecreateWorkloadOnImmutableFieldChange</td><td>bool</td><td>No</td><td>-</td><td>EnableRecreateWorkloadOnImmutableFieldChange enables the operator to recreate the<br>fluentbit daemonset and the fluentd statefulset (and possibly other resource in the future)<br>in case there is a change in an immutable field<br>that otherwise couldn&rsquo;t be managed with a simple update.<br></td></tr><tr>
<td>workloadMetaOverrides</td><td>*types.MetaBase</td><td>No</td><td>-</td><td>Override metadata of the created resources<br></td></tr><tr>
<td>workloadOverrides</td><td>*types.PodSpecBase</td><td>No</td><td>-</td><td>Override podSpec fields for the given daemonset<br></td></tr></tbody></table><h2 id="advanced-configuration-overrides">Advanced configuration overrides</h2><h3 id="metabase">MetaBase</h3><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>annotations</td><td><code>map[string]string</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>labels</td><td><code>map[string]string</code></td><td>No</td><td>-</td><td></td></tr></tbody></table><h3 id="podspecbase">PodSpecBase</h3><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>tolerations</td><td><code>[]corev1.Toleration</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>nodeSelector</td><td><code>map[string]string</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>serviceAccountName</td><td><code>string</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>affinity</td><td><code>*corev1.Affinity</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>securityContext</td><td><code>*corev1.PodSecurityContext</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>volumes</td><td><code>[]corev1.Volume</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>priorityClassName</td><td><code>string</code></td><td>No</td><td>-</td><td></td></tr></tbody></table><h3 id="containerbase">ContainerBase</h3><table>
<thead>
<tr>
<th>Variable Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr>
<td>resources</td><td><code>*corev1.ResourceRequirements</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>image</td><td><code>string</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>pullPolicy</td><td><code>corev1.PullPolicy</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>command</td><td><code>[]string</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>volumeMounts</td><td><code>[]corev1.VolumeMount</code></td><td>No</td><td>-</td><td></td></tr><tr>
<td>securityContext</td><td><code>*corev1.SecurityContext</code></td><td>No</td><td>-</td><td></td></tr></tbody></table></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-064cf3669ed75479a61d9edba52b81d4">6.3 - Tail logfiles with a webhook</h1><p>The <code>tailer-webhook</code> is a different approach for the same problem: parsing legacy application&rsquo;s log file. As an alternative to using a <a href="/docs/configuration/extensions/kubernetes-host-tailer/">host file tailer</a> service, you can use a <code>file tailer webhook</code> service.
While the containers of the <code>host file tailers</code> run in a separated pod, <code>file tailer webhook</code> uses a different approach: if a pod has a specific annotation, the webhook injects a sidecar container for every tailed file into the pod.</p><p><img src="../logging-extensions-tailer-webhook.png" alt="Tailer-webhook"></p><p>The <code>tailer-webhook</code> behaves differently compared to the <code>host-tailer</code>:</p><p>Pros:</p><ul>
<li>A simple annotation on the pod initiates the file tailing.</li><li>There is no need to use <code>mounted volumes</code>, Logging operator will manage the volumes and mounts between your containers.</li></ul><p>Cons:</p><ul>
<li>Required to start the Logging operator with webhooks service enabled. This requires additional configuration, especially on certificates since webhook services are allowed over TLS only.</li><li>Possibly uses more resources, since every tailed file attaches a new sidecar container to the pod.</li></ul><h2 id="enable-webhooks">Enable webhooks in Logging operator</h2><blockquote>
<p>We recommend using <code>cert-manager</code> to manage your certificates. Since using <code>cert-manager</code> is not part of this article, we assume you already have valid certs.</p></blockquote><p>You will require the following things:</p><ul>
<li>a valid client certificate,</li><li>a CA certificate, and</li><li>a custom value.yaml file for your helm chart.</li></ul><p>The following example refers to a Kubernetes secret named <code>webhook-tls</code> which is a self-signed certificate generated by <code>cert-manager</code>.</p><p>Add the following lines to your custom <code>values.yaml</code> or create a new file if needed:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">env</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ENABLE_WEBHOOKS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">volumes</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">webhook-tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secret</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">secretName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">webhook-tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">volumeMounts</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">webhook-tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">mountPath</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/tmp/k8s-webhook-server/serving-certs</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>This will:</p><ul>
<li>Set <code>ENABLE_WEBHOOKS</code> environment variable to <code>true</code>. This is the official way to enable webhooks in Logging operator.</li><li>Create a volume from the <code>webhook-tls</code> Kubernetes secret.</li><li>Mount the <code>webhook-tls</code> secret volume to the <code>/tmp/k8s-webhook-server/serving-certs</code> path where Logging operator will search for it.</li></ul><p>Now you are ready to install Logging operator with the new custom values:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>helm upgrade --install --wait --create-namespace --namespace logging -f operator_values.yaml  logging-operator ./charts/logging-operator
</span></span></code></pre></div><p>Alternatively, instead of using the values.yaml file, you can run the installation from command line also by passing the values with the <code>set</code> and <code>set-string</code> parameters:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>helm upgrade --install --wait --create-namespace --namespace logging --set <span style="color:#4e9a06">&#34;env[0].name=ENABLE_WEBHOOKS&#34;</span> --set-string <span style="color:#4e9a06">&#34;env[0].value=true&#34;</span> --set <span style="color:#4e9a06">&#34;volumes[0].name=webhook-tls&#34;</span> --set <span style="color:#4e9a06">&#34;volumes[0].secret.secretName=webhook-tls&#34;</span> --set <span style="color:#4e9a06">&#34;volumeMounts[0].name=webhook-tls&#34;</span> --set <span style="color:#4e9a06">&#34;volumeMounts[0].mountPath=/tmp/k8s-webhook-server/serving-certs&#34;</span>  logging-operator ./charts/logging-operator
</span></span></code></pre></div><p>You also need a service which points to the webhook port (9443) of Logging operator, and where the <code>mutatingwebhookconfiuration</code> will point to. Running the following command in shell will create the required service:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: v1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: Service
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: logging-webhooks
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  namespace: logging
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  ports:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    - name: logging-webhooks
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      port: 443
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      targetPort: 9443
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      protocol: TCP
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  selector:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    app.kubernetes.io/instance: logging-operator
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  type: ClusterIP
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>Furthermore, you need to tell Kubernetes to send admission requests to our webhook service. To do that, create a <code>mutatingwebhookconfiguration</code> Kubernetes resource, and:</p><ul>
<li>Set the configuration to call <code>/tailer-webhook</code> path on your <code>logging-webhooks</code> service when <code>v1.Pod</code> is created.</li><li>Set <code>failurePolicy</code> to <code>ignore</code>, which means that the original pod will be created on webhook errors.</li><li>Set <code>sideEffects</code> to <code>none</code>, because we won&rsquo;t cause any out-of-band changes in Kubernetes.</li></ul><p>Unfortunately, <code>mutatingwebhookconfiguration</code> requires the <code>caBundle</code> field to be filled because we used a self-signed certificate, and the certificate cannot be validated through the system trust roots. If your certificate was generated with a system trust root CA, remove the <code>caBundle</code> line, because the certificate will be validated automatically.
There are more sophisticated ways to load the CA into this field, but this solution requires no further components.</p><blockquote>
<p>For example: you can inject the CA with a simple cert-manager <code>cert-manager.io/inject-ca-from: logging/webhook-tls</code> annotation on the <code>mutatingwebhookconfiguration</code> resource.</p></blockquote><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl apply -f - <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">apiVersion: admissionregistration.k8s.io/v1
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">kind: MutatingWebhookConfiguration
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  name: sample-webhook-cfg
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  namespace: logging
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  labels:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    app: sample-webhook
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">webhooks:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">  - name: sample-webhook.banzaicloud.com
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    clientConfig:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      service:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        name: logging-webhooks
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        namespace: logging
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        path: &#34;/tailer-webhook&#34;
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      caBundle: $(kubectl get secret webhook-tls -n logging -o json | jq -r &#39;.data[&#34;ca.crt&#34;]&#39;)
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    rules:
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">      - operations: [ &#34;CREATE&#34; ]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        apiGroups: [&#34;&#34;]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        apiVersions: [&#34;v1&#34;]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        resources: [&#34;pods&#34;]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">        scope: &#34;*&#34;
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    failurePolicy: Ignore
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    sideEffects: None
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">    admissionReviewVersions: [v1]
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><h2 id="triggering-the-webhook">Triggering the webhook</h2><div class="warning-block">
<p><strong>CAUTION:</strong></p>To use the webhook, you must first <a href="#enable-webhooks">enable webhooks in the Logging operator</a>.
</div><p><code>File tailer webhook</code> is based on a <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/"><code>Mutating Admission Webhook</code></a>. It is called every time when a pod starts.</p><p>To trigger the webhook, add the following annotation to the pod metadata:</p><ul>
<li>
<p>Annotation key: <code>sidecar.logging-extensions.banzaicloud.io/tail</code></p></li><li>
<p>Value of the annotation: the filename (including path, and optionally the container) you want to tail, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#204a87;font-weight:700">&#34;sidecar.logging-extensions.banzaicloud.io/tail&#34;: </span><span style="color:#4e9a06">&#34;/var/log/date&#34;</span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p>To tail multiple files, add only one annotation, and separate the filenames with commas, for example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test-pod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#204a87;font-weight:700">&#34;sidecar.logging-extensions.banzaicloud.io/tail&#34;: </span><span style="color:#4e9a06">&#34;/var/log/date,/var/log/mycustomfile&#34;</span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li><li>
<p>If the pod contains multiple containers, see <a href="#multi-container-pods">Multi-container pods</a>.</p></li></ul><blockquote>
<p>Note: If the pod with the sidecar annotation is in the <code>default</code> namespace, Logging operator handles <code>tailer-webhook</code> annotations clusterwide. To restrict the webhook callbacks to the current namespace, change the <code>scope</code> of the <code>mutatingwebhookconfiguration</code> to <code>namespaced</code>.</p></blockquote><h3 id="file-tailer-example">File tailer example</h3><p>The following example creates a pod that is running a shell in infinite loop that appends the <code>date</code> command&rsquo;s output to a file every second. The annotation <code>sidecar.logging-extensions.banzaicloud.io/tail</code> notifies Logging operator to attach a sidecar container to the pod. The sidecar tails the <code>/legacy-logs/date.log</code> file and sends its output to the stdout.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Pod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test-pod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#204a87;font-weight:700">&#34;sidecar.logging-extensions.banzaicloud.io/tail&#34;: </span><span style="color:#4e9a06">&#34;/var/log/date&#34;</span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">containers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">image</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">debian</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sample-container</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">command</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[</span><span style="color:#4e9a06">&#34;/bin/sh&#34;</span><span style="color:#000;font-weight:700">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;-c&#34;</span><span style="color:#000;font-weight:700">]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">args</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">while true; do</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">date &gt;&gt; /var/log/date;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">sleep 1;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#000">done</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">image</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">debian</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sample-container2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>After you have created the pod with the required annotation, make sure that the <code>test-pod</code> contains two containers by running <code>kubectl get pod</code></p><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>NAME       READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex"><span>test-pod   2/2     Running   <span style="color:#0000cf;font-weight:700">0</span>          29m
</span></span></code></pre></div><p>Check the container names in the pod to see that the Logging operator has created the sidecar container called <code>legacy-logs-date-log</code>. The sidecar containers&rsquo; name is always built from the path and name of the tailed file. Run the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl get pod test-pod -o json <span style="color:#000;font-weight:700">|</span> jq <span style="color:#4e9a06">&#39;.spec.containers | map(.name)&#39;</span>
</span></span></code></pre></div><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>
</span></span><span style="display:flex"><span>  <span style="color:#4e9a06">&#34;test&#34;</span>,
</span></span><span style="display:flex"><span>  <span style="color:#4e9a06">&#34;legacy-logs-date-log&#34;</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">]</span>
</span></span></code></pre></div><p>Check the logs of the <code>test</code> container. Since it writes the logs into a file, it does not produce any logs on stdout.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl logs test-pod test<span style="color:#000;font-weight:700">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span>
</span></span></code></pre></div><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#0000cf;font-weight:700">0</span>
</span></span></code></pre></div><p>Check the logs of the <code>legacy-logs-date-log</code> container. This container exposes the logs of the <code>test</code> container on its stdout.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>kubectl logs test-pod legacy-logs-date-log
</span></span></code></pre></div><p>Expected output:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>Fluent Bit v1.9.5
</span></span><span style="display:flex"><span>* Copyright <span style="color:#ce5c00;font-weight:700">(</span>C<span style="color:#ce5c00;font-weight:700">)</span> 2015-2022 The Fluent Bit Authors
</span></span><span style="display:flex"><span>* Fluent Bit is a CNCF sub-project under the umbrella of Fluentd
</span></span><span style="display:flex"><span>* https://fluentbit.io
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>fluent bit<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>1.9.5, <span style="color:#000">commit</span><span style="color:#ce5c00;font-weight:700">=</span>9ec43447b6, <span style="color:#000">pid</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">1</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>storage<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>1.2.0, <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:700">=</span>memory-only, <span style="color:#000">sync</span><span style="color:#ce5c00;font-weight:700">=</span>normal, <span style="color:#000">checksum</span><span style="color:#ce5c00;font-weight:700">=</span>disabled, <span style="color:#000">max_chunks_up</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">128</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>cmetrics<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:700">=</span>0.3.4
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>sp<span style="color:#ce5c00;font-weight:700">]</span> stream processor started
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>input:tail:tail.0<span style="color:#ce5c00;font-weight:700">]</span> inotify_fs_add<span style="color:#ce5c00;font-weight:700">()</span>: <span style="color:#000">inode</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">938627</span> <span style="color:#000">watch_fd</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#0000cf;font-weight:700">1</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:700">=</span>/legacy-logs/date.log
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">[</span>2022/09/15 11:26:11<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span> info<span style="color:#ce5c00;font-weight:700">]</span> <span style="color:#ce5c00;font-weight:700">[</span>output:file:file.0<span style="color:#ce5c00;font-weight:700">]</span> worker <span style="color:#8f5902;font-style:italic">#0 started</span>
</span></span><span style="display:flex"><span>Thu Sep <span style="color:#0000cf;font-weight:700">15</span> 11:26:11 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>Thu Sep <span style="color:#0000cf;font-weight:700">15</span> 11:26:12 UTC <span style="color:#0000cf;font-weight:700">2022</span>
</span></span><span style="display:flex"><span>...
</span></span></code></pre></div><h2 id="multi-container-pods">Multi-container pods</h2><p>In some cases you have multiple containers in your pod and you want to distinguish which file annotation belongs to which container. You can order every file annotations to particular container by prefixing the annotation with a <code>${ContainerName}:</code> container key. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>...
</span></span><span style="display:flex"><span>metadata:
</span></span><span style="display:flex"><span>    name: test-pod
</span></span><span style="display:flex"><span>    annotations: <span style="color:#ce5c00;font-weight:700">{</span><span style="color:#4e9a06">&#34;sidecar.logging-extensions.banzaicloud.io/tail&#34;</span>: <span style="color:#4e9a06">&#34;sample-container:/var/log/date,sample-container2:/var/log/anotherfile,/var/log/mycustomfile,foobarbaz:/foo/bar/baz&#34;</span><span style="color:#ce5c00;font-weight:700">}</span>
</span></span><span style="display:flex"><span>spec:
</span></span><span style="display:flex"><span>...
</span></span></code></pre></div><div class="warning-block">
<p><strong>CAUTION:</strong></p><ul>
<li>Annotations without containername prefix: the file gets tailed on the default container (container 0)</li><li>Annotations with invalid containername: file tailer annotation gets discarded</li></ul></div><table>
<thead>
<tr>
<th>Annotation</th><th>Explanation</th></tr></thead><tbody>
<tr>
<td>sample-container:/var/log/date</td><td>tails file /var/log/date in sample-container</td></tr><tr>
<td>sample-container2:/var/log/anotherfile</td><td>tails file /var/log/anotherfile in sample-container2</td></tr><tr>
<td>/var/log/mycustomfile</td><td>tails file /var/log/mycustomfile in default container (sample-container)</td></tr><tr>
<td>foobarbaz:/foo/bar/baz</td><td>will be discarded due to non-existing container name</td></tr></tbody></table></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-e717e7a286f2e387a96139f1e780a80f">7 - Custom Resource Definitions</h1><p>This document contains detailed information about the Custom Resource Definitions that the Logging operator uses.</p><blockquote>
<p>You can find <a href="https://github.com/kube-logging/logging-operator/tree/master/config/samples">example yamls in our GitHub repository</a>.</p></blockquote><h2 id="namespace-separation">Namespace separation</h2><p>A <code>logging pipeline</code> consist of two types of resources.</p><ul>
<li><code>Namespaced</code> resources: <code>Flow</code>, <code>Output</code>, <code>SyslogNGFlow</code>, <code>SyslogNGOutput</code></li><li><code>Global</code> resources: <code>ClusterFlow</code>, <code>ClusterOutput</code>, <code>SyslogNGClusterFlow</code>, <code>SyslogNGClusterOutput</code></li></ul><p>The <code>namespaced</code> resources are only effective in their <strong>own</strong> namespace. <code>Global</code> resources are <strong>cluster wide</strong>.</p><blockquote>
<p>You can create <code>ClusterFlow</code>, <code>ClusterOutput</code>, <code>SyslogNGClusterFlow</code>, and <code>SyslogNGClusterOutput</code> resources only in the <code>controlNamespace</code>, unless the <a href="/docs/configuration/crds/v1beta1/logging_types/#loggingspec-allowclusterresourcesfromallnamespaces"><code>allowClusterResourcesFromAllNamespaces</code></a> option is enabled in the logging resource. This namespace <strong>MUST</strong> be a <strong>protected</strong> namespace so that only <strong>administrators</strong> can access it.</p></blockquote><h2 id="available-crds">Available CRDs</h2></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-44379ccd6059a94ad3c04f41ddd93d31">7.1 - Available CRDs</h1><p>For more information please click on the name</p><center>
<table>
<thead>
<tr>
<th>Name</th><th>Description</th><th>Version</th></tr></thead><tbody>
<tr>
<td><strong><a href="../extensions/eventtailer_types/">EventTailer</a></strong></td><td>Eventtailer&rsquo;s main goal is to listen kubernetes events and transmit their changes to stdout. This way the logging-operator is able to process them.</td><td>extensions</td></tr><tr>
<td><strong><a href="../extensions/hosttailer_types/">HostTailer</a></strong></td><td>HostTailer&rsquo;s main goal is to tail custom files and transmit their changes to stdout. This way the logging-operator is able to process them.</td><td>extensions</td></tr><tr>
<td><strong><a href="clusterflow_types/">ClusterFlow</a></strong></td><td>ClusterFlow is the Schema for the clusterflows API</td><td>v1beta1</td></tr><tr>
<td><strong><a href="clusteroutput_types/">ClusterOutput</a></strong></td><td>ClusterOutput is the Schema for the clusteroutputs API</td><td>v1beta1</td></tr><tr>
<td><strong><a href="common_types/">Common</a></strong></td><td>ImageSpec Metrics Security</td><td>v1beta1</td></tr><tr>
<td><strong><a href="flow_types/">FlowSpec</a></strong></td><td>FlowSpec is the Kubernetes spec for Flows</td><td>v1beta1</td></tr><tr>
<td><strong><a href="fluentbit_types/">FluentbitSpec</a></strong></td><td>FluentbitSpec defines the desired state of Fluentbit</td><td>v1beta1</td></tr><tr>
<td><strong><a href="fluentd_types/">FluentdSpec</a></strong></td><td>FluentdSpec defines the desired state of Fluentd</td><td>v1beta1</td></tr><tr>
<td><strong><a href="logging_types/">Logging</a></strong></td><td>Logging system configuration</td><td>v1beta1</td></tr><tr>
<td><strong><a href="node_agent_types/">NodeAgent</a></strong></td><td></td><td>v1beta1</td></tr><tr>
<td><strong><a href="output_types/">OutputSpec</a></strong></td><td>OutputSpec defines the desired state of Output</td><td>v1beta1</td></tr><tr>
<td><strong><a href="syslogng_clusterflow_types/">SyslogNGClusterFlow</a></strong></td><td>SyslogNGClusterFlow is the Schema for the syslog-ng clusterflows API</td><td>v1beta1</td></tr><tr>
<td><strong><a href="syslogng_clusteroutput_types/">SyslogNGClusterOutput</a></strong></td><td>SyslogNGClusterOutput is the Schema for the syslog-ng clusteroutputs API</td><td>v1beta1</td></tr><tr>
<td><strong><a href="syslogng_flow_types/">SyslogNGFlowSpec</a></strong></td><td>SyslogNGFlowSpec is the Kubernetes spec for SyslogNGFlows</td><td>v1beta1</td></tr><tr>
<td><strong><a href="syslogng_output_types/">SyslogNGOutputSpec</a></strong></td><td>SyslogNGOutputSpec defines the desired state of SyslogNGOutput</td><td>v1beta1</td></tr><tr>
<td><strong><a href="syslogng_types/">SyslogNGSpec</a></strong></td><td>SyslogNGSpec defines the desired state of SyslogNG</td><td>v1beta1</td></tr></tbody></table></center>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4e72a83b9fd0f217cf5e4c1787a014b6">7.1.1 - ClusterFlow</h1><h2 id="clusterflow">ClusterFlow</h2><p>ClusterFlow is the Schema for the clusterflows API</p><h3 id="clusterflow-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="clusterflow-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="clusterflow-spec">spec (ClusterFlowSpec, optional)</h3><p>Name of the logging cluster to be attached</p><p>Default: -</p><h3 id="clusterflow-status">status (FlowStatus, optional)</h3><p>Default: -</p><h2 id="clustermatch">ClusterMatch</h2><h3 id="clustermatch-select">select (*ClusterSelect, optional)</h3><p>Default: -</p><h3 id="clustermatch-exclude">exclude (*ClusterExclude, optional)</h3><p>Default: -</p><h2 id="clusterselect">ClusterSelect</h2><h3 id="clusterselect-namespaces">namespaces ([]string, optional)</h3><p>Default: -</p><h3 id="clusterselect-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="clusterselect-hosts">hosts ([]string, optional)</h3><p>Default: -</p><h3 id="clusterselect-container_names">container_names ([]string, optional)</h3><p>Default: -</p><h2 id="clusterexclude">ClusterExclude</h2><h3 id="clusterexclude-namespaces">namespaces ([]string, optional)</h3><p>Default: -</p><h3 id="clusterexclude-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="clusterexclude-hosts">hosts ([]string, optional)</h3><p>Default: -</p><h3 id="clusterexclude-container_names">container_names ([]string, optional)</h3><p>Default: -</p><h2 id="clusterflowspec">ClusterFlowSpec</h2><p>ClusterFlowSpec is the Kubernetes spec for ClusterFlows</p><h3 id="clusterflowspec-selectors">selectors (map[string]string, optional)</h3><p>Deprecated</p><p>Default: -</p><h3 id="clusterflowspec-match">match ([]ClusterMatch, optional)</h3><p>Default: -</p><h3 id="clusterflowspec-filters">filters ([]Filter, optional)</h3><p>Default: -</p><h3 id="clusterflowspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="clusterflowspec-outputrefs">outputRefs ([]string, optional)</h3><p>Deprecated</p><p>Default: -</p><h3 id="clusterflowspec-globaloutputrefs">globalOutputRefs ([]string, optional)</h3><p>Default: -</p><h3 id="clusterflowspec-flowlabel">flowLabel (string, optional)</h3><p>Default: -</p><h3 id="clusterflowspec-includelabelinrouter">includeLabelInRouter (*bool, optional)</h3><p>Default: -</p><h2 id="clusterflowlist">ClusterFlowList</h2><p>ClusterFlowList contains a list of ClusterFlow</p><h3 id="clusterflowlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="clusterflowlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="clusterflowlist-items">items ([]ClusterFlow, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-12aea1089d22dc7b1ec3e444ebae4bc3">7.1.2 - ClusterOutput</h1><h2 id="clusteroutput">ClusterOutput</h2><p>ClusterOutput is the Schema for the clusteroutputs API</p><h3 id="clusteroutput-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="clusteroutput-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="clusteroutput-spec">spec (ClusterOutputSpec, required)</h3><p>Default: -</p><h3 id="clusteroutput-status">status (OutputStatus, optional)</h3><p>Default: -</p><h2 id="clusteroutputspec">ClusterOutputSpec</h2><p>ClusterOutputSpec contains Kubernetes spec for ClusterOutput</p><h3 id="clusteroutputspec-">(OutputSpec, required)</h3><p>Default: -</p><h3 id="clusteroutputspec-enablednamespaces">enabledNamespaces ([]string, optional)</h3><p>Default: -</p><h2 id="clusteroutputlist">ClusterOutputList</h2><p>ClusterOutputList contains a list of ClusterOutput</p><h3 id="clusteroutputlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="clusteroutputlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="clusteroutputlist-items">items ([]ClusterOutput, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-aba3be1da4e9fa0884cceaab7336a25b">7.1.3 - Common</h1><h2 id="imagespec">ImageSpec</h2><p>ImageSpec struct hold information about image specification</p><h3 id="imagespec-repository">repository (string, optional)</h3><p>Default: -</p><h3 id="imagespec-tag">tag (string, optional)</h3><p>Default: -</p><h3 id="imagespec-pullpolicy">pullPolicy (string, optional)</h3><p>Default: -</p><h3 id="imagespec-imagepullsecrets">imagePullSecrets ([]corev1.LocalObjectReference, optional)</h3><p>Default: -</p><h2 id="metrics">Metrics</h2><p>Metrics defines the service monitor endpoints</p><h3 id="metrics-interval">interval (string, optional)</h3><p>Default: -</p><h3 id="metrics-timeout">timeout (string, optional)</h3><p>Default: -</p><h3 id="metrics-port">port (int32, optional)</h3><p>Default: -</p><h3 id="metrics-path">path (string, optional)</h3><p>Default: -</p><h3 id="metrics-servicemonitor">serviceMonitor (bool, optional)</h3><p>Default: -</p><h3 id="metrics-servicemonitorconfig">serviceMonitorConfig (ServiceMonitorConfig, optional)</h3><p>Default: -</p><h3 id="metrics-prometheusannotations">prometheusAnnotations (bool, optional)</h3><p>Default: -</p><h3 id="metrics-prometheusrules">prometheusRules (bool, optional)</h3><p>Default: -</p><h2 id="buffermetrics">BufferMetrics</h2><p>BufferMetrics defines the service monitor endpoints</p><h3 id="buffermetrics-">(Metrics, required)</h3><p>Default: -</p><h3 id="buffermetrics-mount_name">mount_name (string, optional)</h3><p>Default: -</p><h2 id="servicemonitorconfig">ServiceMonitorConfig</h2><p>ServiceMonitorConfig defines the ServiceMonitor properties</p><h3 id="servicemonitorconfig-additionallabels">additionalLabels (map[string]string, optional)</h3><p>Default: -</p><h3 id="servicemonitorconfig-honorlabels">honorLabels (bool, optional)</h3><p>Default: -</p><h3 id="servicemonitorconfig-relabelings">relabelings ([]*v1.RelabelConfig, optional)</h3><p>Default: -</p><h3 id="servicemonitorconfig-metricrelabelings">metricRelabelings ([]*v1.RelabelConfig, optional)</h3><p>Default: -</p><h3 id="servicemonitorconfig-scheme">scheme (string, optional)</h3><p>Default: -</p><h3 id="servicemonitorconfig-tlsconfig">tlsConfig (*v1.TLSConfig, optional)</h3><p>Default: -</p><h2 id="security">Security</h2><p>Security defines Fluentd, FluentbitAgent deployment security properties</p><h3 id="security-serviceaccount">serviceAccount (string, optional)</h3><p>Default: -</p><h3 id="security-rolebasedaccesscontrolcreate">roleBasedAccessControlCreate (*bool, optional)</h3><p>Default: -</p><h3 id="security-podsecuritypolicycreate">podSecurityPolicyCreate (bool, optional)</h3><p>Default: -</p><h3 id="security-securitycontext">securityContext (*corev1.SecurityContext, optional)</h3><p>Default: -</p><h3 id="security-podsecuritycontext">podSecurityContext (*corev1.PodSecurityContext, optional)</h3><p>Default: -</p><h2 id="readinessdefaultcheck">ReadinessDefaultCheck</h2><p>ReadinessDefaultCheck Enable default readiness checks</p><h3 id="readinessdefaultcheck-bufferfreespace">bufferFreeSpace (bool, optional)</h3><p>Enable default Readiness check it&rsquo;ll fail if the buffer volume free space exceeds the <code>readinessDefaultThreshold</code> percentage (90%).</p><p>Default: -</p><h3 id="readinessdefaultcheck-bufferfreespacethreshold">bufferFreeSpaceThreshold (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-bufferfilenumber">bufferFileNumber (bool, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-bufferfilenumbermax">bufferFileNumberMax (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-initialdelayseconds">initialDelaySeconds (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-timeoutseconds">timeoutSeconds (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-periodseconds">periodSeconds (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-successthreshold">successThreshold (int32, optional)</h3><p>Default: -</p><h3 id="readinessdefaultcheck-failurethreshold">failureThreshold (int32, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9c0c5afa7fb47abe7a0d1dee1e0cbc7b">7.1.4 - FlowSpec</h1><h2 id="flowspec">FlowSpec</h2><p>FlowSpec is the Kubernetes spec for Flows</p><h3 id="flowspec-selectors">selectors (map[string]string, optional)</h3><p>Deprecated</p><p>Default: -</p><h3 id="flowspec-match">match ([]Match, optional)</h3><p>Default: -</p><h3 id="flowspec-filters">filters ([]Filter, optional)</h3><p>Default: -</p><h3 id="flowspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="flowspec-outputrefs">outputRefs ([]string, optional)</h3><p>Deprecated</p><p>Default: -</p><h3 id="flowspec-globaloutputrefs">globalOutputRefs ([]string, optional)</h3><p>Default: -</p><h3 id="flowspec-localoutputrefs">localOutputRefs ([]string, optional)</h3><p>Default: -</p><h3 id="flowspec-flowlabel">flowLabel (string, optional)</h3><p>Default: -</p><h3 id="flowspec-includelabelinrouter">includeLabelInRouter (*bool, optional)</h3><p>Default: -</p><h2 id="match">Match</h2><h3 id="match-select">select (*Select, optional)</h3><p>Default: -</p><h3 id="match-exclude">exclude (*Exclude, optional)</h3><p>Default: -</p><h2 id="select">Select</h2><h3 id="select-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="select-hosts">hosts ([]string, optional)</h3><p>Default: -</p><h3 id="select-container_names">container_names ([]string, optional)</h3><p>Default: -</p><h2 id="exclude">Exclude</h2><h3 id="exclude-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="exclude-hosts">hosts ([]string, optional)</h3><p>Default: -</p><h3 id="exclude-container_names">container_names ([]string, optional)</h3><p>Default: -</p><h2 id="filter">Filter</h2><p>Filter definition for FlowSpec</p><h3 id="filter-stdout">stdout (*filter.StdOutFilterConfig, optional)</h3><p>Default: -</p><h3 id="filter-parser">parser (*filter.ParserConfig, optional)</h3><p>Default: -</p><h3 id="filter-tag_normaliser">tag_normaliser (*filter.TagNormaliser, optional)</h3><p>Default: -</p><h3 id="filter-dedot">dedot (*filter.DedotFilterConfig, optional)</h3><p>Default: -</p><h3 id="filter-elasticsearch_genid">elasticsearch_genid (*filter.ElasticsearchGenId, optional)</h3><p>Default: -</p><h3 id="filter-record_transformer">record_transformer (*filter.RecordTransformer, optional)</h3><p>Default: -</p><h3 id="filter-record_modifier">record_modifier (*filter.RecordModifier, optional)</h3><p>Default: -</p><h3 id="filter-geoip">geoip (*filter.GeoIP, optional)</h3><p>Default: -</p><h3 id="filter-concat">concat (*filter.Concat, optional)</h3><p>Default: -</p><h3 id="filter-detectexceptions">detectExceptions (*filter.DetectExceptions, optional)</h3><p>Default: -</p><h3 id="filter-grep">grep (*filter.GrepConfig, optional)</h3><p>Default: -</p><h3 id="filter-prometheus">prometheus (*filter.PrometheusConfig, optional)</h3><p>Default: -</p><h3 id="filter-throttle">throttle (*filter.Throttle, optional)</h3><p>Default: -</p><h3 id="filter-sumologic">sumologic (*filter.SumoLogic, optional)</h3><p>Default: -</p><h3 id="filter-enhancek8s">enhanceK8s (*filter.EnhanceK8s, optional)</h3><p>Default: -</p><h3 id="filter-kube_events_timestamp">kube_events_timestamp (*filter.KubeEventsTimestampConfig, optional)</h3><p>Default: -</p><h2 id="flowstatus">FlowStatus</h2><p>FlowStatus defines the observed state of Flow</p><h3 id="flowstatus-active">active (*bool, optional)</h3><p>Default: -</p><h3 id="flowstatus-problems">problems ([]string, optional)</h3><p>Default: -</p><h3 id="flowstatus-problemscount">problemsCount (int, optional)</h3><p>Default: -</p><h2 id="flow">Flow</h2><p>Flow Kubernetes object</p><h3 id="flow-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="flow-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="flow-spec">spec (FlowSpec, optional)</h3><p>Default: -</p><h3 id="flow-status">status (FlowStatus, optional)</h3><p>Default: -</p><h2 id="flowlist">FlowList</h2><p>FlowList contains a list of Flow</p><h3 id="flowlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="flowlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="flowlist-items">items ([]Flow, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b9b388c411066f5f6dd5a2eef91b8474">7.1.5 - FluentbitSpec</h1><h2 id="fluentbitagent">FluentbitAgent</h2><p>FluentbitAgent is the Schema for the loggings API</p><h3 id="fluentbitagent-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="fluentbitagent-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="fluentbitagent-spec">spec (FluentbitSpec, optional)</h3><p>Default: -</p><h3 id="fluentbitagent-status">status (FluentbitStatus, optional)</h3><p>Default: -</p><h2 id="fluentbitagentlist">FluentbitAgentList</h2><p>FluentbitAgentList contains a list of FluentbitAgent</p><h3 id="fluentbitagentlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="fluentbitagentlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="fluentbitagentlist-items">items ([]FluentbitAgent, required)</h3><p>Default: -</p><h2 id="fluentbitspec">FluentbitSpec</h2><p>FluentbitSpec defines the desired state of FluentbitAgent</p><h3 id="fluentbitspec-loggingref">LoggingRef (string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-daemonsetannotations">daemonsetAnnotations (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-annotations">annotations (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-envvars">envVars ([]corev1.EnvVar, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-image">image (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-tls">tls (*FluentbitTLS, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-targethost">targetHost (string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-targetport">targetPort (int32, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-flush">flush (int32, optional)</h3><p>Set the flush time in seconds.nanoseconds. The engine loop uses a Flush timeout to define when is required to flush the records ingested by input plugins through the defined output plugins. (default: 1)</p><p>Default: 1</p><h3 id="fluentbitspec-grace">grace (int32, optional)</h3><p>Set the grace time in seconds as Integer value. The engine loop uses a Grace timeout to define wait time on exit (default: 5)</p><p>Default: 5</p><h3 id="fluentbitspec-loglevel">logLevel (string, optional)</h3><p>Set the logging verbosity level. Allowed values are: error, warn, info, debug and trace. Values are accumulative, e.g: if &lsquo;debug&rsquo; is set, it will include error, warning, info and debug. Note that trace mode is only available if Fluent Bit was built with the WITH_TRACE option enabled. (default: info)</p><p>Default: info</p><h3 id="fluentbitspec-corostacksize">coroStackSize (int32, optional)</h3><p>Set the coroutines stack size in bytes. The value must be greater than the page size of the running system. Don&rsquo;t set too small value (say 4096), or coroutine threads can overrun the stack buffer. Do not change the default value of this parameter unless you know what you are doing. (default: 24576)</p><p>Default: 24576</p><h3 id="fluentbitspec-resources">resources (corev1.ResourceRequirements, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-tolerations">tolerations ([]corev1.Toleration, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-nodeselector">nodeSelector (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-affinity">affinity (*corev1.Affinity, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-metrics">metrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-security">security (*Security, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-positiondb">positiondb (volume.KubernetesVolume, optional)</h3><p><a href="https://github.com/cisco-open/operator-tools/tree/master/docs/types">volume.KubernetesVolume</a></p><p>Default: -</p><h3 id="fluentbitspec-position_db">position_db (*volume.KubernetesVolume, optional)</h3><p>Deprecated, use positiondb</p><p>Default: -</p><h3 id="fluentbitspec-mountpath">mountPath (string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-extravolumemounts">extraVolumeMounts ([]*VolumeMount, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-inputtail">inputTail (InputTail, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-filteraws">filterAws (*FilterAws, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-filtermodify">filterModify ([]FilterModify, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-parser">parser (string, optional)</h3><p>Deprecated, use inputTail.parser</p><p>Default: -</p><h3 id="fluentbitspec-filterkubernetes">filterKubernetes (FilterKubernetes, optional)</h3><p>Parameters for Kubernetes metadata filter</p><p>Default: -</p><h3 id="fluentbitspec-disablekubernetesfilter">disableKubernetesFilter (*bool, optional)</h3><p>Disable Kubernetes metadata filter</p><p>Default: -</p><h3 id="fluentbitspec-bufferstorage">bufferStorage (BufferStorage, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-bufferstoragevolume">bufferStorageVolume (volume.KubernetesVolume, optional)</h3><p><a href="https://github.com/cisco-open/operator-tools/tree/master/docs/types">volume.KubernetesVolume</a></p><p>Default: -</p><h3 id="fluentbitspec-buffervolumemetrics">bufferVolumeMetrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-buffervolumeimage">bufferVolumeImage (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-buffervolumeargs">bufferVolumeArgs ([]string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-customconfigsecret">customConfigSecret (string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-podpriorityclassname">podPriorityClassName (string, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-livenessprobe">livenessProbe (*corev1.Probe, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-livenessdefaultcheck">livenessDefaultCheck (bool, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-readinessprobe">readinessProbe (*corev1.Probe, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-network">network (*FluentbitNetwork, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-forwardoptions">forwardOptions (*ForwardOptions, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-enableupstream">enableUpstream (bool, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-serviceaccount">serviceAccount (*typeoverride.ServiceAccount, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-dnspolicy">dnsPolicy (corev1.DNSPolicy, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-dnsconfig">dnsConfig (*corev1.PodDNSConfig, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-hostnetwork">HostNetwork (bool, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-syslogng_output">syslogng_output (*FluentbitTCPOutput, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-updatestrategy">updateStrategy (appsv1.DaemonSetUpdateStrategy, optional)</h3><p>Default: -</p><h3 id="fluentbitspec-customparsers">customParsers (string, optional)</h3><p>Available in Logging operator version 4.2 and later.</p><p>Specify a custom parser file to load in addition to the default parsers file. It must be a valid key in the configmap specified by customConfig.</p><p>Default: -</p><p>The following example defines a <a href="/docs/configuration/plugins/filters/parser/">Fluentd parser</a> that places the parsed containerd log messages into the <code>log</code> field instead of the <code>message</code> field.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FluentbitAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">containerd</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">inputTail</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">Parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cri-log-key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Parser that populates `log` instead of `message` to enable the Kubernetes filter&#39;s Merge_Log feature to work</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Mind the indentation, otherwise Fluent Bit will parse the whole message into the `log` key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">customParsers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                  [PARSER]
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                      Name cri-log-key
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                      Format regex
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                      Regex ^(?&lt;time&gt;[^ ]+) (?&lt;stream&gt;stdout|stderr) (?&lt;logtag&gt;[^ ]*) (?&lt;log&gt;.*)$
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                      Time_Key    time
</span></span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic">                      Time_Format %Y-%m-%dT%H:%M:%S.%L%z</span><span style="color:#f8f8f8;text-decoration:underline">                  
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Required key remap if one wants to rely on the existing auto-detected log key in the fluentd parser and concat filter otherwise should be omitted</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filterModify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">rules</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">Rename</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="fluentbitstatus">FluentbitStatus</h2><p>FluentbitStatus defines the resource status for FluentbitAgent</p><h2 id="fluentbittls">FluentbitTLS</h2><p>FluentbitTLS defines the TLS configs</p><h3 id="fluentbittls-enabled">enabled (*bool, required)</h3><p>Default: -</p><h3 id="fluentbittls-secretname">secretName (string, optional)</h3><p>Default: -</p><h3 id="fluentbittls-sharedkey">sharedKey (string, optional)</h3><p>Default: -</p><h2 id="fluentbittcpoutput">FluentbitTCPOutput</h2><p>FluentbitTCPOutput defines the TLS configs</p><h3 id="fluentbittcpoutput-json_date_key">json_date_key (string, optional)</h3><p>Default: ts</p><h3 id="fluentbittcpoutput-json_date_format">json_date_format (string, optional)</h3><p>Default: iso8601</p><h2 id="fluentbitnetwork">FluentbitNetwork</h2><p>FluentbitNetwork defines network configuration for fluentbit</p><h3 id="fluentbitnetwork-connecttimeout">connectTimeout (*uint32, optional)</h3><p>Sets the timeout for connecting to an upstream</p><p>Default: 10</p><h3 id="fluentbitnetwork-connecttimeoutlogerror">connectTimeoutLogError (*bool, optional)</h3><p>On connection timeout, specify if it should log an error. When disabled, the timeout is logged as a debug message</p><p>Default: true</p><h3 id="fluentbitnetwork-dnsmode">dnsMode (string, optional)</h3><p>Sets the primary transport layer protocol used by the asynchronous DNS resolver for connections established</p><p>Default: UDP, UDP or TCP</p><h3 id="fluentbitnetwork-dnspreferipv4">dnsPreferIpv4 (*bool, optional)</h3><p>Prioritize IPv4 DNS results when trying to establish a connection</p><p>Default: false</p><h3 id="fluentbitnetwork-dnsresolver">dnsResolver (string, optional)</h3><p>Select the primary DNS resolver type</p><p>Default: ASYNC, LEGACY or ASYNC</p><h3 id="fluentbitnetwork-keepalive">keepalive (*bool, optional)</h3><p>Whether or not TCP keepalive is used for the upstream connection</p><p>Default: true</p><h3 id="fluentbitnetwork-keepaliveidletimeout">keepaliveIdleTimeout (*uint32, optional)</h3><p>How long in seconds a TCP keepalive connection can be idle before being recycled</p><p>Default: 30</p><h3 id="fluentbitnetwork-keepalivemaxrecycle">keepaliveMaxRecycle (*uint32, optional)</h3><p>How many times a TCP keepalive connection can be used before being recycled</p><p>Default: 0, disabled</p><h3 id="fluentbitnetwork-sourceaddress">sourceAddress (string, optional)</h3><p>Specify network address (interface) to use for connection and data traffic.</p><p>Default: disabled</p><h2 id="bufferstorage">BufferStorage</h2><p>BufferStorage is the Service Section Configuration of fluent-bit</p><h3 id="bufferstorage-storage.path">storage.path (string, optional)</h3><p>Set an optional location in the file system to store streams and chunks of data. If this parameter is not set, Input plugins can only use in-memory buffering.</p><p>Default: -</p><h3 id="bufferstorage-storage.sync">storage.sync (string, optional)</h3><p>Configure the synchronization mode used to store the data into the file system. It can take the values normal or full.</p><p>Default: normal</p><h3 id="bufferstorage-storage.checksum">storage.checksum (string, optional)</h3><p>Enable the data integrity check when writing and reading data from the filesystem. The storage layer uses the CRC32 algorithm.</p><p>Default: Off</p><h3 id="bufferstorage-storage.backlog.mem_limit">storage.backlog.mem_limit (string, optional)</h3><p>If storage.path is set, Fluent Bit will look for data chunks that were not delivered and are still in the storage layer, these are called backlog data. This option configure a hint of maximum value of memory to use when processing these records.</p><p>Default: 5M</p><h2 id="inputtail">InputTail</h2><p>InputTail defines FluentbitAgent tail input configuration The tail input plugin allows to monitor one or several text files. It has a similar behavior like tail -f shell command.</p><h3 id="inputtail-storage.type">storage.type (string, optional)</h3><p>Specify the buffering mechanism to use. It can be memory or filesystem.</p><p>Default: memory</p><h3 id="inputtail-buffer_chunk_size">Buffer_Chunk_Size (string, optional)</h3><p>Set the buffer size for HTTP client when reading responses from Kubernetes API server. The value must be according to the Unit Size specification.</p><p>Default: 32k</p><h3 id="inputtail-buffer_max_size">Buffer_Max_Size (string, optional)</h3><p>Set the limit of the buffer size per monitored file. When a buffer needs to be increased (e.g: very long lines), this value is used to restrict how much the memory buffer can grow. If reading a file exceed this limit, the file is removed from the monitored file list. The value must be according to the Unit Size specification.</p><p>Default: Buffer_Chunk_Size</p><h3 id="inputtail-path">Path (string, optional)</h3><p>Pattern specifying a specific log files or multiple ones through the use of common wildcards.</p><p>Default: -</p><h3 id="inputtail-path_key">Path_Key (string, optional)</h3><p>If enabled, it appends the name of the monitored file as part of the record. The value assigned becomes the key in the map.</p><p>Default: -</p><h3 id="inputtail-exclude_path">Exclude_Path (string, optional)</h3><p>Set one or multiple shell patterns separated by commas to exclude files matching a certain criteria, e.g: exclude_path=<em>.gz,</em>.zip</p><p>Default: -</p><h3 id="inputtail-read_from_head">Read_From_Head (bool, optional)</h3><p>For new discovered files on start (without a database offset/position), read the content from the head of the file, not tail.</p><p>Default: -</p><h3 id="inputtail-refresh_interval">Refresh_Interval (string, optional)</h3><p>The interval of refreshing the list of watched files in seconds.</p><p>Default: 60</p><h3 id="inputtail-rotate_wait">Rotate_Wait (string, optional)</h3><p>Specify the number of extra time in seconds to monitor a file once is rotated in case some pending data is flushed.</p><p>Default: 5</p><h3 id="inputtail-ignore_older">Ignore_Older (string, optional)</h3><p>Ignores files that have been last modified before this time in seconds. Supports m,h,d (minutes, hours,days) syntax. Default behavior is to read all specified files.</p><p>Default: -</p><h3 id="inputtail-skip_long_lines">Skip_Long_Lines (string, optional)</h3><p>When a monitored file reach it buffer capacity due to a very long line (Buffer_Max_Size), the default behavior is to stop monitoring that file. Skip_Long_Lines alter that behavior and instruct Fluent Bit to skip long lines and continue processing other lines that fits into the buffer size.</p><p>Default: Off</p><h3 id="inputtail-db">DB (*string, optional)</h3><p>Specify the database file to keep track of monitored files and offsets.</p><p>Default: -</p><h3 id="inputtail-db_sync">DB_Sync (string, optional)</h3><p>Set a default synchronization (I/O) method. Values: Extra, Full, Normal, Off. This flag affects how the internal SQLite engine do synchronization to disk, for more details about each option please refer to this section.</p><p>Default: Full</p><h3 id="inputtail-db.locking">DB.locking (*bool, optional)</h3><p>Specify that the database will be accessed only by Fluent Bit. Enabling this feature helps to increase performance when accessing the database but it restrict any external tool to query the content.</p><p>Default: true</p><h3 id="inputtail-db.journal_mode">DB.journal_mode (string, optional)</h3><p>sets the journal mode for databases (WAL). Enabling WAL provides higher performance. Note that WAL is not compatible with shared network file systems.</p><p>Default: WAL</p><h3 id="inputtail-mem_buf_limit">Mem_Buf_Limit (string, optional)</h3><p>Set a limit of memory that Tail plugin can use when appending data to the Engine. If the limit is reach, it will be paused; when the data is flushed it resumes.</p><p>Default: -</p><h3 id="inputtail-parser">Parser (string, optional)</h3><p>Specify the name of a parser to interpret the entry as a structured message.</p><p>Default: -</p><h3 id="inputtail-key">Key (string, optional)</h3><p>When a message is unstructured (no parser applied), it&rsquo;s appended as a string under the key name log. This option allows to define an alternative name for that key.</p><p>Default: log</p><h3 id="inputtail-tag">Tag (string, optional)</h3><p>Set a tag (with regex-extract fields) that will be placed on lines read.</p><p>Default: -</p><h3 id="inputtail-tag_regex">Tag_Regex (string, optional)</h3><p>Set a regex to extract fields from the file.</p><p>Default: -</p><h3 id="inputtail-multiline">Multiline (string, optional)</h3><p>If enabled, the plugin will try to discover multiline messages and use the proper parsers to compose the outgoing messages. Note that when this option is enabled the Parser option is not used.</p><p>Default: Off</p><h3 id="inputtail-multiline_flush">Multiline_Flush (string, optional)</h3><p>Wait period time in seconds to process queued multiline messages</p><p>Default: 4</p><h3 id="inputtail-parser_firstline">Parser_Firstline (string, optional)</h3><p>Name of the parser that machs the beginning of a multiline message. Note that the regular expression defined in the parser must include a group name (named capture)</p><p>Default: -</p><h3 id="inputtail-parser_n">Parser_N ([]string, optional)</h3><p>Optional-extra parser to interpret and structure multiline entries. This option can be used to define multiple parsers, e.g: Parser_1 ab1, Parser_2 ab2, Parser_N abN.</p><p>Default: -</p><h3 id="inputtail-docker_mode">Docker_Mode (string, optional)</h3><p>If enabled, the plugin will recombine split Docker log lines before passing them to any parser as configured above. This mode cannot be used at the same time as Multiline.</p><p>Default: Off</p><h3 id="inputtail-docker_mode_parser">Docker_Mode_Parser (string, optional)</h3><p>Specify an optional parser for the first line of the docker multiline mode.</p><p>Default: -</p><h3 id="inputtail-docker_mode_flush">Docker_Mode_Flush (string, optional)</h3><p>Wait period time in seconds to flush queued unfinished split lines.</p><p>Default: 4</p><h3 id="inputtail-multiline.parser">multiline.parser ([]string, optional)</h3><p>Specify one or multiple parser definitions to apply to the content. Part of the new Multiline Core support in 1.8</p><p>Default: ""</p><h2 id="filterkubernetes">FilterKubernetes</h2><p>FilterKubernetes Fluent Bit Kubernetes Filter allows to enrich your log files with Kubernetes metadata.</p><h3 id="filterkubernetes-match">Match (string, optional)</h3><p>Match filtered records (default:kube.*)</p><p>Default: kubernetes.*</p><h3 id="filterkubernetes-buffer_size">Buffer_Size (string, optional)</h3><p>Set the buffer size for HTTP client when reading responses from Kubernetes API server. The value must be according to the Unit Size specification. A value of 0 results in no limit, and the buffer will expand as-needed. Note that if pod specifications exceed the buffer limit, the API response will be discarded when retrieving metadata, and some kubernetes metadata will fail to be injected to the logs. If this value is empty we will set it &ldquo;0&rdquo;.</p><p>Default: &ldquo;0&rdquo;</p><h3 id="filterkubernetes-kube_url">Kube_URL (string, optional)</h3><p>API Server end-point (default: <code>https://kubernetes.default.svc:443</code>)</p><p>Default: <code>https://kubernetes.default.svc:443</code></p><h3 id="filterkubernetes-kube_ca_file">Kube_CA_File (string, optional)</h3><p>CA certificate file (default:/var/run/secrets/kubernetes.io/serviceaccount/ca.crt)</p><p>Default: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</p><h3 id="filterkubernetes-kube_ca_path">Kube_CA_Path (string, optional)</h3><p>Absolute path to scan for certificate files</p><p>Default: -</p><h3 id="filterkubernetes-kube_token_file">Kube_Token_File (string, optional)</h3><p>Token file (default:/var/run/secrets/kubernetes.io/serviceaccount/token)</p><p>Default: /var/run/secrets/kubernetes.io/serviceaccount/token</p><h3 id="filterkubernetes-kube_token_ttl">Kube_Token_TTL (string, optional)</h3><p>Token TTL configurable &rsquo;time to live&rsquo; for the K8s token. By default, it is set to 600 seconds. After this time, the token is reloaded from Kube_Token_File or the Kube_Token_Command. (default:&ldquo;600&rdquo;)</p><p>Default: 600</p><h3 id="filterkubernetes-kube_tag_prefix">Kube_Tag_Prefix (string, optional)</h3><p>When the source records comes from Tail input plugin, this option allows to specify what&rsquo;s the prefix used in Tail configuration. (default:kube.var.log.containers.)</p><p>Default: kubernetes.var.log.containers</p><h3 id="filterkubernetes-merge_log">Merge_Log (string, optional)</h3><p>When enabled, it checks if the log field content is a JSON string map, if so, it append the map fields as part of the log structure. (default:Off)</p><p>Default: On</p><h3 id="filterkubernetes-merge_log_key">Merge_Log_Key (string, optional)</h3><p>When Merge_Log is enabled, the filter tries to assume the log field from the incoming message is a JSON string message and make a structured representation of it at the same level of the log field in the map. Now if Merge_Log_Key is set (a string name), all the new structured fields taken from the original log content are inserted under the new key.</p><p>Default: -</p><h3 id="filterkubernetes-merge_log_trim">Merge_Log_Trim (string, optional)</h3><p>When Merge_Log is enabled, trim (remove possible \n or \r) field values.</p><p>Default: On</p><h3 id="filterkubernetes-merge_parser">Merge_Parser (string, optional)</h3><p>Optional parser name to specify how to parse the data contained in the log key. Recommended use is for developers or testing only.</p><p>Default: -</p><h3 id="filterkubernetes-keep_log">Keep_Log (string, optional)</h3><p>When Keep_Log is disabled, the log field is removed from the incoming message once it has been successfully merged (Merge_Log must be enabled as well).</p><p>Default: On</p><h3 id="filterkubernetes-tls.debug">tls.debug (string, optional)</h3><p>Debug level between 0 (nothing) and 4 (every detail).</p><p>Default: -1</p><h3 id="filterkubernetes-tls.verify">tls.verify (string, optional)</h3><p>When enabled, turns on certificate validation when connecting to the Kubernetes API server.</p><p>Default: On</p><h3 id="filterkubernetes-use_journal">Use_Journal (string, optional)</h3><p>When enabled, the filter reads logs coming in Journald format.</p><p>Default: Off</p><h3 id="filterkubernetes-cache_use_docker_id">Cache_Use_Docker_Id (string, optional)</h3><p>When enabled, metadata will be fetched from K8s when docker_id is changed.</p><p>Default: Off</p><h3 id="filterkubernetes-regex_parser">Regex_Parser (string, optional)</h3><p>Set an alternative Parser to process record Tag and extract pod_name, namespace_name, container_name and docker_id. The parser must be registered in a parsers file (refer to parser filter-kube-test as an example).</p><p>Default: -</p><h3 id="filterkubernetes-k8s-logging.parser">K8S-Logging.Parser (string, optional)</h3><p>Allow Kubernetes Pods to suggest a pre-defined Parser (read more about it in Kubernetes Annotations section)</p><p>Default: Off</p><h3 id="filterkubernetes-k8s-logging.exclude">K8S-Logging.Exclude (string, optional)</h3><p>Allow Kubernetes Pods to exclude their logs from the log processor (read more about it in Kubernetes Annotations section).</p><p>Default: Off</p><h3 id="filterkubernetes-labels">Labels (string, optional)</h3><p>Include Kubernetes resource labels in the extra metadata.</p><p>Default: On</p><h3 id="filterkubernetes-annotations">Annotations (string, optional)</h3><p>Include Kubernetes resource annotations in the extra metadata.</p><p>Default: On</p><h3 id="filterkubernetes-kube_meta_preload_cache_dir">Kube_meta_preload_cache_dir (string, optional)</h3><p>If set, Kubernetes meta-data can be cached/pre-loaded from files in JSON format in this directory, named as namespace-pod.meta</p><p>Default: -</p><h3 id="filterkubernetes-dummy_meta">Dummy_Meta (string, optional)</h3><p>If set, use dummy-meta data (for test/dev purposes)</p><p>Default: Off</p><h3 id="filterkubernetes-dns_retries">DNS_Retries (string, optional)</h3><p>DNS lookup retries N times until the network start working</p><p>Default: 6</p><h3 id="filterkubernetes-dns_wait_time">DNS_Wait_Time (string, optional)</h3><p>DNS lookup interval between network status checks</p><p>Default: 30</p><h3 id="filterkubernetes-use_kubelet">Use_Kubelet (string, optional)</h3><p>This is an optional feature flag to get metadata information from kubelet instead of calling Kube Server API to enhance the log.</p><p>Default: Off</p><h3 id="filterkubernetes-kubelet_port">Kubelet_Port (string, optional)</h3><p>kubelet port using for HTTP request, this only works when Use_Kubelet set to On</p><p>Default: 10250</p><h3 id="filterkubernetes-kube_meta_cache_ttl">Kube_Meta_Cache_TTL (string, optional)</h3><p>Configurable TTL for K8s cached metadata. By default, it is set to 0 which means TTL for cache entries is disabled and cache entries are evicted at random when capacity is reached. In order to enable this option, you should set the number to a time interval. For example, set this value to 60 or 60s and cache entries which have been created more than 60s will be evicted.</p><p>Default: 0</p><h2 id="filteraws">FilterAws</h2><p>FilterAws The AWS Filter Enriches logs with AWS Metadata.</p><h3 id="filteraws-imds_version">imds_version (string, optional)</h3><p>Specify which version of the instance metadata service to use. Valid values are &lsquo;v1&rsquo; or &lsquo;v2&rsquo; (default).</p><p>Default: v2</p><h3 id="filteraws-az">az (*bool, optional)</h3><p>The availability zone (default:true).</p><p>Default: true</p><h3 id="filteraws-ec2_instance_id">ec2_instance_id (*bool, optional)</h3><p>The EC2 instance ID. (default:true)</p><p>Default: true</p><h3 id="filteraws-ec2_instance_type">ec2_instance_type (*bool, optional)</h3><p>The EC2 instance type. (default:false)</p><p>Default: false</p><h3 id="filteraws-private_ip">private_ip (*bool, optional)</h3><p>The EC2 instance private ip. (default:false)</p><p>Default: false</p><h3 id="filteraws-ami_id">ami_id (*bool, optional)</h3><p>The EC2 instance image id. (default:false)</p><p>Default: false</p><h3 id="filteraws-account_id">account_id (*bool, optional)</h3><p>The account ID for current EC2 instance. (default:false)</p><p>Default: false</p><h3 id="filteraws-hostname">hostname (*bool, optional)</h3><p>The hostname for current EC2 instance. (default:false)</p><p>Default: false</p><h3 id="filteraws-vpc_id">vpc_id (*bool, optional)</h3><p>The VPC ID for current EC2 instance. (default:false)</p><p>Default: false</p><h3 id="filteraws-match">Match (string, optional)</h3><p>Match filtered records (default:*)</p><p>Default: *</p><h2 id="filtermodify">FilterModify</h2><p>FilterModify The Modify Filter plugin allows you to change records using rules and conditions.</p><h3 id="filtermodify-rules">rules ([]FilterModifyRule, optional)</h3><p>FluentbitAgent Filter Modification Rule</p><p>Default: -</p><h3 id="filtermodify-conditions">conditions ([]FilterModifyCondition, optional)</h3><p>FluentbitAgent Filter Modification Condition</p><p>Default: -</p><h2 id="filtermodifyrule">FilterModifyRule</h2><p>FilterModifyRule The Modify Filter plugin allows you to change records using rules and conditions.</p><h3 id="filtermodifyrule-set">Set (*FilterKeyValue, optional)</h3><p>Add a key/value pair with key KEY and value VALUE. If KEY already exists, this field is overwritten</p><p>Default: -</p><h3 id="filtermodifyrule-add">Add (*FilterKeyValue, optional)</h3><p>Add a key/value pair with key KEY and value VALUE if KEY does not exist</p><p>Default: -</p><h3 id="filtermodifyrule-remove">Remove (*FilterKey, optional)</h3><p>Remove a key/value pair with key KEY if it exists</p><p>Default: -</p><h3 id="filtermodifyrule-remove_wildcard">Remove_wildcard (*FilterKey, optional)</h3><p>Remove all key/value pairs with key matching wildcard KEY</p><p>Default: -</p><h3 id="filtermodifyrule-remove_regex">Remove_regex (*FilterKey, optional)</h3><p>Remove all key/value pairs with key matching regexp KEY</p><p>Default: -</p><h3 id="filtermodifyrule-rename">Rename (*FilterKeyValue, optional)</h3><p>Rename a key/value pair with key KEY to RENAMED_KEY if KEY exists AND RENAMED_KEY does not exist</p><p>Default: -</p><h3 id="filtermodifyrule-hard_rename">Hard_rename (*FilterKeyValue, optional)</h3><p>Rename a key/value pair with key KEY to RENAMED_KEY if KEY exists. If RENAMED_KEY already exists, this field is overwritten</p><p>Default: -</p><h3 id="filtermodifyrule-copy">Copy (*FilterKeyValue, optional)</h3><p>Copy a key/value pair with key KEY to COPIED_KEY if KEY exists AND COPIED_KEY does not exist</p><p>Default: -</p><h3 id="filtermodifyrule-hard_copy">Hard_copy (*FilterKeyValue, optional)</h3><p>Copy a key/value pair with key KEY to COPIED_KEY if KEY exists. If COPIED_KEY already exists, this field is overwritten</p><p>Default: -</p><h2 id="filtermodifycondition">FilterModifyCondition</h2><p>FilterModifyCondition The Modify Filter plugin allows you to change records using rules and conditions.</p><h3 id="filtermodifycondition-key_exists">Key_exists (*FilterKey, optional)</h3><p>Is true if KEY exists</p><p>Default: -</p><h3 id="filtermodifycondition-key_does_not_exist">Key_does_not_exist (*FilterKeyValue, optional)</h3><p>Is true if KEY does not exist</p><p>Default: -</p><h3 id="filtermodifycondition-a_key_matches">A_key_matches (*FilterKey, optional)</h3><p>Is true if a key matches regex KEY</p><p>Default: -</p><h3 id="filtermodifycondition-no_key_matches">No_key_matches (*FilterKey, optional)</h3><p>Is true if no key matches regex KEY</p><p>Default: -</p><h3 id="filtermodifycondition-key_value_equals">Key_value_equals (*FilterKeyValue, optional)</h3><p>Is true if KEY exists and its value is VALUE</p><p>Default: -</p><h3 id="filtermodifycondition-key_value_does_not_equal">Key_value_does_not_equal (*FilterKeyValue, optional)</h3><p>Is true if KEY exists and its value is not VALUE</p><p>Default: -</p><h3 id="filtermodifycondition-key_value_matches">Key_value_matches (*FilterKeyValue, optional)</h3><p>Is true if key KEY exists and its value matches VALUE</p><p>Default: -</p><h3 id="filtermodifycondition-key_value_does_not_match">Key_value_does_not_match (*FilterKeyValue, optional)</h3><p>Is true if key KEY exists and its value does not match VALUE</p><p>Default: -</p><h3 id="filtermodifycondition-matching_keys_have_matching_values">Matching_keys_have_matching_values (*FilterKeyValue, optional)</h3><p>Is true if all keys matching KEY have values that match VALUE</p><p>Default: -</p><h3 id="filtermodifycondition-matching_keys_do_not_have_matching_values">Matching_keys_do_not_have_matching_values (*FilterKeyValue, optional)</h3><p>Is true if all keys matching KEY have values that do not match VALUE</p><p>Default: -</p><h2 id="operation">Operation</h2><p>Operation Doc stub</p><h3 id="operation-op">Op (string, optional)</h3><p>Default: -</p><h3 id="operation-key">Key (string, optional)</h3><p>Default: -</p><h3 id="operation-value">Value (string, optional)</h3><p>Default: -</p><h2 id="filterkey">FilterKey</h2><h3 id="filterkey-key">key (string, optional)</h3><p>Default: -</p><h2 id="filterkeyvalue">FilterKeyValue</h2><h3 id="filterkeyvalue-key">key (string, optional)</h3><p>Default: -</p><h3 id="filterkeyvalue-value">value (string, optional)</h3><p>Default: -</p><h2 id="volumemount">VolumeMount</h2><p>VolumeMount defines source and destination folders of a hostPath type pod mount</p><h3 id="volumemount-source">source (string, required)</h3><p>Source folder</p><p>Default: -</p><h3 id="volumemount-destination">destination (string, required)</h3><p>Destination Folder</p><p>Default: -</p><h3 id="volumemount-readonly">readOnly (*bool, optional)</h3><p>Mount Mode</p><p>Default: -</p><h2 id="forwardoptions">ForwardOptions</h2><p>ForwardOptions defines custom forward output plugin options, see <a href="https://docs.fluentbit.io/manual/pipeline/outputs/forward">https://docs.fluentbit.io/manual/pipeline/outputs/forward</a></p><h3 id="forwardoptions-time_as_integer">Time_as_Integer (bool, optional)</h3><p>Default: -</p><h3 id="forwardoptions-send_options">Send_options (bool, optional)</h3><p>Default: -</p><h3 id="forwardoptions-require_ack_response">Require_ack_response (bool, optional)</h3><p>Default: -</p><h3 id="forwardoptions-tag">Tag (string, optional)</h3><p>Default: -</p><h3 id="forwardoptions-retry_limit">Retry_Limit (string, optional)</h3><p>Default: -</p><h3 id="forwardoptions-storage.total_limit_size">storage.total_limit_size (string, optional)</h3><p><code>storage.total_limit_size</code> Limit the maximum number of Chunks in the filesystem for the current output logical destination.</p><p>Default: -</p><h2 id="fluentbitnameprovider">FluentbitNameProvider</h2><p>Defines a FluentbitNameProvider</p><h3 id="fluentbitnameprovider-loggingref">LoggingRef (*Logging, optional)</h3><p>Default: -</p><h3 id="fluentbitnameprovider-fluentbit">fluentbit (*FluentbitAgent, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-19e14e51b926eaba460288b329a9c8ce">7.1.6 - FluentdSpec</h1><h2 id="fluentdspec">FluentdSpec</h2><p>FluentdSpec defines the desired state of Fluentd</p><h3 id="fluentdspec-statefulsetannotations">statefulsetAnnotations (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-annotations">annotations (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-configcheckannotations">configCheckAnnotations (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-labels">labels (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-envvars">envVars ([]corev1.EnvVar, optional)</h3><p>Default: -</p><h3 id="fluentdspec-tls">tls (FluentdTLS, optional)</h3><p>Default: -</p><h3 id="fluentdspec-image">image (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentdspec-disablepvc">disablePvc (bool, optional)</h3><p>Default: -</p><h3 id="fluentdspec-bufferstoragevolume">bufferStorageVolume (volume.KubernetesVolume, optional)</h3><p>BufferStorageVolume is by default configured as PVC using FluentdPvcSpec <a href="https://github.com/cisco-open/operator-tools/tree/master/docs/types">volume.KubernetesVolume</a></p><p>Default: -</p><h3 id="fluentdspec-extravolumes">extraVolumes ([]ExtraVolume, optional)</h3><p>Default: -</p><h3 id="fluentdspec-fluentdpvcspec">fluentdPvcSpec (*volume.KubernetesVolume, optional)</h3><p>Deprecated, use bufferStorageVolume</p><p>Default: -</p><h3 id="fluentdspec-volumemountchmod">volumeMountChmod (bool, optional)</h3><p>Default: -</p><h3 id="fluentdspec-volumemodimage">volumeModImage (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentdspec-configreloaderimage">configReloaderImage (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentdspec-resources">resources (corev1.ResourceRequirements, optional)</h3><p>Default: -</p><h3 id="fluentdspec-configcheckresources">configCheckResources (corev1.ResourceRequirements, optional)</h3><p>Default: -</p><h3 id="fluentdspec-configreloaderresources">configReloaderResources (corev1.ResourceRequirements, optional)</h3><p>Default: -</p><h3 id="fluentdspec-livenessprobe">livenessProbe (*corev1.Probe, optional)</h3><p>Default: -</p><h3 id="fluentdspec-livenessdefaultcheck">livenessDefaultCheck (bool, optional)</h3><p>Default: -</p><h3 id="fluentdspec-readinessprobe">readinessProbe (*corev1.Probe, optional)</h3><p>Default: -</p><h3 id="fluentdspec-readinessdefaultcheck">readinessDefaultCheck (ReadinessDefaultCheck, optional)</h3><p>Default: -</p><h3 id="fluentdspec-port">port (int32, optional)</h3><p>Default: -</p><h3 id="fluentdspec-tolerations">tolerations ([]corev1.Toleration, optional)</h3><p>Default: -</p><h3 id="fluentdspec-nodeselector">nodeSelector (map[string]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-affinity">affinity (*corev1.Affinity, optional)</h3><p>Default: -</p><h3 id="fluentdspec-topologyspreadconstraints">topologySpreadConstraints ([]corev1.TopologySpreadConstraint, optional)</h3><p>Default: -</p><h3 id="fluentdspec-metrics">metrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="fluentdspec-buffervolumemetrics">bufferVolumeMetrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="fluentdspec-buffervolumeimage">bufferVolumeImage (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentdspec-buffervolumeargs">bufferVolumeArgs ([]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-security">security (*Security, optional)</h3><p>Default: -</p><h3 id="fluentdspec-scaling">scaling (*FluentdScaling, optional)</h3><p>Default: -</p><h3 id="fluentdspec-workers">workers (int32, optional)</h3><p>Default: -</p><h3 id="fluentdspec-rootdir">rootDir (string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-loglevel">logLevel (string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-ignoresameloginterval">ignoreSameLogInterval (string, optional)</h3><p>Ignore same log lines <a href="https://docs.fluentd.org/deployment/logging#ignore_same_log_interval">more info</a></p><p>Default: -</p><h3 id="fluentdspec-ignorerepeatedloginterval">ignoreRepeatedLogInterval (string, optional)</h3><p>Ignore repeated log lines <a href="https://docs.fluentd.org/deployment/logging#ignore_repeated_log_interval">more info</a></p><p>Default: -</p><h3 id="fluentdspec-enablemsgpacktimesupport">enableMsgpackTimeSupport (bool, optional)</h3><p>Allows Time object in buffer&rsquo;s MessagePack serde <a href="https://docs.fluentd.org/deployment/system-config#enable_msgpack_time_support">more info</a></p><p>Default: -</p><h3 id="fluentdspec-podpriorityclassname">podPriorityClassName (string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-fluentlogdestination">fluentLogDestination (string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-fluentoutlogrotate">fluentOutLogrotate (*FluentOutLogrotate, optional)</h3><p>FluentOutLogrotate sends fluent&rsquo;s stdout to file and rotates it</p><p>Default: -</p><h3 id="fluentdspec-forwardinputconfig">forwardInputConfig (*input.ForwardInputConfig, optional)</h3><p>Default: -</p><h3 id="fluentdspec-serviceaccount">serviceAccount (*typeoverride.ServiceAccount, optional)</h3><p>Default: -</p><h3 id="fluentdspec-dnspolicy">dnsPolicy (corev1.DNSPolicy, optional)</h3><p>Default: -</p><h3 id="fluentdspec-dnsconfig">dnsConfig (*corev1.PodDNSConfig, optional)</h3><p>Default: -</p><h3 id="fluentdspec-extraargs">extraArgs ([]string, optional)</h3><p>Default: -</p><h3 id="fluentdspec-compressconfigfile">compressConfigFile (bool, optional)</h3><p>Default: -</p><h2 id="fluentoutlogrotate">FluentOutLogrotate</h2><h3 id="fluentoutlogrotate-enabled">enabled (bool, required)</h3><p>Default: -</p><h3 id="fluentoutlogrotate-path">path (string, optional)</h3><p>Default: -</p><h3 id="fluentoutlogrotate-age">age (string, optional)</h3><p>Default: -</p><h3 id="fluentoutlogrotate-size">size (string, optional)</h3><p>Default: -</p><h2 id="extravolume">ExtraVolume</h2><p>ExtraVolume defines the fluentd extra volumes</p><h3 id="extravolume-volumename">volumeName (string, optional)</h3><p>Default: -</p><h3 id="extravolume-path">path (string, optional)</h3><p>Default: -</p><h3 id="extravolume-containername">containerName (string, optional)</h3><p>Default: -</p><h3 id="extravolume-volume">volume (*volume.KubernetesVolume, optional)</h3><p>Default: -</p><h2 id="fluentdscaling">FluentdScaling</h2><p>FluentdScaling enables configuring the scaling behaviour of the fluentd statefulset</p><h3 id="fluentdscaling-replicas">replicas (int, optional)</h3><p>Default: -</p><h3 id="fluentdscaling-podmanagementpolicy">podManagementPolicy (string, optional)</h3><p>Default: -</p><h3 id="fluentdscaling-drain">drain (FluentdDrainConfig, optional)</h3><p>Default: -</p><h2 id="fluentdtls">FluentdTLS</h2><p>FluentdTLS defines the TLS configs</p><h3 id="fluentdtls-enabled">enabled (bool, required)</h3><p>Default: -</p><h3 id="fluentdtls-secretname">secretName (string, optional)</h3><p>Default: -</p><h3 id="fluentdtls-sharedkey">sharedKey (string, optional)</h3><p>Default: -</p><h2 id="fluentddrainconfig">FluentdDrainConfig</h2><p>FluentdDrainConfig enables configuring the drain behavior when scaling down the fluentd statefulset</p><h3 id="fluentddrainconfig-enabled">enabled (bool, optional)</h3><p>Should buffers on persistent volumes left after scaling down the statefulset be drained</p><p>Default: -</p><h3 id="fluentddrainconfig-annotations">annotations (map[string]string, optional)</h3><p>Container image to use for the drain watch sidecar</p><p>Default: -</p><h3 id="fluentddrainconfig-deletevolume">deleteVolume (bool, optional)</h3><p>Should persistent volume claims be deleted after draining is done</p><p>Default: -</p><h3 id="fluentddrainconfig-image">image (ImageSpec, optional)</h3><p>Default: -</p><h3 id="fluentddrainconfig-pauseimage">pauseImage (ImageSpec, optional)</h3><p>Container image to use for the fluentd placeholder pod</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d295f1a0ca0a93108b789e0cfa709b32">7.1.7 - LoggingSpec</h1><h2 id="loggingspec">LoggingSpec</h2><p>LoggingSpec defines the desired state of Logging</p><h3 id="loggingspec-loggingref">loggingRef (string, optional)</h3><p>Reference to the logging system. Each of the <code>loggingRef</code>s can manage a fluentbit daemonset and a fluentd statefulset.</p><p>Default: -</p><h3 id="loggingspec-flowconfigcheckdisabled">flowConfigCheckDisabled (bool, optional)</h3><p>Disable configuration check before applying new fluentd configuration.</p><p>Default: -</p><h3 id="loggingspec-skipinvalidresources">skipInvalidResources (bool, optional)</h3><p>Whether to skip invalid Flow and ClusterFlow resources</p><p>Default: -</p><h3 id="loggingspec-flowconfigoverride">flowConfigOverride (string, optional)</h3><p>Override generated config. This is a <em>raw</em> configuration string for troubleshooting purposes.</p><p>Default: -</p><h3 id="loggingspec-fluentbit">fluentbit (*FluentbitSpec, optional)</h3><p>FluentbitAgent daemonset configuration. Deprecated, will be removed with next major version Migrate to the standalone NodeAgent resource</p><p>Default: -</p><h3 id="loggingspec-fluentd">fluentd (*FluentdSpec, optional)</h3><p>Fluentd statefulset configuration</p><p>Default: -</p><h3 id="loggingspec-syslogng">syslogNG (*SyslogNGSpec, optional)</h3><p>Syslog-NG statefulset configuration</p><p>Default: -</p><h3 id="loggingspec-defaultflow">defaultFlow (*DefaultFlowSpec, optional)</h3><p>Default flow for unmatched logs. This Flow configuration collects all logs that didn&rsquo;t matched any other Flow.</p><p>Default: -</p><h3 id="loggingspec-erroroutputref">errorOutputRef (string, optional)</h3><p>GlobalOutput name to flush ERROR events to</p><p>Default: -</p><h3 id="loggingspec-globalfilters">globalFilters ([]Filter, optional)</h3><p>Global filters to apply on logs before any match or filter mechanism.</p><p>Default: -</p><h3 id="loggingspec-watchnamespaces">watchNamespaces ([]string, optional)</h3><p>Limit namespaces to watch Flow and Output custom resources.</p><p>Default: -</p><h3 id="loggingspec-clusterdomain">clusterDomain (*string, optional)</h3><p>Cluster domain name to be used when templating URLs to services .</p><p>Default: &ldquo;cluster.local&rdquo;</p><h3 id="loggingspec-controlnamespace">controlNamespace (string, required)</h3><p>Namespace for cluster wide configuration resources like ClusterFlow and ClusterOutput. This should be a protected namespace from regular users. Resources like fluentbit and fluentd will run in this namespace as well.</p><p>Default: -</p><h3 id="loggingspec-allowclusterresourcesfromallnamespaces">allowClusterResourcesFromAllNamespaces (bool, optional)</h3><p>Allow configuration of cluster resources from any namespace. Mutually exclusive with ControlNamespace restriction of Cluster resources</p><p>Default: -</p><h3 id="loggingspec-nodeagents">nodeAgents ([]*InlineNodeAgent, optional)</h3><p>InlineNodeAgent Configuration Deprecated, will be removed with next major version</p><p>Default: -</p><h3 id="loggingspec-enablerecreateworkloadonimmutablefieldchange">enableRecreateWorkloadOnImmutableFieldChange (bool, optional)</h3><p>EnableRecreateWorkloadOnImmutableFieldChange enables the operator to recreate the fluentbit daemonset and the fluentd statefulset (and possibly other resource in the future) in case there is a change in an immutable field that otherwise couldn&rsquo;t be managed with a simple update.</p><p>Default: -</p><h2 id="loggingstatus">LoggingStatus</h2><p>LoggingStatus defines the observed state of Logging</p><h3 id="loggingstatus-configcheckresults">configCheckResults (map[string]bool, optional)</h3><p>Default: -</p><h3 id="loggingstatus-problems">problems ([]string, optional)</h3><p>Default: -</p><h2 id="logging">Logging</h2><p>Logging is the Schema for the loggings API</p><h3 id="logging-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="logging-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="logging-spec">spec (LoggingSpec, optional)</h3><p>Default: -</p><h3 id="logging-status">status (LoggingStatus, optional)</h3><p>Default: -</p><h2 id="logginglist">LoggingList</h2><p>LoggingList contains a list of Logging</p><h3 id="logginglist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="logginglist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="logginglist-items">items ([]Logging, required)</h3><p>Default: -</p><h2 id="defaultflowspec">DefaultFlowSpec</h2><p>DefaultFlowSpec is a Flow for logs that did not match any other Flow</p><h3 id="defaultflowspec-filters">filters ([]Filter, optional)</h3><p>Default: -</p><h3 id="defaultflowspec-outputrefs">outputRefs ([]string, optional)</h3><p>Deprecated</p><p>Default: -</p><h3 id="defaultflowspec-globaloutputrefs">globalOutputRefs ([]string, optional)</h3><p>Default: -</p><h3 id="defaultflowspec-flowlabel">flowLabel (string, optional)</h3><p>Default: -</p><h3 id="defaultflowspec-includelabelinrouter">includeLabelInRouter (*bool, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2c2339470c0f0e05b2453d914e401e3a">7.1.8 - NodeAgent</h1><h2 id="nodeagent">NodeAgent</h2><p>NodeAgent</p><h3 id="nodeagent-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="nodeagent-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="nodeagent-spec">spec (NodeAgentSpec, optional)</h3><p>Default: -</p><h3 id="nodeagent-status">status (NodeAgentStatus, optional)</h3><p>Default: -</p><h2 id="nodeagentspec">NodeAgentSpec</h2><p>NodeAgentSpec</p><h3 id="nodeagentspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="nodeagentspec-">(NodeAgentConfig, required)</h3><p>InlineNodeAgent</p><p>Default: -</p><h2 id="nodeagentconfig">NodeAgentConfig</h2><h3 id="nodeagentconfig-profile">profile (string, optional)</h3><p>Default: -</p><h3 id="nodeagentconfig-metadata">metadata (types.MetaBase, optional)</h3><p>Default: -</p><h3 id="nodeagentconfig-nodeagentfluentbit">nodeAgentFluentbit (*NodeAgentFluentbit, optional)</h3><p>Default: -</p><h2 id="nodeagentstatus">NodeAgentStatus</h2><p>NodeAgentStatus</p><h2 id="nodeagentlist">NodeAgentList</h2><p>NodeAgentList</p><h3 id="nodeagentlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="nodeagentlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="nodeagentlist-items">items ([]NodeAgent, required)</h3><p>Default: -</p><h2 id="inlinenodeagent">InlineNodeAgent</h2><p>InlineNodeAgent
@deprecated, replaced by NodeAgent</p><h3 id="inlinenodeagent-name">name (string, optional)</h3><p>InlineNodeAgent unique name.</p><p>Default: -</p><h3 id="inlinenodeagent-">(NodeAgentConfig, required)</h3><p>Default: -</p><h2 id="nodeagentfluentbit">NodeAgentFluentbit</h2><h3 id="nodeagentfluentbit-enabled">enabled (*bool, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-daemonset">daemonSet (*typeoverride.DaemonSet, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-serviceaccount">serviceAccount (*typeoverride.ServiceAccount, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-tls">tls (*FluentbitTLS, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-targethost">targetHost (string, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-targetport">targetPort (int32, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-flush">flush (int32, optional)</h3><p>Set the flush time in seconds.nanoseconds. The engine loop uses a Flush timeout to define when is required to flush the records ingested by input plugins through the defined output plugins. (default: 1)</p><p>Default: 1</p><h3 id="nodeagentfluentbit-grace">grace (int32, optional)</h3><p>Set the grace time in seconds as Integer value. The engine loop uses a Grace timeout to define wait time on exit (default: 5)</p><p>Default: 5</p><h3 id="nodeagentfluentbit-loglevel">logLevel (string, optional)</h3><p>Set the logging verbosity level. Allowed values are: error, warn, info, debug and trace. Values are accumulative, e.g: if &lsquo;debug&rsquo; is set, it will include error, warning, info and debug. Note that trace mode is only available if Fluent Bit was built with the WITH_TRACE option enabled. (default: info)</p><p>Default: info</p><h3 id="nodeagentfluentbit-corostacksize">coroStackSize (int32, optional)</h3><p>Set the coroutines stack size in bytes. The value must be greater than the page size of the running system. Don&rsquo;t set too small value (say 4096), or coroutine threads can overrun the stack buffer. Do not change the default value of this parameter unless you know what you are doing. (default: 24576)</p><p>Default: 24576</p><h3 id="nodeagentfluentbit-metrics">metrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-metricsservice">metricsService (*typeoverride.Service, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-security">security (*Security, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-positiondb">positiondb (volume.KubernetesVolume, optional)</h3><p><a href="https://github.com/cisco-open/operator-tools/tree/master/docs/types">volume.KubernetesVolume</a></p><p>Default: -</p><h3 id="nodeagentfluentbit-containerspath">containersPath (string, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-varlogspath">varLogsPath (string, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-extravolumemounts">extraVolumeMounts ([]*VolumeMount, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-inputtail">inputTail (InputTail, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-filteraws">filterAws (*FilterAws, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-filterkubernetes">filterKubernetes (FilterKubernetes, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-disablekubernetesfilter">disableKubernetesFilter (*bool, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-bufferstorage">bufferStorage (BufferStorage, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-bufferstoragevolume">bufferStorageVolume (volume.KubernetesVolume, optional)</h3><p><a href="https://github.com/cisco-open/operator-tools/tree/master/docs/types">volume.KubernetesVolume</a></p><p>Default: -</p><h3 id="nodeagentfluentbit-customconfigsecret">customConfigSecret (string, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-podpriorityclassname">podPriorityClassName (string, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-livenessdefaultcheck">livenessDefaultCheck (*bool, optional)</h3><p>Default: true</p><h3 id="nodeagentfluentbit-network">network (*FluentbitNetwork, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-forwardoptions">forwardOptions (*ForwardOptions, optional)</h3><p>Default: -</p><h3 id="nodeagentfluentbit-enableupstream">enableUpstream (*bool, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-8718fca65b6b82a0865b8f450c52a288">7.1.9 - OutputSpec</h1><h2 id="outputspec">OutputSpec</h2><p>OutputSpec defines the desired state of Output</p><h3 id="outputspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="outputspec-s3">s3 (*output.S3OutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-azurestorage">azurestorage (*output.AzureStorage, optional)</h3><p>Default: -</p><h3 id="outputspec-gcs">gcs (*output.GCSOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-oss">oss (*output.OSSOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-elasticsearch">elasticsearch (*output.ElasticsearchOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-opensearch">opensearch (*output.OpenSearchOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-logz">logz (*output.LogZOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-loki">loki (*output.LokiOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-sumologic">sumologic (*output.SumologicOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-datadog">datadog (*output.DatadogOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-forward">forward (*output.ForwardOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-file">file (*output.FileOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-nullout">nullout (*output.NullOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-kafka">kafka (*output.KafkaOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-cloudwatch">cloudwatch (*output.CloudWatchOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-kinesisstream">kinesisStream (*output.KinesisStreamOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-logdna">logdna (*output.LogDNAOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-newrelic">newrelic (*output.NewRelicOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-splunkhec">splunkHec (*output.SplunkHecOutput, optional)</h3><p>Default: -</p><h3 id="outputspec-http">http (*output.HTTPOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-awselasticsearch">awsElasticsearch (*output.AwsElasticsearchOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-redis">redis (*output.RedisOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-syslog">syslog (*output.SyslogOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-gelf">gelf (*output.GELFOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-sqs">sqs (*output.SQSOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-mattermost">mattermost (*output.MattermostOutputConfig, optional)</h3><p>Default: -</p><h3 id="outputspec-relabel">relabel (*output.RelabelOutputConfig, optional)</h3><p>Default: -</p><h2 id="outputstatus">OutputStatus</h2><p>OutputStatus defines the observed state of Output</p><h3 id="outputstatus-active">active (*bool, optional)</h3><p>Default: -</p><h3 id="outputstatus-problems">problems ([]string, optional)</h3><p>Default: -</p><h3 id="outputstatus-problemscount">problemsCount (int, optional)</h3><p>Default: -</p><h2 id="output">Output</h2><p>Output is the Schema for the outputs API</p><h3 id="output-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="output-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="output-spec">spec (OutputSpec, optional)</h3><p>Default: -</p><h3 id="output-status">status (OutputStatus, optional)</h3><p>Default: -</p><h2 id="outputlist">OutputList</h2><p>OutputList contains a list of Output</p><h3 id="outputlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="outputlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="outputlist-items">items ([]Output, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9d8ed361c6ac392becad14253fc27fd4">7.1.10 - SyslogNGClusterFlow</h1><h2 id="syslogngclusterflow">SyslogNGClusterFlow</h2><p>SyslogNGClusterFlow is the Schema for the syslog-ng clusterflows API</p><h3 id="syslogngclusterflow-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngclusterflow-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflow-spec">spec (SyslogNGClusterFlowSpec, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflow-status">status (SyslogNGFlowStatus, optional)</h3><p>Default: -</p><h2 id="syslogngclusterflowspec">SyslogNGClusterFlowSpec</h2><p>SyslogNGClusterFlowSpec is the Kubernetes spec for Flows</p><h3 id="syslogngclusterflowspec-match">match (*SyslogNGMatch, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflowspec-filters">filters ([]SyslogNGFilter, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflowspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflowspec-globaloutputrefs">globalOutputRefs ([]string, optional)</h3><p>Default: -</p><h2 id="syslogngclusterflowlist">SyslogNGClusterFlowList</h2><p>SyslogNGClusterFlowList contains a list of SyslogNGClusterFlow</p><h3 id="syslogngclusterflowlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngclusterflowlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="syslogngclusterflowlist-items">items ([]SyslogNGClusterFlow, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-8b95a382d4b401c66683fec0554bf659">7.1.11 - SyslogNGClusterOutput</h1><h2 id="syslogngclusteroutput">SyslogNGClusterOutput</h2><p>SyslogNGClusterOutput is the Schema for the syslog-ng clusteroutputs API</p><h3 id="syslogngclusteroutput-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngclusteroutput-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="syslogngclusteroutput-spec">spec (SyslogNGClusterOutputSpec, required)</h3><p>Default: -</p><h3 id="syslogngclusteroutput-status">status (SyslogNGOutputStatus, optional)</h3><p>Default: -</p><h2 id="syslogngclusteroutputspec">SyslogNGClusterOutputSpec</h2><p>SyslogNGClusterOutputSpec contains Kubernetes spec for SyslogNGClusterOutput</p><h3 id="syslogngclusteroutputspec-">(SyslogNGOutputSpec, required)</h3><p>Default: -</p><h3 id="syslogngclusteroutputspec-enablednamespaces">enabledNamespaces ([]string, optional)</h3><p>Default: -</p><h2 id="syslogngclusteroutputlist">SyslogNGClusterOutputList</h2><p>SyslogNGClusterOutputList contains a list of SyslogNGClusterOutput</p><h3 id="syslogngclusteroutputlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngclusteroutputlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="syslogngclusteroutputlist-items">items ([]SyslogNGClusterOutput, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-de7a2ad119020fdf1efa724f2230d938">7.1.12 - SyslogNGFlowSpec</h1><h2 id="syslogngflowspec">SyslogNGFlowSpec</h2><p>SyslogNGFlowSpec is the Kubernetes spec for SyslogNGFlows</p><h3 id="syslogngflowspec-match">match (*SyslogNGMatch, optional)</h3><p>Default: -</p><h3 id="syslogngflowspec-filters">filters ([]SyslogNGFilter, optional)</h3><p>Default: -</p><h3 id="syslogngflowspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="syslogngflowspec-globaloutputrefs">globalOutputRefs ([]string, optional)</h3><p>Default: -</p><h3 id="syslogngflowspec-localoutputrefs">localOutputRefs ([]string, optional)</h3><p>Default: -</p><h2 id="syslogngfilter">SyslogNGFilter</h2><p>Filter definition for SyslogNGFlowSpec</p><h3 id="syslogngfilter-id">id (string, optional)</h3><p>Default: -</p><h3 id="syslogngfilter-match">match (*filter.MatchConfig, optional)</h3><p>Default: -</p><h3 id="syslogngfilter-rewrite">rewrite ([]filter.RewriteConfig, optional)</h3><p>Default: -</p><h3 id="syslogngfilter-parser">parser (*filter.ParserConfig, optional)</h3><p>Default: -</p><h2 id="syslogngflow">SyslogNGFlow</h2><p>Flow Kubernetes object</p><h3 id="syslogngflow-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngflow-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="syslogngflow-spec">spec (SyslogNGFlowSpec, optional)</h3><p>Default: -</p><h3 id="syslogngflow-status">status (SyslogNGFlowStatus, optional)</h3><p>Default: -</p><h2 id="syslogngflowlist">SyslogNGFlowList</h2><p>FlowList contains a list of Flow</p><h3 id="syslogngflowlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngflowlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="syslogngflowlist-items">items ([]SyslogNGFlow, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-eea1110e47d17724202c6751b18af627">7.1.13 - SyslogNGOutputSpec</h1><h2 id="syslogngoutputspec">SyslogNGOutputSpec</h2><p>SyslogNGOutputSpec defines the desired state of SyslogNGOutput</p><h3 id="syslogngoutputspec-loggingref">loggingRef (string, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-loggly">loggly (*output.Loggly, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-syslog">syslog (*output.SyslogOutput, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-file">file (*output.FileOutput, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-mqtt">mqtt (*output.MQTT, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-sumologic-http">sumologic-http (*output.SumologicHTTPOutput, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-sumologic-syslog">sumologic-syslog (*output.SumologicSyslogOutput, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-http">http (*output.HTTPOutput, optional)</h3><p>Default: -</p><h3 id="syslogngoutputspec-logscale">logscale (*output.LogScaleOutput, optional)</h3><p>Default: -</p><h2 id="syslogngoutput">SyslogNGOutput</h2><p>SyslogNGOutput is the Schema for the syslog-ng outputs API</p><h3 id="syslogngoutput-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngoutput-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="syslogngoutput-spec">spec (SyslogNGOutputSpec, optional)</h3><p>Default: -</p><h3 id="syslogngoutput-status">status (SyslogNGOutputStatus, optional)</h3><p>Default: -</p><h2 id="syslogngoutputlist">SyslogNGOutputList</h2><p>SyslogNGOutputList contains a list of SyslogNGOutput</p><h3 id="syslogngoutputlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="syslogngoutputlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="syslogngoutputlist-items">items ([]SyslogNGOutput, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b5fd5711d1786f5011e175001c26f721">7.1.14 - SyslogNGSpec</h1><h2 id="syslogngspec">SyslogNGSpec</h2><p>SyslogNGSpec defines the desired state of SyslogNG</p><h3 id="syslogngspec-tls">tls (SyslogNGTLS, optional)</h3><p>Default: -</p><h3 id="syslogngspec-readinessdefaultcheck">readinessDefaultCheck (ReadinessDefaultCheck, optional)</h3><p>Default: -</p><h3 id="syslogngspec-skiprbaccreate">skipRBACCreate (bool, optional)</h3><p>Default: -</p><h3 id="syslogngspec-statefulset">statefulSet (*typeoverride.StatefulSet, optional)</h3><p>Default: -</p><h3 id="syslogngspec-service">service (*typeoverride.Service, optional)</h3><p>Default: -</p><h3 id="syslogngspec-serviceaccount">serviceAccount (*typeoverride.ServiceAccount, optional)</h3><p>Default: -</p><h3 id="syslogngspec-configcheckpod">configCheckPod (*typeoverride.PodSpec, optional)</h3><p>Default: -</p><h3 id="syslogngspec-metrics">metrics (*Metrics, optional)</h3><p>Default: -</p><h3 id="syslogngspec-metricsservice">metricsService (*typeoverride.Service, optional)</h3><p>Default: -</p><h3 id="syslogngspec-buffervolumemetrics">bufferVolumeMetrics (*BufferMetrics, optional)</h3><p>Default: -</p><h3 id="syslogngspec-buffervolumemetricsservice">bufferVolumeMetricsService (*typeoverride.Service, optional)</h3><p>Default: -</p><h3 id="syslogngspec-globaloptions">globalOptions (*GlobalOptions, optional)</h3><p>Default: -</p><h3 id="syslogngspec-jsonkeyprefix">jsonKeyPrefix (string, optional)</h3><p>Default: -</p><h3 id="syslogngspec-jsonkeydelim">jsonKeyDelim (string, optional)</h3><p>Default: -</p><h3 id="syslogngspec-maxconnections">maxConnections (int, optional)</h3><p>Default: -</p><h3 id="syslogngspec-logiwsize">logIWSize (int, optional)</h3><p>Default: -</p><h2 id="syslogngtls">SyslogNGTLS</h2><p>SyslogNGTLS defines the TLS configs</p><h3 id="syslogngtls-enabled">enabled (bool, required)</h3><p>Default: -</p><h3 id="syslogngtls-secretname">secretName (string, optional)</h3><p>Default: -</p><h3 id="syslogngtls-sharedkey">sharedKey (string, optional)</h3><p>Default: -</p><h2 id="globaloptions">GlobalOptions</h2><h3 id="globaloptions-stats_level">stats_level (*int, optional)</h3><p>Deprecated. Use stats/level from 4.1+</p><p>Default: -</p><h3 id="globaloptions-stats_freq">stats_freq (*int, optional)</h3><p>Deprecated. Use stats/level from 4.1+</p><p>Default: -</p><h3 id="globaloptions-stats">stats (*Stats, optional)</h3><p>TODO switch to this by default</p><p>Default: -</p><h2 id="stats">Stats</h2><h3 id="stats-level">level (*int, optional)</h3><p>Default: -</p><h3 id="stats-freq">freq (*int, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-e07d1bc49d964a7c40eb66abea5f2677">7.2 - Logging extensions CRDs</h1><table>
<thead>
<tr>
<th>Name</th><th>Description</th><th>Version</th></tr></thead><tbody>
<tr>
<td><strong><a href="eventtailer_types/">EventTailer</a></strong></td><td>Eventtailer&rsquo;s main goal is to listen kubernetes events and transmit their changes to stdout. This way the logging-operator is able to process them.</td><td>extensions</td></tr><tr>
<td><strong><a href="hosttailer_types/">HostTailer</a></strong></td><td>HostTailer&rsquo;s main goal is to tail custom files and transmit their changes to stdout. This way the logging-operator is able to process them.</td><td>extensions</td></tr></tbody></table></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1dd2e29e6fc6677a064f9d79bc2429ff">7.2.1 - EventTailer</h1><h2 id="eventtailerspec">EventTailerSpec</h2><p>EventTailerSpec defines the desired state of EventTailer</p><h3 id="eventtailerspec-controlnamespace">controlNamespace (string, required)</h3><p>The resources of EventTailer will be placed into this namespace</p><p>Default: -</p><h3 id="eventtailerspec-positionvolume">positionVolume (volume.KubernetesVolume, optional)</h3><p>Volume definition for tracking fluentbit file positions (optional)</p><p>Default: -</p><h3 id="eventtailerspec-workloadmetaoverrides">workloadMetaOverrides (*types.MetaBase, optional)</h3><p>Override metadata of the created resources</p><p>Default: -</p><h3 id="eventtailerspec-workloadoverrides">workloadOverrides (*types.PodSpecBase, optional)</h3><p>Override podSpec fields for the given statefulset</p><p>Default: -</p><h3 id="eventtailerspec-containeroverrides">containerOverrides (*types.ContainerBase, optional)</h3><p>Override container fields for the given statefulset</p><p>Default: -</p><h2 id="eventtailerstatus">EventTailerStatus</h2><p>EventTailerStatus defines the observed state of EventTailer</p><h2 id="eventtailer">EventTailer</h2><p>EventTailer is the Schema for the eventtailers API</p><h3 id="eventtailer-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="eventtailer-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="eventtailer-spec">spec (EventTailerSpec, optional)</h3><p>Default: -</p><h3 id="eventtailer-status">status (EventTailerStatus, optional)</h3><p>Default: -</p><h2 id="eventtailerlist">EventTailerList</h2><p>EventTailerList contains a list of EventTailer</p><h3 id="eventtailerlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="eventtailerlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="eventtailerlist-items">items ([]EventTailer, required)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f24e78a067096c5c4a1cb33b2be8447b">7.2.2 - HostTailer</h1><h2 id="hosttailerspec">HostTailerSpec</h2><p>HostTailerSpec defines the desired state of HostTailer</p><h3 id="hosttailerspec-filetailers">fileTailers ([]FileTailer, optional)</h3><p>List of <a href="#filetailer">file tailers</a>.</p><p>Default: -</p><h3 id="hosttailerspec-systemdtailers">systemdTailers ([]SystemdTailer, optional)</h3><p>List of <a href="#systemdtailer">systemd tailers</a>.</p><p>Default: -</p><h3 id="hosttailerspec-enablerecreateworkloadonimmutablefieldchange">enableRecreateWorkloadOnImmutableFieldChange (bool, optional)</h3><p>EnableRecreateWorkloadOnImmutableFieldChange enables the operator to recreate the daemonset (and possibly other resource in the future) in case there is a change in an immutable field that otherwise couldn&rsquo;t be managed with a simple update.</p><p>Default: -</p><h3 id="hosttailerspec-workloadmetaoverrides">workloadMetaOverrides (*types.MetaBase, optional)</h3><p>Override metadata of the created resources</p><p>Default: -</p><h3 id="hosttailerspec-workloadoverrides">workloadOverrides (*types.PodSpecBase, optional)</h3><p>Override podSpec fields for the given daemonset</p><p>Default: -</p><h2 id="hosttailerstatus">HostTailerStatus</h2><p>HostTailerStatus defines the observed state of <a href="#hosttailer">HostTailer</a>.</p><h2 id="hosttailer">HostTailer</h2><p>HostTailer is the Schema for the hosttailers API</p><h3 id="hosttailer-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="hosttailer-metadata">metadata (metav1.ObjectMeta, optional)</h3><p>Default: -</p><h3 id="hosttailer-spec">spec (HostTailerSpec, optional)</h3><p>Default: -</p><h3 id="hosttailer-status">status (HostTailerStatus, optional)</h3><p>Default: -</p><h2 id="hosttailerlist">HostTailerList</h2><p>HostTailerList contains a list of <a href="#hosttailer">HostTailers</a>.</p><h3 id="hosttailerlist-">(metav1.TypeMeta, required)</h3><p>Default: -</p><h3 id="hosttailerlist-metadata">metadata (metav1.ListMeta, optional)</h3><p>Default: -</p><h3 id="hosttailerlist-items">items ([]HostTailer, required)</h3><p>Default: -</p><h2 id="filetailer">FileTailer</h2><p>FileTailer configuration options</p><h3 id="filetailer-name">name (string, required)</h3><p>Name for the tailer</p><p>Default: -</p><h3 id="filetailer-path">path (string, optional)</h3><p>Path to the loggable file</p><p>Default: -</p><h3 id="filetailer-disabled">disabled (bool, optional)</h3><p>Disable tailing the file</p><p>Default: -</p><h3 id="filetailer-buffer_max_size">buffer_max_size (string, optional)</h3><p>Set the limit of the buffer size per active filetailer</p><p>Default: -</p><h3 id="filetailer-buffer_chunk_size">buffer_chunk_size (string, optional)</h3><p>Set the buffer chunk size per active filetailer</p><p>Default: -</p><h3 id="filetailer-skip_long_lines">skip_long_lines (string, optional)</h3><p>Skip long line when exceeding Buffer_Max_Size</p><p>Default: -</p><h3 id="filetailer-read_from_head">read_from_head (bool, optional)</h3><p>Start reading from the head of new log files</p><p>Default: -</p><h3 id="filetailer-buffer_max_size">buffer_max_size (string, optional)</h3><p>Set the limit of the buffer size per active filetailer</p><p>Default: -</p><h3 id="filetailer-buffer_chunk_size">buffer_chunk_size (string, optional)</h3><p>Set the buffer chunk size per active filetailer</p><p>Default: -</p><h3 id="filetailer-skip_long_lines">skip_long_lines (string, optional)</h3><p>Skip long line when exceeding Buffer_Max_Size</p><p>Default: -</p><h3 id="filetailer-read_from_head">read_from_head (bool, optional)</h3><p>Start reading from the head of new log files</p><p>Default: -</p><h3 id="filetailer-containeroverrides">containerOverrides (*types.ContainerBase, optional)</h3><p>Override container fields for the given tailer</p><p>Default: -</p><h2 id="systemdtailer">SystemdTailer</h2><p>SystemdTailer configuration options</p><h3 id="systemdtailer-name">name (string, required)</h3><p>Name for the tailer</p><p>Default: -</p><h3 id="systemdtailer-path">path (string, optional)</h3><p>Override systemd log path</p><p>Default: -</p><h3 id="systemdtailer-disabled">disabled (bool, optional)</h3><p>Disable component</p><p>Default: -</p><h3 id="systemdtailer-systemdfilter">systemdFilter (string, optional)</h3><p>Filter to select systemd unit example: kubelet.service</p><p>Default: -</p><h3 id="systemdtailer-maxentries">maxEntries (int, optional)</h3><p>Maximum entries to read when starting to tail logs to avoid high pressure</p><p>Default: -</p><h3 id="systemdtailer-containeroverrides">containerOverrides (*types.ContainerBase, optional)</h3><p>Override container fields for the given tailer</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9e73eeb4ad3474fcbb18858c80510ec4">8 - Supported Plugins</h1><h1 id="supported-plugins">Supported Plugins</h1><p>For more information please click on the plugin name</p><center>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th><th>Profile</th><th style="text-align:left">Description</th><th style="text-align:center">Status</th><th style="text-align:right">Version</th></tr></thead><tbody>
<tr>
<td style="text-align:left"><strong><a href="common/security/">Security</a></strong></td><td>common</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="common/transport/">Transport</a></strong></td><td>common</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/concat/">Concat</a></strong></td><td>filters</td><td style="text-align:left">Fluentd Filter plugin to concatenate multiline log separated in multiple events.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-concat">2.5.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/dedot/">Dedot</a></strong></td><td>filters</td><td style="text-align:left">Concatenate multiline log separated in multiple events</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/lunardial/fluent-plugin-dedot_filter">1.0.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/detect_exceptions/">Exception Detector</a></strong></td><td>filters</td><td style="text-align:left">Exception Detector</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions">0.0.14</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/elasticsearch_genid/">ElasticsearchGenId</a></strong></td><td>filters</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/enhance_k8s/">Enhance K8s Metadata</a></strong></td><td>filters</td><td style="text-align:left">Fluentd output plugin to add extra Kubernetes metadata to the events.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/sumologic-kubernetes-collection/tree/main/fluent-plugin-enhance-k8s-metadata">2.0.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/geoip/">Geo IP</a></strong></td><td>filters</td><td style="text-align:left">Fluentd GeoIP filter</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/y-ken/fluent-plugin-geoip">1.3.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/grep/">Grep</a></strong></td><td>filters</td><td style="text-align:left">Grep events by the values</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/grep">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/kube_events_timestamp/">Kubernetes Events Timestamp</a></strong></td><td>filters</td><td style="text-align:left">Fluentd Filter plugin to select particular timestamp into an additional field</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluentd-filter-kube-events-timestamp">0.1.4</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/parser/">Parser</a></strong></td><td>filters</td><td style="text-align:left">Parses a string field in event records and mutates its event record with the parsed result.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/parser">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/prometheus/">Prometheus</a></strong></td><td>filters</td><td style="text-align:left">Prometheus Filter Plugin to count Incoming Records</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-prometheus#prometheus-outputfilter-plugin">2.0.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/record_modifier/">Record Modifier</a></strong></td><td>filters</td><td style="text-align:left">Modify each event record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier">2.1.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/record_transformer/">Record Transformer</a></strong></td><td>filters</td><td style="text-align:left">Mutates/transforms incoming event streams.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/record_transformer">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/stdout/">Stdout</a></strong></td><td>filters</td><td style="text-align:left">Prints events to stdout</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/stdout">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/sumologic/">SumoLogic</a></strong></td><td>filters</td><td style="text-align:left">Sumo Logic collection solution for Kubernetes</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/sumologic-kubernetes-collection">2.3.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/tagnormaliser/">Tag Normaliser</a></strong></td><td>filters</td><td style="text-align:left">Re-tag based on log metadata</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluent-plugin-tag-normaliser">0.1.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/throttle/">Throttle</a></strong></td><td>filters</td><td style="text-align:left">A sentry plugin to throttle logs. Logs are grouped by a configurable key. When a group exceeds a configuration rate, logs are dropped for this group.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/rubrikinc/fluent-plugin-throttle">0.0.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/aws_elasticsearch/">Amazon Elasticsearch</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Elasticsearch</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/atomita/fluent-plugin-aws-elasticsearch-service">2.4.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/azurestore/">Azure Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Azure Storage</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/microsoft/fluent-plugin-azure-storage-append-blob">0.2.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/buffer/">Buffer</a></strong></td><td>outputs</td><td style="text-align:left">Fluentd event buffer</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/configuration/buffer-section">mode info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/cloudwatch/">Amazon CloudWatch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to AWS CloudWatch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs/releases/tag/v0.14.2">0.14.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/datadog/">Datadog</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Datadog</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/DataDog/fluent-plugin-datadog/releases/tag/v0.14.1">0.14.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/elasticsearch/">Elasticsearch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Elasticsearch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/uken/fluent-plugin-elasticsearch/releases/tag/v5.1.4">5.1.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/file/">File</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to files</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/file">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/format/">Format</a></strong></td><td>outputs</td><td style="text-align:left">Specify how to format output record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/configuration/format-section">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/format_rfc5424/">Format rfc5424</a></strong></td><td>outputs</td><td style="text-align:left">Specify how to format output record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424#format-section">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/forward/">Forward</a></strong></td><td>outputs</td><td style="text-align:left">Forwards events to other fluentd nodes.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/forward">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/gcs/">Google Cloud Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Google Cloud Storage</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluent-plugin-gcs">0.4.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/gelf/">Gelf</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to GELF</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/hotschedules/fluent-plugin-gelf-hs">1.0.8</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/http/">Http</a></strong></td><td>outputs</td><td style="text-align:left">Sends logs to HTTP/HTTPS endpoints.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/http">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kafka/">Kafka</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Kafka</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-kafka/releases/tag/v0.17.5">0.17.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kinesis_firehose/">Amazon Kinesis Firehose</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Kinesis</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/awslabs/aws-fluent-plugin-kinesis/releases/tag/v3.4.2">3.4.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kinesis_stream/">Amazon Kinesis Stream</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Kinesis</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/awslabs/aws-fluent-plugin-kinesis/releases/tag/v3.4.2">3.4.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/logdna/">LogDNA</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to LogDNA</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/logdna/fluent-plugin-logdna/releases/tag/v0.4.0">0.4.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/logz/">LogZ</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in LogZ.io</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/logzio/fluent-plugin-logzio/">0.0.21</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/loki/">Grafana Loki</a></strong></td><td>outputs</td><td style="text-align:left">Transfer logs to Loki</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/grafana/loki/tree/master/fluentd/fluent-plugin-grafana-loki">1.2.17</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/newrelic/">NewRelic Logs</a></strong></td><td>outputs</td><td style="text-align:left">Send logs to New Relic Logs</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/newrelic/newrelic-fluentd-output">1.2.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/opensearch/">OpenSearch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to OpenSearch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-opensearch/releases/tag/v1.0.5">1.0.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/oss/">Alibaba Cloud Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs the Alibaba Cloud Object Storage Service</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/aliyun/fluent-plugin-oss">0.0.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/redis/">Redis</a></strong></td><td>outputs</td><td style="text-align:left">Sends logs to Redis endpoints.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-redis">0.3.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/s3/">Amazon S3</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Amazon S3</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-s3/releases/tag/v1.6.1">1.6.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/splunk_hec/">Splunk Hec</a></strong></td><td>outputs</td><td style="text-align:left">Fluent Plugin Splunk Hec Release</td><td style="text-align:center">GA</td><td style="text-align:right"><a href>1.2.9</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/sqs/">SQS</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes fluent-events as queue messages to Amazon SQS</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/ixixi/fluent-plugin-sqs">v2.1.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/sumologic/">SumoLogic</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Sumologic</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/fluentd-output-sumologic/releases/tag/1.8.0">1.8.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/syslog/">Syslog</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to syslog</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424">0.9.0.rc.8</a></td></tr></tbody></table></center>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-8a164ca77d26df7144202dbce9fc83ed">8.1 - Security</h1><h2 id="security">Security</h2><h3 id="security-self_hostname">self_hostname (string, required)</h3><p>Hostname</p><p>Default: -</p><h3 id="security-shared_key">shared_key (string, required)</h3><p>Shared key for authentication.</p><p>Default: -</p><h3 id="security-user_auth">user_auth (bool, optional)</h3><p>If true, use user based authentication.</p><p>Default: -</p><h3 id="security-allow_anonymous_source">allow_anonymous_source (bool, optional)</h3><p>Allow anonymous source. <client> sections are required if disabled.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-417b2dcf5d345902aeedec3805d3b518">8.2 - Transport</h1><h2 id="transport">Transport</h2><h3 id="transport-protocol">protocol (string, optional)</h3><p>Protocol Default: :tcp</p><p>Default: -</p><h3 id="transport-version">version (string, optional)</h3><p>Version Default: &lsquo;TLSv1_2&rsquo;</p><p>Default: -</p><h3 id="transport-ciphers">ciphers (string, optional)</h3><p>Ciphers Default: &ldquo;ALL:!aNULL:!eNULL:!SSLv2&rdquo;</p><p>Default: -</p><h3 id="transport-insecure">insecure (bool, optional)</h3><p>Use secure connection when use tls) Default: false</p><p>Default: -</p><h3 id="transport-ca_path">ca_path (string, optional)</h3><p>Specify path to CA certificate file</p><p>Default: -</p><h3 id="transport-cert_path">cert_path (string, optional)</h3><p>Specify path to Certificate file</p><p>Default: -</p><h3 id="transport-private_key_path">private_key_path (string, optional)</h3><p>Specify path to private Key file</p><p>Default: -</p><h3 id="transport-private_key_passphrase">private_key_passphrase (string, optional)</h3><p>public CA private key passphrase contained path</p><p>Default: -</p><h3 id="transport-client_cert_auth">client_cert_auth (bool, optional)</h3><p>When this is set Fluentd will check all incoming HTTPS requests for a client certificate signed by the trusted CA, requests that don&rsquo;t supply a valid client certificate will fail.</p><p>Default: -</p><h3 id="transport-ca_cert_path">ca_cert_path (string, optional)</h3><p>Specify private CA contained path</p><p>Default: -</p><h3 id="transport-ca_private_key_path">ca_private_key_path (string, optional)</h3><p>private CA private key contained path</p><p>Default: -</p><h3 id="transport-ca_private_key_passphrase">ca_private_key_passphrase (string, optional)</h3><p>private CA private key passphrase contained path</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-054b25caf1e92a922927809d3e403385">8.3 - Fluentd filters</h1><p>You can use the following <strong>Fluentd</strong> filters in your <code>Flow</code> and <code>ClusterFlow</code> CRDs.</p></div><div class="td-content">
<h1 id="pg-349fa261ad6602912c90010a75fa2c8a">8.3.1 - Concat</h1><h1 id="concat-filterhttpsgithubcomfluent-plugins-nurseryfluent-plugin-concat"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-concat">Concat Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to concatenate multiline log separated in multiple events.</p><h2 id="configuration">Configuration</h2><h2 id="concat">Concat</h2><h3 id="concat-key">key (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><p>Default: -</p><h3 id="concat-separator">separator (string, optional)</h3><p>The separator of lines.</p><p>Default: &ldquo;\n&rdquo;</p><h3 id="concat-n_lines">n_lines (int, optional)</h3><p>The number of lines. This is exclusive with multiline_start_regex.</p><p>Default: -</p><h3 id="concat-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>The regexp to match beginning of multiline. This is exclusive with n_lines.</p><p>Default: -</p><h3 id="concat-multiline_end_regexp">multiline_end_regexp (string, optional)</h3><p>The regexp to match ending of multiline. This is exclusive with n_lines.</p><p>Default: -</p><h3 id="concat-continuous_line_regexp">continuous_line_regexp (string, optional)</h3><p>The regexp to match continuous lines. This is exclusive with n_lines.</p><p>Default: -</p><h3 id="concat-stream_identity_key">stream_identity_key (string, optional)</h3><p>The key to determine which stream an event belongs to.</p><p>Default: -</p><h3 id="concat-flush_interval">flush_interval (int, optional)</h3><p>The number of seconds after which the last received event log will be flushed. If specified 0, wait for next line forever.</p><p>Default: -</p><h3 id="concat-timeout_label">timeout_label (string, optional)</h3><p>The label name to handle events caused by timeout.</p><p>Default: -</p><h3 id="concat-use_first_timestamp">use_first_timestamp (bool, optional)</h3><p>Use timestamp of first record when buffer is flushed.</p><p>Default: False</p><h3 id="concat-partial_key">partial_key (string, optional)</h3><p>The field name that is the reference to concatenate records</p><p>Default: -</p><h3 id="concat-partial_value">partial_value (string, optional)</h3><p>The value stored in the field specified by partial_key that represent partial log</p><p>Default: -</p><h3 id="concat-keep_partial_key">keep_partial_key (bool, optional)</h3><p>If true, keep partial_key in concatenated records</p><p>Default: False</p><h3 id="concat-use_partial_metadata">use_partial_metadata (string, optional)</h3><p>Use partial metadata to concatenate multiple records</p><p>Default: -</p><h3 id="concat-keep_partial_metadata">keep_partial_metadata (string, optional)</h3><p>If true, keep partial metadata</p><p>Default: -</p><h3 id="concat-partial_metadata_format">partial_metadata_format (string, optional)</h3><p>Input format of the partial metadata (fluentd or journald docker log driver)( docker-fluentd, docker-journald, docker-journald-lowercase)</p><p>Default: -</p><h3 id="concat-use_partial_cri_logtag">use_partial_cri_logtag (bool, optional)</h3><p>Use cri log tag to concatenate multiple records</p><p>Default: -</p><h3 id="concat-partial_cri_logtag_key">partial_cri_logtag_key (string, optional)</h3><p>The key name that is referred to concatenate records on cri log</p><p>Default: -</p><h3 id="concat-partial_cri_stream_key">partial_cri_stream_key (string, optional)</h3><p>The key name that is referred to detect stream name on cri log</p><p>Default: stream</p><h2 id="example-concat-filter-configurations">Example <code>Concat</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">concat</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">partial_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;partial_message&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">n_lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type concat</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_concat</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">key message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">n_lines 10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">partial_key partial_message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-bb097fab5840c448f215a8825f17af78">8.3.2 - Dedot</h1><h1 id="dedot-filterhttpsgithubcomlunardialfluent-plugin-dedot_filter"><a href="https://github.com/lunardial/fluent-plugin-dedot_filter">Dedot Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to de-dot field name for elasticsearch.</p><h2 id="configuration">Configuration</h2><h2 id="dedotfilterconfig">DedotFilterConfig</h2><h3 id="dedotfilterconfig-de_dot_nested">de_dot_nested (bool, optional)</h3><p>Will cause the plugin to recurse through nested structures (hashes and arrays), and remove dots in those key-names too.</p><p>Default: false</p><h3 id="dedotfilterconfig-de_dot_separator">de_dot_separator (string, optional)</h3><p>Separator</p><p>Default: _</p><h2 id="example-dedot-filter-configurations">Example <code>Dedot</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">dedot</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">de_dot_separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;-&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">de_dot_nested</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type dedot</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_dedot</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">de_dot_nested true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">de_dot_separator -</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-55a61951fa9d47c3fc701c2b0c2534d4">8.3.3 - ElasticsearchGenId</h1><h2 id="elasticsearchgenid">ElasticsearchGenId</h2><h3 id="elasticsearchgenid-hash_id_key">hash_id_key (string, optional)</h3><p>You can specify generated hash storing key.</p><p>Default: -</p><h3 id="elasticsearchgenid-include_tag_in_seed">include_tag_in_seed (bool, optional)</h3><p>You can specify to use tag for hash generation seed.</p><p>Default: -</p><h3 id="elasticsearchgenid-include_time_in_seed">include_time_in_seed (bool, optional)</h3><p>You can specify to use time for hash generation seed.</p><p>Default: -</p><h3 id="elasticsearchgenid-use_record_as_seed">use_record_as_seed (bool, optional)</h3><p>You can specify to use record in events for hash generation seed. This parameter should be used with record_keys parameter in practice.</p><p>Default: -</p><h3 id="elasticsearchgenid-record_keys">record_keys (string, optional)</h3><p>You can specify keys which are record in events for hash generation seed. This parameter should be used with use_record_as_seed parameter in practice.</p><p>Default: -</p><h3 id="elasticsearchgenid-use_entire_record">use_entire_record (bool, optional)</h3><p>You can specify to use entire record in events for hash generation seed.</p><p>Default: -</p><h3 id="elasticsearchgenid-separator">separator (string, optional)</h3><p>You can specify separator charactor to creating seed for hash generation.</p><p>Default: -</p><h3 id="elasticsearchgenid-hash_type">hash_type (string, optional)</h3><p>You can specify hash algorithm. Support algorithms md5, sha1, sha256, sha512. Default: sha1</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d00173400a3863deca0bf67dceca225a">8.3.4 - Enhance K8s Metadata</h1><h1 id="enhance-k8s-metadatahttpsgithubcomsumologicsumologic-kubernetes-collectiontreemainfluent-plugin-enhance-k8s-metadata"><a href="https://github.com/SumoLogic/sumologic-kubernetes-collection/tree/main/fluent-plugin-enhance-k8s-metadata">Enhance K8s Metadata</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to fetch several metadata for a Pod</p><h2 id="configuration">Configuration</h2><h2 id="enhancek8s">EnhanceK8s</h2><h3 id="enhancek8s-in_namespace_path">in_namespace_path ([]string, optional)</h3><p>parameters for read/write record</p><p>Default: [&rsquo;$.namespace']</p><h3 id="enhancek8s-in_pod_path">in_pod_path ([]string, optional)</h3><p>Default: [&rsquo;$.pod&rsquo;,&rsquo;$.pod_name']</p><h3 id="enhancek8s-data_type">data_type (string, optional)</h3><p>Sumologic data type</p><p>Default: metrics</p><h3 id="enhancek8s-kubernetes_url">kubernetes_url (string, optional)</h3><p>Kubernetes API URL</p><p>Default: nil</p><h3 id="enhancek8s-client_cert">client_cert (secret.Secret, optional)</h3><p>Kubernetes API Client certificate</p><p>Default: nil</p><h3 id="enhancek8s-client_key">client_key (secret.Secret, optional)</h3><p>// Kubernetes API Client certificate key</p><p>Default: nil</p><h3 id="enhancek8s-ca_file">ca_file (secret.Secret, optional)</h3><p>Kubernetes API CA file</p><p>Default: nil</p><h3 id="enhancek8s-secret_dir">secret_dir (string, optional)</h3><p>Service account directory</p><p>Default: /var/run/secrets/kubernetes.io/serviceaccount</p><h3 id="enhancek8s-bearer_token_file">bearer_token_file (string, optional)</h3><p>Bearer token path</p><p>Default: nil</p><h3 id="enhancek8s-verify_ssl">verify_ssl (*bool, optional)</h3><p>Verify SSL</p><p>Default: true</p><h3 id="enhancek8s-core_api_versions">core_api_versions ([]string, optional)</h3><p>Kubernetes core API version (for different Kubernetes versions)</p><p>Default: [&lsquo;v1&rsquo;]</p><h3 id="enhancek8s-api_groups">api_groups ([]string, optional)</h3><p>Kubernetes resources api groups</p><p>Default: [&ldquo;apps/v1&rdquo;, &ldquo;extensions/v1beta1&rdquo;]</p><h3 id="enhancek8s-ssl_partial_chain">ssl_partial_chain (*bool, optional)</h3><p>if <code>ca_file</code> is for an intermediate CA, or otherwise we do not have the root CA and want to trust the intermediate CA certs we do have, set this to <code>true</code> - this corresponds to the openssl s_client -partial_chain flag and X509_V_FLAG_PARTIAL_CHAIN</p><p>Default: false</p><h3 id="enhancek8s-cache_size">cache_size (int, optional)</h3><p>Cache size</p><p>Default: 1000</p><h3 id="enhancek8s-cache_ttl">cache_ttl (int, optional)</h3><p>Cache TTL</p><p>Default: 60<em>60</em>2</p><h3 id="enhancek8s-cache_refresh">cache_refresh (int, optional)</h3><p>Cache refresh</p><p>Default: 60*60</p><h3 id="enhancek8s-cache_refresh_variation">cache_refresh_variation (int, optional)</h3><p>Cache refresh variation</p><p>Default: 60*15</p><h2 id="example-enhancek8s-filter-configurations">Example <code>EnhanceK8s</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">globalFilters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">enhanceK8s</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type enhance_k8s_metadata</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_enhanceK8s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1e14b035cd2fa8152fe231991dc9b922">8.3.5 - Exception Detector</h1><h1 id="exception-detector">Exception Detector</h1><h2 id="overview">Overview</h2><p>This filter plugin consumes a log stream of JSON objects which contain single-line log messages. If a consecutive sequence of log messages form an exception stack trace, they forwarded as a single, combined JSON object. Otherwise, the input log data is forwarded as is.
More info at <a href="https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions">https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions</a></p><blockquote>
<p>Note: As Tag management is not supported yet, this Plugin is <strong>mutually exclusive</strong> with <a href="../tagnormaliser">Tag normaliser</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">java, python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="detectexceptions">DetectExceptions</h2><h3 id="detectexceptions-message">message (string, optional)</h3><p>The field which contains the raw message text in the input JSON data.</p><p>Default: ""</p><h3 id="detectexceptions-remove_tag_prefix">remove_tag_prefix (string, optional)</h3><p>The prefix to be removed from the input tag when outputting a record.</p><p>Default: kubernetes</p><h3 id="detectexceptions-multiline_flush_interval">multiline_flush_interval (string, optional)</h3><p>The interval of flushing the buffer for multiline format.</p><p>Default: nil</p><h3 id="detectexceptions-languages">languages ([]string, optional)</h3><p>Programming languages for which to detect exceptions.</p><p>Default: []</p><h3 id="detectexceptions-max_lines">max_lines (int, optional)</h3><p>Maximum number of lines to flush (0 means no limit)</p><p>Default: 1000</p><h3 id="detectexceptions-max_bytes">max_bytes (int, optional)</h3><p>Maximum number of bytes to flush (0 means no limit)</p><p>Default: 0</p><h3 id="detectexceptions-stream">stream (string, optional)</h3><p>Separate log streams by this field in the input JSON data.</p><p>Default: ""</p><h3 id="detectexceptions-force_line_breaks">force_line_breaks (bool, optional)</h3><p>Force line breaks between each lines when comibining exception stacks.</p><p>Default: false</p><h3 id="detectexceptions-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: kubernetes.**</p><h2 id="example-exception-detector-filter-configurations">Example <code>Exception Detector</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#000">java</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#000">python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;match kubernetes.**&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type detect_exceptions</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_detect_exceptions</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">languages [&#34;java&#34;,&#34;python&#34;]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">multiline_flush_interval 0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">remove_tag_prefix kubernetes</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/match&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-91b6e53e4bb1647d0973b03564f40336">8.3.6 - Geo IP</h1><h1 id="fluentd-geoip-filter">Fluentd GeoIP filter</h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to add information about geographical location of IP addresses with Maxmind GeoIP databases.
More information at <a href="https://github.com/y-ken/fluent-plugin-geoip">https://github.com/y-ken/fluent-plugin-geoip</a></p><h2 id="configuration">Configuration</h2><h2 id="geoip">GeoIP</h2><h3 id="geoip-geoip_lookup_keys">geoip_lookup_keys (string, optional)</h3><p>Specify one or more geoip lookup field which has ip address</p><p>Default: host</p><h3 id="geoip-geoip_database">geoip_database (string, optional)</h3><p>Specify optional geoip database (using bundled GeoLiteCity databse by default)</p><p>Default: -</p><h3 id="geoip-geoip2_database">geoip2_database (string, optional)</h3><p>Specify optional geoip2 database (using bundled GeoLite2-City.mmdb by default)</p><p>Default: -</p><h3 id="geoip-backend_library">backend_library (string, optional)</h3><p>Specify backend library (geoip2_c, geoip, geoip2_compat)</p><p>Default: -</p><h3 id="geoip-skip_adding_null_record">skip_adding_null_record (*bool, optional)</h3><p>To avoid get stacktrace error with <code>[null, null]</code> array for elasticsearch.</p><p>Default: true</p><h3 id="geoip-records">records ([]Record, optional)</h3><p>Records are represented as maps: <code>key: value</code></p><p>Default: -</p><h2 id="example-geoip-filter-configurations">Example <code>GeoIP</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">geoip</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">geoip_lookup_keys</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">remote_addr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">city</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${city.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">location_array</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;&#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">country</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.iso_code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">country_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">postal_code</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">${postal.code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type geoip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_geoip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">geoip_lookup_keys remote_addr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">skip_adding_null_record true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">city ${city.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">country ${country.iso_code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">country_name ${country.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">location_array &#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">postal_code ${postal.code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d911e67edeb675049a9637d612f14d1a">8.3.7 - Grep</h1><h1 id="grep-filterhttpsdocsfluentdorgfiltergrep"><a href="https://docs.fluentd.org/filter/grep">Grep Filter</a></h1><h2 id="overview">Overview</h2><p>The grep filter plugin &ldquo;greps&rdquo; events by the values of specified fields.</p><h2 id="configuration">Configuration</h2><h2 id="grepconfig">GrepConfig</h2><h3 id="grepconfig-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="#grepconfig-regexp">Regexp Directive</a></p><p>Default: -</p><h3 id="grepconfig-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="#grepconfig-exclude">Exclude Directive</a></p><p>Default: -</p><h3 id="grepconfig-or">or ([]OrSection, optional)</h3><p><a href="#grepconfig-or">Or Directive</a></p><p>Default: -</p><h3 id="grepconfig-and">and ([]AndSection, optional)</h3><p><a href="#grepconfig-and">And Directive</a></p><p>Default: -</p><h2 id="Regexp-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-regexp-greater-than-directive">Regexp Directive</a></h2><p>Specify filtering rule. This directive contains two parameters.</p><h3 id="regexp-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><p>Default: -</p><h3 id="regexp-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><p>Default: -</p><h2 id="example-regexp-filter-configurations">Example <code>Regexp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>@<span style="color:#000">type grep</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>@<span style="color:#000">id demo-flow_1_grep</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">key first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">pattern /^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="Exclude-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-exclude-greater-than-directive">Exclude Directive</a></h2><p>Specify filtering rule to reject events. This directive contains two parameters.</p><h3 id="exclude-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><p>Default: -</p><h3 id="exclude-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><p>Default: -</p><h2 id="example-exclude-filter-configurations">Example <code>Exclude</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result-1">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>@<span style="color:#000">type grep</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>@<span style="color:#000">id demo-flow_0_grep</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">key first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">pattern /^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="Or-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Or Directive</a></h2><p>Specify filtering rule. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="or-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Regexp Directive</a></p><p>Default: -</p><h3 id="or-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Exclude Directive</a></p><p>Default: -</p><h2 id="example-or-filter-configurations">Example <code>Or</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result-2">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;or&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">key first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">pattern /^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;/exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">key second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">pattern /\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;/exclude&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/or&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="And-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">And Directive</a></h2><p>Specify filtering rule. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="and-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Regexp Directive</a></p><p>Default: -</p><h3 id="and-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Exclude Directive</a></p><p>Default: -</p><h2 id="example-and-filter-configurations">Example <code>And</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result-3">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;and&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">key first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">pattern /^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;/regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">key second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#000">pattern /\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">&lt;/regexp&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/and&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4ed899f75f815259c224810fdfb84730">8.3.8 - Kubernetes Events Timestamp</h1><h1 id="kubernetes-events-timestamp-filterhttpsgithubcomkube-loggingfluentd-filter-kube-events-timestamp"><a href="https://github.com/kube-logging/fluentd-filter-kube-events-timestamp">Kubernetes Events Timestamp Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to select particular timestamp into an additional field</p><h2 id="configuration">Configuration</h2><h2 id="kubeeventstimestampconfig">KubeEventsTimestampConfig</h2><h3 id="kubeeventstimestampconfig-timestamp_fields">timestamp_fields ([]string, optional)</h3><p>Time field names in order of relevance</p><p>Default: event.eventTime, event.lastTimestamp, event.firstTimestamp</p><h3 id="kubeeventstimestampconfig-mapped_time_key">mapped_time_key (string, optional)</h3><p>Added time field name</p><p>Default: triggerts</p><h2 id="example-kubernetes-events-timestamp-filter-configurations">Example <code>Kubernetes Events Timestamp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">es-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">kube_events_timestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">timestamp_fields</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#4e9a06">&#34;event.eventTime&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#4e9a06">&#34;event.lastTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#4e9a06">&#34;event.firstTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">mapped_time_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mytimefield</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">es-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span>@<span style="color:#000">type kube_events_timestamp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span>@<span style="color:#000">id test-kube-events-timestamp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">timestamp_fields [&#34;event.eventTime&#34;,&#34;event.lastTimestamp&#34;,&#34;event.firstTimestamp&#34;]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">mapped_time_key mytimefield</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">8.3.9 - Parser</h1><h1 id="parser-filterhttpsdocsfluentdorgfilterparser"><a href="https://docs.fluentd.org/filter/parser">Parser Filter</a></h1><h2 id="overview">Overview</h2><p>Parses a string field in event records and mutates its event record with the parsed result.</p><h2 id="configuration">Configuration</h2><h2 id="parserconfig">ParserConfig</h2><h3 id="parserconfig-key_name">key_name (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><p>Default: -</p><h3 id="parserconfig-reserve_time">reserve_time (bool, optional)</h3><p>Keep original event time in parsed result.</p><p>Default: -</p><h3 id="parserconfig-reserve_data">reserve_data (bool, optional)</h3><p>Keep original key-value pair in parsed result.</p><p>Default: -</p><h3 id="parserconfig-remove_key_name_field">remove_key_name_field (bool, optional)</h3><p>Remove key_name field when parsing is succeeded</p><p>Default: -</p><h3 id="parserconfig-replace_invalid_sequence">replace_invalid_sequence (bool, optional)</h3><p>If true, invalid string is replaced with safe characters and re-parse it.</p><p>Default: -</p><h3 id="parserconfig-inject_key_prefix">inject_key_prefix (string, optional)</h3><p>Store parsed values with specified key name prefix.</p><p>Default: -</p><h3 id="parserconfig-hash_value_field">hash_value_field (string, optional)</h3><p>Store parsed values as a hash value in a field.</p><p>Default: -</p><h3 id="parserconfig-emit_invalid_record_to_error">emit_invalid_record_to_error (*bool, optional)</h3><p>Emit invalid record to @ERROR label. Invalid cases are: key not exist, format is not matched, unexpected error</p><p>Default: -</p><h3 id="parserconfig-parse">parse (ParseSection, optional)</h3><p><a href="#parse-section">Parse Section</a></p><p>Default: -</p><h3 id="parserconfig-parsers">parsers ([]ParseSection, optional)</h3><p>Deprecated, use <code>parse</code> instead</p><p>Default: -</p><h2 id="parse-section">Parse Section</h2><h3 id="parse-section-type">type (string, optional)</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><p>Default: -</p><h3 id="parse-section-expression">expression (string, optional)</h3><p>Regexp expression to evaluate</p><p>Default: -</p><h3 id="parse-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><p>Default: -</p><h3 id="parse-section-keys">keys (string, optional)</h3><p>Names for fields on each line. (seperated by coma)</p><p>Default: -</p><h3 id="parse-section-null_value_pattern">null_value_pattern (string, optional)</h3><p>Specify null value pattern.</p><p>Default: -</p><h3 id="parse-section-null_empty_string">null_empty_string (bool, optional)</h3><p>If true, empty string field is replaced with nil</p><p>Default: -</p><h3 id="parse-section-estimate_current_event">estimate_current_event (bool, optional)</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><p>Default: -</p><h3 id="parse-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><p>Default: -</p><h3 id="parse-section-types">types (string, optional)</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><p>Default: -</p><h3 id="parse-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string</p><p>Default: -</p><h3 id="parse-section-time_type">time_type (string, optional)</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="parse-section-local_time">local_time (bool, optional)</h3><p>Ff true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="parse-section-utc">utc (bool, optional)</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h3 id="parse-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="parse-section-format">format (string, optional)</h3><p>Only available when using type: multi_format</p><p>Default: -</p><h3 id="parse-section-format_firstline">format_firstline (string, optional)</h3><p>Only available when using type: multi_format</p><p>Default: -</p><h3 id="parse-section-delimiter">delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;\t&rdquo;</p><h3 id="parse-section-delimiter_pattern">delimiter_pattern (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: -</p><h3 id="parse-section-label_delimiter">label_delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;:&rdquo;</p><h3 id="parse-section-multiline">multiline ([]string, optional)</h3><p>The multiline parser plugin parses multiline logs.</p><p>Default: -</p><h3 id="parse-section-patterns">patterns ([]SingleParseSection, optional)</h3><p>Only available when using type: multi_format <a href="#parse-section">Parse Section</a></p><p>Default: -</p><h3 id="parse-section-grok_pattern">grok_pattern (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><p>Default: -</p><h3 id="parse-section-custom_pattern_path">custom_pattern_path (*secret.Secret, optional)</h3><p>Only available when using type: grok, multiline_grok. File that includes custom grok patterns.</p><p>Default: -</p><h3 id="parse-section-grok_failure_key">grok_failure_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key has grok failure reason.</p><p>Default: -</p><h3 id="parse-section-grok_name_key">grok_name_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><p>Default: -</p><h3 id="parse-section-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>Only available when using type: multiline_grok The regexp to match beginning of multiline.</p><p>Default: -</p><h3 id="parse-section-grok_patterns">grok_patterns ([]GrokSection, optional)</h3><p>Only available when using type: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><p>Default: -</p><h2 id="parse-section-single">Parse Section (single)</h2><h3 id="type-string-optional-parse-section-single-type">type (string, optional) {#parse section-(single)-type}</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><p>Default: -</p><h3 id="expression-string-optional-parse-section-single-expression">expression (string, optional) {#parse section-(single)-expression}</h3><p>Regexp expression to evaluate</p><p>Default: -</p><h3 id="time_key-string-optional-parse-section-single-time_key">time_key (string, optional) {#parse section-(single)-time_key}</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><p>Default: -</p><h3 id="null_value_pattern-string-optional-parse-section-single-null_value_pattern">null_value_pattern (string, optional) {#parse section-(single)-null_value_pattern}</h3><p>Specify null value pattern.</p><p>Default: -</p><h3 id="null_empty_string-bool-optional-parse-section-single-null_empty_string">null_empty_string (bool, optional) {#parse section-(single)-null_empty_string}</h3><p>If true, empty string field is replaced with nil</p><p>Default: -</p><h3 id="estimate_current_event-bool-optional-parse-section-single-estimate_current_event">estimate_current_event (bool, optional) {#parse section-(single)-estimate_current_event}</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><p>Default: -</p><h3 id="keep_time_key-bool-optional-parse-section-single-keep_time_key">keep_time_key (bool, optional) {#parse section-(single)-keep_time_key}</h3><p>If true, keep time field in the record.</p><p>Default: -</p><h3 id="types-string-optional-parse-section-single-types">types (string, optional) {#parse section-(single)-types}</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><p>Default: -</p><h3 id="time_format-string-optional-parse-section-single-time_format">time_format (string, optional) {#parse section-(single)-time_format}</h3><p>Process value using specified format. This is available only when time_type is string</p><p>Default: -</p><h3 id="time_type-string-optional-parse-section-single-time_type">time_type (string, optional) {#parse section-(single)-time_type}</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="local_time-bool-optional-parse-section-single-local_time">local_time (bool, optional) {#parse section-(single)-local_time}</h3><p>Ff true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="utc-bool-optional-parse-section-single-utc">utc (bool, optional) {#parse section-(single)-utc}</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h3 id="timezone-string-optional-parse-section-single-timezone">timezone (string, optional) {#parse section-(single)-timezone}</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="format-string-optional-parse-section-single-format">format (string, optional) {#parse section-(single)-format}</h3><p>Only available when using type: multi_format</p><p>Default: -</p><h3 id="grok_pattern-string-optional-parse-section-single-grok_pattern">grok_pattern (string, optional) {#parse section-(single)-grok_pattern}</h3><p>Only available when using format: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><p>Default: -</p><h3 id="custom_pattern_path-secretsecret-optional-parse-section-single-custom_pattern_path">custom_pattern_path (*secret.Secret, optional) {#parse section-(single)-custom_pattern_path}</h3><p>Only available when using format: grok, multiline_grok. File that includes custom grok patterns.</p><p>Default: -</p><h3 id="grok_failure_key-string-optional-parse-section-single-grok_failure_key">grok_failure_key (string, optional) {#parse section-(single)-grok_failure_key}</h3><p>Only available when using format: grok, multiline_grok. The key has grok failure reason.</p><p>Default: -</p><h3 id="grok_name_key-string-optional-parse-section-single-grok_name_key">grok_name_key (string, optional) {#parse section-(single)-grok_name_key}</h3><p>Only available when using format: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><p>Default: -</p><h3 id="multiline_start_regexp-string-optional-parse-section-single-multiline_start_regexp">multiline_start_regexp (string, optional) {#parse section-(single)-multiline_start_regexp}</h3><p>Only available when using format: multiline_grok The regexp to match beginning of multiline.</p><p>Default: -</p><h3 id="grok_patterns-groksection-optional-parse-section-single-grok_patterns">grok_patterns ([]GrokSection, optional) {#parse section-(single)-grok_patterns}</h3><p>Only available when using format: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><p>Default: -</p><h2 id="grok-section">Grok Section</h2><h3 id="grok-section-name">name (string, optional)</h3><p>The name of grok section.</p><p>Default: -</p><h3 id="grok-section-pattern">pattern (string, required)</h3><p>The pattern of grok.</p><p>Default: -</p><h3 id="grok-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><p>Default: -</p><h3 id="grok-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><p>Default: time</p><h3 id="grok-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string.</p><p>Default: -</p><h3 id="grok-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: -</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">patterns</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">expression</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">key_name message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">remove_key_name_field true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">reserve_data true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>@<span style="color:#000">type multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">format nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">expression /foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">format regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#000">format none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b1ababb8fff927a359f5ee10ddd9740d">8.3.10 - Prometheus</h1><h1 id="prometheus-filterhttpsgithubcomfluentfluent-plugin-prometheusprometheus-outputfilter-plugin"><a href="https://github.com/fluent/fluent-plugin-prometheus#prometheus-outputfilter-plugin">Prometheus Filter</a></h1><h2 id="overview">Overview</h2><p>Prometheus Filter Plugin to count Incoming Records</p><h2 id="configuration">Configuration</h2><h2 id="prometheusconfig">PrometheusConfig</h2><h3 id="prometheusconfig-metrics">metrics ([]MetricSection, optional)</h3><p><a href="#metrics-section">Metrics Section</a></p><p>Default: -</p><h3 id="prometheusconfig-labels">labels (Label, optional)</h3><p>Default: -</p><h2 id="metrics-section">Metrics Section</h2><h3 id="metrics-section-name">name (string, required)</h3><p>Metrics name</p><p>Default: -</p><h3 id="metrics-section-type">type (string, required)</h3><p>Metrics type <a href="https://github.com/fluent/fluent-plugin-prometheus#counter-type">counter</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#gauge-type">gauge</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#summary-type">summary</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#histogram-type">histogram</a></p><p>Default: -</p><h3 id="metrics-section-desc">desc (string, required)</h3><p>Description of metric</p><p>Default: -</p><h3 id="metrics-section-key">key (string, optional)</h3><p>Key name of record for instrumentation.</p><p>Default: -</p><h3 id="metrics-section-buckets">buckets (string, optional)</h3><p>Buckets of record for instrumentation</p><p>Default: -</p><h3 id="metrics-section-labels">labels (Label, optional)</h3><p>Additional labels for this metric</p><p>Default: -</p><h2 id="example-prometheus-filter-configurations">Example <code>Prometheus</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">prometheus</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">metrics</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">total_counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">desc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">The total number of foo in message.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${hostname}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${tag}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$.kubernetes.namespace</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><pre tabindex="0"><code> &lt;filter **&gt;
   @type prometheus
   @id logging-demo-flow_2_prometheus
   &lt;metric&gt;
     desc The total number of foo in message.
     name total_counter
     type counter
     &lt;labels&gt;
       foo bar
     &lt;/labels&gt;
   &lt;/metric&gt;
   &lt;labels&gt;
     host ${hostname}
     namespace $.kubernetes.namespace
     tag ${tag}
   &lt;/labels&gt;
 &lt;/filter&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">8.3.11 - Record Modifier</h1><h1 id="record-modifierhttpsgithubcomrepeatedlyfluent-plugin-record-modifier"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier">Record Modifier</a></h1><h2 id="overview">Overview</h2><p>Modify each event record.</p><h2 id="configuration">Configuration</h2><h2 id="recordmodifier">RecordModifier</h2><h3 id="recordmodifier-prepare_value">prepare_value (string, optional)</h3><p>Prepare values for filtering in configure phase. Prepared values can be used in <record>. You can write any ruby code.</p><p>Default: -</p><h3 id="recordmodifier-char_encoding">char_encoding (string, optional)</h3><p>Fluentd including some plugins treats logs as a BINARY by default to forward. To overide that, use a target encoding or a from:to encoding here.</p><p>Default: -</p><h3 id="recordmodifier-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><p>Default: -</p><h3 id="recordmodifier-whitelist_keys">whitelist_keys (string, optional)</h3><p>This is exclusive with remove_keys</p><p>Default: -</p><h3 id="recordmodifier-replaces">replaces ([]Replace, optional)</h3><p>Replace specific value for keys</p><p>Default: -</p><h3 id="recordmodifier-records">records ([]Record, optional)</h3><p>Add records docs at: <a href="https://github.com/repeatedly/fluent-plugin-record-modifier">https://github.com/repeatedly/fluent-plugin-record-modifier</a> Records are represented as maps: <code>key: value</code></p><p>Default: -</p><h2 id="example-record-modifier-filter-configurations">Example <code>Record Modifier</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">record_modifier</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type record_modifier</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_record_modifier</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">foo bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">Replace Directive</a></h2><p>Specify replace rule. This directive contains three parameters.</p><h3 id="key-string-required-replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value-key">key (string, required) {#<a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">replace directive</a>-key}</h3><p>Key to search for</p><p>Default: -</p><h3 id="expression-string-required-replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value-expression">expression (string, required) {#<a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">replace directive</a>-expression}</h3><p>Regular expression</p><p>Default: -</p><h3 id="replace-string-required-replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value-replace">replace (string, required) {#<a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">replace directive</a>-replace}</h3><p>Value to replace with</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2adc391c4bf236f17f4dff5d5236127b">8.3.12 - Record Transformer</h1><h1 id="record-transformerhttpsdocsfluentdorgfilterrecord_transformer"><a href="https://docs.fluentd.org/filter/record_transformer">Record Transformer</a></h1><h2 id="overview">Overview</h2><p>Mutates/transforms incoming event streams.</p><h2 id="configuration">Configuration</h2><h2 id="recordtransformer">RecordTransformer</h2><h3 id="recordtransformer-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><p>Default: -</p><h3 id="recordtransformer-keep_keys">keep_keys (string, optional)</h3><p>A comma-delimited list of keys to keep.</p><p>Default: -</p><h3 id="recordtransformer-renew_record">renew_record (bool, optional)</h3><p>Create new Hash to transform incoming data</p><p>Default: false</p><h3 id="recordtransformer-renew_time_key">renew_time_key (string, optional)</h3><p>Specify field name of the record to overwrite the time of events. Its value must be unix time.</p><p>Default: -</p><h3 id="recordtransformer-enable_ruby">enable_ruby (bool, optional)</h3><p>When set to true, the full Ruby syntax is enabled in the ${&mldr;} expression.</p><p>Default: false</p><h3 id="recordtransformer-auto_typecast">auto_typecast (bool, optional)</h3><p>Use original value type.</p><p>Default: true</p><h3 id="recordtransformer-records">records ([]Record, optional)</h3><p>Add records docs at: <a href="https://docs.fluentd.org/filter/record_transformer">https://docs.fluentd.org/filter/record_transformer</a> Records are represented as maps: <code>key: value</code></p><p>Default: -</p><h2 id="example-record-transformer-filter-configurations">Example <code>Record Transformer</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">record_transformer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type record_transformer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_record_transformer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">foo bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;/record&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-06af9b3099c8f9f37d675b5aee19c604">8.3.13 - StdOut</h1><h1 id="stdout-filterhttpsdocsfluentdorgfilterstdout"><a href="https://docs.fluentd.org/filter/stdout">Stdout Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to print events to stdout</p><h2 id="configuration">Configuration</h2><h2 id="stdoutfilterconfig">StdOutFilterConfig</h2><h3 id="stdoutfilterconfig-output_type">output_type (string, optional)</h3><p>This is the option of stdout format.</p><p>Default: -</p><h2 id="example-stdout-filter-configurations">Example <code>StdOut</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">stdout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">output_type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">output_type json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-e5531904143c5008a8a49d371504912d">8.3.14 - SumoLogic</h1><h1 id="sumo-logic-collection-solution-for-kubernetes">Sumo Logic collection solution for Kubernetes</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/SumoLogic/sumologic-kubernetes-collection">https://github.com/SumoLogic/sumologic-kubernetes-collection</a></p><h2 id="configuration">Configuration</h2><h2 id="sumologic">SumoLogic</h2><h3 id="sumologic-source_category">source_category (string, optional)</h3><p>Source Category</p><p>Default: &ldquo;%{namespace}/%{pod_name}&rdquo;</p><h3 id="sumologic-source_category_replace_dash">source_category_replace_dash (string, optional)</h3><p>Source Category Replace Dash</p><p>Default: &ldquo;/&rdquo;</p><h3 id="sumologic-source_category_prefix">source_category_prefix (string, optional)</h3><p>Source Category Prefix</p><p>Default: kubernetes/</p><h3 id="sumologic-source_name">source_name (string, optional)</h3><p>Source Name</p><p>Default: &ldquo;%{namespace}.%{pod}.%{container}&rdquo;</p><h3 id="sumologic-log_format">log_format (string, optional)</h3><p>Log Format</p><p>Default: json</p><h3 id="sumologic-source_host">source_host (string, optional)</h3><p>Source Host</p><p>Default: ""</p><h3 id="sumologic-exclude_container_regex">exclude_container_regex (string, optional)</h3><p>Exclude Container Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_facility_regex">exclude_facility_regex (string, optional)</h3><p>Exclude Facility Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_host_regex">exclude_host_regex (string, optional)</h3><p>Exclude Host Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_namespace_regex">exclude_namespace_regex (string, optional)</h3><p>Exclude Namespace Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_pod_regex">exclude_pod_regex (string, optional)</h3><p>Exclude Pod Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_priority_regex">exclude_priority_regex (string, optional)</h3><p>Exclude Priority Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_unit_regex">exclude_unit_regex (string, optional)</h3><p>Exclude Unit Regex</p><p>Default: ""</p><h3 id="sumologic-tracing_format">tracing_format (*bool, optional)</h3><p>Tracing Format</p><p>Default: false</p><h3 id="sumologic-tracing_namespace">tracing_namespace (string, optional)</h3><p>Tracing Namespace</p><p>Default: &ldquo;namespace&rdquo;</p><h3 id="sumologic-tracing_pod">tracing_pod (string, optional)</h3><p>Tracing Pod</p><p>Default: &ldquo;pod&rdquo;</p><h3 id="sumologic-tracing_pod_id">tracing_pod_id (string, optional)</h3><p>Tracing Pod ID</p><p>Default: &ldquo;pod_id&rdquo;</p><h3 id="sumologic-tracing_container_name">tracing_container_name (string, optional)</h3><p>Tracing Container Name</p><p>Default: &ldquo;container_name&rdquo;</p><h3 id="sumologic-tracing_host">tracing_host (string, optional)</h3><p>Tracing Host</p><p>Default: &ldquo;hostname&rdquo;</p><h3 id="sumologic-tracing_label_prefix">tracing_label_prefix (string, optional)</h3><p>Tracing Label Prefix</p><p>Default: &ldquo;pod_label_&rdquo;</p><h3 id="sumologic-tracing_annotation_prefix">tracing_annotation_prefix (string, optional)</h3><p>Tracing Annotation Prefix</p><p>Default: &ldquo;pod_annotation_&rdquo;</p><h3 id="sumologic-source_host_key_name">source_host_key_name (string, optional)</h3><p>Source HostKey Name</p><p>Default: &ldquo;_sourceHost&rdquo;</p><h3 id="sumologic-source_category_key_name">source_category_key_name (string, optional)</h3><p>Source CategoryKey Name</p><p>Default: &ldquo;_sourceCategory&rdquo;</p><h3 id="sumologic-source_name_key_name">source_name_key_name (string, optional)</h3><p>Source NameKey Name</p><p>Default: &ldquo;_sourceName&rdquo;</p><h3 id="sumologic-collector_key_name">collector_key_name (string, optional)</h3><p>CollectorKey Name</p><p>Default: &ldquo;_collector&rdquo;</p><h3 id="sumologic-collector_value">collector_value (string, optional)</h3><p>Collector Value</p><p>Default: &ldquo;undefined&rdquo;</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">sumologic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">source_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;elso&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type kubernetes_sumologic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_sumologic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">source_name elso</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9f71d81ccc4b25c0f75938abbc9a158d">8.3.15 - Tag Normaliser</h1><h1 id="fluentd-plugin-to-re-tag-based-on-log-metadata">Fluentd Plugin to re-tag based on log metadata</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">https://github.com/kube-logging/fluent-plugin-tag-normaliser</a></p><p>Available kubernetes metadata</p><table>
<thead>
<tr>
<th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr>
<td>${pod_name}</td><td>Pod name</td><td>understood-butterfly-logging-demo-7dcdcfdcd7-h7p9n</td></tr><tr>
<td>${container_name}</td><td>Container name inside the Pod</td><td>logging-demo</td></tr><tr>
<td>${namespace_name}</td><td>Namespace name</td><td>default</td></tr><tr>
<td>${pod_id}</td><td>Kubernetes UUID for Pod</td><td>1f50d309-45a6-11e9-b795-025000000001</td></tr><tr>
<td>${labels}</td><td>Kubernetes Pod labels. This is a nested map. You can access nested attributes via <code>.</code></td><td>{&ldquo;app&rdquo;:&ldquo;logging-demo&rdquo;, &ldquo;pod-template-hash&rdquo;:&ldquo;7dcdcfdcd7&rdquo; }</td></tr><tr>
<td>${host}</td><td>Node hostname the Pod runs on</td><td>docker-desktop</td></tr><tr>
<td>${docker_id}</td><td>Docker UUID of the container</td><td>3a38148aa37aa3&mldr;</td></tr></tbody></table><h2 id="configuration">Configuration</h2><h2 id="tag-normaliser-parameters">Tag Normaliser parameters</h2><h3 id="tag-normaliser-parameters-format">format (string, optional)</h3><p>Re-Tag log messages info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">github</a></p><p>Default: ${namespace_name}.${pod_name}.${container_name}</p><h3 id="tag-normaliser-parameters-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: kubernetes.**</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cluster1.${namespace_name}.${pod_name}.${labels.app}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;match kubernetes.**&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type tag_normaliser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_tag_normaliser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">format cluster1.${namespace_name}.${pod_name}.${labels.app}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/match&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-c86a56fc7e085e5aea4460c0e18e5990">8.3.16 - Throttle</h1><h1 id="throttle-filterhttpsgithubcomrubrikincfluent-plugin-throttle"><a href="https://github.com/rubrikinc/fluent-plugin-throttle">Throttle Filter</a></h1><h2 id="overview">Overview</h2><p>A sentry plugin to throttle logs. Logs are grouped by a configurable key. When a group exceeds a configuration rate, logs are dropped for this group.</p><h2 id="configuration">Configuration</h2><h2 id="throttle">Throttle</h2><h3 id="throttle-group_key">group_key (string, optional)</h3><p>Used to group logs. Groups are rate limited independently</p><p>Default: kubernetes.container_name</p><h3 id="throttle-group_bucket_period_s">group_bucket_period_s (int, optional)</h3><p>This is the period of of time over which group_bucket_limit applies</p><p>Default: 60</p><h3 id="throttle-group_bucket_limit">group_bucket_limit (int, optional)</h3><p>Maximum number logs allowed per groups over the period of group_bucket_period_s</p><p>Default: 6000</p><h3 id="throttle-group_drop_logs">group_drop_logs (bool, optional)</h3><p>When a group reaches its limit, logs will be dropped from further processing if this value is true</p><p>Default: true</p><h3 id="throttle-group_reset_rate_s">group_reset_rate_s (int, optional)</h3><p>After a group has exceeded its bucket limit, logs are dropped until the rate per second falls below or equal to group_reset_rate_s.</p><p>Default: group_bucket_limit/group_bucket_period_s</p><h3 id="throttle-group_warning_delay_s">group_warning_delay_s (int, optional)</h3><p>When a group reaches its limit and as long as it is not reset, a warning message with the current log rate of the group is emitted repeatedly. This is the delay between every repetition.</p><p>Default: 10 seconds</p><h2 id="example-throttle-filter-configurations">Example <code>Throttle</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">throttle</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">group_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$.kubernetes.container_name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">type throttle</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span>@<span style="color:#000">id test_throttle</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">group_key $.kubernetes.container_name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-506383d863d6db46f320e08de47fb0c7">8.4 - Outputs</h1></div><div class="td-content">
<h1 id="pg-28f1e98e5b5c5f770fb8b2e592e1abf0">8.4.1 - Alibaba Cloud</h1><h1 id="aliyun-oss-plugin-for-fluentd">Aliyun OSS plugin for Fluentd</h1><h2 id="overview">Overview</h2><p><strong>Fluent OSS output plugin</strong> buffers event logs in local files and uploads them to OSS periodically in background threads.</p><p>This plugin splits events by using the timestamp of event logs. For example, a log &lsquo;2019-04-09 message Hello&rsquo; is reached, and then another log &lsquo;2019-04-10 message World&rsquo; is reached in this order, the former is stored in &ldquo;20190409.gz&rdquo; file, and latter in &ldquo;20190410.gz&rdquo; file.</p><p><strong>Fluent OSS input plugin</strong> reads data from OSS periodically.</p><p>This plugin uses MNS on the same region of the OSS bucket. We must setup MNS and OSS event notification before using this plugin.</p><p><a href="https://help.aliyun.com/document_detail/52656.html">This document</a> shows how to setup MNS and OSS event notification.</p><p>This plugin will poll events from MNS queue and extract object keys from these events, and then will read those objects from OSS.
More info at <a href="https://github.com/aliyun/fluent-plugin-oss">https://github.com/aliyun/fluent-plugin-oss</a></p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-endpoint">endpoint (string, required)</h3><p>OSS endpoint to connect to&rsquo;</p><p>Default: -</p><h3 id="output-config-bucket">bucket (string, required)</h3><p>Your bucket name</p><p>Default: -</p><h3 id="output-config-access_key_id">access_key_id (*secret.Secret, required)</h3><p>Your access key id <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-aaccess_key_secret">aaccess_key_secret (*secret.Secret, required)</h3><p>Your access secret key <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on OSS</p><p>Default: fluent/logs</p><h3 id="output-config-upload_crc_enable">upload_crc_enable (bool, optional)</h3><p>Upload crc enabled</p><p>Default: true</p><h3 id="output-config-download_crc_enable">download_crc_enable (bool, optional)</h3><p>Download crc enabled</p><p>Default: true</p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Timeout for open connections</p><p>Default: 10</p><h3 id="output-config-read_timeout">read_timeout (int, optional)</h3><p>Timeout for read response</p><p>Default: 120</p><h3 id="output-config-oss_sdk_log_dir">oss_sdk_log_dir (string, optional)</h3><p>OSS SDK log directory</p><p>Default: /var/log/td-agent</p><h3 id="output-config-key_format">key_format (string, optional)</h3><p>The format of OSS object keys</p><p>Default: %{path}/%{time_slice}<em>%{index}</em>%{thread_id}.%{file_extension}</p><h3 id="output-config-store_as">store_as (string, optional)</h3><p>Archive format on OSS: gzip, json, text, lzo, lzma2</p><p>Default: gzip</p><h3 id="output-config-auto_create_bucket">auto_create_bucket (bool, optional)</h3><p>desc &lsquo;Create OSS bucket if it does not exists</p><p>Default: false</p><h3 id="output-config-overwrite">overwrite (bool, optional)</h3><p>Overwrite already existing path</p><p>Default: false</p><h3 id="output-config-check_bucket">check_bucket (bool, optional)</h3><p>Check bucket if exists or not</p><p>Default: true</p><h3 id="output-config-check_object">check_object (bool, optional)</h3><p>Check object before creation</p><p>Default: true</p><h3 id="output-config-hex_random_length">hex_random_length (int, optional)</h3><p>The length of <code>%{hex_random}</code> placeholder(4-16)</p><p>Default: 4</p><h3 id="output-config-index_format">index_format (string, optional)</h3><p><code>sprintf</code> format for <code>%{index}</code></p><p>Default: %d</p><h3 id="output-config-warn_for_delay">warn_for_delay (string, optional)</h3><p>Given a threshold to treat events as delay, output warning logs if delayed events were put into OSS</p><p>Default: -</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-aeea1cd1922e8ddddba7f377f910cc60">8.4.2 - Amazon CloudWatch</h1><h1 id="cloudwatch-output-plugin-for-fluentd">CloudWatch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs or metrics to Amazon CloudWatch.
More info at <a href="https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs">https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">cloudwatch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsAccessKeyId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">aws_sec_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsSecretAccessKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">log_group_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">operator-log-group</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">log_stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">operator-log-stream</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">auto_create_stream true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-auto_create_stream">auto_create_stream (bool, optional)</h3><p>Create log group and stream automatically.</p><p>Default: false</p><h3 id="output-config-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-aws_instance_profile_credentials_retries">aws_instance_profile_credentials_retries (int, optional)</h3><p>Instance Profile Credentials call retries</p><p>Default: nil</p><h3 id="output-config-aws_use_sts">aws_use_sts (bool, optional)</h3><p>Enable AssumeRoleCredentials to authenticate, rather than the default credential hierarchy. See &lsquo;Cross-Account Operation&rsquo; below for more detail.</p><p>Default: -</p><h3 id="output-config-aws_sts_role_arn">aws_sts_role_arn (string, optional)</h3><p>The role ARN to assume when using cross-account sts authentication</p><p>Default: -</p><h3 id="output-config-aws_sts_session_name">aws_sts_session_name (string, optional)</h3><p>The session name to use with sts authentication</p><p>Default: &lsquo;fluentd&rsquo;</p><h3 id="output-config-concurrency">concurrency (int, optional)</h3><p>Use to set the number of threads pushing data to CloudWatch.</p><p>Default: 1</p><h3 id="output-config-endpoint">endpoint (string, optional)</h3><p>Use this parameter to connect to the local API endpoint (for testing)</p><p>Default: -</p><h3 id="output-config-http_proxy">http_proxy (string, optional)</h3><p>Use to set an optional HTTP proxy</p><p>Default: -</p><h3 id="output-config-include_time_key">include_time_key (bool, optional)</h3><p>Include time key as part of the log entry</p><p>Default: UTC</p><h3 id="output-config-json_handler">json_handler (string, optional)</h3><p>Name of the library to be used to handle JSON data. For now, supported libraries are json (default) and yajl</p><p>Default: -</p><h3 id="output-config-localtime">localtime (bool, optional)</h3><p>Use localtime timezone for include_time_key output (overrides UTC default)</p><p>Default: -</p><h3 id="output-config-log_group_aws_tags">log_group_aws_tags (string, optional)</h3><p>Set a hash with keys and values to tag the log group resource</p><p>Default: -</p><h3 id="output-config-log_group_aws_tags_key">log_group_aws_tags_key (string, optional)</h3><p>Specified field of records as AWS tags for the log group</p><p>Default: -</p><h3 id="output-config-log_group_name">log_group_name (string, optional)</h3><p>Name of log group to store logs</p><p>Default: -</p><h3 id="output-config-log_group_name_key">log_group_name_key (string, optional)</h3><p>Specified field of records as log group name</p><p>Default: -</p><h3 id="output-config-log_rejected_request">log_rejected_request (string, optional)</h3><p>Output rejected_log_events_info request log.</p><p>Default: false</p><h3 id="output-config-log_stream_name">log_stream_name (string, optional)</h3><p>Name of log stream to store logs</p><p>Default: -</p><h3 id="output-config-log_stream_name_key">log_stream_name_key (string, optional)</h3><p>Specified field of records as log stream name</p><p>Default: -</p><h3 id="output-config-max_events_per_batch">max_events_per_batch (int, optional)</h3><p>Maximum number of events to send at once</p><p>Default: 10000</p><h3 id="output-config-max_message_length">max_message_length (int, optional)</h3><p>Maximum length of the message</p><p>Default: -</p><h3 id="output-config-message_keys">message_keys (string, optional)</h3><p>Keys to send messages as events</p><p>Default: -</p><h3 id="output-config-put_log_events_disable_retry_limit">put_log_events_disable_retry_limit (bool, optional)</h3><p>If true, put_log_events_retry_limit will be ignored</p><p>Default: -</p><h3 id="output-config-put_log_events_retry_limit">put_log_events_retry_limit (int, optional)</h3><p>Maximum count of retry (if exceeding this, the events will be discarded)</p><p>Default: -</p><h3 id="output-config-put_log_events_retry_wait">put_log_events_retry_wait (string, optional)</h3><p>Time before retrying PutLogEvents (retry interval increases exponentially like put_log_events_retry_wait * (2 ^ retry_count))</p><p>Default: -</p><h3 id="output-config-region">region (string, required)</h3><p>AWS Region</p><p>Default: -</p><h3 id="output-config-remove_log_group_aws_tags_key">remove_log_group_aws_tags_key (string, optional)</h3><p>Remove field specified by log_group_aws_tags_key</p><p>Default: -</p><h3 id="output-config-remove_log_group_name_key">remove_log_group_name_key (string, optional)</h3><p>Remove field specified by log_group_name_key</p><p>Default: -</p><h3 id="output-config-remove_log_stream_name_key">remove_log_stream_name_key (string, optional)</h3><p>Remove field specified by log_stream_name_key</p><p>Default: -</p><h3 id="output-config-remove_retention_in_days">remove_retention_in_days (string, optional)</h3><p>Remove field specified by retention_in_days</p><p>Default: -</p><h3 id="output-config-retention_in_days">retention_in_days (string, optional)</h3><p>Use to set the expiry time for log group when created with auto_create_stream. (default to no expiry)</p><p>Default: -</p><h3 id="output-config-retention_in_days_key">retention_in_days_key (string, optional)</h3><p>Use specified field of records as retention period</p><p>Default: -</p><h3 id="output-config-use_tag_as_group">use_tag_as_group (bool, optional)</h3><p>Use tag as a group name</p><p>Default: -</p><h3 id="output-config-use_tag_as_stream">use_tag_as_stream (bool, optional)</h3><p>Use tag as a stream name</p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2b59c5fb4b2ccfdb47e90229617f245a">8.4.3 - Amazon Elasticsearch</h1><h1 id="amazon-elasticsearch-output-plugin-for-fluentd">Amazon Elasticsearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/atomita/fluent-plugin-aws-elasticsearch-service">https://github.com/atomita/fluent-plugin-aws-elasticsearch-service</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">awsElasticsearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">logstash_format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">include_tag_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tag_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;@log_name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://CLUSTER_ENDPOINT_URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">eu-west-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">access_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aws-key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">secret_access_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aws_secret</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="amazon-elasticsearch">Amazon Elasticsearch</h2><p>Send your logs to a Amazon Elasticsearch Service</p><h3 id="amazon-elasticsearch-flush_interval">flush_interval (string, optional)</h3><p>flush_interval</p><p>Default: -</p><h3 id="amazon-elasticsearch-endpoint">endpoint (*EndpointCredentials, optional)</h3><p>AWS Endpoint Credentials</p><p>Default: -</p><h3 id="amazon-elasticsearch-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="amazon-elasticsearch-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="amazon-elasticsearch-">(*ElasticsearchOutput, optional)</h3><p>ElasticSearch</p><p>Default: -</p><h2 id="endpoint-credentials">Endpoint Credentials</h2><p>endpoint</p><h3 id="endpoint-credentials-region">region (string, optional)</h3><p>AWS region. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><p>Default: -</p><h3 id="endpoint-credentials-url">url (string, optional)</h3><p>AWS connection url.</p><p>Default: -</p><h3 id="endpoint-credentials-access_key_id">access_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="endpoint-credentials-secret_access_key">secret_access_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="endpoint-credentials-assume_role_arn">assume_role_arn (*secret.Secret, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><p>Default: -</p><h3 id="endpoint-credentials-ecs_container_credentials_relative_uri">ecs_container_credentials_relative_uri (*secret.Secret, optional)</h3><p>Set with AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variable value</p><p>Default: -</p><h3 id="endpoint-credentials-assume_role_session_name">assume_role_session_name (*secret.Secret, optional)</h3><p>AssumeRoleWithWebIdentity <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html</a></p><p>Default: -</p><h3 id="endpoint-credentials-assume_role_web_identity_token_file">assume_role_web_identity_token_file (*secret.Secret, optional)</h3><p>AssumeRoleWithWebIdentity <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html</a></p><p>Default: -</p><h3 id="endpoint-credentials-sts_credentials_region">sts_credentials_region (*secret.Secret, optional)</h3><p>By default, the AWS Security Token Service (AWS STS) is available as a global service, and all AWS STS requests go to a single endpoint at <a href="https://sts.amazonaws.com">https://sts.amazonaws.com</a>. AWS recommends using Regional AWS STS endpoints instead of the global endpoint to reduce latency, build in redundancy, and increase session token validity. <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-dec03311d9f65d4bec85b8a63c46e105">8.4.4 - Amazon Kinesis</h1><h1 id="kinesis-firehose-output-plugin-for-fluentd">Kinesis Firehose output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_firehose">https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_firehose</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kinesisFirehose</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">delivery_stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example-stream-name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kinesisstream">KinesisStream</h2><p>Send your logs to a Kinesis Stream</p><h3 id="kinesisstream-delivery_stream_name">delivery_stream_name (string, required)</h3><p>Name of the delivery stream to put data.</p><p>Default: -</p><h3 id="kinesisstream-append_new_line">append_new_line (*bool, optional)</h3><p>If it is enabled, the plugin adds new line character (\n) to each serialized record. Before appending \n, plugin calls chomp and removes separator from the end of each record as chomp_record is true. Therefore, you don&rsquo;t need to enable chomp_record option when you use kinesis_firehose output with default configuration (append_new_line is true). If you want to set append_new_line false, you can choose chomp_record false (default) or true (compatible format with plugin v2). (Default:true)</p><p>Default: -</p><h3 id="kinesisstream-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_ses_token">aws_ses_token (*secret.Secret, optional)</h3><p>AWS session token. This parameter is optional, but can be provided if using MFA or temporary credentials when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_iam_retries">aws_iam_retries (int, optional)</h3><p>The number of attempts to make (with exponential backoff) when loading instance profile credentials from the EC2 metadata service using an IAM role. Defaults to 5 retries.</p><p>Default: -</p><h3 id="kinesisstream-assume_role_credentials">assume_role_credentials (*KinesisFirehoseAssumeRoleCredentials, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><p>Default: -</p><h3 id="kinesisstream-process_credentials">process_credentials (*KinesisFirehoseProcessCredentials, optional)</h3><p>This loads AWS access credentials from an external process.</p><p>Default: -</p><h3 id="kinesisstream-region">region (string, optional)</h3><p>AWS region of your stream. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><p>Default: -</p><h3 id="kinesisstream-retries_on_batch_request">retries_on_batch_request (int, optional)</h3><p>The plugin will put multiple records to Amazon Kinesis Data Streams in batches using PutRecords. A set of records in a batch may fail for reasons documented in the Kinesis Service API Reference for PutRecords. Failed records will be retried retries_on_batch_request times</p><p>Default: -</p><h3 id="kinesisstream-reset_backoff_if_success">reset_backoff_if_success (bool, optional)</h3><p>Boolean, default true. If enabled, when after retrying, the next retrying checks the number of succeeded records on the former batch request and reset exponential backoff if there is any success. Because batch request could be composed by requests across shards, simple exponential backoff for the batch request wouldn&rsquo;t work some cases.</p><p>Default: -</p><h3 id="kinesisstream-batch_request_max_count">batch_request_max_count (int, optional)</h3><p>Integer, default 500. The number of max count of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><p>Default: -</p><h3 id="kinesisstream-batch_request_max_size">batch_request_max_size (int, optional)</h3><p>Integer. The number of max size of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><p>Default: -</p><h3 id="kinesisstream-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="kinesisstream-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="kinesisstream-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="role_arn-string-required-assume-role-credentials-role_arn">role_arn (string, required) {#assume role-credentials-role_arn}</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><p>Default: -</p><h3 id="role_session_name-string-required-assume-role-credentials-role_session_name">role_session_name (string, required) {#assume role-credentials-role_session_name}</h3><p>An identifier for the assumed role session</p><p>Default: -</p><h3 id="policy-string-optional-assume-role-credentials-policy">policy (string, optional) {#assume role-credentials-policy}</h3><p>An IAM policy in JSON format</p><p>Default: -</p><h3 id="duration_seconds-string-optional-assume-role-credentials-duration_seconds">duration_seconds (string, optional) {#assume role-credentials-duration_seconds}</h3><p>The duration, in seconds, of the role session (900-3600)</p><p>Default: -</p><h3 id="external_id-string-optional-assume-role-credentials-external_id">external_id (string, optional) {#assume role-credentials-external_id}</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><p>Default: -</p><h2 id="process-credentials">Process Credentials</h2><p>process_credentials</p><h3 id="process-credentials-process">process (string, required)</h3><p>Command more info: <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-0309d186051d45cea94e4ea4a3d95907">8.4.5 - Amazon Kinesis</h1><h1 id="kinesis-stream-output-plugin-for-fluentd">Kinesis Stream output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_streams">https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_streams</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kinesisStream</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example-stream-name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kinesisstream">KinesisStream</h2><p>Send your logs to a Kinesis Stream</p><h3 id="kinesisstream-stream_name">stream_name (string, required)</h3><p>Name of the stream to put data.</p><p>Default: -</p><h3 id="kinesisstream-partition_key">partition_key (string, optional)</h3><p>A key to extract partition key from JSON object. Default nil, which means partition key will be generated randomly.</p><p>Default: -</p><h3 id="kinesisstream-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_ses_token">aws_ses_token (*secret.Secret, optional)</h3><p>AWS session token. This parameter is optional, but can be provided if using MFA or temporary credentials when your agent is not running on EC2 instance with an IAM Role.</p><p>Default: -</p><h3 id="kinesisstream-aws_iam_retries">aws_iam_retries (int, optional)</h3><p>The number of attempts to make (with exponential backoff) when loading instance profile credentials from the EC2 metadata service using an IAM role. Defaults to 5 retries.</p><p>Default: -</p><h3 id="kinesisstream-assume_role_credentials">assume_role_credentials (*KinesisStreamAssumeRoleCredentials, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><p>Default: -</p><h3 id="kinesisstream-process_credentials">process_credentials (*KinesisStreamProcessCredentials, optional)</h3><p>This loads AWS access credentials from an external process.</p><p>Default: -</p><h3 id="kinesisstream-region">region (string, optional)</h3><p>AWS region of your stream. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><p>Default: -</p><h3 id="kinesisstream-retries_on_batch_request">retries_on_batch_request (int, optional)</h3><p>The plugin will put multiple records to Amazon Kinesis Data Streams in batches using PutRecords. A set of records in a batch may fail for reasons documented in the Kinesis Service API Reference for PutRecords. Failed records will be retried retries_on_batch_request times</p><p>Default: -</p><h3 id="kinesisstream-reset_backoff_if_success">reset_backoff_if_success (bool, optional)</h3><p>Boolean, default true. If enabled, when after retrying, the next retrying checks the number of succeeded records on the former batch request and reset exponential backoff if there is any success. Because batch request could be composed by requests across shards, simple exponential backoff for the batch request wouldn&rsquo;t work some cases.</p><p>Default: -</p><h3 id="kinesisstream-batch_request_max_count">batch_request_max_count (int, optional)</h3><p>Integer, default 500. The number of max count of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><p>Default: -</p><h3 id="kinesisstream-batch_request_max_size">batch_request_max_size (int, optional)</h3><p>Integer. The number of max size of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><p>Default: -</p><h3 id="kinesisstream-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="kinesisstream-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="kinesisstream-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="assume-role-credentials-role_arn">role_arn (string, required)</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><p>Default: -</p><h3 id="assume-role-credentials-role_session_name">role_session_name (string, required)</h3><p>An identifier for the assumed role session</p><p>Default: -</p><h3 id="assume-role-credentials-policy">policy (string, optional)</h3><p>An IAM policy in JSON format</p><p>Default: -</p><h3 id="assume-role-credentials-duration_seconds">duration_seconds (string, optional)</h3><p>The duration, in seconds, of the role session (900-3600)</p><p>Default: -</p><h3 id="assume-role-credentials-external_id">external_id (string, optional)</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><p>Default: -</p><h2 id="process-credentials">Process Credentials</h2><p>process_credentials</p><h3 id="process-credentials-process">process (string, required)</h3><p>Command more info: <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f6b80b815b14c83b2fe835b820aa13d0">8.4.6 - Amazon S3</h1><h1 id="amazon-s3-plugin-for-fluentd">Amazon S3 plugin for Fluentd</h1><h2 id="overview">Overview</h2><p><strong>s3</strong> output plugin buffers event logs in local file and upload it to S3 periodically. This plugin splits files exactly by using the time of event logs (not the time when the logs are received). For example, a log &lsquo;2011-01-02 message B&rsquo; is reached, and then another log &lsquo;2011-01-03 message B&rsquo; is reached in this order, the former one is stored in &ldquo;20110102.gz&rdquo; file, and latter one in &ldquo;20110103.gz&rdquo; file.</p><blockquote>
<p>Example: <a href="../../../../quickstarts/example-s3/">S3 Output Deployment</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">s3</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsAccessKeyId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">aws_sec_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsSecretAccessKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">s3_bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-amazon-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">s3_region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">eu-central-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logs/${tag}/%Y/%m/%d/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-check_apikey_on_start">check_apikey_on_start (string, optional)</h3><p>Check AWS key on start</p><p>Default: -</p><h3 id="output-config-grant_read">grant_read (string, optional)</h3><p>Allows grantee to read the object data and its metadata</p><p>Default: -</p><h3 id="output-config-overwrite">overwrite (string, optional)</h3><p>Overwrite already existing path</p><p>Default: -</p><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on S3</p><p>Default: -</p><h3 id="output-config-grant_write_acp">grant_write_acp (string, optional)</h3><p>Allows grantee to write the ACL for the applicable object</p><p>Default: -</p><h3 id="output-config-check_bucket">check_bucket (string, optional)</h3><p>Check bucket if exists or not</p><p>Default: -</p><h3 id="output-config-sse_customer_key">sse_customer_key (string, optional)</h3><p>Specifies the customer-provided encryption key for Amazon S3 to use in encrypting data</p><p>Default: -</p><h3 id="output-config-sse_customer_key_md5">sse_customer_key_md5 (string, optional)</h3><p>Specifies the 128-bit MD5 digest of the encryption key according to RFC 1321</p><p>Default: -</p><h3 id="output-config-compute_checksums">compute_checksums (string, optional)</h3><p>AWS SDK uses MD5 for API request/response by default</p><p>Default: -</p><h3 id="output-config-warn_for_delay">warn_for_delay (string, optional)</h3><p>Given a threshold to treat events as delay, output warning logs if delayed events were put into s3</p><p>Default: -</p><h3 id="output-config-use_bundled_cert">use_bundled_cert (string, optional)</h3><p>Use aws-sdk-ruby bundled cert</p><p>Default: -</p><h3 id="output-config-s3_endpoint">s3_endpoint (string, optional)</h3><p>Custom S3 endpoint (like minio)</p><p>Default: -</p><h3 id="output-config-ssekms_key_id">ssekms_key_id (string, optional)</h3><p>Specifies the AWS KMS key ID to use for object encryption</p><p>Default: -</p><h3 id="output-config-s3_metadata">s3_metadata (string, optional)</h3><p>Arbitrary S3 metadata headers to set for the object</p><p>Default: -</p><h3 id="output-config-force_path_style">force_path_style (string, optional)</h3><p>If true, the bucket name is always left in the request URI and never moved to the host as a sub-domain</p><p>Default: -</p><h3 id="output-config-auto_create_bucket">auto_create_bucket (string, optional)</h3><p>Create S3 bucket if it does not exists</p><p>Default: -</p><h3 id="output-config-index_format">index_format (string, optional)</h3><p><code>sprintf</code> format for <code>%{index}</code></p><p>Default: -</p><h3 id="output-config-signature_version">signature_version (string, optional)</h3><p>Signature version for API Request (s3,v4)</p><p>Default: -</p><h3 id="output-config-enable_transfer_acceleration">enable_transfer_acceleration (string, optional)</h3><p>If true, S3 Transfer Acceleration will be enabled for uploads. IMPORTANT: You must first enable this feature on your destination S3 bucket</p><p>Default: -</p><h3 id="output-config-ssl_verify_peer">ssl_verify_peer (string, optional)</h3><p>If false, the certificate of endpoint will not be verified</p><p>Default: -</p><h3 id="output-config-proxy_uri">proxy_uri (string, optional)</h3><p>URI of proxy environment</p><p>Default: -</p><h3 id="output-config-grant_read_acp">grant_read_acp (string, optional)</h3><p>Allows grantee to read the object ACL</p><p>Default: -</p><h3 id="output-config-check_object">check_object (string, optional)</h3><p>Check object before creation</p><p>Default: -</p><h3 id="output-config-sse_customer_algorithm">sse_customer_algorithm (string, optional)</h3><p>Specifies the algorithm to use to when encrypting the object</p><p>Default: -</p><h3 id="output-config-use_server_side_encryption">use_server_side_encryption (string, optional)</h3><p>The Server-side encryption algorithm used when storing this object in S3 (AES256, aws:kms)</p><p>Default: -</p><h3 id="output-config-s3_region">s3_region (string, optional)</h3><p>S3 region name</p><p>Default: -</p><h3 id="output-config-acl">acl (string, optional)</h3><p>Permission for the object in S3</p><p>Default: -</p><h3 id="output-config-grant_full_control">grant_full_control (string, optional)</h3><p>Allows grantee READ, READ_ACP, and WRITE_ACP permissions on the object</p><p>Default: -</p><h3 id="output-config-hex_random_length">hex_random_length (string, optional)</h3><p>The length of <code>%{hex_random}</code> placeholder(4-16)</p><p>Default: -</p><h3 id="output-config-s3_object_key_format">s3_object_key_format (string, optional)</h3><p>The format of S3 object keys (default: %{path}%{time_slice}<em>%{uuid_hash}</em>%{index}.%{file_extension})</p><p>Default: %{path}%{time_slice}<em>%{uuid_hash}</em>%{index}.%{file_extension}</p><h3 id="output-config-s3_bucket">s3_bucket (string, required)</h3><p>S3 bucket name</p><p>Default: -</p><h3 id="output-config-store_as">store_as (string, optional)</h3><p>Archive format on S3</p><p>Default: -</p><h3 id="output-config-storage_class">storage_class (string, optional)</h3><p>The type of storage to use for the object, for example STANDARD, REDUCED_REDUNDANCY, STANDARD_IA, ONEZONE_IA, INTELLIGENT_TIERING, GLACIER, DEEP_ARCHIVE, OUTPOSTS, GLACIER_IR For a complete list of possible values, see the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html#AmazonS3-PutObject-request-header-StorageClass">Amazon S3 API reference</a>.</p><p>Default: -</p><h3 id="output-config-aws_iam_retries">aws_iam_retries (string, optional)</h3><p>The number of attempts to load instance profile credentials from the EC2 metadata service using IAM role</p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="output-config-assume_role_credentials">assume_role_credentials (*S3AssumeRoleCredentials, optional)</h3><p><a href="#assume-role-credentials">Assume Role Credentials</a></p><p>Default: -</p><h3 id="output-config-instance_profile_credentials">instance_profile_credentials (*S3InstanceProfileCredentials, optional)</h3><p><a href="#instance-profile-credentials">Instance Profile Credentials</a></p><p>Default: -</p><h3 id="output-config-shared_credentials">shared_credentials (*S3SharedCredentials, optional)</h3><p><a href="#shared-credentials">Shared Credentials</a></p><p>Default: -</p><h3 id="output-config-compress">compress (*Compress, optional)</h3><p>Parquet compressor</p><p>Default: -</p><h3 id="output-config-oneeye_format">oneeye_format (bool, optional)</h3><p>One-eye format trigger</p><p>Default: false</p><h3 id="output-config-clustername">clustername (string, optional)</h3><p>Custom cluster name</p><p>Default: one-eye</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="role_arn-string-required-assume-role-credentials-role_arn">role_arn (string, required) {#assume role-credentials-role_arn}</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><p>Default: -</p><h3 id="role_session_name-string-required-assume-role-credentials-role_session_name">role_session_name (string, required) {#assume role-credentials-role_session_name}</h3><p>An identifier for the assumed role session</p><p>Default: -</p><h3 id="policy-string-optional-assume-role-credentials-policy">policy (string, optional) {#assume role-credentials-policy}</h3><p>An IAM policy in JSON format</p><p>Default: -</p><h3 id="duration_seconds-string-optional-assume-role-credentials-duration_seconds">duration_seconds (string, optional) {#assume role-credentials-duration_seconds}</h3><p>The duration, in seconds, of the role session (900-3600)</p><p>Default: -</p><h3 id="external_id-string-optional-assume-role-credentials-external_id">external_id (string, optional) {#assume role-credentials-external_id}</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><p>Default: -</p><h2 id="instance-profile-credentials">Instance Profile Credentials</h2><p>instance_profile_credentials</p><h3 id="ip_address-string-optional-instance-profile-credentials-ip_address">ip_address (string, optional) {#instance profile-credentials-ip_address}</h3><p>IP address</p><p>Default: 169.254.169.254</p><h3 id="port-string-optional-instance-profile-credentials-port">port (string, optional) {#instance profile-credentials-port}</h3><p>Port number</p><p>Default: 80</p><h3 id="http_open_timeout-string-optional-instance-profile-credentials-http_open_timeout">http_open_timeout (string, optional) {#instance profile-credentials-http_open_timeout}</h3><p>Number of seconds to wait for the connection to open</p><p>Default: -</p><h3 id="http_read_timeout-string-optional-instance-profile-credentials-http_read_timeout">http_read_timeout (string, optional) {#instance profile-credentials-http_read_timeout}</h3><p>Number of seconds to wait for one block to be read</p><p>Default: -</p><h3 id="retries-string-optional-instance-profile-credentials-retries">retries (string, optional) {#instance profile-credentials-retries}</h3><p>Number of times to retry when retrieving credentials</p><p>Default: -</p><h2 id="shared-credentials">Shared Credentials</h2><p>shared_credentials</p><h3 id="shared-credentials-profile_name">profile_name (string, optional)</h3><p>Profile name. Default to &lsquo;default&rsquo; or ENV[&lsquo;AWS_PROFILE&rsquo;]</p><p>Default: -</p><h3 id="shared-credentials-path">path (string, optional)</h3><p>Path to the shared file.</p><p>Default: $HOME/.aws/credentials</p><h2 id="parquet-compressor">Parquet compressor</h2><p>parquet compressor</p><h3 id="parquet-compressor-parquet_compression_codec">parquet_compression_codec (string, optional)</h3><p>Parquet compression codec. (uncompressed, snappy, gzip, lzo, brotli, lz4, zstd)</p><p>Default: snappy</p><h3 id="parquet-compressor-parquet_page_size">parquet_page_size (string, optional)</h3><p>Parquet file page size.</p><p>Default: 8192 bytes</p><h3 id="parquet-compressor-parquet_row_group_size">parquet_row_group_size (string, optional)</h3><p>Parquet file row group size.</p><p>Default: 128 MB</p><h3 id="parquet-compressor-record_type">record_type (string, optional)</h3><p>Record data format type. (avro csv jsonl msgpack tsv msgpack json)</p><p>Default: msgpack</p><h3 id="parquet-compressor-schema_type">schema_type (string, optional)</h3><p>Schema type. (avro, bigquery)</p><p>Default: avro</p><h3 id="parquet-compressor-schema_file">schema_file (string, optional)</h3><p>Path to schema file.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3fa3b93039c08434aba115eb9ab22b12">8.4.7 - Azure Storage</h1><h1 id="azure-storage-output-plugin-for-fluentd">Azure Storage output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Azure Storage output plugin buffers logs in local file and upload them to Azure Storage periodically.
More info at <a href="https://github.com/microsoft/fluent-plugin-azure-storage-append-blob">https://github.com/microsoft/fluent-plugin-azure-storage-append-blob</a></p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on Azure</p><p>Default: -</p><h3 id="output-config-azure_storage_account">azure_storage_account (*secret.Secret, required)</h3><p>Your azure storage account <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-azure_storage_access_key">azure_storage_access_key (*secret.Secret, optional)</h3><p>Your azure storage access key <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-azure_storage_sas_token">azure_storage_sas_token (*secret.Secret, optional)</h3><p>Your azure storage sas token <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-azure_container">azure_container (string, required)</h3><p>Your azure storage container</p><p>Default: -</p><h3 id="output-config-azure_imds_api_version">azure_imds_api_version (string, optional)</h3><p>Azure Instance Metadata Service API Version</p><p>Default: -</p><h3 id="output-config-azure_object_key_format">azure_object_key_format (string, optional)</h3><p>Object key format</p><p>Default: %{path}%{time_slice}_%{index}.%{file_extension}</p><h3 id="output-config-auto_create_container">auto_create_container (bool, optional)</h3><p>Automatically create container if not exists</p><p>Default: true</p><h3 id="output-config-format">format (string, optional)</h3><p>Compat format type: out_file, json, ltsv (default: out_file)</p><p>Default: json</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-67bcee478125d9574288135a71954591">8.4.8 - Buffer</h1><h2 id="buffer">Buffer</h2><h3 id="buffer-disabled">disabled (bool, optional)</h3><p>Disable buffer section (default: false)</p><p>Default: false,hidden</p><h3 id="buffer-type">type (string, optional)</h3><p>Fluentd core bundles memory and file plugins. 3rd party plugins are also available when installed.</p><p>Default: -</p><h3 id="buffer-tags">tags (*string, optional)</h3><p>When tag is specified as buffer chunk key, output plugin writes events into chunks separately per tags.</p><p>Default: tag,time</p><h3 id="buffer-path">path (string, optional)</h3><p>The path where buffer chunks are stored. The &lsquo;*&rsquo; is replaced with random characters. It&rsquo;s highly recommended to leave this default.</p><p>Default: operator generated</p><h3 id="buffer-chunk_limit_size">chunk_limit_size (string, optional)</h3><p>The max size of each chunks: events will be written into chunks until the size of chunks become this size (default: 8MB)</p><p>Default: 8MB</p><h3 id="buffer-chunk_limit_records">chunk_limit_records (int, optional)</h3><p>The max number of events that each chunks can store in it</p><p>Default: -</p><h3 id="buffer-total_limit_size">total_limit_size (string, optional)</h3><p>The size limitation of this buffer plugin instance. Once the total size of stored buffer reached this threshold, all append operations will fail with error (and data will be lost)</p><p>Default: -</p><h3 id="buffer-queue_limit_length">queue_limit_length (int, optional)</h3><p>The queue length limitation of this buffer plugin instance</p><p>Default: -</p><h3 id="buffer-chunk_full_threshold">chunk_full_threshold (string, optional)</h3><p>The percentage of chunk size threshold for flushing. output plugin will flush the chunk when actual size reaches chunk_limit_size * chunk_full_threshold (== 8MB * 0.95 in default)</p><p>Default: -</p><h3 id="buffer-queued_chunks_limit_size">queued_chunks_limit_size (int, optional)</h3><p>Limit the number of queued chunks. If you set smaller flush_interval, e.g. 1s, there are lots of small queued chunks in buffer. This is not good with file buffer because it consumes lots of fd resources when output destination has a problem. This parameter mitigates such situations.</p><p>Default: -</p><h3 id="buffer-compress">compress (string, optional)</h3><p>If you set this option to gzip, you can get Fluentd to compress data records before writing to buffer chunks.</p><p>Default: -</p><h3 id="buffer-flush_at_shutdown">flush_at_shutdown (bool, optional)</h3><p>The value to specify to flush/write all buffer chunks at shutdown, or not</p><p>Default: -</p><h3 id="buffer-flush_mode">flush_mode (string, optional)</h3><p>Default: default (equals to lazy if time is specified as chunk key, interval otherwise) lazy: flush/write chunks once per timekey interval: flush/write chunks per specified time via flush_interval immediate: flush/write chunks immediately after events are appended into chunks</p><p>Default: -</p><h3 id="buffer-flush_interval">flush_interval (string, optional)</h3><p>Default: 60s</p><p>Default: -</p><h3 id="buffer-flush_thread_count">flush_thread_count (int, optional)</h3><p>The number of threads of output plugins, which is used to write chunks in parallel</p><p>Default: -</p><h3 id="buffer-flush_thread_interval">flush_thread_interval (string, optional)</h3><p>The sleep interval seconds of threads to wait next flush trial (when no chunks are waiting)</p><p>Default: -</p><h3 id="buffer-flush_thread_burst_interval">flush_thread_burst_interval (string, optional)</h3><p>The sleep interval seconds of threads between flushes when output plugin flushes waiting chunks next to next</p><p>Default: -</p><h3 id="buffer-delayed_commit_timeout">delayed_commit_timeout (string, optional)</h3><p>The timeout seconds until output plugin decides that async write operation fails</p><p>Default: -</p><h3 id="buffer-overflow_action">overflow_action (string, optional)</h3><p>How output plugin behaves when its buffer queue is full throw_exception: raise exception to show this error in log block: block processing of input plugin to emit events into that buffer drop_oldest_chunk: drop/purge oldest chunk to accept newly incoming chunk</p><p>Default: -</p><h3 id="buffer-retry_timeout">retry_timeout (string, optional)</h3><p>The maximum seconds to retry to flush while failing, until plugin discards buffer chunks</p><p>Default: -</p><h3 id="buffer-retry_forever">retry_forever (*bool, optional)</h3><p>If true, plugin will ignore retry_timeout and retry_max_times options and retry flushing forever</p><p>Default: true</p><h3 id="buffer-retry_max_times">retry_max_times (int, optional)</h3><p>The maximum number of times to retry to flush while failing</p><p>Default: -</p><h3 id="buffer-retry_secondary_threshold">retry_secondary_threshold (string, optional)</h3><p>The ratio of retry_timeout to switch to use secondary while failing (Maximum valid value is 1.0)</p><p>Default: -</p><h3 id="buffer-retry_type">retry_type (string, optional)</h3><p>exponential_backoff: wait seconds will become large exponentially per failures periodic: output plugin will retry periodically with fixed intervals (configured via retry_wait)</p><p>Default: -</p><h3 id="buffer-retry_wait">retry_wait (string, optional)</h3><p>Seconds to wait before next retry to flush, or constant factor of exponential backoff</p><p>Default: -</p><h3 id="buffer-retry_exponential_backoff_base">retry_exponential_backoff_base (string, optional)</h3><p>The base number of exponential backoff for retries</p><p>Default: -</p><h3 id="buffer-retry_max_interval">retry_max_interval (string, optional)</h3><p>The maximum interval seconds for exponential backoff between retries while failing</p><p>Default: -</p><h3 id="buffer-retry_randomize">retry_randomize (bool, optional)</h3><p>If true, output plugin will retry after randomized interval not to do burst retries</p><p>Default: -</p><h3 id="buffer-disable_chunk_backup">disable_chunk_backup (bool, optional)</h3><p>Instead of storing unrecoverable chunks in the backup directory, just discard them. This option is new in Fluentd v1.2.6.</p><p>Default: -</p><h3 id="buffer-timekey">timekey (string, required)</h3><p>Output plugin will flush chunks per specified time (enabled when time is specified in chunk keys)</p><p>Default: 10m</p><h3 id="buffer-timekey_wait">timekey_wait (string, optional)</h3><p>Output plugin writes chunks after timekey_wait seconds later after timekey expiration</p><p>Default: 1m</p><h3 id="buffer-timekey_use_utc">timekey_use_utc (bool, optional)</h3><p>Output plugin decides to use UTC or not to format placeholders using timekey</p><p>Default: -</p><h3 id="buffer-timekey_zone">timekey_zone (string, optional)</h3><p>The timezone (-0700 or Asia/Tokyo) string for formatting timekey placeholders</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-cfa15a5d894da7ae0606dc5571b76531">8.4.9 - Datadog</h1><h1 id="datadog-output-plugin-for-fluentd">Datadog output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>It mainly contains a proper JSON formatter and a socket handler that streams logs directly to Datadog - so no need to use a log shipper if you don&rsquo;t wan&rsquo;t to.
More info at <a href="https://github.com/DataDog/fluent-plugin-datadog">https://github.com/DataDog/fluent-plugin-datadog</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">datadog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">api_key &#39;&lt;YOUR_API_KEY&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_source</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;INTEGRATION_NAME&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;KEY1:VALUE1&gt;,&lt;KEY2:VALUE2&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_sourcecategory</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;YOUR_SOURCE_CATEGORY&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-api_key">api_key (*secret.Secret, required)</h3><p>This parameter is required in order to authenticate your fluent agent. +docLink:&ldquo;Secret,../secret/&rdquo;</p><p>Default: nil</p><h3 id="output-config-use_json">use_json (bool, optional)</h3><p>Event format, if true, the event is sent in json format. Othwerwise, in plain text.</p><p>Default: true</p><h3 id="output-config-include_tag_key">include_tag_key (bool, optional)</h3><p>Automatically include the Fluentd tag in the record.</p><p>Default: false</p><h3 id="output-config-tag_key">tag_key (string, optional)</h3><p>Where to store the Fluentd tag.</p><p>Default: &ldquo;tag&rdquo;</p><h3 id="output-config-timestamp_key">timestamp_key (string, optional)</h3><p>Name of the attribute which will contain timestamp of the log event. If nil, timestamp attribute is not added.</p><p>Default: &ldquo;@timestamp&rdquo;</p><h3 id="output-config-use_ssl">use_ssl (bool, optional)</h3><p>If true, the agent initializes a secure connection to Datadog. In clear TCP otherwise.</p><p>Default: true</p><h3 id="output-config-no_ssl_validation">no_ssl_validation (bool, optional)</h3><p>Disable SSL validation (useful for proxy forwarding)</p><p>Default: false</p><h3 id="output-config-ssl_port">ssl_port (string, optional)</h3><p>Port used to send logs over a SSL encrypted connection to Datadog. If use_http is disabled, use 10516 for the US region and 443 for the EU region.</p><p>Default: &ldquo;443&rdquo;</p><h3 id="output-config-max_retries">max_retries (string, optional)</h3><p>The number of retries before the output plugin stops. Set to -1 for unlimited retries</p><p>Default: &ldquo;-1&rdquo;</p><h3 id="output-config-max_backoff">max_backoff (string, optional)</h3><p>The maximum time waited between each retry in seconds</p><p>Default: &ldquo;30&rdquo;</p><h3 id="output-config-use_http">use_http (bool, optional)</h3><p>Enable HTTP forwarding. If you disable it, make sure to change the port to 10514 or ssl_port to 10516</p><p>Default: true</p><h3 id="output-config-use_compression">use_compression (bool, optional)</h3><p>Enable log compression for HTTP</p><p>Default: true</p><h3 id="output-config-compression_level">compression_level (string, optional)</h3><p>Set the log compression level for HTTP (1 to 9, 9 being the best ratio)</p><p>Default: &ldquo;6&rdquo;</p><h3 id="output-config-dd_source">dd_source (string, optional)</h3><p>This tells Datadog what integration it is</p><p>Default: nil</p><h3 id="output-config-dd_sourcecategory">dd_sourcecategory (string, optional)</h3><p>Multiple value attribute. Can be used to refine the source attribute</p><p>Default: nil</p><h3 id="output-config-dd_tags">dd_tags (string, optional)</h3><p>Custom tags with the following format &ldquo;key1:value1, key2:value2&rdquo;</p><p>Default: nil</p><h3 id="output-config-dd_hostname">dd_hostname (string, optional)</h3><p>Used by Datadog to identify the host submitting the logs.</p><p>Default: &ldquo;hostname -f&rdquo;</p><h3 id="output-config-service">service (string, optional)</h3><p>Used by Datadog to correlate between logs, traces and metrics.</p><p>Default: nil</p><h3 id="output-config-port">port (string, optional)</h3><p>Proxy port when logs are not directly forwarded to Datadog and ssl is not used</p><p>Default: &ldquo;80&rdquo;</p><h3 id="output-config-host">host (string, optional)</h3><p>Proxy endpoint when logs are not directly forwarded to Datadog</p><p>Default: &ldquo;http-intake.logs.datadoghq.com&rdquo;</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d4855c4f7dc79bc11e74c046473de585">8.4.10 - Elasticsearch</h1><h1 id="elasticsearch-output-plugin-for-fluentd">Elasticsearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/uken/fluent-plugin-elasticsearch">https://github.com/uken/fluent-plugin-elasticsearch</a></p><blockquote>
<p>Example Deployment: <a href="../../../../quickstarts/es-nginx/">Save all logs to ElasticSearch</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">elasticsearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elasticsearch-elasticsearch-cluster.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9200</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_version</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">TLSv1_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="elasticsearch">Elasticsearch</h2><p>Send your logs to Elasticsearch</p><h3 id="elasticsearch-host">host (string, optional)</h3><p>You can specify Elasticsearch host by this parameter.</p><p>Default: localhost</p><h3 id="elasticsearch-port">port (int, optional)</h3><p>You can specify Elasticsearch port by this parameter.</p><p>Default: 9200</p><h3 id="elasticsearch-hosts">hosts (string, optional)</h3><p>You can specify multiple Elasticsearch hosts with separator &ldquo;,&rdquo;. If you specify hosts option, host and port options are ignored.</p><p>Default: -</p><h3 id="elasticsearch-user">user (string, optional)</h3><p>User for HTTP Basic authentication. This plugin will escape required URL encoded characters within %{} placeholders. e.g. %{demo+}</p><p>Default: -</p><h3 id="elasticsearch-password">password (*secret.Secret, optional)</h3><p>Password for HTTP Basic authentication. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="elasticsearch-path">path (string, optional)</h3><p>Path for HTTP Basic authentication.</p><p>Default: -</p><h3 id="elasticsearch-scheme">scheme (string, optional)</h3><p>Connection scheme</p><p>Default: http</p><h3 id="elasticsearch-ssl_verify">ssl_verify (*bool, optional)</h3><p>Skip ssl verification (default: true)</p><p>Default: true</p><h3 id="elasticsearch-ssl_version">ssl_version (string, optional)</h3><p>If you want to configure SSL/TLS version, you can specify ssl_version parameter. [SSLv23, TLSv1, TLSv1_1, TLSv1_2]</p><p>Default: -</p><h3 id="elasticsearch-ssl_max_version">ssl_max_version (string, optional)</h3><p>Specify min/max SSL/TLS version</p><p>Default: -</p><h3 id="elasticsearch-ssl_min_version">ssl_min_version (string, optional)</h3><p>Default: -</p><h3 id="elasticsearch-ca_file">ca_file (*secret.Secret, optional)</h3><p>CA certificate</p><p>Default: -</p><h3 id="elasticsearch-client_cert">client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><p>Default: -</p><h3 id="elasticsearch-client_key">client_key (*secret.Secret, optional)</h3><p>Client certificate key</p><p>Default: -</p><h3 id="elasticsearch-client_key_pass">client_key_pass (*secret.Secret, optional)</h3><p>Client key password</p><p>Default: -</p><h3 id="elasticsearch-logstash_format">logstash_format (bool, optional)</h3><p>Enable Logstash log format.</p><p>Default: false</p><h3 id="elasticsearch-include_timestamp">include_timestamp (bool, optional)</h3><p>Adds a @timestamp field to the log, following all settings logstash_format does, except without the restrictions on index_name. This allows one to log to an alias in Elasticsearch and utilize the rollover API.</p><p>Default: false</p><h3 id="elasticsearch-logstash_prefix">logstash_prefix (string, optional)</h3><p>Set the Logstash prefix.</p><p>Default: logstash</p><h3 id="elasticsearch-logstash_prefix_separator">logstash_prefix_separator (string, optional)</h3><p>Set the Logstash prefix separator.</p><p>Default: -</p><h3 id="elasticsearch-logstash_dateformat">logstash_dateformat (string, optional)</h3><p>Set the Logstash date format.</p><p>Default: %Y.%m.%d</p><h3 id="elasticsearch-index_name">index_name (string, optional)</h3><p>The index name to write events to</p><p>Default: fluentd</p><h3 id="elasticsearch-type_name">type_name (string, optional)</h3><p>Set the index type for elasticsearch. This is the fallback if <code>target_type_key</code> is missing.</p><p>Default: fluentd</p><h3 id="elasticsearch-pipeline">pipeline (string, optional)</h3><p>This param is to set a pipeline id of your elasticsearch to be added into the request, you can configure ingest node.</p><p>Default: -</p><h3 id="elasticsearch-time_key_format">time_key_format (string, optional)</h3><p>The format of the time stamp field (@timestamp or what you specify with time_key). This parameter only has an effect when logstash_format is true as it only affects the name of the index we write to.</p><p>Default: -</p><h3 id="elasticsearch-time_precision">time_precision (string, optional)</h3><p>Should the record not include a time_key, define the degree of sub-second time precision to preserve from the time portion of the routed event.</p><p>Default: -</p><h3 id="elasticsearch-time_key">time_key (string, optional)</h3><p>By default, when inserting records in Logstash format, @timestamp is dynamically created with the time at log ingestion. If you&rsquo;d like to use a custom time, include an @timestamp with your record.</p><p>Default: -</p><h3 id="elasticsearch-utc_index">utc_index (*bool, optional)</h3><p>By default, the records inserted into index logstash-YYMMDD with UTC (Coordinated Universal Time). This option allows to use local time if you describe utc_index to false.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-suppress_type_name">suppress_type_name (*bool, optional)</h3><p>Suppress type name to avoid warnings in Elasticsearch 7.x</p><p>Default: -</p><h3 id="elasticsearch-target_index_key">target_index_key (string, optional)</h3><p>Tell this plugin to find the index name to write to in the record under this key in preference to other mechanisms. Key can be specified as path to nested record using dot (&rsquo;.&rsquo;) as a separator. <a href="https://github.com/uken/fluent-plugin-elasticsearch#target_index_key">https://github.com/uken/fluent-plugin-elasticsearch#target_index_key</a></p><p>Default: -</p><h3 id="elasticsearch-target_type_key">target_type_key (string, optional)</h3><p>Similar to target_index_key config, find the type name to write to in the record under this key (or nested record). If key not found in record - fallback to type_name.</p><p>Default: fluentd</p><h3 id="elasticsearch-template_name">template_name (string, optional)</h3><p>The name of the template to define. If a template by the name given is already present, it will be left unchanged, unless template_overwrite is set, in which case the template will be updated.</p><p>Default: -</p><h3 id="elasticsearch-template_file">template_file (*secret.Secret, optional)</h3><p>The path to the file containing the template to install. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="elasticsearch-templates">templates (string, optional)</h3><p>Specify index templates in form of hash. Can contain multiple templates.</p><p>Default: -</p><h3 id="elasticsearch-customize_template">customize_template (string, optional)</h3><p>Specify the string and its value to be replaced in form of hash. Can contain multiple key value pair that would be replaced in the specified template_file. This setting only creates template and to add rollover index please check the rollover_index configuration.</p><p>Default: -</p><h3 id="elasticsearch-rollover_index">rollover_index (bool, optional)</h3><p>Specify this as true when an index with rollover capability needs to be created. <a href="https://github.com/uken/fluent-plugin-elasticsearch#rollover_index">https://github.com/uken/fluent-plugin-elasticsearch#rollover_index</a></p><p>Default: false</p><h3 id="elasticsearch-index_date_pattern">index_date_pattern (*string, optional)</h3><p>Specify this to override the index date pattern for creating a rollover index.</p><p>Default: now/d</p><h3 id="elasticsearch-deflector_alias">deflector_alias (string, optional)</h3><p>Specify the deflector alias which would be assigned to the rollover index created. This is useful in case of using the Elasticsearch rollover API</p><p>Default: -</p><h3 id="elasticsearch-index_prefix">index_prefix (string, optional)</h3><p>Specify the index prefix for the rollover index to be created.</p><p>Default: logstash</p><h3 id="elasticsearch-application_name">application_name (*string, optional)</h3><p>Specify the application name for the rollover index to be created.</p><p>Default: default</p><h3 id="elasticsearch-template_overwrite">template_overwrite (bool, optional)</h3><p>Always update the template, even if it already exists.</p><p>Default: false</p><h3 id="elasticsearch-max_retry_putting_template">max_retry_putting_template (string, optional)</h3><p>You can specify times of retry putting template.</p><p>Default: 10</p><h3 id="elasticsearch-fail_on_putting_template_retry_exceed">fail_on_putting_template_retry_exceed (*bool, optional)</h3><p>Indicates whether to fail when max_retry_putting_template is exceeded. If you have multiple output plugin, you could use this property to do not fail on fluentd statup.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-fail_on_detecting_es_version_retry_exceed">fail_on_detecting_es_version_retry_exceed (*bool, optional)</h3><p>fail_on_detecting_es_version_retry_exceed (default: true)</p><p>Default: true</p><h3 id="elasticsearch-max_retry_get_es_version">max_retry_get_es_version (string, optional)</h3><p>You can specify times of retry obtaining Elasticsearch version.</p><p>Default: 15</p><h3 id="elasticsearch-request_timeout">request_timeout (string, optional)</h3><p>You can specify HTTP request timeout.</p><p>Default: 5s</p><h3 id="elasticsearch-reload_connections">reload_connections (*bool, optional)</h3><p>You can tune how the elasticsearch-transport host reloading feature works.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-reload_on_failure">reload_on_failure (bool, optional)</h3><p>Indicates that the elasticsearch-transport will try to reload the nodes addresses if there is a failure while making the request, this can be useful to quickly remove a dead node from the list of addresses.</p><p>Default: false</p><h3 id="elasticsearch-reload_after">reload_after (string, optional)</h3><p>When reload_connections true, this is the integer number of operations after which the plugin will reload the connections. The default value is 10000.</p><p>Default: -</p><h3 id="elasticsearch-resurrect_after">resurrect_after (string, optional)</h3><p>You can set in the elasticsearch-transport how often dead connections from the elasticsearch-transport&rsquo;s pool will be resurrected.</p><p>Default: 60s</p><h3 id="elasticsearch-include_tag_key">include_tag_key (bool, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: false</p><h3 id="elasticsearch-tag_key">tag_key (string, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: tag</p><h3 id="elasticsearch-id_key">id_key (string, optional)</h3><p><a href="https://github.com/uken/fluent-plugin-elasticsearch#id_key">https://github.com/uken/fluent-plugin-elasticsearch#id_key</a></p><p>Default: -</p><h3 id="elasticsearch-routing_key">routing_key (string, optional)</h3><p>Similar to parent_key config, will add _routing into elasticsearch command if routing_key is set and the field does exist in input event.</p><p>Default: -</p><h3 id="elasticsearch-remove_keys">remove_keys (string, optional)</h3><p><a href="https://github.com/uken/fluent-plugin-elasticsearch#remove_keys">https://github.com/uken/fluent-plugin-elasticsearch#remove_keys</a></p><p>Default: -</p><h3 id="elasticsearch-remove_keys_on_update">remove_keys_on_update (string, optional)</h3><p>Remove keys on update will not update the configured keys in elasticsearch when a record is being updated. This setting only has any effect if the write operation is update or upsert.</p><p>Default: -</p><h3 id="elasticsearch-remove_keys_on_update_key">remove_keys_on_update_key (string, optional)</h3><p>This setting allows remove_keys_on_update to be configured with a key in each record, in much the same way as target_index_key works.</p><p>Default: -</p><h3 id="elasticsearch-retry_tag">retry_tag (string, optional)</h3><p>This setting allows custom routing of messages in response to bulk request failures. The default behavior is to emit failed records using the same tag that was provided.</p><p>Default: -</p><h3 id="elasticsearch-write_operation">write_operation (string, optional)</h3><p>The write_operation can be any of: (index,create,update,upsert)</p><p>Default: index</p><h3 id="elasticsearch-reconnect_on_error">reconnect_on_error (bool, optional)</h3><p>Indicates that the plugin should reset connection on any error (reconnect on next send). By default it will reconnect only on &ldquo;host unreachable exceptions&rdquo;. We recommended to set this true in the presence of elasticsearch shield.</p><p>Default: false</p><h3 id="elasticsearch-with_transporter_log">with_transporter_log (bool, optional)</h3><p>This is debugging purpose option to enable to obtain transporter layer log.</p><p>Default: false</p><h3 id="elasticsearch-content_type">content_type (string, optional)</h3><p>With content_type application/x-ndjson, elasticsearch plugin adds application/x-ndjson as Content-Profile in payload.</p><p>Default: application/json</p><h3 id="elasticsearch-include_index_in_url">include_index_in_url (bool, optional)</h3><p>With this option set to true, Fluentd manifests the index name in the request URL (rather than in the request body). You can use this option to enforce an URL-based access control.</p><p>Default: -</p><h3 id="elasticsearch-time_parse_error_tag">time_parse_error_tag (string, optional)</h3><p>With logstash_format true, elasticsearch plugin parses timestamp field for generating index name. If the record has invalid timestamp value, this plugin emits an error event to @ERROR label with time_parse_error_tag configured tag.</p><p>Default: -</p><h3 id="elasticsearch-http_backend">http_backend (string, optional)</h3><p>With http_backend typhoeus, elasticsearch plugin uses typhoeus faraday http backend. Typhoeus can handle HTTP keepalive.</p><p>Default: excon</p><h3 id="elasticsearch-prefer_oj_serializer">prefer_oj_serializer (bool, optional)</h3><p>With default behavior, Elasticsearch client uses Yajl as JSON encoder/decoder. Oj is the alternative high performance JSON encoder/decoder. When this parameter sets as true, Elasticsearch client uses Oj as JSON encoder/decoder.</p><p>Default: false</p><h3 id="elasticsearch-flatten_hashes">flatten_hashes (bool, optional)</h3><p>Elasticsearch will complain if you send object and concrete values to the same field. For example, you might have logs that look this, from different places: {&ldquo;people&rdquo; => 100} {&ldquo;people&rdquo; => {&ldquo;some&rdquo; => &ldquo;thing&rdquo;}} The second log line will be rejected by the Elasticsearch parser because objects and concrete values can&rsquo;t live in the same field. To combat this, you can enable hash flattening.</p><p>Default: -</p><h3 id="elasticsearch-flatten_hashes_separator">flatten_hashes_separator (string, optional)</h3><p>Flatten separator</p><p>Default: -</p><h3 id="elasticsearch-validate_client_version">validate_client_version (bool, optional)</h3><p>When you use mismatched Elasticsearch server and client libraries, fluent-plugin-elasticsearch cannot send data into Elasticsearch.</p><p>Default: false</p><h3 id="elasticsearch-unrecoverable_error_types">unrecoverable_error_types (string, optional)</h3><p>Default unrecoverable_error_types parameter is set up strictly. Because es_rejected_execution_exception is caused by exceeding Elasticsearch&rsquo;s thread pool capacity. Advanced users can increase its capacity, but normal users should follow default behavior. If you want to increase it and forcibly retrying bulk request, please consider to change unrecoverable_error_types parameter from default value. Change default value of thread_pool.bulk.queue_size in elasticsearch.yml)</p><p>Default: -</p><h3 id="elasticsearch-verify_es_version_at_startup">verify_es_version_at_startup (*bool, optional)</h3><p>Because Elasticsearch plugin should change behavior each of Elasticsearch major versions. For example, Elasticsearch 6 starts to prohibit multiple type_names in one index, and Elasticsearch 7 will handle only _doc type_name in index. If you want to disable to verify Elasticsearch version at start up, set it as false. When using the following configuration, ES plugin intends to communicate into Elasticsearch 6. (default: true)</p><p>Default: true</p><h3 id="elasticsearch-default_elasticsearch_version">default_elasticsearch_version (string, optional)</h3><p>This parameter changes that ES plugin assumes default Elasticsearch version.</p><p>Default: 5</p><h3 id="elasticsearch-custom_headers">custom_headers (string, optional)</h3><p>This parameter adds additional headers to request. Example: {&ldquo;token&rdquo;:&ldquo;secret&rdquo;}</p><p>Default: {}</p><h3 id="elasticsearch-api_key">api_key (*secret.Secret, optional)</h3><p>api_key parameter adds authentication header.</p><p>Default: -</p><h3 id="elasticsearch-log_es_400_reason">log_es_400_reason (bool, optional)</h3><p>By default, the error logger won&rsquo;t record the reason for a 400 error from the Elasticsearch API unless you set log_level to debug. However, this results in a lot of log spam, which isn&rsquo;t desirable if all you want is the 400 error reasons. You can set this true to capture the 400 error reasons without all the other debug logs.</p><p>Default: false</p><h3 id="elasticsearch-suppress_doc_wrap">suppress_doc_wrap (bool, optional)</h3><p>By default, record body is wrapped by &lsquo;doc&rsquo;. This behavior can not handle update script requests. You can set this to suppress doc wrapping and allow record body to be untouched.</p><p>Default: false</p><h3 id="elasticsearch-ignore_exceptions">ignore_exceptions (string, optional)</h3><p>A list of exception that will be ignored - when the exception occurs the chunk will be discarded and the buffer retry mechanism won&rsquo;t be called. It is possible also to specify classes at higher level in the hierarchy. For example <code>ignore_exceptions ["Elasticsearch::Transport::Transport::ServerError"]</code> will match all subclasses of ServerError - Elasticsearch::Transport::Transport::Errors::BadRequest, Elasticsearch::Transport::Transport::Errors::ServiceUnavailable, etc.</p><p>Default: -</p><h3 id="elasticsearch-exception_backup">exception_backup (*bool, optional)</h3><p>Indicates whether to backup chunk when ignore exception occurs. (default: true)</p><p>Default: true</p><h3 id="elasticsearch-bulk_message_request_threshold">bulk_message_request_threshold (string, optional)</h3><p>Configure bulk_message request splitting threshold size. Default value is 20MB. (20 * 1024 * 1024) If you specify this size as negative number, bulk_message request splitting feature will be disabled.</p><p>Default: 20MB</p><h3 id="elasticsearch-sniffer_class_name">sniffer_class_name (string, optional)</h3><p>The default Sniffer used by the Elasticsearch::Transport class works well when Fluentd has a direct connection to all of the Elasticsearch servers and can make effective use of the _nodes API. This doesn&rsquo;t work well when Fluentd must connect through a load balancer or proxy. The parameter sniffer_class_name gives you the ability to provide your own Sniffer class to implement whatever connection reload logic you require. In addition, there is a new Fluent::Plugin::ElasticsearchSimpleSniffer class which reuses the hosts given in the configuration, which is typically the hostname of the load balancer or proxy. <a href="https://github.com/uken/fluent-plugin-elasticsearch#sniffer-class-name">https://github.com/uken/fluent-plugin-elasticsearch#sniffer-class-name</a></p><p>Default: -</p><h3 id="elasticsearch-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="elasticsearch-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h3 id="elasticsearch-enable_ilm">enable_ilm (bool, optional)</h3><p>Enable Index Lifecycle Management (ILM).</p><p>Default: -</p><h3 id="elasticsearch-ilm_policy_id">ilm_policy_id (string, optional)</h3><p>Specify ILM policy id.</p><p>Default: -</p><h3 id="elasticsearch-ilm_policy">ilm_policy (string, optional)</h3><p>Specify ILM policy contents as Hash.</p><p>Default: -</p><h3 id="elasticsearch-ilm_policy_overwrite">ilm_policy_overwrite (bool, optional)</h3><p>Specify whether overwriting ilm policy or not.</p><p>Default: -</p><h3 id="elasticsearch-data_stream_enable">data_stream_enable (*bool, optional)</h3><p>Use @type elasticsearch_data_stream</p><p>Default: -</p><h3 id="elasticsearch-data_stream_name">data_stream_name (string, optional)</h3><p>You can specify Elasticsearch data stream name by this parameter. This parameter is mandatory for elasticsearch_data_stream. There are some limitations about naming rule. For more details <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-create-data-stream.html#indices-create-data-stream-api-path-params">https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-create-data-stream.html#indices-create-data-stream-api-path-params</a></p><p>Default: -</p><h3 id="elasticsearch-data_stream_template_name">data_stream_template_name (string, optional)</h3><p>Specify an existing index template for the data stream. If not present, a new template is created and named after the data stream. Further details here <a href="https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream">https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream</a></p><p>Default: data_stream_name</p><h3 id="elasticsearch-data_stream_ilm_name">data_stream_ilm_name (string, optional)</h3><p>Specify an existing ILM policy to be applied to the data stream. If not present, either the specified template&rsquo;s or a new ILM default policy is applied. Further details here <a href="https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream">https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream</a></p><p>Default: data_stream_name</p><h3 id="elasticsearch-data_stream_ilm_policy">data_stream_ilm_policy (string, optional)</h3><p>Specify data stream ILM policy contents as Hash.</p><p>Default: -</p><h3 id="elasticsearch-data_stream_ilm_policy_overwrite">data_stream_ilm_policy_overwrite (bool, optional)</h3><p>Specify whether overwriting data stream ilm policy or not.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-11b10c2ba394f448a129e3e87a7da45d">8.4.11 - File</h1><h1 id="file-outputhttpsdocsfluentdorgoutputfile"><a href="https://docs.fluentd.org/output/file">File Output</a></h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs or metrics to File.</p><h2 id="configuration">Configuration</h2><h2 id="fileoutputconfig">FileOutputConfig</h2><h3 id="fileoutputconfig-path">path (string, required)</h3><p>The Path of the file. The actual path is path + time + &ldquo;.log&rdquo; by default.</p><p>Default: -</p><h3 id="fileoutputconfig-append">append (bool, optional)</h3><p>The flushed chunk is appended to existence file or not. The default is not appended.</p><p>Default: -</p><h3 id="fileoutputconfig-add_path_suffix">add_path_suffix (*bool, optional)</h3><p>Add path suffix(default: true)</p><p>Default: true</p><h3 id="fileoutputconfig-path_suffix">path_suffix (string, optional)</h3><p>The suffix of output result.</p><p>Default: &ldquo;.log&rdquo;</p><h3 id="fileoutputconfig-symlink_path">symlink_path (bool, optional)</h3><p>Create symlink to temporary buffered file when buffer_type is file. This is useful for tailing file content to check logs.</p><p>Default: false</p><h3 id="fileoutputconfig-compress">compress (string, optional)</h3><p>Compresses flushed files using gzip. No compression is performed by default.</p><p>Default: -</p><h3 id="fileoutputconfig-recompress">recompress (bool, optional)</h3><p>Performs compression again even if the buffer chunk is already compressed.</p><p>Default: false</p><h3 id="fileoutputconfig-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="fileoutputconfig-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="fileoutputconfig-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="example-file-output-configurations">Example <code>File</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/tmp/logs/${tag}/%Y/%m/%d.%H.%M</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">append</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><pre tabindex="0"><code> &lt;match **&gt;
   @type file
   @id test_file
   add_path_suffix true
   append true
   path /tmp/logs/${tag}/%Y/%m/%d.%H.%M
   &lt;buffer tag,time&gt;
     @type file
     path /buffers/test_file.*.buffer
     retry_forever true
     timekey 1m
     timekey_use_utc true
     timekey_wait 30s
   &lt;/buffer&gt;
 &lt;/match&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ebcbedef5be28c9f30752486b0b2b01b">8.4.12 - Format</h1><h1 id="format-output-records">Format output records</h1><h2 id="overview">Overview</h2><p>Specify how to format output records. For details, see <a href="https://docs.fluentd.org/configuration/format-section">https://docs.fluentd.org/configuration/format-section</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/tmp/logs/${tag}/%Y/%m/%d.%H.%M</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">single_value</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">add_newline</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">message_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">msg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="format">Format</h2><h3 id="format-type">type (string, optional)</h3><p>Output line formatting: out_file,json,ltsv,csv,msgpack,hash,single_value</p><p>Default: json</p><h3 id="format-add_newline">add_newline (*bool, optional)</h3><p>When type is single_value add &lsquo;\n&rsquo; to the end of the message</p><p>Default: true</p><h3 id="format-message_key">message_key (string, optional)</h3><p>When type is single_value specify the key holding information</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-88fc6991b80563054a472b95a994e01b">8.4.13 - Format rfc5424</h1><h2 id="formatrfc5424">FormatRfc5424</h2><h3 id="formatrfc5424-type">type (string, optional)</h3><p>Output line formatting: out_file,json,ltsv,csv,msgpack,hash,single_value</p><p>Default: json</p><h3 id="formatrfc5424-rfc6587_message_size">rfc6587_message_size (*bool, optional)</h3><p>Prepends message length for syslog transmission</p><p>Default: true</p><h3 id="formatrfc5424-hostname_field">hostname_field (string, optional)</h3><p>Sets host name in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: hostname</p><h3 id="formatrfc5424-app_name_field">app_name_field (string, optional)</h3><p>Sets app name in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: app_name</p><h3 id="formatrfc5424-proc_id_field">proc_id_field (string, optional)</h3><p>Sets proc id in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: proc_id</p><h3 id="formatrfc5424-message_id_field">message_id_field (string, optional)</h3><p>Sets msg id in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: message_id</p><h3 id="formatrfc5424-structured_data_field">structured_data_field (string, optional)</h3><p>Sets structured data in syslog from field in fluentd, delimited by &lsquo;.&rsquo; (default structured_data)</p><p>Default: -</p><h3 id="formatrfc5424-log_field">log_field (string, optional)</h3><p>Sets log in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: log</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ed0a10704a55da5f7330009ec393e387">8.4.14 - Forward</h1><h2 id="forwardoutput">ForwardOutput</h2><h3 id="forwardoutput-servers">servers ([]FluentdServer, required)</h3><p>Server definitions at least one is required <a href="#fluentd-server">Server</a></p><p>Default: -</p><h3 id="forwardoutput-transport">transport (string, optional)</h3><p>The transport protocol to use [ tcp, tls ]</p><p>Default: -</p><h3 id="forwardoutput-require_ack_response">require_ack_response (bool, optional)</h3><p>Change the protocol to at-least-once. The plugin waits the ack from destination&rsquo;s in_forward plugin.</p><p>Default: -</p><h3 id="forwardoutput-ack_response_timeout">ack_response_timeout (int, optional)</h3><p>This option is used when require_ack_response is true. This default value is based on popular tcp_syn_retries.</p><p>Default: 190</p><h3 id="forwardoutput-send_timeout">send_timeout (int, optional)</h3><p>The timeout time when sending event logs.</p><p>Default: 60</p><h3 id="forwardoutput-connect_timeout">connect_timeout (int, optional)</h3><p>The timeout time for socket connect. When the connection timed out during establishment, Errno::ETIMEDOUT is raised.</p><p>Default: -</p><h3 id="forwardoutput-recover_wait">recover_wait (int, optional)</h3><p>The wait time before accepting a server fault recovery.</p><p>Default: 10</p><h3 id="forwardoutput-heartbeat_type">heartbeat_type (string, optional)</h3><p>The transport protocol to use for heartbeats. Set &ldquo;none&rdquo; to disable heartbeat. [transport, tcp, udp, none]</p><p>Default: -</p><h3 id="forwardoutput-heartbeat_interval">heartbeat_interval (int, optional)</h3><p>The interval of the heartbeat packer.</p><p>Default: 1</p><h3 id="forwardoutput-phi_failure_detector">phi_failure_detector (bool, optional)</h3><p>Use the &ldquo;Phi accrual failure detector&rdquo; to detect server failure.</p><p>Default: true</p><h3 id="forwardoutput-phi_threshold">phi_threshold (int, optional)</h3><p>The threshold parameter used to detect server faults. <code>phi_threshold</code> is deeply related to <code>heartbeat_interval</code>. If you are using longer <code>heartbeat_interval</code>, please use the larger <code>phi_threshold</code>. Otherwise you will see frequent detachments of destination servers. The default value 16 is tuned for <code>heartbeat_interval</code> 1s.</p><p>Default: 16</p><h3 id="forwardoutput-hard_timeout">hard_timeout (int, optional)</h3><p>The hard timeout used to detect server failure. The default value is equal to the send_timeout parameter.</p><p>Default: 60</p><h3 id="forwardoutput-expire_dns_cache">expire_dns_cache (int, optional)</h3><p>Set TTL to expire DNS cache in seconds. Set 0 not to use DNS Cache.</p><p>Default: 0</p><h3 id="forwardoutput-dns_round_robin">dns_round_robin (bool, optional)</h3><p>Enable client-side DNS round robin. Uniform randomly pick an IP address to send data when a hostname has several IP addresses. <code>heartbeat_type udp</code> is not available with <code>dns_round_robin true</code>. Use <code>heartbeat_type tcp</code> or <code>heartbeat_type none</code>.</p><p>Default: -</p><h3 id="forwardoutput-ignore_network_errors_at_startup">ignore_network_errors_at_startup (bool, optional)</h3><p>Ignore DNS resolution and errors at startup time.</p><p>Default: -</p><h3 id="forwardoutput-tls_version">tls_version (string, optional)</h3><p>The default version of TLS transport. [TLSv1_1, TLSv1_2]</p><p>Default: TLSv1_2</p><h3 id="forwardoutput-tls_ciphers">tls_ciphers (string, optional)</h3><p>The cipher configuration of TLS transport.</p><p>Default: ALL:!aNULL:!eNULL:!SSLv2</p><h3 id="forwardoutput-tls_insecure_mode">tls_insecure_mode (bool, optional)</h3><p>Skip all verification of certificates or not.</p><p>Default: false</p><h3 id="forwardoutput-tls_allow_self_signed_cert">tls_allow_self_signed_cert (bool, optional)</h3><p>Allow self signed certificates or not.</p><p>Default: false</p><h3 id="forwardoutput-tls_verify_hostname">tls_verify_hostname (bool, optional)</h3><p>Verify hostname of servers and certificates or not in TLS transport.</p><p>Default: true</p><h3 id="forwardoutput-tls_cert_path">tls_cert_path (*secret.Secret, optional)</h3><p>The additional CA certificate path for TLS.</p><p>Default: -</p><h3 id="forwardoutput-tls_client_cert_path">tls_client_cert_path (*secret.Secret, optional)</h3><p>The client certificate path for TLS</p><p>Default: -</p><h3 id="forwardoutput-tls_client_private_key_path">tls_client_private_key_path (*secret.Secret, optional)</h3><p>The client private key path for TLS.</p><p>Default: -</p><h3 id="forwardoutput-tls_client_private_key_passphrase">tls_client_private_key_passphrase (*secret.Secret, optional)</h3><p>The client private key passphrase for TLS.</p><p>Default: -</p><h3 id="forwardoutput-tls_cert_thumbprint">tls_cert_thumbprint (string, optional)</h3><p>The certificate thumbprint for searching from Windows system certstore This parameter is for Windows only.</p><p>Default: -</p><h3 id="forwardoutput-tls_cert_logical_store_name">tls_cert_logical_store_name (string, optional)</h3><p>The certificate logical store name on Windows system certstore. This parameter is for Windows only.</p><p>Default: -</p><h3 id="forwardoutput-tls_cert_use_enterprise_store">tls_cert_use_enterprise_store (bool, optional)</h3><p>Enable to use certificate enterprise store on Windows system certstore. This parameter is for Windows only.</p><p>Default: -</p><h3 id="forwardoutput-keepalive">keepalive (bool, optional)</h3><p>Enable keepalive connection.</p><p>Default: false</p><h3 id="forwardoutput-keepalive_timeout">keepalive_timeout (int, optional)</h3><p>Expired time of keepalive. Default value is nil, which means to keep connection as long as possible.</p><p>Default: 0</p><h3 id="forwardoutput-security">security (*common.Security, optional)</h3><p><a href="../../common/security/">Security</a></p><p>Default: -</p><h3 id="forwardoutput-verify_connection_at_startup">verify_connection_at_startup (bool, optional)</h3><p>Verify that a connection can be made with one of out_forward nodes at the time of startup.</p><p>Default: false</p><h3 id="forwardoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="forwardoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="fluentd-server">Fluentd Server</h2><p>server</p><h3 id="fluentd-server-host">host (string, required)</h3><p>The IP address or host name of the server.</p><p>Default: -</p><h3 id="fluentd-server-name">name (string, optional)</h3><p>The name of the server. Used for logging and certificate verification in TLS transport (when host is address).</p><p>Default: -</p><h3 id="fluentd-server-port">port (int, optional)</h3><p>The port number of the host. Note that both TCP packets (event stream) and UDP packets (heartbeat message) are sent to this port.</p><p>Default: 24224</p><h3 id="fluentd-server-shared_key">shared_key (*secret.Secret, optional)</h3><p>The shared key per server.</p><p>Default: -</p><h3 id="fluentd-server-username">username (*secret.Secret, optional)</h3><p>The username for authentication.</p><p>Default: -</p><h3 id="fluentd-server-password">password (*secret.Secret, optional)</h3><p>The password for authentication.</p><p>Default: -</p><h3 id="fluentd-server-standby">standby (bool, optional)</h3><p>Marks a node as the standby node for an Active-Standby model between Fluentd nodes. When an active node goes down, the standby node is promoted to an active node. The standby node is not used by the out_forward plugin until then.</p><p>Default: -</p><h3 id="fluentd-server-weight">weight (int, optional)</h3><p>The load balancing weight. If the weight of one server is 20 and the weight of the other server is 30, events are sent in a 2:3 ratio. .</p><p>Default: 60</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-18e50786ba4697ffac3ab83b4c57e6e5">8.4.15 - GELF</h1><h1 id="gelf-outputhttpsgithubcomhotschedulesfluent-plugin-gelf-hs"><a href="https://github.com/hotschedules/fluent-plugin-gelf-hs">GELF Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for GELF.</p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-host">host (string, required)</h3><p>Destination host</p><p>Default: -</p><h3 id="output-config-port">port (int, required)</h3><p>Destination host port</p><p>Default: -</p><h3 id="output-config-protocol">protocol (string, optional)</h3><p>Transport Protocol</p><p>Default: &ldquo;udp&rdquo;</p><h3 id="output-config-tls">tls (*bool, optional)</h3><p>Enable TlS</p><p>Default: false</p><h3 id="output-config-tls_options">tls_options (map[string]string, optional)</h3><p>TLS Options - for options see <a href="https://github.com/graylog-labs/gelf-rb/blob/72916932b789f7a6768c3cdd6ab69a3c942dbcef/lib/gelf/transport/tcp_tls.rb#L7-L12">https://github.com/graylog-labs/gelf-rb/blob/72916932b789f7a6768c3cdd6ab69a3c942dbcef/lib/gelf/transport/tcp_tls.rb#L7-L12</a></p><p>Default: {}</p><h2 id="example-gelf-output-configurations">Example <code>GELF</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gelf-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">gelf</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gelf-host</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">12201</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="fluentd-config-result">Fluentd Config Result</h2><pre tabindex="0"><code> &lt;match **&gt;
   @type gelf
   @id test_gelf
   host gelf-host
   port 12201
 &lt;/match&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-a6993ae75e6633de7954ded98992861c">8.4.16 - Google Cloud Storage</h1><h1 id="google-cloud-storage">Google Cloud Storage</h1><h2 id="overview">Overview</h2><p>Store logs in Google Cloud Storage. For details, see <a href="https://github.com/kube-logging/fluent-plugin-gcs">https://github.com/kube-logging/fluent-plugin-gcs</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">gcs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">project</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">banzai-log-test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logs/${tag}/%Y/%m/%d/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="gcsoutput">GCSOutput</h2><h3 id="gcsoutput-project">project (string, required)</h3><p>Project identifier for GCS</p><p>Default: -</p><h3 id="gcsoutput-keyfile">keyfile (string, optional)</h3><p>Path of GCS service account credentials JSON file</p><p>Default: -</p><h3 id="gcsoutput-credentials_json">credentials_json (*secret.Secret, optional)</h3><p>GCS service account credentials in JSON format <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="gcsoutput-client_retries">client_retries (int, optional)</h3><p>Number of times to retry requests on server error</p><p>Default: -</p><h3 id="gcsoutput-client_timeout">client_timeout (int, optional)</h3><p>Default timeout to use in requests</p><p>Default: -</p><h3 id="gcsoutput-bucket">bucket (string, required)</h3><p>Name of a GCS bucket</p><p>Default: -</p><h3 id="gcsoutput-object_key_format">object_key_format (string, optional)</h3><p>Format of GCS object keys</p><p>Default: %{path}%{time_slice}_%{index}.%{file_extension}</p><h3 id="gcsoutput-path">path (string, optional)</h3><p>Path prefix of the files on GCS</p><p>Default: -</p><h3 id="gcsoutput-store_as">store_as (string, optional)</h3><p>Archive format on GCS: gzip json text</p><p>Default: gzip</p><h3 id="gcsoutput-transcoding">transcoding (bool, optional)</h3><p>Enable the decompressive form of transcoding</p><p>Default: -</p><h3 id="gcsoutput-auto_create_bucket">auto_create_bucket (bool, optional)</h3><p>Create GCS bucket if it does not exists</p><p>Default: true</p><h3 id="gcsoutput-hex_random_length">hex_random_length (int, optional)</h3><p>Max length of <code>%{hex_random}</code> placeholder(4-16)</p><p>Default: 4</p><h3 id="gcsoutput-overwrite">overwrite (bool, optional)</h3><p>Overwrite already existing path</p><p>Default: false</p><h3 id="gcsoutput-acl">acl (string, optional)</h3><p>Permission for the object in GCS: auth_read owner_full owner_read private project_private public_read</p><p>Default: -</p><h3 id="gcsoutput-storage_class">storage_class (string, optional)</h3><p>Storage class of the file: dra nearline coldline multi_regional regional standard</p><p>Default: -</p><h3 id="gcsoutput-encryption_key">encryption_key (string, optional)</h3><p>Customer-supplied, AES-256 encryption key</p><p>Default: -</p><h3 id="gcsoutput-object_metadata">object_metadata ([]ObjectMetadata, optional)</h3><p>User provided web-safe keys and arbitrary string values that will returned with requests for the file as &ldquo;x-goog-meta-&rdquo; response headers. <a href="#objectmetadata">Object Metadata</a></p><p>Default: -</p><h3 id="gcsoutput-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="gcsoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="gcsoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="objectmetadata">ObjectMetadata</h2><h3 id="objectmetadata-key">key (string, required)</h3><p>Key</p><p>Default: -</p><h3 id="objectmetadata-value">value (string, required)</h3><p>Value</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-a56bffbadd1b6a7c1ede4f727316205c">8.4.17 - Grafana Loki</h1><h1 id="loki-output-plugin">Loki output plugin</h1><h2 id="overview">Overview</h2><p>Fluentd output plugin to ship logs to a Loki server.
More info at <a href="https://grafana.com/docs/loki/latest/clients/fluentd/">https://grafana.com/docs/loki/latest/clients/fluentd/</a></p><blockquote>
<p>Example: <a href="../../../../examples/loki-nginx/">Store Nginx Access Logs in Grafana Loki with Logging Operator</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">loki</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://loki:3100</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-url">url (string, optional)</h3><p>The url of the Loki server to send logs to.</p><p>Default: <code>https://logs-us-west1.grafana.net</code></p><h3 id="output-config-username">username (*secret.Secret, optional)</h3><p>Specify a username if the Loki server requires authentication. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-password">password (*secret.Secret, optional)</h3><p>Specify password if the Loki server requires authentication. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-cert">cert (*secret.Secret, optional)</h3><p>TLS: parameters for presenting a client certificate <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-key">key (*secret.Secret, optional)</h3><p>TLS: parameters for presenting a client certificate <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-ca_cert">ca_cert (*secret.Secret, optional)</h3><p>TLS: CA certificate file for server certificate verification <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-insecure_tls">insecure_tls (*bool, optional)</h3><p>TLS: disable server certificate verification</p><p>Default: false</p><h3 id="output-config-tenant">tenant (string, optional)</h3><p>Loki is a multi-tenant log storage platform and all requests sent must include a tenant.</p><p>Default: -</p><h3 id="output-config-labels">labels (Label, optional)</h3><p>Set of labels to include with every Loki stream.</p><p>Default: -</p><h3 id="output-config-extra_labels">extra_labels (map[string]string, optional)</h3><p>Set of extra labels to include with every Loki stream.</p><p>Default: -</p><h3 id="output-config-line_format">line_format (string, optional)</h3><p>Format to use when flattening the record to a log line: json, key_value (default: key_value)</p><p>Default: json</p><h3 id="output-config-extract_kubernetes_labels">extract_kubernetes_labels (*bool, optional)</h3><p>Extract kubernetes labels as loki labels</p><p>Default: false</p><h3 id="output-config-remove_keys">remove_keys ([]string, optional)</h3><p>Comma separated list of needless record keys to remove</p><p>Default: []</p><h3 id="output-config-drop_single_key">drop_single_key (*bool, optional)</h3><p>If a record only has 1 key, then just set the log line to the value and discard the key.</p><p>Default: false</p><h3 id="output-config-configure_kubernetes_labels">configure_kubernetes_labels (*bool, optional)</h3><p>Configure Kubernetes metadata in a Prometheus like format</p><p>Default: false</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ae38f1f9de3603c1e55fe2fb4eeba9b0">8.4.18 - Http</h1><h1 id="http-plugin-for-fluentd">Http plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to HTTP/HTTPS endpoints.
More info at <a href="https://docs.fluentd.org/output/http">https://docs.fluentd.org/output/http</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://logserver.com:9000/api</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-endpoint">endpoint (string, required)</h3><p>Endpoint for HTTP request.</p><p>Default: -</p><h3 id="output-config-http_method">http_method (string, optional)</h3><p>Method for HTTP request. [post, put]</p><p>Default: post</p><h3 id="output-config-proxy">proxy (string, optional)</h3><p>Proxy for HTTP request.</p><p>Default: -</p><h3 id="output-config-content_type">content_type (string, optional)</h3><p>Content-Profile for HTTP request.</p><p>Default: -</p><h3 id="output-config-json_array">json_array (bool, optional)</h3><p>Using array format of JSON. This parameter is used and valid only for json format. When json_array as true, Content-Profile should be application/json and be able to use JSON data for the HTTP request body.</p><p>Default: false</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="output-config-headers">headers (map[string]string, optional)</h3><p>Additional headers for HTTP request.</p><p>Default: -</p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Connection open timeout in seconds.</p><p>Default: -</p><h3 id="output-config-read_timeout">read_timeout (int, optional)</h3><p>Read timeout in seconds.</p><p>Default: -</p><h3 id="output-config-ssl_timeout">ssl_timeout (int, optional)</h3><p>TLS timeout in seconds.</p><p>Default: -</p><h3 id="output-config-tls_version">tls_version (string, optional)</h3><p>The default version of TLS transport. [TLSv1_1, TLSv1_2]</p><p>Default: TLSv1_2</p><h3 id="output-config-tls_ciphers">tls_ciphers (string, optional)</h3><p>The cipher configuration of TLS transport.</p><p>Default: ALL:!aNULL:!eNULL:!SSLv2</p><h3 id="output-config-tls_ca_cert_path">tls_ca_cert_path (*secret.Secret, optional)</h3><p>The CA certificate path for TLS.</p><p>Default: -</p><h3 id="output-config-tls_client_cert_path">tls_client_cert_path (*secret.Secret, optional)</h3><p>The client certificate path for TLS.</p><p>Default: -</p><h3 id="output-config-tls_private_key_path">tls_private_key_path (*secret.Secret, optional)</h3><p>The client private key path for TLS.</p><p>Default: -</p><h3 id="output-config-tls_private_key_passphrase">tls_private_key_passphrase (*secret.Secret, optional)</h3><p>The client private key passphrase for TLS.</p><p>Default: -</p><h3 id="output-config-tls_verify_mode">tls_verify_mode (string, optional)</h3><p>The verify mode of TLS. [peer, none]</p><p>Default: peer</p><h3 id="output-config-error_response_as_unrecoverable">error_response_as_unrecoverable (*bool, optional)</h3><p>Raise UnrecoverableError when the response code is non success, 1xx/3xx/4xx/5xx. If false, the plugin logs error message instead of raising UnrecoverableError.</p><p>Default: true</p><h3 id="output-config-retryable_response_codes">retryable_response_codes ([]int, optional)</h3><p>List of retryable response codes. If the response code is included in this list, the plugin retries the buffer flush. Since Fluentd v2 the Status code 503 is going to be removed from default.</p><p>Default: [503]</p><h3 id="output-config-auth">auth (*HTTPAuth, optional)</h3><p><a href="#http-auth-config">HTTP auth</a></p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="http-auth-config">HTTP auth config</h2><p>http_auth</p><h3 id="username-secretsecret-required-http-auth-config-username">username (*secret.Secret, required) {#http auth-config-username}</h3><p>Username for basic authentication. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="password-secretsecret-required-http-auth-config-password">password (*secret.Secret, required) {#http auth-config-password}</h3><p>Password for basic authentication. <a href="../secret/">Secret</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1b992ac5779a83a537b40f5defa1bfa5">8.4.19 - Kafka</h1><h1 id="kafka-output-plugin-for-fluentd">Kafka output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/fluent/fluent-plugin-kafka">https://github.com/fluent/fluent-plugin-kafka</a></p><blockquote>
<p>Example Deployment: <a href="../../../../examples/kafka-nginx/">Transport Nginx Access Logs into Kafka with Logging Operator</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kafka</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">brokers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kafka-headless.kafka.svc.cluster.local:29092</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">default_topic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">topic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">sasl_over_ssl</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">topic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kafka">Kafka</h2><p>Send your logs to Kafka</p><h3 id="kafka-brokers">brokers (string, required)</h3><p>The list of all seed brokers, with their host and port information.</p><p>Default: -</p><h3 id="kafka-topic_key">topic_key (string, optional)</h3><p>Topic Key</p><p>Default: &ldquo;topic&rdquo;</p><h3 id="kafka-partition_key">partition_key (string, optional)</h3><p>Partition</p><p>Default: &ldquo;partition&rdquo;</p><h3 id="kafka-partition_key_key">partition_key_key (string, optional)</h3><p>Partition Key</p><p>Default: &ldquo;partition_key&rdquo;</p><h3 id="kafka-message_key_key">message_key_key (string, optional)</h3><p>Message Key</p><p>Default: &ldquo;message_key&rdquo;</p><h3 id="kafka-client_id">client_id (string, optional)</h3><p>Client ID</p><p>Default: &ldquo;kafka&rdquo;</p><h3 id="kafka-default_topic">default_topic (string, optional)</h3><p>The name of default topic .</p><p>Default: nil</p><h3 id="kafka-default_partition_key">default_partition_key (string, optional)</h3><p>The name of default partition key .</p><p>Default: nil</p><h3 id="kafka-default_message_key">default_message_key (string, optional)</h3><p>The name of default message key .</p><p>Default: nil</p><h3 id="kafka-exclude_topic_key">exclude_topic_key (bool, optional)</h3><p>Exclude Topic key</p><p>Default: false</p><h3 id="kafka-exclude_partion_key">exclude_partion_key (bool, optional)</h3><p>Exclude Partition key</p><p>Default: false</p><h3 id="kafka-get_kafka_client_log">get_kafka_client_log (bool, optional)</h3><p>Get Kafka Client log</p><p>Default: false</p><h3 id="kafka-headers">headers (map[string]string, optional)</h3><p>Headers</p><p>Default: {}</p><h3 id="kafka-headers_from_record">headers_from_record (map[string]string, optional)</h3><p>Headers from Record</p><p>Default: {}</p><h3 id="kafka-use_default_for_unknown_topic">use_default_for_unknown_topic (bool, optional)</h3><p>Use default for unknown topics</p><p>Default: false</p><h3 id="kafka-idempotent">idempotent (bool, optional)</h3><p>Idempotent</p><p>Default: false</p><h3 id="kafka-sasl_over_ssl">sasl_over_ssl (bool, required)</h3><p>SASL over SSL</p><p>Default: true</p><h3 id="kafka-principal">principal (string, optional)</h3><p>Default: -</p><h3 id="kafka-keytab">keytab (*secret.Secret, optional)</h3><p>Default: -</p><h3 id="kafka-username">username (*secret.Secret, optional)</h3><p>Username when using PLAIN/SCRAM SASL authentication</p><p>Default: -</p><h3 id="kafka-password">password (*secret.Secret, optional)</h3><p>Password when using PLAIN/SCRAM SASL authentication</p><p>Default: -</p><h3 id="kafka-scram_mechanism">scram_mechanism (string, optional)</h3><p>If set, use SCRAM authentication with specified mechanism. When unset, default to PLAIN authentication</p><p>Default: -</p><h3 id="kafka-max_send_retries">max_send_retries (int, optional)</h3><p>Number of times to retry sending of messages to a leader</p><p>Default: 1</p><h3 id="kafka-required_acks">required_acks (int, optional)</h3><p>The number of acks required per request .</p><p>Default: -1</p><h3 id="kafka-ack_timeout">ack_timeout (int, optional)</h3><p>How long the producer waits for acks. The unit is seconds</p><p>Default: nil => Uses default of ruby-kafka library</p><h3 id="kafka-compression_codec">compression_codec (string, optional)</h3><p>The codec the producer uses to compress messages . The available options are gzip and snappy.</p><p>Default: nil</p><h3 id="kafka-kafka_agg_max_bytes">kafka_agg_max_bytes (int, optional)</h3><p>Maximum value of total message size to be included in one batch transmission. .</p><p>Default: 4096</p><h3 id="kafka-kafka_agg_max_messages">kafka_agg_max_messages (int, optional)</h3><p>Maximum number of messages to include in one batch transmission. .</p><p>Default: nil</p><h3 id="kafka-discard_kafka_delivery_failed">discard_kafka_delivery_failed (bool, optional)</h3><p>Discard the record where Kafka DeliveryFailed occurred</p><p>Default: false</p><h3 id="kafka-ssl_ca_certs_from_system">ssl_ca_certs_from_system (*bool, optional)</h3><p>System&rsquo;s CA cert store</p><p>Default: false</p><h3 id="kafka-ssl_ca_cert">ssl_ca_cert (*secret.Secret, optional)</h3><p>CA certificate</p><p>Default: -</p><h3 id="kafka-ssl_client_cert">ssl_client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><p>Default: -</p><h3 id="kafka-ssl_client_cert_chain">ssl_client_cert_chain (*secret.Secret, optional)</h3><p>Client certificate chain</p><p>Default: -</p><h3 id="kafka-ssl_client_cert_key">ssl_client_cert_key (*secret.Secret, optional)</h3><p>Client certificate key</p><p>Default: -</p><h3 id="kafka-ssl_verify_hostname">ssl_verify_hostname (*bool, optional)</h3><p>Verify certificate hostname</p><p>Default: -</p><h3 id="kafka-format">format (*Format, required)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="kafka-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="kafka-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3736a73536ae2ea19873950bfc5c1521">8.4.20 - LogDNA</h1><h1 id="logdna-outputhttpsgithubcomlogdnafluent-plugin-logdna"><a href="https://github.com/logdna/fluent-plugin-logdna">LogDNA Output</a></h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs to LogDNA. Example Deployment: <a href="https://raw.githubusercontent.com/banzaicloud/logging-operator/master/docs/examples/logging_output_logdna.yaml">Transport Nginx Access Logs into LogDNA with Logging Operator</a></p><h2 id="configuration">Configuration</h2><h2 id="logdna">LogDNA</h2><p>Send your logs to LogDNA</p><h3 id="logdna-api_key">api_key (string, required)</h3><p>LogDNA Api key</p><p>Default: -</p><h3 id="logdna-hostname">hostname (string, required)</h3><p>Hostname</p><p>Default: -</p><h3 id="logdna-app">app (string, optional)</h3><p>Application name</p><p>Default: -</p><h3 id="logdna-tags">tags (string, optional)</h3><p>Comma-Separated List of Tags, Optional</p><p>Default: -</p><h3 id="logdna-request_timeout">request_timeout (string, optional)</h3><p>HTTPS POST Request Timeout, Optional. Supports s and ms Suffices</p><p>Default: 30 s</p><h3 id="logdna-ingester_domain">ingester_domain (string, optional)</h3><p>Custom Ingester URL, Optional</p><p>Default: <code>https://logs.logdna.com</code></p><h3 id="logdna-ingester_endpoint">ingester_endpoint (string, optional)</h3><p>Custom Ingester Endpoint, Optional</p><p>Default: /logs/ingest</p><h3 id="logdna-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="logdna-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="example-logdna-filter-configurations">Example <code>LogDNA</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logdna-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">logdna</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">api_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">xxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hostname</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-operator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">my-app</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">web,dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">ingester_domain https://logs.logdna.com</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">ingester_endpoint /logs/ingest</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><pre tabindex="0"><code>&lt;match **&gt;
   @type logdna
   @id test_logdna
   api_key xxxxxxxxxxxxxxxxxxxxxxxxxxy
   app my-app
   hostname logging-operator
&lt;/match&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f5b4f39075d38f596892cbc946ca5735">8.4.21 - LogZ</h1><h1 id="logz-output-plugin-for-fluentd">LogZ output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/tarokkk/fluent-plugin-logzio">https://github.com/tarokkk/fluent-plugin-logzio</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">logz</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://listener.logz.io</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">8071</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">token</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     	  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logz-token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">output_include_tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">output_include_time</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">file</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_mode</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_thread_count</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">5s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">chunk_limit_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">16m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">queue_limit_length</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4096</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="logzio">Logzio</h2><p>LogZ Send your logs to LogZ.io</p><h3 id="logzio-endpoint">endpoint (*Endpoint, required)</h3><p>Define LogZ endpoint URL</p><p>Default: -</p><h3 id="logzio-output_include_time">output_include_time (bool, optional)</h3><p>Should the appender add a timestamp to your logs on their process time (recommended).</p><p>Default: -</p><h3 id="logzio-output_include_tags">output_include_tags (bool, optional)</h3><p>Should the appender add the fluentd tag to the document, called &ldquo;fluentd_tag&rdquo;</p><p>Default: -</p><h3 id="logzio-http_idle_timeout">http_idle_timeout (int, optional)</h3><p>Timeout in seconds that the http persistent connection will stay open without traffic.</p><p>Default: -</p><h3 id="logzio-retry_count">retry_count (int, optional)</h3><p>How many times to resend failed bulks.</p><p>Default: -</p><h3 id="logzio-retry_sleep">retry_sleep (int, optional)</h3><p>How long to sleep initially between retries, exponential step-off.</p><p>Default: -</p><h3 id="logzio-bulk_limit">bulk_limit (int, optional)</h3><p>Limit to the size of the Logz.io upload bulk. Defaults to 1000000 bytes leaving about 24kB for overhead.</p><p>Default: -</p><h3 id="logzio-bulk_limit_warning_limit">bulk_limit_warning_limit (int, optional)</h3><p>Limit to the size of the Logz.io warning message when a record exceeds bulk_limit to prevent a recursion when Fluent warnings are sent to the Logz.io output.</p><p>Default: -</p><h3 id="logzio-gzip">gzip (bool, optional)</h3><p>Should the plugin ship the logs in gzip compression. Default is false.</p><p>Default: -</p><h3 id="logzio-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="logzio-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="endpoint">Endpoint</h2><p>Endpoint defines connection details for LogZ.io.</p><h3 id="endpoint-url">url (string, optional)</h3><p>LogZ URL.</p><p>Default: <code>https://listener.logz.io</code></p><h3 id="endpoint-port">port (int, optional)</h3><p>Port over which to connect to LogZ URL.</p><p>Default: 8071</p><h3 id="endpoint-token">token (*secret.Secret, optional)</h3><p>LogZ API Token. <a href="../secret/">Secret</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-683bbb879ced9c27f3943b7a4809b29e">8.4.22 - Mattermost</h1><h1 id="mattermost-plugin-for-fluentd">Mattermost plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to Mattermost via webhooks.
More info at <a href="https://github.com/levigo-systems/fluent-plugin-mattermost">https://github.com/levigo-systems/fluent-plugin-mattermost</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">mattermost</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">webhook_url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://xxx.xx/hooks/xxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">channel_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">xxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">message_color</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;#FFA500&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">enable_tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-webhook_url">webhook_url (*secret.Secret, required)</h3><p>webhook_url Incoming Webhook URI (Required for Incoming Webhook mode).</p><p>Default: -</p><h3 id="output-config-channel_id">channel_id (string, optional)</h3><p>channel_id the id of the channel where you want to receive the information.</p><p>Default: -</p><h3 id="output-config-message_color">message_color (string, optional)</h3><p>message_color color of the message you are sending, the format is hex code.</p><p>Default: #A9A9A9</p><h3 id="output-config-message_title">message_title (string, optional)</h3><p>message_title title you want to add to the message.</p><p>Default: fluent_title_default</p><h3 id="output-config-message">message (string, optional)</h3><p>message The message you want to send, can be a static message, which you add at this point, or you can receive the fluent infos with the %s</p><p>Default: -</p><h3 id="output-config-enable_tls">enable_tls (*bool, optional)</h3><p>enable_tls you can set the communication channel if it uses tls.</p><p>Default: true</p><h3 id="output-config-ca_path">ca_path (*secret.Secret, optional)</h3><p>ca_path you can set the path of the certificates.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-434371d7a3888abd2a15c4cd22f941cc">8.4.23 - NewRelic</h1><h1 id="new-relic-logs-plugin-for-fluentd">New Relic Logs plugin for Fluentd</h1><h2 id="overview">Overview</h2><p><strong>newrelic</strong> output plugin send log data to New Relic Logs</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">newrelic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">license_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-newrelic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">licenseKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-api_key">api_key (*secret.Secret, optional)</h3><p>New Relic API Insert key <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="output-config-license_key">license_key (*secret.Secret, optional)</h3><p>New Relic License Key (recommended) [Secret](../secret/" LicenseKey *secret.Secret <code>json:"license_key)</code></p><p>Default: -</p><h3 id="output-config-base_uri">base_uri (string, optional)</h3><p>New Relic ingestion endpoint <a href="../secret/">Secret</a></p><p>Default: <code>https://log-api.newrelic.com/log/v1</code></p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-bb72140946679f3fa6eaf82e404ea444">8.4.24 - OpenSearch</h1><h1 id="opensearch-output-plugin-for-fluentd">OpenSearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/fluent/fluent-plugin-opensearch">https://github.com/fluent/fluent-plugin-opensearch</a></p><blockquote>
<p>Example Deployment: <a href="../../../../quickstarts/es-nginx/">Save all logs to OpenSearch</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">opensearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">opensearch-cluster.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9200</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_version</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">TLSv1_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="opensearch">OpenSearch</h2><p>Send your logs to OpenSearch</p><h3 id="opensearch-host">host (string, optional)</h3><p>You can specify OpenSearch host by this parameter.</p><p>Default: localhost</p><h3 id="opensearch-port">port (int, optional)</h3><p>You can specify OpenSearch port by this parameter.</p><p>Default: 9200</p><h3 id="opensearch-user">user (string, optional)</h3><p>User for HTTP Basic authentication. This plugin will escape required URL encoded characters within %{} placeholders. e.g. %{demo+}</p><p>Default: -</p><h3 id="opensearch-password">password (*secret.Secret, optional)</h3><p>Password for HTTP Basic authentication. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="opensearch-path">path (string, optional)</h3><p>Path for HTTP Basic authentication.</p><p>Default: -</p><h3 id="opensearch-scheme">scheme (string, optional)</h3><p>Connection scheme</p><p>Default: http</p><h3 id="opensearch-hosts">hosts (string, optional)</h3><p>You can specify multiple OpenSearch hosts with separator &ldquo;,&rdquo;. If you specify hosts option, host and port options are ignored.</p><p>Default: -</p><h3 id="opensearch-target_index_key">target_index_key (string, optional)</h3><p>Tell this plugin to find the index name to write to in the record under this key in preference to other mechanisms. Key can be specified as path to nested record using dot (&rsquo;.&rsquo;) as a separator.</p><p>Default: -</p><h3 id="opensearch-time_key_format">time_key_format (string, optional)</h3><p>The format of the time stamp field (@timestamp or what you specify with time_key). This parameter only has an effect when logstash_format is true as it only affects the name of the index we write to.</p><p>Default: -</p><h3 id="opensearch-time_precision">time_precision (string, optional)</h3><p>Should the record not include a time_key, define the degree of sub-second time precision to preserve from the time portion of the routed event.</p><p>Default: -</p><h3 id="opensearch-include_timestamp">include_timestamp (bool, optional)</h3><p>Adds a @timestamp field to the log, following all settings logstash_format does, except without the restrictions on index_name. This allows one to log to an alias in OpenSearch and utilize the rollover API.</p><p>Default: false</p><h3 id="opensearch-logstash_format">logstash_format (bool, optional)</h3><p>Enable Logstash log format.</p><p>Default: false</p><h3 id="opensearch-logstash_prefix">logstash_prefix (string, optional)</h3><p>Set the Logstash prefix.</p><p>Default: logstash</p><h3 id="opensearch-logstash_prefix_separator">logstash_prefix_separator (string, optional)</h3><p>Set the Logstash prefix separator.</p><p>Default: -</p><h3 id="opensearch-logstash_dateformat">logstash_dateformat (string, optional)</h3><p>Set the Logstash date format.</p><p>Default: %Y.%m.%d</p><h3 id="opensearch-utc_index">utc_index (*bool, optional)</h3><p>By default, the records inserted into index logstash-YYMMDD with UTC (Coordinated Universal Time). This option allows to use local time if you describe utc_index to false.(default: true)</p><p>Default: true</p><h3 id="opensearch-suppress_type_name">suppress_type_name (*bool, optional)</h3><p>Suppress type name to avoid warnings in OpenSearch</p><p>Default: -</p><h3 id="opensearch-index_name">index_name (string, optional)</h3><p>The index name to write events to</p><p>Default: fluentd</p><h3 id="opensearch-id_key">id_key (string, optional)</h3><p>Field on your data to identify the data uniquely</p><p>Default: -</p><h3 id="opensearch-write_operation">write_operation (string, optional)</h3><p>The write_operation can be any of: (index,create,update,upsert)</p><p>Default: index</p><h3 id="opensearch-parent_key">parent_key (string, optional)</h3><p>parent_key</p><p>Default: -</p><h3 id="opensearch-routing_key">routing_key (string, optional)</h3><p>routing_key</p><p>Default: -</p><h3 id="opensearch-request_timeout">request_timeout (string, optional)</h3><p>You can specify HTTP request timeout.</p><p>Default: 5s</p><h3 id="opensearch-reload_connections">reload_connections (*bool, optional)</h3><p>You can tune how the OpenSearch-transport host reloading feature works.(default: true)</p><p>Default: true</p><h3 id="opensearch-reload_on_failure">reload_on_failure (bool, optional)</h3><p>Indicates that the OpenSearch-transport will try to reload the nodes addresses if there is a failure while making the request, this can be useful to quickly remove a dead node from the list of addresses.</p><p>Default: false</p><h3 id="opensearch-retry_tag">retry_tag (string, optional)</h3><p>This setting allows custom routing of messages in response to bulk request failures. The default behavior is to emit failed records using the same tag that was provided.</p><p>Default: -</p><h3 id="opensearch-resurrect_after">resurrect_after (string, optional)</h3><p>You can set in the OpenSearch-transport how often dead connections from the OpenSearch-transport&rsquo;s pool will be resurrected.</p><p>Default: 60s</p><h3 id="opensearch-time_key">time_key (string, optional)</h3><p>By default, when inserting records in Logstash format, @timestamp is dynamically created with the time at log ingestion. If you&rsquo;d like to use a custom time, include an @timestamp with your record.</p><p>Default: -</p><h3 id="opensearch-time_key_exclude_timestamp">time_key_exclude_timestamp (bool, optional)</h3><p>time_key_exclude_timestamp</p><p>Default: false</p><h3 id="opensearch-ssl_verify">ssl_verify (*bool, optional)</h3><p>Skip ssl verification (default: true)</p><p>Default: true</p><h3 id="opensearch-client_key">client_key (*secret.Secret, optional)</h3><p>Client certificate key</p><p>Default: -</p><h3 id="opensearch-client_cert">client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><p>Default: -</p><h3 id="opensearch-client_key_pass">client_key_pass (*secret.Secret, optional)</h3><p>Client key password</p><p>Default: -</p><h3 id="opensearch-ca_file">ca_file (*secret.Secret, optional)</h3><p>CA certificate</p><p>Default: -</p><h3 id="opensearch-ssl_version">ssl_version (string, optional)</h3><p>If you want to configure SSL/TLS version, you can specify ssl_version parameter. [SSLv23, TLSv1, TLSv1_1, TLSv1_2]</p><p>Default: -</p><h3 id="opensearch-remove_keys_on_update">remove_keys_on_update (string, optional)</h3><p>If you want to configure SSL/TLS version, you can specify ssl_version parameter. [SSLv23, TLSv1, TLSv1_1, TLSv1_2] Remove keys on update will not update the configured keys in OpenSearch when a record is being updated. This setting only has any effect if the write operation is update or upsert.</p><p>Default: -</p><h3 id="opensearch-remove_keys_on_update_key">remove_keys_on_update_key (string, optional)</h3><p>This setting allows remove_keys_on_update to be configured with a key in each record, in much the same way as target_index_key works.</p><p>Default: -</p><h3 id="opensearch-flatten_hashes">flatten_hashes (bool, optional)</h3><p><a href="https://github.com/fluent/fluent-plugin-opensearch#hash-flattening">https://github.com/fluent/fluent-plugin-opensearch#hash-flattening</a></p><p>Default: -</p><h3 id="opensearch-flatten_hashes_separator">flatten_hashes_separator (string, optional)</h3><p>Flatten separator</p><p>Default: -</p><h3 id="opensearch-template_name">template_name (string, optional)</h3><p>The name of the template to define. If a template by the name given is already present, it will be left unchanged, unless template_overwrite is set, in which case the template will be updated.</p><p>Default: -</p><h3 id="opensearch-template_file">template_file (*secret.Secret, optional)</h3><p>The path to the file containing the template to install. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="opensearch-template_overwrite">template_overwrite (bool, optional)</h3><p>Always update the template, even if it already exists.</p><p>Default: false</p><h3 id="opensearch-customize_template">customize_template (string, optional)</h3><p>Specify the string and its value to be replaced in form of hash. Can contain multiple key value pair that would be replaced in the specified template_file. This setting only creates template and to add rollover index please check the rollover_index configuration.</p><p>Default: -</p><h3 id="opensearch-index_date_pattern">index_date_pattern (*string, optional)</h3><p>Specify this to override the index date pattern for creating a rollover index.</p><p>Default: now/d</p><h3 id="opensearch-index_separator">index_separator (string, optional)</h3><p>index_separator</p><p>Default: -</p><h3 id="opensearch-application_name">application_name (*string, optional)</h3><p>Specify the application name for the rollover index to be created.</p><p>Default: default</p><h3 id="opensearch-templates">templates (string, optional)</h3><p>Specify index templates in form of hash. Can contain multiple templates.</p><p>Default: -</p><h3 id="opensearch-max_retry_putting_template">max_retry_putting_template (string, optional)</h3><p>You can specify times of retry putting template.</p><p>Default: 10</p><h3 id="opensearch-fail_on_putting_template_retry_exceed">fail_on_putting_template_retry_exceed (*bool, optional)</h3><p>Indicates whether to fail when max_retry_putting_template is exceeded. If you have multiple output plugin, you could use this property to do not fail on fluentd statup.(default: true)</p><p>Default: true</p><h3 id="opensearch-fail_on_detecting_os_version_retry_exceed">fail_on_detecting_os_version_retry_exceed (*bool, optional)</h3><p>fail_on_detecting_os_version_retry_exceed (default: true)</p><p>Default: true</p><h3 id="opensearch-max_retry_get_os_version">max_retry_get_os_version (int, optional)</h3><p>max_retry_get_os_version</p><p>Default: 15</p><h3 id="opensearch-include_tag_key">include_tag_key (bool, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: false</p><h3 id="opensearch-tag_key">tag_key (string, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: tag</p><h3 id="opensearch-time_parse_error_tag">time_parse_error_tag (string, optional)</h3><p>With logstash_format true, OpenSearch plugin parses timestamp field for generating index name. If the record has invalid timestamp value, this plugin emits an error event to @ERROR label with time_parse_error_tag configured tag.</p><p>Default: -</p><h3 id="opensearch-reconnect_on_error">reconnect_on_error (bool, optional)</h3><p>Indicates that the plugin should reset connection on any error (reconnect on next send). By default it will reconnect only on &ldquo;host unreachable exceptions&rdquo;. We recommended to set this true in the presence of OpenSearch shield.</p><p>Default: false</p><h3 id="opensearch-pipeline">pipeline (string, optional)</h3><p>This param is to set a pipeline id of your OpenSearch to be added into the request, you can configure ingest node.</p><p>Default: -</p><h3 id="opensearch-with_transporter_log">with_transporter_log (bool, optional)</h3><p>This is debugging purpose option to enable to obtain transporter layer log.</p><p>Default: false</p><h3 id="opensearch-emit_error_for_missing_id">emit_error_for_missing_id (bool, optional)</h3><p>emit_error_for_missing_id</p><p>Default: false</p><h3 id="opensearch-sniffer_class_name">sniffer_class_name (string, optional)</h3><p>TThe default Sniffer used by the OpenSearch::Transport class works well when Fluentd has a direct connection to all of the OpenSearch servers and can make effective use of the _nodes API. This doesn&rsquo;t work well when Fluentd must connect through a load balancer or proxy. The parameter sniffer_class_name gives you the ability to provide your own Sniffer class to implement whatever connection reload logic you require. In addition, there is a new Fluent::Plugin::OpenSearchSimpleSniffer class which reuses the hosts given in the configuration, which is typically the hostname of the load balancer or proxy. For example, a configuration like this would cause connections to logging-os to reload every 100 operations: <a href="https://github.com/fluent/fluent-plugin-opensearch#sniffer-class-name">https://github.com/fluent/fluent-plugin-opensearch#sniffer-class-name</a></p><p>Default: -</p><h3 id="opensearch-selector_class_name">selector_class_name (string, optional)</h3><p>selector_class_name</p><p>Default: -</p><h3 id="opensearch-reload_after">reload_after (string, optional)</h3><p>When reload_connections true, this is the integer number of operations after which the plugin will reload the connections. The default value is 10000.</p><p>Default: -</p><h3 id="opensearch-include_index_in_url">include_index_in_url (bool, optional)</h3><p>With this option set to true, Fluentd manifests the index name in the request URL (rather than in the request body). You can use this option to enforce an URL-based access control.</p><p>Default: -</p><h3 id="opensearch-http_backend">http_backend (string, optional)</h3><p>With http_backend typhoeus, opensearch plugin uses typhoeus faraday http backend. Typhoeus can handle HTTP keepalive.</p><p>Default: excon</p><h3 id="opensearch-http_backend_excon_nonblock">http_backend_excon_nonblock (*bool, optional)</h3><p>http_backend_excon_nonblock (default: true)</p><p>Default: true</p><h3 id="opensearch-validate_client_version">validate_client_version (bool, optional)</h3><p>When you use mismatched OpenSearch server and client libraries, fluent-plugin-opensearch cannot send data into OpenSearch.</p><p>Default: false</p><h3 id="opensearch-prefer_oj_serializer">prefer_oj_serializer (bool, optional)</h3><p>With default behavior, OpenSearch client uses Yajl as JSON encoder/decoder. Oj is the alternative high performance JSON encoder/decoder. When this parameter sets as true, OpenSearch client uses Oj as JSON encoder/decoder.</p><p>Default: false</p><h3 id="opensearch-unrecoverable_error_types">unrecoverable_error_types (string, optional)</h3><p>Default unrecoverable_error_types parameter is set up strictly. Because rejected_execution_exception is caused by exceeding OpenSearch&rsquo;s thread pool capacity. Advanced users can increase its capacity, but normal users should follow default behavior.</p><p>Default: -</p><h3 id="opensearch-unrecoverable_record_types">unrecoverable_record_types (string, optional)</h3><p>unrecoverable_record_types</p><p>Default: -</p><h3 id="opensearch-emit_error_label_event">emit_error_label_event (*bool, optional)</h3><p>emit_error_label_event (default: true)</p><p>Default: true</p><h3 id="opensearch-verify_os_version_at_startup">verify_os_version_at_startup (*bool, optional)</h3><p>verify_os_version_at_startup (default: true)</p><p>Default: true</p><h3 id="opensearch-default_opensearch_version">default_opensearch_version (int, optional)</h3><p>max_retry_get_os_version</p><p>Default: 1</p><h3 id="opensearch-log_os_400_reason">log_os_400_reason (bool, optional)</h3><p>log_os_400_reason</p><p>Default: false</p><h3 id="opensearch-custom_headers">custom_headers (string, optional)</h3><p>This parameter adds additional headers to request. Example: {&ldquo;token&rdquo;:&ldquo;secret&rdquo;}</p><p>Default: {}</p><h3 id="opensearch-suppress_doc_wrap">suppress_doc_wrap (bool, optional)</h3><p>By default, record body is wrapped by &lsquo;doc&rsquo;. This behavior can not handle update script requests. You can set this to suppress doc wrapping and allow record body to be untouched.</p><p>Default: false</p><h3 id="opensearch-ignore_exceptions">ignore_exceptions (string, optional)</h3><p>A list of exception that will be ignored - when the exception occurs the chunk will be discarded and the buffer retry mechanism won&rsquo;t be called. It is possible also to specify classes at higher level in the hierarchy.</p><p>Default: -</p><h3 id="opensearch-exception_backup">exception_backup (*bool, optional)</h3><p>Indicates whether to backup chunk when ignore exception occurs. (default: true)</p><p>Default: true</p><h3 id="opensearch-bulk_message_request_threshold">bulk_message_request_threshold (string, optional)</h3><p>Configure bulk_message request splitting threshold size. Default value is 20MB. (20 * 1024 * 1024) If you specify this size as negative number, bulk_message request splitting feature will be disabled.</p><p>Default: 20MB</p><h3 id="opensearch-compression_level">compression_level (string, optional)</h3><p>compression_level</p><p>Default: -</p><h3 id="opensearch-truncate_caches_interval">truncate_caches_interval (string, optional)</h3><p>truncate_caches_interval</p><p>Default: -</p><h3 id="opensearch-use_legacy_template">use_legacy_template (*bool, optional)</h3><p>use_legacy_template (default: true)</p><p>Default: true</p><h3 id="opensearch-catch_transport_exception_on_retry">catch_transport_exception_on_retry (*bool, optional)</h3><p>catch_transport_exception_on_retry (default: true)</p><p>Default: true</p><h3 id="opensearch-target_index_affinity">target_index_affinity (bool, optional)</h3><p>target_index_affinity</p><p>Default: false</p><h3 id="opensearch-buffer">buffer (*Buffer, optional)</h3><p>Default: -</p><h3 id="opensearch-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h3 id="opensearch-data_stream_enable">data_stream_enable (*bool, optional)</h3><p>Use @type opensearch_data_stream</p><p>Default: -</p><h3 id="opensearch-data_stream_name">data_stream_name (string, optional)</h3><p>You can specify Opensearch data stream name by this parameter. This parameter is mandatory for opensearch_data_stream.</p><p>Default: -</p><h3 id="opensearch-data_stream_template_name">data_stream_template_name (string, optional)</h3><p>Specify an existing index template for the data stream. If not present, a new template is created and named after the data stream.</p><p>Default: data_stream_name</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ef25dbf7203fc85cd0c4a189a702360a">8.4.25 - Redis</h1><h1 id="redis-plugin-for-fluentd">Redis plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to Redis endpoints.
More info at <a href="https://github.com/fluent-plugins-nursery/fluent-plugin-redis">https://github.com/fluent-plugins-nursery/fluent-plugin-redis</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">redis</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis-master.prod.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-host">host (string, optional)</h3><p>Host Redis endpoint</p><p>Default: localhost</p><h3 id="output-config-port">port (int, optional)</h3><p>Port of the Redis server</p><p>Default: 6379</p><h3 id="output-config-db_number">db_number (int, optional)</h3><p>DbNumber database number is optional.</p><p>Default: 0</p><h3 id="output-config-password">password (*secret.Secret, optional)</h3><p>Redis Server password</p><p>Default: -</p><h3 id="output-config-insert_key_prefix">insert_key_prefix (string, optional)</h3><p>insert_key_prefix</p><p>Default: &ldquo;${tag}&rdquo;</p><h3 id="output-config-strftime_format">strftime_format (string, optional)</h3><p>strftime_format Users can set strftime format.</p><p>Default: &ldquo;%s&rdquo;</p><h3 id="output-config-allow_duplicate_key">allow_duplicate_key (bool, optional)</h3><p>allow_duplicate_key Allow insert key duplicate. It will work as update values.</p><p>Default: false</p><h3 id="output-config-ttl">ttl (int, optional)</h3><p>ttl If 0 or negative value is set, ttl is not set in each key.</p><p>Default: -</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-67b66da64354abd24b6cf4012f300c3a">8.4.26 - Relabel</h1><p>Available in Logging Operator version 4.2 and later.</p><p>The relabel output uses the <a href="https://docs.fluentd.org/output/relabel">relabel output plugin of Fluentd</a> to route events back to a specific Flow, where they can be processed again.</p><p>This is useful, for example, if you need to preprocess a subset of logs differently, but then do the same processing on all messages at the end. In this case, you can create multiple flows for preprocessing based on specific log matchers and then aggregate everything into a single final flow for postprocessing.</p><p>The value of the <code>label</code> parameter of the relabel output must be the same as the value of the <code>flowLabel</code> parameter of the Flow (or ClusterFlow) where you want to send the messages.</p><p>For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">relabel</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">label</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;@final-flow&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">serviceFlow1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">namespace1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">serviceFlow2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">namespace2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">final-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">flowLabel</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;@final-flow&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">includeLabelInRouter</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Using the relabel output also makes it possible to pass the messages emitted by the <a href="/docs/configuration/plugins/filters/concat/">Concat</a> plugin in case of a timeout. Set the <code>timeout_label</code> of the concat plugin to the flowLabel of the flow where you want to send the timeout messages.</p><h2 id="output-config">Output Config</h2><h3 id="label-string-required-output-config-label">label (string, required) {#output config-label}</h3><p>Specifies new label for events</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-65dde214a849324898de8fc0878b8ff4">8.4.27 - Splunk</h1><h1 id="splunk-via-hec-output-plugin-for-fluentd">Splunk via Hec output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/splunk/fluent-plugin-splunk-hec">https://github.com/splunk/fluent-plugin-splunk-hec</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">splunkHec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hec_host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">splunk.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hec_port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">8088</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">protocol</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="splunkhecoutput">SplunkHecOutput</h2><p>SplunkHecOutput sends your logs to Splunk via Hec</p><h3 id="splunkhecoutput-data_type">data_type (string, optional)</h3><p>The type of data that will be sent to Sumo Logic, either event or metric</p><p>Default: event</p><h3 id="splunkhecoutput-hec_host">hec_host (string, required)</h3><p>You can specify SplunkHec host by this parameter.</p><p>Default: -</p><h3 id="splunkhecoutput-hec_port">hec_port (int, optional)</h3><p>The port number for the Hec token or the Hec load balancer.</p><p>Default: 8088</p><h3 id="splunkhecoutput-protocol">protocol (string, optional)</h3><p>This is the protocol to use for calling the Hec API. Available values are: http, https.</p><p>Default: https</p><h3 id="splunkhecoutput-hec_token">hec_token (*secret.Secret, required)</h3><p>Identifier for the Hec token. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="splunkhecoutput-metrics_from_event">metrics_from_event (*bool, optional)</h3><p>When data_type is set to &ldquo;metric&rdquo;, the ingest API will treat every key-value pair in the input event as a metric name-value pair. Set metrics_from_event to false to disable this behavior and use metric_name_key and metric_value_key to define metrics. (Default:true)</p><p>Default: -</p><h3 id="splunkhecoutput-metric_name_key">metric_name_key (string, optional)</h3><p>Field name that contains the metric name. This parameter only works in conjunction with the metrics_from_event parameter. When this prameter is set, the metrics_from_event parameter is automatically set to false.</p><p>Default: true</p><h3 id="splunkhecoutput-metric_value_key">metric_value_key (string, optional)</h3><p>Field name that contains the metric value, this parameter is required when metric_name_key is configured.</p><p>Default: -</p><h3 id="splunkhecoutput-coerce_to_utf8">coerce_to_utf8 (*bool, optional)</h3><p>Indicates whether to allow non-UTF-8 characters in user logs. If set to true, any non-UTF-8 character is replaced by the string specified in non_utf8_replacement_string. If set to false, the Ingest API errors out any non-UTF-8 characters. .</p><p>Default: true</p><h3 id="splunkhecoutput-non_utf8_replacement_string">non_utf8_replacement_string (string, optional)</h3><p>If coerce_to_utf8 is set to true, any non-UTF-8 character is replaced by the string you specify in this parameter. .</p><p>Default: &rsquo; '</p><h3 id="splunkhecoutput-index">index (string, optional)</h3><p>Identifier for the Splunk index to be used for indexing events. If this parameter is not set, the indexer is chosen by HEC. Cannot set both index and index_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-index_key">index_key (string, optional)</h3><p>The field name that contains the Splunk index name. Cannot set both index and index_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-host">host (string, optional)</h3><p>The host location for events. Cannot set both host and host_key parameters at the same time. (Default:hostname)</p><p>Default: -</p><h3 id="splunkhecoutput-host_key">host_key (string, optional)</h3><p>Key for the host location. Cannot set both host and host_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-source">source (string, optional)</h3><p>The source field for events. If this parameter is not set, the source will be decided by HEC. Cannot set both source and source_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-source_key">source_key (string, optional)</h3><p>Field name to contain source. Cannot set both source and source_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-sourcetype">sourcetype (string, optional)</h3><p>The sourcetype field for events. When not set, the sourcetype is decided by HEC. Cannot set both source and source_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-sourcetype_key">sourcetype_key (string, optional)</h3><p>Field name that contains the sourcetype. Cannot set both source and source_key parameters at the same time.</p><p>Default: -</p><h3 id="splunkhecoutput-keep_keys">keep_keys (bool, optional)</h3><p>By default, all the fields used by the *_key parameters are removed from the original input events. To change this behavior, set this parameter to true. This parameter is set to false by default. When set to true, all fields defined in index_key, host_key, source_key, sourcetype_key, metric_name_key, and metric_value_key are saved in the original event.</p><p>Default: -</p><h3 id="splunkhecoutput-idle_timeout">idle_timeout (int, optional)</h3><p>If a connection has not been used for this number of seconds it will automatically be reset upon the next use to avoid attempting to send to a closed connection. nil means no timeout.</p><p>Default: -</p><h3 id="splunkhecoutput-read_timeout">read_timeout (int, optional)</h3><p>The amount of time allowed between reading two chunks from the socket.</p><p>Default: -</p><h3 id="splunkhecoutput-open_timeout">open_timeout (int, optional)</h3><p>The amount of time to wait for a connection to be opened.</p><p>Default: -</p><h3 id="splunkhecoutput-client_cert">client_cert (*secret.Secret, optional)</h3><p>The path to a file containing a PEM-format CA certificate for this client. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="splunkhecoutput-client_key">client_key (*secret.Secret, optional)</h3><p>The private key for this client.&rsquo; <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="splunkhecoutput-ca_file">ca_file (*secret.Secret, optional)</h3><p>The path to a file containing a PEM-format CA certificate. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="splunkhecoutput-ca_path">ca_path (*secret.Secret, optional)</h3><p>The path to a directory containing CA certificates in PEM format. <a href="../secret/">Secret</a></p><p>Default: -</p><h3 id="splunkhecoutput-ssl_ciphers">ssl_ciphers (string, optional)</h3><p>List of SSL ciphers allowed.</p><p>Default: -</p><h3 id="splunkhecoutput-insecure_ssl">insecure_ssl (*bool, optional)</h3><p>Indicates if insecure SSL connection is allowed</p><p>Default: false</p><h3 id="splunkhecoutput-fields">fields (Fields, optional)</h3><p>In this case, parameters inside <fields> are used as indexed fields and removed from the original input events</p><p>Default: -</p><h3 id="splunkhecoutput-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><p>Default: -</p><h3 id="splunkhecoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="splunkhecoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f239285458b59ea6270063a2b99b095d">8.4.28 - SQS</h1><h1 id="sqs-outputhttpsgithubcomixixifluent-plugin-sqs"><a href="https://github.com/ixixi/fluent-plugin-sqs">SQS Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for SQS.</p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-sqs_url">sqs_url (string, optional)</h3><p>SQS queue url e.g. <code>https://sqs.us-west-2.amazonaws.com/123456789012/myqueue</code></p><p>Default: -</p><h3 id="output-config-queue_name">queue_name (string, optional)</h3><p>SQS queue name - required if sqs_url is not set</p><p>Default: -</p><h3 id="output-config-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id</p><p>Default: -</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key</p><p>Default: -</p><h3 id="output-config-create_queue">create_queue (*bool, optional)</h3><p>Create SQS queue</p><p>Default: true</p><h3 id="output-config-region">region (string, optional)</h3><p>AWS region</p><p>Default: ap-northeast-1</p><h3 id="output-config-message_group_id">message_group_id (string, optional)</h3><p>Message group id for FIFO queue</p><p>Default: -</p><h3 id="output-config-delay_seconds">delay_seconds (int, optional)</h3><p>Delivery delay seconds</p><p>Default: 0</p><h3 id="output-config-include_tag">include_tag (*bool, optional)</h3><p>Include tag</p><p>Default: true</p><h3 id="output-config-tag_property_name">tag_property_name (string, optional)</h3><p>Tags property name in json</p><p>Default: &lsquo;__tag&rsquo;</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="example-sqs-output-configurations">Example <code>SQS</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sqs-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">sqs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">queue_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">some-aws-sqs-queue</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">create_queue</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><pre tabindex="0"><code> &lt;match **&gt;
     @type sqs
     @id test_sqs
     queue_name some-aws-sqs-queue
     create_queue false
     region us-east-1
 &lt;/match&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ae2cf65122129146578f128193f9e75d">8.4.29 - SumoLogic</h1><h1 id="sumologic-output-plugin-for-fluentd">SumoLogic output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs or metrics to SumoLogic via a HTTP collector endpoint
More info at <a href="https://github.com/SumoLogic/fluentd-output-sumologic">https://github.com/SumoLogic/fluentd-output-sumologic</a></p><p>Example secret for HTTP input URL</p><pre tabindex="0"><code>export URL=&#39;https://endpoint1.collection.eu.sumologic.com/receiver/v1/http/.......&#39;
kubectl create secret generic sumo-output --from-literal &#34;endpoint=$URL&#34;
</code></pre><p>Example ClusterOutput</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">sumologic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_mode</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">compress</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">endpoint</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">source_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-data_type">data_type (string, optional)</h3><p>The type of data that will be sent to Sumo Logic, either logs or metrics</p><p>Default: logs</p><h3 id="output-config-endpoint">endpoint (*secret.Secret, required)</h3><p>SumoLogic HTTP Collector URL</p><p>Default: -</p><h3 id="output-config-verify_ssl">verify_ssl (bool, optional)</h3><p>Verify ssl certificate.</p><p>Default: true</p><h3 id="output-config-metric_data_format">metric_data_format (string, optional)</h3><p>The format of metrics you will be sending, either graphite or carbon2 or prometheus</p><p>Default: graphite</p><h3 id="output-config-log_format">log_format (string, optional)</h3><p>Format to post logs into Sumo.</p><p>Default: json</p><h3 id="output-config-log_key">log_key (string, optional)</h3><p>Used to specify the key when merging json or sending logs in text format</p><p>Default: message</p><h3 id="output-config-source_category">source_category (string, optional)</h3><p>Set _sourceCategory metadata field within SumoLogic</p><p>Default: nil</p><h3 id="output-config-source_name">source_name (string, required)</h3><p>Set _sourceName metadata field within SumoLogic - overrides source_name_key (default is nil)</p><p>Default: -</p><h3 id="output-config-source_name_key">source_name_key (string, optional)</h3><p>Set as source::path_key&rsquo;s value so that the source_name can be extracted from Fluentd&rsquo;s buffer</p><p>Default: source_name</p><h3 id="output-config-source_host">source_host (string, optional)</h3><p>Set _sourceHost metadata field within SumoLogic</p><p>Default: nil</p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Set timeout seconds to wait until connection is opened.</p><p>Default: 60</p><h3 id="output-config-add_timestamp">add_timestamp (bool, optional)</h3><p>Add timestamp (or timestamp_key) field to logs before sending to sumologic</p><p>Default: true</p><h3 id="output-config-timestamp_key">timestamp_key (string, optional)</h3><p>Field name when add_timestamp is on</p><p>Default: timestamp</p><h3 id="output-config-proxy_uri">proxy_uri (string, optional)</h3><p>Add the uri of the proxy environment if present.</p><p>Default: -</p><h3 id="output-config-disable_cookies">disable_cookies (bool, optional)</h3><p>Option to disable cookies on the HTTP Client.</p><p>Default: false</p><h3 id="output-config-delimiter">delimiter (string, optional)</h3><p>Delimiter</p><p>Default: .</p><h3 id="output-config-custom_fields">custom_fields ([]string, optional)</h3><p>Comma-separated key=value list of fields to apply to every log. <a href="https://help.sumologic.com/Manage/Fields#http-source-fields">more information</a></p><p>Default: -</p><h3 id="output-config-sumo_client">sumo_client (string, optional)</h3><p>Name of sumo client which is send as X-Sumo-Client header</p><p>Default: fluentd-output</p><h3 id="output-config-compress">compress (*bool, optional)</h3><p>Compress payload</p><p>Default: false</p><h3 id="output-config-compress_encoding">compress_encoding (string, optional)</h3><p>Encoding method of compression (either gzip or deflate)</p><p>Default: gzip</p><h3 id="output-config-custom_dimensions">custom_dimensions (string, optional)</h3><p>Dimensions string (eg &ldquo;cluster=payment, service=credit_card&rdquo;) which is going to be added to every metric record.</p><p>Default: -</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-014aa24ff26bb6369dc8484f097d845d">8.4.30 - Syslog</h1><h1 id="syslog-outputhttpsgithubcomcloudfoundryfluent-plugin-syslog_rfc5424"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424">Syslog Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for remote syslog with RFC5424 headers logs.</p><h2 id="configuration">Configuration</h2><h2 id="syslogoutputconfig">SyslogOutputConfig</h2><h3 id="syslogoutputconfig-host">host (string, required)</h3><p>Destination host address</p><p>Default: -</p><h3 id="syslogoutputconfig-port">port (int, optional)</h3><p>Destination host port</p><p>Default: &ldquo;514&rdquo;</p><h3 id="syslogoutputconfig-transport">transport (string, optional)</h3><p>Transport Protocol</p><p>Default: &ldquo;tls&rdquo;</p><h3 id="syslogoutputconfig-insecure">insecure (*bool, optional)</h3><p>skip ssl validation</p><p>Default: false</p><h3 id="syslogoutputconfig-verify_fqdn">verify_fqdn (*bool, optional)</h3><p>verify_fqdn</p><p>Default: nil</p><h3 id="syslogoutputconfig-enable_system_cert_store">enable_system_cert_store (*bool, optional)</h3><p>cert_store to set ca_certificate for ssl context</p><p>Default: -</p><h3 id="syslogoutputconfig-trusted_ca_path">trusted_ca_path (*secret.Secret, optional)</h3><p>file path to ca to trust</p><p>Default: -</p><h3 id="syslogoutputconfig-client_cert_path">client_cert_path (*secret.Secret, optional)</h3><p>file path for private_key_path</p><p>Default: -</p><h3 id="syslogoutputconfig-private_key_path">private_key_path (*secret.Secret, optional)</h3><p>file path for private_key_path</p><p>Default: -</p><h3 id="syslogoutputconfig-private_key_passphrase">private_key_passphrase (*secret.Secret, optional)</h3><p>PrivateKeyPassphrase for private key</p><p>Default: &ldquo;nil&rdquo;</p><h3 id="syslogoutputconfig-allow_self_signed_cert">allow_self_signed_cert (*bool, optional)</h3><p>allow_self_signed_cert for mutual tls</p><p>Default: false</p><h3 id="syslogoutputconfig-fqdn">fqdn (string, optional)</h3><p>Fqdn</p><p>Default: &ldquo;nil&rdquo;</p><h3 id="syslogoutputconfig-version">version (string, optional)</h3><p>TLS Version</p><p>Default: &ldquo;TLSv1_2&rdquo;</p><h3 id="syslogoutputconfig-format">format (*FormatRfc5424, optional)</h3><p><a href="../format_rfc5424/">Format</a></p><p>Default: -</p><h3 id="syslogoutputconfig-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><p>Default: -</p><h3 id="syslogoutputconfig-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><p>Default: -</p><h2 id="example-file-output-configurations">Example <code>File</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SYSLOG-HOST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">123</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">app_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example.custom_field_1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">proc_id_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example.custom_field_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="fluentd-config-result">Fluentd Config Result</h4><pre tabindex="0"><code> &lt;match **&gt;
   @type syslog_rfc5424
   @id test_syslog
   host SYSLOG-HOST
   port 123
 &lt;format&gt;
   @type syslog_rfc5424
   app_name_field example.custom_field_1
   proc_id_field example.custom_field_2
 &lt;/format&gt;
   &lt;buffer tag,time&gt;
     @type file
     path /buffers/test_file.*.buffer
     retry_forever true
     timekey 1m
     timekey_use_utc true
     timekey_wait 30s
   &lt;/buffer&gt;
 &lt;/match&gt;
</code></pre><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3effea023502f5f282b1bcfc984721f7">8.4.31 - Secret definition</h1><h2 id="define-secret-value">Define secret value</h2><p>Secrets can be used in logging-operator <code>Output</code> definitions.</p><blockquote>
<p>Secrets <em>MUST</em> be in the <em>SAME</em> namespace as the <code>Output</code> or <code>ClusterOutput</code> custom resource</p></blockquote><p><strong>Example secret definition</strong></p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-name&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-key&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>For debug purposes you can define secret values directly. However this is <em>NOT</em> recommended in production.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;secretvalue&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="define-secret-mount">Define secret mount</h2><p>There are cases when you can&rsquo;t inject secret into the configuration because the plugin need a file to read from. For this cases you can use <code>mountFrom</code>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">tls_cert_path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-name&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-key&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>The operator will collect the secret and copy it to the <code>fluentd-output</code> secret. The fluentd configuration will contain the secret path.</p><p><strong>Example rendered configuration</strong></p><pre tabindex="0"><code>&lt;match **&gt;
    @type forward
    tls_cert_path /fluentd/etc/secret/default-fluentd-tls-tls.crt
    ...
&lt;/match&gt;
</code></pre><h3 id="how-it-works">How it works?</h3><p>Behind the scene the operator marks the secret with an annotation and watches it for changes as long as the annotation is present.</p><p><strong>Example annotated secret</strong></p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Opaque</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">logging.banzaicloud.io/default</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">watched</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">fluentd-tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tls.crt</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SGVsbG8gV29ybGQ=</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><blockquote>
<p>The annotation format is <code>logging.banzaicloud.io/&lt;loggingRef>: watched</code>. Since the <code>name</code> part of the an annotation can&rsquo;t be empty the <code>default</code> applies to empty <code>loggingRef</code> value as well.</p></blockquote><p>The mount path is generated from the secret information</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>/fluentd/etc/secret/<span style="color:#000">$namespace</span>-<span style="color:#000">$secret_name</span>-<span style="color:#000">$secret_key</span>
</span></span></code></pre></div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f82c0e1c4bdef1d77adef0a24aa2326c">8.5 - syslog-ng filters</h1><p>You can use the following <strong>syslog-ng</strong> filters in your <code>SyslogNGFlow</code> and <code>SyslogNGClusterFlow</code> resources.</p></div><div class="td-content">
<h1 id="pg-ed56f7c86144eb14193213bc7f89126f">8.5.1 - Match</h1><p>Match filters can be used to select the log records to process. These filters have the same options and syntax as the <a href="/docs/configuration/plugins/syslog-ng-filters/match/">syslog-ng flow match expressions</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">apache</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="matchexpr">MatchExpr</h2><h3 id="matchexpr-and">and ([]MatchExpr, optional)</h3><p>Default: -</p><h3 id="matchexpr-not">not (*MatchExpr, optional)</h3><p>Default: -</p><h3 id="matchexpr-regexp">regexp (*RegexpMatchExpr, optional)</h3><p><a href="#Regexp-Directive">Regexp Directive</a></p><p>Default: -</p><h3 id="matchexpr-or">or ([]MatchExpr, optional)</h3><p>Default: -</p><h2 id="Regexp-Directive"><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/68#TOPIC-1829171">Regexp Directive</a></h2><p>Specify filtering rule.</p><h3 id="regexp-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><p>Default: -</p><h3 id="regexp-directive-template">template (string, optional)</h3><p>Specify a template of the record fields to match against.</p><p>Default: -</p><h3 id="regexp-directive-value">value (string, optional)</h3><p>Specify a field name of the record to match against the value of.</p><p>Default: -</p><h3 id="regexp-directive-flags">flags ([]string, optional)</h3><p>Pattern flags</p><p>Default: -</p><h3 id="regexp-directive-type">type (string, optional)</h3><p>Pattern type</p><p>Default: -</p><h4 id="example-regexp-filter-configurations">Example <code>Regexp</code> filter configurations</h4><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">^5\d\d$</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="syslog-ng-config-result">Syslog-NG Config Result</h4><pre tabindex="0"><code>log {
   source(main_input);
   filter {
       match(&#34;^5\d\d$&#34; value(&#34;first&#34;));
   };
   destination(output_default_demo-output);
};
</code></pre></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4afe8af7a86227831c993a592f328feb">8.5.2 - Parser</h1><p>Parser filters can be used to extract key-value pairs from message data. Logging operator currently supports the following parsers:</p><ul>
<li><a href="#regexp">regexp</a></li><li><a href="#syslog">syslog-parser</a></li></ul><h2 id="regexp">Regexp parser</h2><p>The regexp parser can use regular expressions to parse fields from a message.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">patterns</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#4e9a06">&#34;.*test_field -&gt; (?&lt;test_field&gt;.*)$&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">prefix</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">.regexp.</span></span></span></code></pre></div><p>For details, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/91#TOPIC-1829263">syslog-ng documentation</a>.</p><h2 id="syslog">Syslog parser</h2><p>The syslog parser can parse syslog messages. For details, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/83#TOPIC-1829231">syslog-ng documentation</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">syslog-parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}</span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide82topic-1768819"><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/82#TOPIC-1768819">Parser</a></h2><h3 id="regexp-regexpparser-optional-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide82topic-1768819-regexp">regexp (*RegexpParser, optional) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/82#topic-1768819">parser</a>-regexp}</h3><p>Default: -</p><h3 id="syslog-parser-syslogparser-optional-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide82topic-1768819-syslog-parser">syslog-parser (*SyslogParser, optional) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/82#topic-1768819">parser</a>-syslog-parser}</h3><p>Default: -</p><h2 id="regexp-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide90"><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/90">Regexp parser</a></h2><h3 id="patterns-string-required-regexp-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide90-patterns">patterns ([]string, required) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/90">regexp parser</a>-patterns}</h3><p>The regular expression patterns that you want to find a match. regexp-parser() supports multiple patterns, and stops the processing at the first successful match.</p><p>Default: -</p><h3 id="prefix-string-optional-regexp-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide90-prefix">prefix (string, optional) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/90">regexp parser</a>-prefix}</h3><p>Insert a prefix before the name part of the parsed name-value pairs to help further processing.</p><p>Default: -</p><h3 id="template-string-optional-regexp-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide90-template">template (string, optional) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/90">regexp parser</a>-template}</h3><p>Specify a template of the record fields to match against.</p><p>Default: -</p><h3 id="flags-string-optional-regexp-parserhttpswwwsyslog-ngcomtechnical-documentsdocsyslog-ng-open-source-edition336administration-guide90-flags">flags ([]string, optional) {#<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.36/administration-guide/90">regexp parser</a>-flags}</h3><p>Pattern flags</p><p>Default: -</p><h2 id="syslogparser">SyslogParser</h2><h3 id="syslogparser-flags">flags ([]string, optional)</h3><p>Pattern flags</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-71055e789d2740b4a21574d9424fd407">8.5.3 - Rewrite</h1><p>Rewrite filters can be used to modify record contents. Logging operator currently supports the following rewrite functions:</p><ul>
<li><a href="#groupunset">group_unset</a></li><li><a href="#rename">rename</a></li><li><a href="#set">set</a></li><li><a href="#subst">substitute</a></li><li><a href="#unset">unset</a></li></ul><blockquote>
<p>Note: All rewrite functions support an optional <code>condition</code> which has the same syntax as the <a href="../match/">match filter</a>.</p></blockquote><h2 id="groupunset">Group unset</h2><p>The <code>group_unset</code> function removes from the record a group of fields matching a pattern.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">group_unset</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.annotations.*&#34;</span></span></span></code></pre></div><h2 id="rename">Rename</h2><p>The <code>rename</code> function changes the name of an existing field name.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">rename</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">oldName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.labels.app&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">newName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.labels.app.kubernetes.io/name&#34;</span></span></span></code></pre></div><h2 id="set">Set</h2><p>The <code>set</code> function sets the value of a field.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">set</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.cluster&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;prod-us&#34;</span></span></span></code></pre></div><h2 id="subst">Substitute (subst)</h2><p>The <code>subst</code> function replaces parts of a field with a replacement value based on a pattern.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">subst</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;\d\d\d\d-\d\d\d\d-\d\d\d\d-\d\d\d\d&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">replace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[redacted bank card number]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;MESSAGE&#34;</span></span></span></code></pre></div><p>The function also supports the <code>type</code> and <code>flags</code> fields for specifying pattern type and flags as described in the <a href="../match/">match expression regexp function</a>.</p><h2 id="unset">Unset</h2><p>You can unset macros or fields of the message.</p><blockquote>
<p>Note: Unsetting a field completely deletes any previous value of the field.</p></blockquote><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">unset</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.cluster&#34;</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="rewriteconfig">RewriteConfig</h2><h3 id="rewriteconfig-group_unset">group_unset (*GroupUnsetConfig, optional)</h3><p>Default: -</p><h3 id="rewriteconfig-rename">rename (*RenameConfig, optional)</h3><p>Default: -</p><h3 id="rewriteconfig-set">set (*SetConfig, optional)</h3><p>Default: -</p><h3 id="rewriteconfig-subst">subst (*SubstituteConfig, optional)</h3><p>Default: -</p><h3 id="rewriteconfig-unset">unset (*UnsetConfig, optional)</h3><p>Default: -</p><h2 id="renameconfig">RenameConfig</h2><p><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829213">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829213</a></p><h3 id="renameconfig-oldname">oldName (string, required)</h3><p>Default: -</p><h3 id="renameconfig-newname">newName (string, required)</h3><p>Default: -</p><h3 id="renameconfig-condition">condition (*MatchExpr, optional)</h3><p>Default: -</p><h2 id="setconfig">SetConfig</h2><p><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/77#TOPIC-1829207">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/77#TOPIC-1829207</a></p><h3 id="setconfig-field">field (string, required)</h3><p>Default: -</p><h3 id="setconfig-value">value (string, required)</h3><p>Default: -</p><h3 id="setconfig-condition">condition (*MatchExpr, optional)</h3><p>Default: -</p><h2 id="substituteconfig">SubstituteConfig</h2><p><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/77#TOPIC-1829206">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/77#TOPIC-1829206</a></p><h3 id="substituteconfig-pattern">pattern (string, required)</h3><p>Default: -</p><h3 id="substituteconfig-replace">replace (string, required)</h3><p>Default: -</p><h3 id="substituteconfig-field">field (string, required)</h3><p>Default: -</p><h3 id="substituteconfig-flags">flags ([]string, optional)</h3><p>Default: -</p><h3 id="substituteconfig-type">type (string, optional)</h3><p>Default: -</p><h3 id="substituteconfig-condition">condition (*MatchExpr, optional)</h3><p>Default: -</p><h2 id="unsetconfig">UnsetConfig</h2><p><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829212">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829212</a></p><h3 id="unsetconfig-field">field (string, required)</h3><p>Default: -</p><h3 id="unsetconfig-condition">condition (*MatchExpr, optional)</h3><p>Default: -</p><h2 id="groupunsetconfig">GroupUnsetConfig</h2><p><a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829212">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/78#TOPIC-1829212</a></p><h3 id="groupunsetconfig-pattern">pattern (string, required)</h3><p>Default: -</p><h3 id="groupunsetconfig-condition">condition (*MatchExpr, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-810c80c2dbdca02f7ade52079fd88712">8.6 - syslog-ng outputs</h1><p>SyslogNGOutput and SyslogNGClusterOutput resources have almost the same structure as Output and ClusterOutput resources, with the main difference being the number and kind of supported destinations.</p><p>You can use the following <strong>syslog-ng</strong> outputs in your <code>SyslogNGOutput</code> and <code>SyslogNGClusterOutput</code> resources.</p></div><div class="td-content">
<h1 id="pg-0125a4a4d818b30d9054879982e084a1">8.6.1 - Disk buffer</h1><h2 id="diskbuffer">DiskBuffer</h2><p>The parameters of the syslog-ng disk buffer. Using a disk buffer on the output helps avoid message loss in case of a system failure on the destination side.
Documentation: <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#TOPIC-1829124">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#TOPIC-1829124</a></p><h3 id="diskbuffer-disk_buf_size">disk_buf_size (int64, required)</h3><p>This is a required option. The maximum size of the disk-buffer in bytes. The minimum value is 1048576 bytes.</p><p>Default: -</p><h3 id="diskbuffer-reliable">reliable (bool, required)</h3><p>If set to yes, syslog-ng OSE cannot lose logs in case of reload/restart, unreachable destination or syslog-ng OSE crash. This solution provides a slower, but reliable disk-buffer option.</p><p>Default: -</p><h3 id="diskbuffer-compaction">compaction (*bool, optional)</h3><p>Prunes the unused space in the LogMessage representation</p><p>Default: -</p><h3 id="diskbuffer-dir">dir (string, optional)</h3><p>Description: Defines the folder where the disk-buffer files are stored.</p><p>Default: -</p><h3 id="diskbuffer-mem_buf_length">mem_buf_length (*int64, optional)</h3><p>Use this option if the option reliable() is set to no. This option contains the number of messages stored in overflow queue.</p><p>Default: -</p><h3 id="diskbuffer-mem_buf_size">mem_buf_size (*int64, optional)</h3><p>Use this option if the option reliable() is set to yes. This option contains the size of the messages in bytes that is used in the memory part of the disk buffer.</p><p>Default: -</p><h3 id="diskbuffer-q_out_size">q_out_size (*int64, optional)</h3><p>The number of messages stored in the output buffer of the destination.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-def8416dfd78030f291e4e2fee600a97">8.6.2 - File</h1><p>The <code>file</code> output stores log records in a plain text file.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/mnt/archive/logs/${YEAR}/${MONTH}/${DAY}/app.log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">create_dirs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/36#TOPIC-1829044">syslog-ng documentation</a>.</p><h3 id="fileoutput-path">path (string, required)</h3><p>Store file path</p><p>Default: -</p><h3 id="fileoutput-create_dirs">create_dirs (bool, optional)</h3><p>Enable creating non-existing directories.</p><p>Default: false</p><h3 id="fileoutput-dir_group">dir_group (string, optional)</h3><p>The group of the directories created by syslog-ng. To preserve the original properties of an existing directory, use the option without specifying an attribute: dir-group().</p><p>Default: Use the global settings</p><h3 id="fileoutput-dir_owner">dir_owner (string, optional)</h3><p>The owner of the directories created by syslog-ng. To preserve the original properties of an existing directory, use the option without specifying an attribute: dir-owner().</p><p>Default: Use the global settings</p><h3 id="fileoutput-dir_perm">dir_perm (int, optional)</h3><p>The permission mask of directories created by syslog-ng. Log directories are only created if a file after macro expansion refers to a non-existing directory, and directory creation is enabled (see also the create-dirs() option). For octal numbers prefix the number with 0, for example use 0755 for rwxr-xr-x.</p><p>Default: Use the global settings</p><h3 id="fileoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="fileoutput-template">template (string, optional)</h3><p>Default: -</p><h3 id="fileoutput-persist_name">persist_name (string, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f64978e87cfa5c2c0a8c6ad06c690873">8.6.3 - HTTP</h1><h1 id="sending-messages-over-http">Sending messages over HTTP</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/40#TOPIC-1829058">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/40#TOPIC-1829058</a></p><h2 id="configuration">Configuration</h2><h2 id="httpoutput">HTTPOutput</h2><h3 id="httpoutput-url">url (string, optional)</h3><p>Specifies the hostname or IP address and optionally the port number of the web service that can receive log data via HTTP. Use a colon (:) after the address to specify the port number of the server. For example: http://127.0.0.1:8000</p><p>Default: -</p><h3 id="httpoutput-headers">headers ([]string, optional)</h3><p>Custom HTTP headers to include in the request, for example, headers(&ldquo;HEADER1: header1&rdquo;, &ldquo;HEADER2: header2&rdquo;).</p><p>Default: empty</p><h3 id="httpoutput-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="httpoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#TOPIC-1829193">syslog-ng documentation</a>.</p><p>Default: -</p><h3 id="httpoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="httpoutput-">(Batch, required)</h3><p>Batching parameters</p><p>Default: -</p><h3 id="httpoutput-body">body (string, optional)</h3><p>The body of the HTTP request, for example, body("${ISODATE} ${MESSAGE}"). You can use strings, macros, and template functions in the body. If not set, it will contain the message received from the source by default.</p><p>Default: -</p><h3 id="httpoutput-body-prefix">body-prefix (string, optional)</h3><p>The string syslog-ng OSE puts at the beginning of the body of the HTTP request, before the log message.</p><p>Default: -</p><h3 id="httpoutput-body-suffix">body-suffix (string, optional)</h3><p>The string syslog-ng OSE puts to the end of the body of the HTTP request, after the log message.</p><p>Default: -</p><h3 id="httpoutput-delimiter">delimiter (string, optional)</h3><p>By default, syslog-ng OSE separates the log messages of the batch with a newline character.</p><p>Default: -</p><h3 id="httpoutput-method">method (string, optional)</h3><p>Specifies the HTTP method to use when sending the message to the server. POST | PUT</p><p>Default: -</p><h3 id="httpoutput-retries">retries (int, optional)</h3><p>The number of times syslog-ng OSE attempts to send a message to this destination. If syslog-ng OSE could not send a message, it will try again until the number of attempts reaches retries, then drops the message.</p><p>Default: -</p><h3 id="httpoutput-user">user (string, optional)</h3><p>The username that syslog-ng OSE uses to authenticate on the server where it sends the messages.</p><p>Default: -</p><h3 id="httpoutput-password">password (secret.Secret, optional)</h3><p>The password that syslog-ng OSE uses to authenticate on the server where it sends the messages.</p><p>Default: -</p><h3 id="httpoutput-user-agent">user-agent (string, optional)</h3><p>The value of the USER-AGENT header in the messages sent to the server.</p><p>Default: -</p><h3 id="httpoutput-workers">workers (int, optional)</h3><p>Description: Specifies the number of worker threads (at least 1) that syslog-ng OSE uses to send messages to the server. Increasing the number of worker threads can drastically improve the performance of the destination.</p><p>Default: -</p><h3 id="httpoutput-persist_name">persist_name (string, optional)</h3><p>Default: -</p><h2 id="batch">Batch</h2><h3 id="batch-batch-lines">batch-lines (int, optional)</h3><p>Description: Specifies how many lines are flushed to a destination in one batch. The syslog-ng OSE application waits for this number of lines to accumulate and sends them off in a single batch. Increasing this number increases throughput as more messages are sent in a single batch, but also increases message latency. For example, if you set batch-lines() to 100, syslog-ng OSE waits for 100 messages.</p><p>Default: -</p><h3 id="batch-batch-bytes">batch-bytes (int, optional)</h3><p>Description: Sets the maximum size of payload in a batch. If the size of the messages reaches this value, syslog-ng OSE sends the batch to the destination even if the number of messages is less than the value of the batch-lines() option. Note that if the batch-timeout() option is enabled and the queue becomes empty, syslog-ng OSE flushes the messages only if batch-timeout() expires, or the batch reaches the limit set in batch-bytes().</p><p>Default: -</p><h3 id="batch-batch-timeout">batch-timeout (int, optional)</h3><p>Description: Specifies the time syslog-ng OSE waits for lines to accumulate in the output buffer. The syslog-ng OSE application sends batches to the destinations evenly. The timer starts when the first message arrives to the buffer, so if only few messages arrive, syslog-ng OSE sends messages to the destination at most once every batch-timeout() milliseconds.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-db09f336e539e97c3a4b6ae4786aded5">8.6.4 - Loggly output</h1><h2 id="overview">Overview</h2><p>The <code>loggly()</code> destination sends log messages to the <a href="https://www.loggly.com/">Loggly</a> Logging-as-a-Service provider. You can send log messages over TCP, or encrypted with TLS. For details, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/43#TOPIC-1829072">syslog-ng documentation</a>.</p><h2 id="prerequisites">Prerequisites</h2><p>You need a Loggly account and your user token to use this output.</p><h2 id="configuration">Configuration</h2><h3 id="loggly-host">host (string, optional)</h3><p>Address of the destination host</p><p>Default: -</p><h3 id="loggly-tag">tag (string, optional)</h3><p>Event tag <a href="https://documentation.solarwinds.com/en/success_center/loggly/content/admin/tags.htm">more information</a></p><p>Default: -</p><h3 id="loggly-token">token (*secret.Secret, required)</h3><p>Your Customer Token that you received from Loggly <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/43#loggly-option-token">more information</a></p><p>Default: -</p><h3 id="loggly-">(SyslogOutput, required)</h3><p>syslog output configuration</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-18b36b379ed9690f5568e3f8d7088d0f">8.6.5 - LogScale</h1><h1 id="logscale">logscale</h1><h2 id="overview">Overview</h2><h2 id="configuration">Configuration</h2><h2 id="logscaleoutput">LogScaleOutput</h2><h3 id="logscaleoutput-url">url (*secret.Secret, optional)</h3><p>Ingester URL is the URL of the Humio cluster you want to send data to.</p><p>Default: <code>https://cloud.humio.com</code></p><h3 id="logscaleoutput-token">token (*secret.Secret, optional)</h3><p>An <a href="https://library.humio.com/data-analysis/ingesting-data-tokens.html">Ingest Token</a> is a unique string that identifies a repository and allows you to send data to that repository.</p><p>Default: empty</p><h3 id="logscaleoutput-rawstring">rawstring (string, optional)</h3><p>The raw string representing the Event. The default display for an Event in LogScale is the rawstring. If you do not provide the rawstring field, then the response defaults to a JSON representation of the attributes field.</p><p>Default: empty</p><h3 id="logscaleoutput-attributes">attributes (string, optional)</h3><p>A JSON object representing key-value pairs for the Event. These key-value pairs adds structure to Events, making it easier to search. Attributes can be nested JSON objects, however, we recommend limiting the amount of nesting.</p><p>Default: &ldquo;&ndash;scope rfc5424 &ndash;exclude MESSAGE &ndash;exclude DATE &ndash;leave-initial-dot&rdquo;</p><h3 id="logscaleoutput-timezone">timezone (string, optional)</h3><p>The timezone is only required if you specify the timestamp in milliseconds. The timezone specifies the local timezone for the event. Note that you must still specify the timestamp in UTC time.</p><p>Default: -</p><h3 id="logscaleoutput-extra_headers">extra_headers (string, optional)</h3><p>This field represents additional headers that can be included in the HTTP request when sending log records to Falcon&rsquo;s LogScale.</p><p>Default: empty</p><h3 id="logscaleoutput-content_type">content_type (string, optional)</h3><p>This field specifies the content type of the log records being sent to Falcon&rsquo;s LogScale.</p><p>Default: &ldquo;application/json&rdquo;</p><h3 id="logscaleoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="logscaleoutput-body">body (string, optional)</h3><p>Default: -</p><h3 id="logscaleoutput-batch_lines">batch_lines (int, optional)</h3><p>Default: -</p><h3 id="logscaleoutput-batch_bytes">batch_bytes (int, optional)</h3><p>Default: -</p><h3 id="logscaleoutput-batch_timeout">batch_timeout (int, optional)</h3><p>Default: -</p><h3 id="logscaleoutput-persist_name">persist_name (string, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-31ea9edde3a649f6c3772919f9e7a156">8.6.6 - MQTT</h1><h1 id="sending-messages-from-a-local-network-to-an-mqtt-broker">Sending messages from a local network to an MQTT broker</h1><h2 id="overview">Overview</h2><h2 id="prerequisites">Prerequisites</h2><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mqtt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#204a87;font-weight:700">mqtt</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	  </span><span style="color:#204a87;font-weight:700">address</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tcp://mosquitto:1883</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	  </span><span style="color:#204a87;font-weight:700">template</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	    </span><span style="color:#000">$(format-json --subkeys json~ --key-delimiter ~)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	  </span><span style="color:#204a87;font-weight:700">topic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test/demo</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="mqtt">MQTT</h2><h3 id="mqtt-address">address (string, optional)</h3><p>Address of the destination host</p><p>Default: -</p><h3 id="mqtt-topic">topic (string, optional)</h3><p>Topic defines in which topic syslog-ng stores the log message. You can also use templates here, and use, for example, the $HOST macro in the topic name hierarchy.</p><p>Default: -</p><h3 id="mqtt-fallback-topic">fallback-topic (string, optional)</h3><p>fallback-topic is used when syslog-ng cannot post a message to the originally defined topic (which can include invalid characters coming from templates).</p><p>Default: -</p><h3 id="mqtt-template">template (string, optional)</h3><p>Template where you can configure the message template sent to the MQTT broker. By default, the template is: “$ISODATE $HOST $MSGHDR$MSG”</p><p>Default: -</p><h3 id="mqtt-qos">qos (int, optional)</h3><p>qos stands for quality of service and can take three values in the MQTT world. Its default value is 0, where there is no guarantee that the message is ever delivered.</p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-764b7c70899b4d51e51a8ba401f96cd2">8.6.7 - Sumo Logic HTTP</h1><p>The <code>sumologic-http</code> output sends log records over HTTP to Sumo Logic.</p><h2 id="prerequisites">Prerequisites</h2><p>You need a Sumo Logic account to use this output. For details, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/55#TOPIC-1829118">syslog-ng documentation</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test-sumo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">sumologic-http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disk_buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">disk_buf_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">512000000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">dir</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/buffers</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">reliable</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">body</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(format-json
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --subkeys json.
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.annotations.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.annotations=literal($(format-flat-json --subkeys json.kubernetes.annotations.))
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.labels.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.labels=literal($(format-flat-json --subkeys json.kubernetes.labels.)))&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">collector</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-collector</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">deployment</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">&#39;X-Sumo-Name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">source-name&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">&#39;X-Sumo-Category</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">source-category&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">use-system-cert-store</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="sumologichttpoutput">SumologicHTTPOutput</h2><h3 id="sumologichttpoutput-collector">collector (*secret.Secret, optional)</h3><p>The Cloud Syslog Cloud Token that you received from the Sumo Logic service while configuring your cloud syslog source.</p><p>Default: empty</p><h3 id="sumologichttpoutput-deployment">deployment (string, optional)</h3><p>This option specifies your Sumo Logic deployment.https://help.sumologic.com/APIs/General-API-Information/Sumo-Logic-Endpoints-by-Deployment-and-Firewall-Security</p><p>Default: empty</p><h3 id="sumologichttpoutput-headers">headers ([]string, optional)</h3><p>Custom HTTP headers to include in the request, for example, headers(&ldquo;HEADER1: header1&rdquo;, &ldquo;HEADER2: header2&rdquo;).</p><p>Default: empty</p><h3 id="sumologichttpoutput-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="sumologichttpoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#TOPIC-1829193">syslog-ng documentation</a>.</p><p>Default: -</p><h3 id="sumologichttpoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="sumologichttpoutput-body">body (string, optional)</h3><p>Default: -</p><h3 id="sumologichttpoutput-url">url (*secret.Secret, optional)</h3><p>Default: -</p><h3 id="sumologichttpoutput-batch-lines">batch-lines (int, optional)</h3><p>Default: -</p><h3 id="sumologichttpoutput-batch-bytes">batch-bytes (int, optional)</h3><p>Default: -</p><h3 id="sumologichttpoutput-batch-timeout">batch-timeout (int, optional)</h3><p>Default: -</p><h3 id="sumologichttpoutput-persist_name">persist_name (string, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1721ec291a25f8230ddeedf2a20018f9">8.6.8 - Sumo Logic Syslog</h1><h1 id="storing-messages-in-sumo-logic-over-syslog">Storing messages in Sumo Logic over syslog</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#TOPIC-1829122">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#TOPIC-1829122</a></p><h2 id="configuration">Configuration</h2><h2 id="sumologicsyslogoutput">SumologicSyslogOutput</h2><h3 id="sumologicsyslogoutput-port">port (int, optional)</h3><p>This option sets the port number of the Sumo Logic server to connect to.</p><p>Default: 6514</p><h3 id="sumologicsyslogoutput-deployment">deployment (string, optional)</h3><p>This option specifies your Sumo Logic deployment.https://help.sumologic.com/APIs/General-API-Information/Sumo-Logic-Endpoints-by-Deployment-and-Firewall-Security</p><p>Default: empty</p><h3 id="sumologicsyslogoutput-tag">tag (string, optional)</h3><p>This option specifies the list of tags to add as the tags fields of Sumo Logic messages. If not specified, syslog-ng OSE automatically adds the tags already assigned to the message. If you set the tag() option, only the tags you specify will be added to the messages.</p><p>Default: tag</p><h3 id="sumologicsyslogoutput-token">token (int, optional)</h3><p>The Cloud Syslog Cloud Token that you received from the Sumo Logic service while configuring your cloud syslog source. <a href="https://help.sumologic.com/03Send-Data/Sources/02Sources-for-Hosted-Collectors/Cloud-Syslog-Source#configure-a-cloud%C2%A0syslog%C2%A0source">https://help.sumologic.com/03Send-Data/Sources/02Sources-for-Hosted-Collectors/Cloud-Syslog-Source#configure-a-cloud%C2%A0syslog%C2%A0source</a></p><p>Default: -</p><h3 id="sumologicsyslogoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#TOPIC-1829193">syslog-ng documentation</a>.</p><p>Default: -</p><h3 id="sumologicsyslogoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="sumologicsyslogoutput-persist_name">persist_name (string, optional)</h3><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-17c2f3cac6d1fd9cb831fa66c2daf727">8.6.9 - Syslog (RFC5424) output</h1><p>The <code>syslog</code> output sends log records over a socket using the Syslog protocol (RFC 5424).</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10.12.34.56</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">transport</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">ca_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">cert_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">key_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span></span></span></code></pre></div><p>The following example also configures disk-based buffering for the output. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10.20.9.89</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">601</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disk_buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">disk_buf_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">512000000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">dir</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/buffer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">reliable</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">template</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(format-json
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --subkeys json.
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.labels.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.labels=literal($(format-flat-json --subkeys json.kubernetes.labels.)))\n&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">ca_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">cert_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">transport</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#TOPIC-1829124">syslog-ng documentation</a>.</p><h3 id="syslogoutput-host">host (string, required)</h3><p>Address of the destination host</p><p>Default: -</p><h3 id="syslogoutput-port">port (int, optional)</h3><p>The port number to connect to. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor895">more information</a></p><p>Default: -</p><h3 id="syslogoutput-transport">transport (string, optional)</h3><p>Specifies the protocol used to send messages to the destination server. <a href>more information</a> <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor911">more information</a></p><p>Default: -</p><h3 id="syslogoutput-close_on_input">close_on_input (*bool, optional)</h3><p>By default, syslog-ng OSE closes destination sockets if it receives any input from the socket (for example, a reply). If this option is set to no, syslog-ng OSE just ignores the input, but does not close the socket. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor859">more information</a></p><p>Default: -</p><h3 id="syslogoutput-flags">flags ([]string, optional)</h3><p>Flags influence the behavior of the destination driver. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor877">more information</a></p><p>Default: -</p><h3 id="syslogoutput-flush_lines">flush_lines (int, optional)</h3><p>Specifies how many lines are flushed to a destination at a time. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor880">more information</a></p><p>Default: -</p><h3 id="syslogoutput-so_keepalive">so_keepalive (*bool, optional)</h3><p>Enables keep-alive messages, keeping the socket open. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor897">more information</a></p><p>Default: -</p><h3 id="syslogoutput-suppress">suppress (int, optional)</h3><p>Specifies the number of seconds syslog-ng waits for identical messages. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor901">more information</a></p><p>Default: -</p><h3 id="syslogoutput-template">template (string, optional)</h3><p>Specifies a template defining the logformat to be used in the destination. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor905">more information</a></p><p>Default: 0</p><h3 id="syslogoutput-template_escape">template_escape (*bool, optional)</h3><p>Turns on escaping for the &lsquo;, &ldquo;, and backspace characters in templated output files. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor906">more information</a></p><p>Default: -</p><h3 id="syslogoutput-tls">tls (*TLS, optional)</h3><p>Sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor910">more information</a></p><p>Default: -</p><h3 id="syslogoutput-ts_format">ts_format (string, optional)</h3><p>Override the global timestamp format (set in the global ts-format() parameter) for the specific destination. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/56#kanchor912">more information</a></p><p>Default: -</p><h3 id="syslogoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>Enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: -</p><h3 id="syslogoutput-persist_name">persist_name (string, optional)</h3><p>Unique name for the syslog-ng driver <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.16/administration-guide/persist-name">more information</a></p><p>Default: -</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-56a41f3fbc6007034e66766bff690bfa">8.6.10 - TLS config for syslog-ng outputs</h1><h1 id="tls-config-for-syslog-ng-outputs">TLS config for syslog-ng outputs</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/32#kanchor2338">https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/32#kanchor2338</a></p><h2 id="configuration">Configuration</h2><h2 id="tls">TLS</h2><h3 id="tls-ca_dir">ca_dir (*secret.Secret, optional)</h3><p>The name of a directory that contains a set of trusted CA certificates in PEM format. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#kanchor3142">more information</a></p><p>Default: -</p><h3 id="tls-ca_file">ca_file (*secret.Secret, optional)</h3><p>The name of a file that contains a set of trusted CA certificates in PEM format. (Optional) <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#kanchor3144">more information</a></p><p>Default: -</p><h3 id="tls-key_file">key_file (*secret.Secret, optional)</h3><p>The name of a file that contains an unencrypted private key in PEM format, suitable as a TLS key. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#kanchor3163">more information</a></p><p>Default: -</p><h3 id="tls-cert_file">cert_file (*secret.Secret, optional)</h3><p>Name of a file, that contains an X.509 certificate (or a certificate chain) in PEM format, suitable as a TLS certificate, matching the private key set in the key-file() option. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#kanchor3146">more information</a></p><p>Default: -</p><h3 id="tls-peer_verify">peer_verify (string, optional)</h3><p>Verification method of the peer. <a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-open-source-edition/3.37/administration-guide/73#tls-options-peer-verify">more information</a></p><p>Default: -</p><h3 id="tls-use-system-cert-store">use-system-cert-store (*bool, optional)</h3><p>Use the certificate store of the system for verifying HTTPS certificates. <a href="https://curl.se/docs/sslcerts.html">more information</a></p><p>Default: -</p><h3 id="tls-cipher-suite">cipher-suite (string, optional)</h3><p>Description: Specifies the cipher, hash, and key-exchange algorithms used for the encryption, for example, ECDHE-ECDSA-AES256-SHA384. The list of available algorithms depends on the version of OpenSSL used to compile syslog-ng OSE</p><p>Default: -</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class="row">
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
<a class="text-white" target="_blank" rel="noopener" href="https://github.com/kube-logging/logging-operator" aria-label="GitHub">
<i class="fab fa-github"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
<a class="text-white" target="_blank" rel="noopener" href="https://banzaicloud.com/invite-slack/" aria-label="Slack">
<i class="fab fa-slack"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discord" aria-label="Discord">
<a class="text-white" target="_blank" rel="noopener" href="https://discord.gg/9ACY4RDsYN" aria-label="Discord">
<i class="fab fa-discord"></i>
</a>
</li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class="text-white">&copy; 2023 kube-logging authors All Rights Reserved</small>
</div></div></div></footer></div><script src="/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js" integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>
<script src="/js/tocbot.min.js"></script>
<script type="text/javascript">tocbot.init({tocSelector:".td-toc",contentSelector:".td-content",headingSelector:"h2, h3, h4",ignoreHiddenElements:!0})</script>
</body></html>