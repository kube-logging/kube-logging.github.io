<!doctype html><html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="https://kube-logging.dev/docs/configuration/plugins/filters/">
<link rel="alternate" type="text/releases" href="https://kube-logging.dev/docs/configuration/plugins/filters/releases.releases">
<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/favicons/favicon.ico">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">
<title>Fluentd filters | Logging operator</title><meta name="description" content="Documentation for the Logging operator">
<meta property="og:title" content="Fluentd filters">
<meta property="og:description" content="Documentation for the Logging operator">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kube-logging.dev/docs/configuration/plugins/filters/"><meta property="og:site_name" content="Logging operator">
<meta itemprop="name" content="Fluentd filters">
<meta itemprop="description" content="Documentation for the Logging operator"><meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fluentd filters">
<meta name="twitter:description" content="Documentation for the Logging operator">
<link rel="preload" href="/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" as="style">
<link href="/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" rel="stylesheet" integrity>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css">
<script src="/js/w3.js" type="application/x-javascript"></script>
<link rel="canonical" href="https://kube-logging.dev/docs/configuration/plugins/filters/">
<script src="/pagefind/pagefind-highlight.js" type="application/x-javascript"></script>
<script type="module">
        await import('/pagefind/pagefind-highlight.js');
        new PagefindHighlight({ highlightParam: "highlight" });
    </script>
<script>window.__SJ_MESSAGE__="We collect cookies to analyze our website traffic and performance. We never collect any personal data.",window.__SJ_ACCEPT_BTN_TEXT__="Accept",window.__SJ_REJECT_BTN_TEXT__="Reject"</script>
<script src="https://cdn.jsdelivr.net/gh/sprucejoy/cookie-consent-autoblock-gdpr/cookie-consent.js" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM8C8QXCN7"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LM8C8QXCN7")}</script>
</head><body class="td-section">
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 3237.738 490.023" id="svg142" sodipodi:docname="logo-new2.svg" inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs146"/><sodipodi:namedview id="namedview144" pagecolor="#505050" bordercolor="#ffffff" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="1" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom=".37340884" inkscape:cx="1620.208" inkscape:cy="243.70071" inkscape:window-width="705" inkscape:window-height="480" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg142"/><g id="Group_2068" data-name="Group 2068" transform="translate(-43577.297 -34456.625)"><g id="Group_2067" data-name="Group 2067" transform="translate(27723.789 24565.273)"><path id="Path_4217" data-name="Path 4217" d="M47842.219 34024.414l-276.027 475.07h71.242l240.227-414.1z" transform="translate(-31703.996 -24123.111)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4218" data-name="Path 4218" d="M47831.324 34080.781l166.754 287.355h-333.035z" transform="translate(-31640.254 -24086.76)" fill="#fff" stroke="#fff" stroke-width="10"/><path id="Path_4220" data-name="Path 4220" d="M47668.742 34274.2l-37.727 64.1h442.43l-37.156-64.1z" transform="translate(-31662.199 -23962.018)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4222" data-name="Path 4222" d="M11294.989 10157.944l311.97-.01-156.218-269.074-78.621 135.83z" transform="translate(4740.338 117.39)" fill="#fff"/><path id="Path_4224" data-name="Path 4224" d="M47787.594 34159.125l-54.391 93.035h108.039z" transform="translate(-31596.297 -24036.238)" fill="#13142c" stroke="#13132d" stroke-width="10"/></g><text id="Logging_Operator" data-name="Logging Operator" transform="translate(45475.035 34799.609)" fill="#fff" font-size="267" font-family="Montserrat-Bold, Montserrat" font-weight="700" letter-spacing=".046em"><tspan x="-1339.806" y="0" id="tspan138">Logging Operator</tspan></text></g></svg></span><span class="navbar-brand__name">Logging operator</span>
<span class="font-weight-bold navbar-logo navbar-version">5.0</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="https://github.com/kube-logging/logging-operator" title="Go to GitHub project page" target="_blank"><span>Project page</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/docs/" title="Read the documentation"><span>Documentation</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/docs/community/" title="Come chat with us!"><span>Community</span></a>
</li><li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
<div w3-include-html="/docs/configuration/plugins/filters//releases.releases" w3-include-html-default='<a class="dropdown-item" href="/docs/releases.releases">Latest</a>'></div><script type="application/x-javascript">w3.includeHTML()</script>
</div></li></ul></div><div class="navbar-nav d-none d-lg-block">
<div class="main-menu-search">
<a href="/search">
<span class="nav-link"><i class="fa fa-search" aria-hidden="true"></i> Search</span>
</a>
</div></div></nav></header><div class="container-fluid td-outer">
<div class="td-main">
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href="/docs/configuration/plugins/filters/">Return to the regular view of this page</a>.
</p></div><h1 class="title">Fluentd filters</h1><ul>
<li>1: <a href="#pg-349fa261ad6602912c90010a75fa2c8a">Concat</a></li><li>2: <a href="#pg-bb097fab5840c448f215a8825f17af78">Dedot</a></li><li>3: <a href="#pg-55a61951fa9d47c3fc701c2b0c2534d4">ElasticSearch GenId</a></li><li>4: <a href="#pg-1e14b035cd2fa8152fe231991dc9b922">Exception Detector</a></li><li>5: <a href="#pg-91b6e53e4bb1647d0973b03564f40336">Geo IP</a></li><li>6: <a href="#pg-d911e67edeb675049a9637d612f14d1a">Grep</a></li><li>7: <a href="#pg-4ed899f75f815259c224810fdfb84730">Kubernetes Events Timestamp</a></li><li>8: <a href="#pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">Parser</a></li><li>9: <a href="#pg-b1ababb8fff927a359f5ee10ddd9740d">Prometheus</a></li><li>10: <a href="#pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">Record Modifier</a></li><li>11: <a href="#pg-2adc391c4bf236f17f4dff5d5236127b">Record Transformer</a></li><li>12: <a href="#pg-06af9b3099c8f9f37d675b5aee19c604">StdOut</a></li><li>13: <a href="#pg-9f71d81ccc4b25c0f75938abbc9a158d">Tag Normaliser</a></li><li>14: <a href="#pg-c86a56fc7e085e5aea4460c0e18e5990">Throttle</a></li><li>15: <a href="#pg-3610a8928860c8aae138583bea272461">User Agent</a></li></ul><div class="content">
<p>You can use the following <strong>Fluentd</strong> filters in your <code>Flow</code> and <code>ClusterFlow</code> CRDs.</p></div></div><div class="td-content">
<h1 id="pg-349fa261ad6602912c90010a75fa2c8a">1 - Concat</h1><h1 id="concat-filterhttpsgithubcomfluent-plugins-nurseryfluent-plugin-concat"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-concat">Concat Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to concatenate multiline log separated in multiple events.</p><h2 id="configuration">Configuration</h2><h2 id="concat">Concat</h2><h3 id="concat-continuous_line_regexp">continuous_line_regexp (string, optional)</h3><p>The regexp to match continuous lines. This is exclusive with n_lines.</p><h3 id="concat-flush_interval">flush_interval (int, optional)</h3><p>The number of seconds after which the last received event log is flushed. If set to 0, flushing is disabled (wait for next line forever).</p><h3 id="concat-keep_partial_key">keep_partial_key (bool, optional)</h3><p>If true, keep partial_key in concatenated records</p><p>Default: False</p><h3 id="concat-keep_partial_metadata">keep_partial_metadata (string, optional)</h3><p>If true, keep partial metadata</p><h3 id="concat-key">key (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><h3 id="concat-multiline_end_regexp">multiline_end_regexp (string, optional)</h3><p>The regexp to match ending of multiline. This is exclusive with n_lines.</p><h3 id="concat-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>The regexp to match beginning of multiline. This is exclusive with n_lines.</p><h3 id="concat-n_lines">n_lines (int, optional)</h3><p>The number of lines. This is exclusive with multiline_start_regex.</p><h3 id="concat-partial_cri_logtag_key">partial_cri_logtag_key (string, optional)</h3><p>The key name that is referred to concatenate records on cri log</p><h3 id="concat-partial_cri_stream_key">partial_cri_stream_key (string, optional)</h3><p>The key name that is referred to detect stream name on cri log</p><p>Default: stream</p><h3 id="concat-partial_key">partial_key (string, optional)</h3><p>The field name that is the reference to concatenate records</p><h3 id="concat-partial_metadata_format">partial_metadata_format (string, optional)</h3><p>Input format of the partial metadata (fluentd or journald docker log driver)( docker-fluentd, docker-journald, docker-journald-lowercase)</p><h3 id="concat-partial_value">partial_value (string, optional)</h3><p>The value stored in the field specified by partial_key that represent partial log</p><h3 id="concat-separator">separator (*string, optional)</h3><p>The separator of lines. (default: &ldquo;\n&rdquo;)</p><h3 id="concat-stream_identity_key">stream_identity_key (string, optional)</h3><p>The key to determine which stream an event belongs to.</p><h3 id="concat-timeout_label">timeout_label (string, optional)</h3><p>The label name to handle events caused by timeout.</p><h3 id="concat-use_first_timestamp">use_first_timestamp (bool, optional)</h3><p>Use timestamp of first record when buffer is flushed.</p><p>Default: False</p><h3 id="concat-use_partial_cri_logtag">use_partial_cri_logtag (bool, optional)</h3><p>Use cri log tag to concatenate multiple records</p><h3 id="concat-use_partial_metadata">use_partial_metadata (string, optional)</h3><p>Use partial metadata to concatenate multiple records</p><h2 id="example-concat-filter-configurations">Example <code>Concat</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">concat</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">partial_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;partial_message&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">n_lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type concat
</span></span><span style="display:flex"><span>  @id test_concat
</span></span><span style="display:flex"><span>  key message
</span></span><span style="display:flex"><span>  n_lines 10
</span></span><span style="display:flex"><span>  partial_key partial_message
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-bb097fab5840c448f215a8825f17af78">2 - Dedot</h1><h1 id="dedot-filterhttpsgithubcomlunardialfluent-plugin-dedot_filter"><a href="https://github.com/lunardial/fluent-plugin-dedot_filter">Dedot Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to de-dot field name for elasticsearch.</p><h2 id="configuration">Configuration</h2><h2 id="dedotfilterconfig">DedotFilterConfig</h2><h3 id="dedotfilterconfig-de_dot_nested">de_dot_nested (bool, optional)</h3><p>Will cause the plugin to recourse through nested structures (hashes and arrays), and remove dots in those key-names too.</p><p>Default: false</p><h3 id="dedotfilterconfig-de_dot_separator">de_dot_separator (string, optional)</h3><p>Separator</p><p>Default: _</p><h2 id="example-dedot-filter-configurations">Example <code>Dedot</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">dedot</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">de_dot_separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;-&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">de_dot_nested</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type dedot
</span></span><span style="display:flex"><span>  @id test_dedot
</span></span><span style="display:flex"><span>  de_dot_nested true
</span></span><span style="display:flex"><span>  de_dot_separator -
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-55a61951fa9d47c3fc701c2b0c2534d4">3 - ElasticSearch GenId</h1><h2 id="elasticsearchgenid">ElasticsearchGenId</h2><h2 id="example-elasticsearch-genid-filter-configurations">Example <code>Elasticsearch Genid</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">elasticsearch_genid</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">hash_id_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gen_id</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd Config Result</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span> @type elasticsearch_genid
</span></span><span style="display:flex"><span> @id test_elasticsearch_genid
</span></span><span style="display:flex"><span> hash_id_key gen_id
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h3 id="elasticsearchgenid-hash_id_key">hash_id_key (string, optional)</h3><p>You can specify generated hash storing key.</p><h3 id="elasticsearchgenid-hash_type">hash_type (string, optional)</h3><p>You can specify hash algorithm. Support algorithms md5, sha1, sha256, sha512. Default: sha1</p><h3 id="elasticsearchgenid-include_tag_in_seed">include_tag_in_seed (bool, optional)</h3><p>You can specify to use tag for hash generation seed.</p><h3 id="elasticsearchgenid-include_time_in_seed">include_time_in_seed (bool, optional)</h3><p>You can specify to use time for hash generation seed.</p><h3 id="elasticsearchgenid-record_keys">record_keys (string, optional)</h3><p>You can specify keys which are record in events for hash generation seed. This parameter should be used with use_record_as_seed parameter in practice.</p><h3 id="elasticsearchgenid-separator">separator (string, optional)</h3><p>You can specify separator charactor to creating seed for hash generation.</p><h3 id="elasticsearchgenid-use_entire_record">use_entire_record (bool, optional)</h3><p>You can specify to use entire record in events for hash generation seed.</p><h3 id="elasticsearchgenid-use_record_as_seed">use_record_as_seed (bool, optional)</h3><p>You can specify to use record in events for hash generation seed. This parameter should be used with record_keys parameter in practice.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1e14b035cd2fa8152fe231991dc9b922">4 - Exception Detector</h1><h1 id="exception-detector">Exception Detector</h1><h2 id="overview">Overview</h2><p>This filter plugin consumes a log stream of JSON objects which contain single-line log messages. If a consecutive sequence of log messages form an exception stack trace, they forwarded as a single, combined JSON object. Otherwise, the input log data is forwarded as is. More info at <a href="https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions">https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions</a></p><blockquote>
<p>Note: As Tag management is not supported yet, this Plugin is <strong>mutually exclusive</strong> with <a href="../tagnormaliser">Tag normaliser</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">java, python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="detectexceptions">DetectExceptions</h2><h3 id="detectexceptions-force_line_breaks">force_line_breaks (bool, optional)</h3><p>Force line breaks between each line when combining exception stacks.</p><p>Default: false</p><h3 id="detectexceptions-languages">languages ([]string, optional)</h3><p>Programming languages for which to detect exceptions.</p><p>Default: <code>[]</code></p><h3 id="detectexceptions-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: <code>kubernetes.**</code></p><h3 id="detectexceptions-max_bytes">max_bytes (int, optional)</h3><p>Maximum number of bytes to flush (0 means no limit)</p><p>Default: 0</p><h3 id="detectexceptions-max_lines">max_lines (int, optional)</h3><p>Maximum number of lines to flush (0 means no limit)</p><p>Default: 1000</p><h3 id="detectexceptions-message">message (string, optional)</h3><p>The field which contains the raw message text in the input JSON data.</p><p>Default: ""</p><h3 id="detectexceptions-multiline_flush_interval">multiline_flush_interval (string, optional)</h3><p>The interval of flushing the buffer for multiline format.</p><p>Default: nil</p><h3 id="detectexceptions-remove_tag_prefix">remove_tag_prefix (string, optional)</h3><p>The prefix to be removed from the input tag when outputting a record.</p><p>Default: kubernetes</p><h3 id="detectexceptions-stream">stream (string, optional)</h3><p>Separate log streams by this field in the input JSON data.</p><p>Default: ""</p><h2 id="example-exception-detector-filter-configurations">Example <code>Exception Detector</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">java</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">kubernetes.**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type detect_exceptions
</span></span><span style="display:flex"><span>  @id test_detect_exceptions
</span></span><span style="display:flex"><span>  languages [&#34;java&#34;,&#34;python&#34;]
</span></span><span style="display:flex"><span>  multiline_flush_interval 0.1
</span></span><span style="display:flex"><span>  remove_tag_prefix kubernetes
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-91b6e53e4bb1647d0973b03564f40336">5 - Geo IP</h1><h1 id="fluentd-geoip-filter">Fluentd GeoIP filter</h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to add information about geographical location of IP addresses with Maxmind GeoIP databases.
More information at <a href="https://github.com/y-ken/fluent-plugin-geoip">https://github.com/y-ken/fluent-plugin-geoip</a></p><h2 id="configuration">Configuration</h2><h2 id="geoip">GeoIP</h2><h3 id="geoip-backend_library">backend_library (string, optional)</h3><p>Specify backend library (geoip2_c, geoip, geoip2_compat)</p><h3 id="geoip-geoip2_database">geoip2_database (string, optional)</h3><p>Specify optional geoip2 database (using bundled GeoLite2-City.mmdb by default)</p><h3 id="geoip-geoip_database">geoip_database (string, optional)</h3><p>Specify optional geoip database (using bundled GeoLiteCity databse by default)</p><h3 id="geoip-geoip_lookup_keys">geoip_lookup_keys (string, optional)</h3><p>Specify one or more geoip lookup field which has ip address</p><p>Default: host</p><h3 id="geoip-records">records ([]Record, optional)</h3><p>Records are represented as maps: <code>key: value</code></p><h3 id="geoip-skip_adding_null_record">skip_adding_null_record (*bool, optional)</h3><p>To avoid get stacktrace error with <code>[null, null]</code> array for elasticsearch.</p><p>Default: true</p><h2 id="example-geoip-filter-configurations">Example <code>GeoIP</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">geoip</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">geoip_lookup_keys</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">remote_addr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">city</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${city.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">location_array</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;&#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">country</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.iso_code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">country_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">postal_code</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">${postal.code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type geoip
</span></span><span style="display:flex"><span>  @id test_geoip
</span></span><span style="display:flex"><span>  geoip_lookup_keys remote_addr
</span></span><span style="display:flex"><span>  skip_adding_null_record true
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    city ${city.names.en[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    country ${country.iso_code[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    country_name ${country.names.en[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    location_array &#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;
</span></span><span style="display:flex"><span>    postal_code ${postal.code[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d911e67edeb675049a9637d612f14d1a">6 - Grep</h1><h2 id="overview">Overview</h2><p><a href="https://docs.fluentd.org/filter/grep">Grep Filter</a></p><p>The grep filter plugin &ldquo;greps&rdquo; events by the values of specified fields.</p><h2 id="configuration">Configuration</h2><h2 id="grepconfig">GrepConfig</h2><h3 id="grepconfig-and">and ([]AndSection, optional)</h3><p><a href="#grepconfig-and">And Directive</a></p><h3 id="grepconfig-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="#grepconfig-exclude">Exclude Directive</a></p><h3 id="grepconfig-or">or ([]OrSection, optional)</h3><p><a href="#grepconfig-or">Or Directive</a></p><h3 id="grepconfig-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="#grepconfig-regexp">Regexp Directive</a></p><h2 id="Regexp-Directive">Regexp Directive</h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-regexp-greater-than-directive">Fluentd documentation</a>). This directive contains two parameters.</p><h3 id="regexp-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><h3 id="regexp-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><h2 id="example-regexp-filter-configurations">Example <code>Regexp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type grep
</span></span><span style="display:flex"><span>    @id demo-flow_1_grep
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>      key first
</span></span><span style="display:flex"><span>      pattern /^5\d\d$/
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="exclude-directive">Exclude Directive</h2><p>Specify filtering rule to reject events (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-exclude-greater-than-directive">Fluentd documentation</a>). This directive contains two parameters.</p><h3 id="exclude-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><h3 id="exclude-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><h2 id="example-exclude-filter-configurations">Example <code>Exclude</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type grep
</span></span><span style="display:flex"><span>    @id demo-flow_0_grep
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>      key first
</span></span><span style="display:flex"><span>      pattern /^5\d\d$/
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="Or-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Or Directive</a></h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Fluentd documentation</a>. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="or-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Exclude Directive</a></p><h3 id="or-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Regexp Directive</a></p><h2 id="example-or-filter-configurations">Example <code>Or</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;or&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>	key first
</span></span><span style="display:flex"><span>	pattern /^5\d\d$/
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>	key second
</span></span><span style="display:flex"><span>	pattern /\.css$/
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/or&gt;</span></span></span></code></pre></div><hr>
<h2 id="And-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">And Directive</a></h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Fluentd documentation</a>. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="and-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Exclude Directive</a></p><h3 id="and-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Regexp Directive</a></p><h2 id="example-and-filter-configurations">Example <code>And</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;and&gt;</span>
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>	    key first
</span></span><span style="display:flex"><span>	    pattern /^5\d\d$/
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>	    key second
</span></span><span style="display:flex"><span>	    pattern /\.css$/
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/and&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4ed899f75f815259c224810fdfb84730">7 - Kubernetes Events Timestamp</h1><h1 id="kubernetes-events-timestamp-filterhttpsgithubcomkube-loggingfluentd-filter-kube-events-timestamp"><a href="https://github.com/kube-logging/fluentd-filter-kube-events-timestamp">Kubernetes Events Timestamp Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to select particular timestamp into an additional field</p><h2 id="configuration">Configuration</h2><h2 id="kubeeventstimestampconfig">KubeEventsTimestampConfig</h2><h3 id="kubeeventstimestampconfig-mapped_time_key">mapped_time_key (string, optional)</h3><p>Added time field name</p><p>Default: triggerts</p><h3 id="kubeeventstimestampconfig-timestamp_fields">timestamp_fields ([]string, optional)</h3><p>Time field names in order of relevance</p><p>Default: event.eventTime, event.lastTimestamp, event.firstTimestamp</p><h2 id="example-kubernetes-events-timestamp-filter-configurations">Example <code>Kubernetes Events Timestamp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">es-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">kube_events_timestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">timestamp_fields</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.eventTime&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.lastTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.firstTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mapped_time_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mytimefield</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">es-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span> @type kube_events_timestamp
</span></span><span style="display:flex"><span> @id test-kube-events-timestamp
</span></span><span style="display:flex"><span> timestamp_fields [&#34;event.eventTime&#34;,&#34;event.lastTimestamp&#34;,&#34;event.firstTimestamp&#34;]
</span></span><span style="display:flex"><span> mapped_time_key mytimefield
</span></span><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">8 - Parser</h1><h1 id="parser-filterhttpsdocsfluentdorgfilterparser"><a href="https://docs.fluentd.org/filter/parser">Parser Filter</a></h1><h2 id="overview">Overview</h2><p>Parses a string field in event records and mutates its event record with the parsed result.</p><h2 id="configuration">Configuration</h2><h2 id="parserconfig">ParserConfig</h2><h3 id="parserconfig-emit_invalid_record_to_error">emit_invalid_record_to_error (*bool, optional)</h3><p>Emit invalid record to @ERROR label. Invalid cases are: key not exist, format is not matched, unexpected error</p><h3 id="parserconfig-hash_value_field">hash_value_field (string, optional)</h3><p>Store parsed values as a hash value in a field.</p><h3 id="parserconfig-inject_key_prefix">inject_key_prefix (string, optional)</h3><p>Store parsed values with specified key name prefix.</p><h3 id="parserconfig-key_name">key_name (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><h3 id="parserconfig-parse">parse (ParseSection, optional)</h3><p><a href="#parse-section">Parse Section</a></p><h3 id="parserconfig-parsers">parsers ([]ParseSection, optional)</h3><p>Deprecated, use <code>parse</code> instead</p><h3 id="parserconfig-remove_key_name_field">remove_key_name_field (bool, optional)</h3><p>Remove key_name field when parsing is succeeded</p><h3 id="parserconfig-replace_invalid_sequence">replace_invalid_sequence (bool, optional)</h3><p>If true, invalid string is replaced with safe characters and re-parse it.</p><h3 id="parserconfig-reserve_data">reserve_data (bool, optional)</h3><p>Keep original key-value pair in parsed result.</p><h3 id="parserconfig-reserve_time">reserve_time (bool, optional)</h3><p>Keep original event time in parsed result.</p><h2 id="parse-section">Parse Section</h2><h3 id="parse-section-custom_pattern_path">custom_pattern_path (*secret.Secret, optional)</h3><p>Only available when using type: grok, multiline_grok. File that includes custom grok patterns.</p><h3 id="parse-section-delimiter">delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;\t&rdquo;</p><h3 id="parse-section-delimiter_pattern">delimiter_pattern (string, optional)</h3><p>Only available when using type: ltsv</p><h3 id="parse-section-estimate_current_event">estimate_current_event (bool, optional)</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><h3 id="parse-section-expression">expression (string, optional)</h3><p>Regexp expression to evaluate</p><h3 id="parse-section-format">format (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-format_firstline">format_firstline (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-grok_failure_key">grok_failure_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key has grok failure reason.</p><h3 id="parse-section-grok_name_key">grok_name_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><h3 id="parse-section-grok_pattern">grok_pattern (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><h3 id="parse-section-grok_patterns">grok_patterns ([]GrokSection, optional)</h3><p>Only available when using type: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><h3 id="parse-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="parse-section-keys">keys (string, optional)</h3><p>Names for fields on each line. (seperated by coma)</p><h3 id="parse-section-label_delimiter">label_delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;:&rdquo;</p><h3 id="parse-section-local_time">local_time (bool, optional)</h3><p>If true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="parse-section-multiline">multiline ([]string, optional)</h3><p>The multiline parser plugin parses multiline logs.</p><h3 id="parse-section-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>Only available when using type: multiline_grok The regexp to match beginning of multiline.</p><h3 id="parse-section-null_empty_string">null_empty_string (bool, optional)</h3><p>If true, empty string field is replaced with nil</p><h3 id="parse-section-null_value_pattern">null_value_pattern (string, optional)</h3><p>Specify null value pattern.</p><h3 id="parse-section-patterns">patterns ([]SingleParseSection, optional)</h3><p>Only available when using type: multi_format <a href="#parse-section">Parse Section</a></p><h3 id="parse-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string</p><h3 id="parse-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><h3 id="parse-section-time_type">time_type (string, optional)</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="parse-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="parse-section-type">type (string, optional)</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><h3 id="parse-section-types">types (string, optional)</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><h3 id="parse-section-utc">utc (bool, optional)</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h2 id="parse-section-single">Parse Section (single)</h2><h3 id="parse-section-custom_pattern_path">custom_pattern_path (*secret.Secret, optional)</h3><p>Only available when using format: grok, multiline_grok. File that includes custom grok patterns.</p><h3 id="parse-section-estimate_current_event">estimate_current_event (bool, optional)</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><h3 id="parse-section-expression">expression (string, optional)</h3><p>Regexp expression to evaluate</p><h3 id="parse-section-format">format (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-grok_failure_key">grok_failure_key (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The key has grok failure reason.</p><h3 id="parse-section-grok_name_key">grok_name_key (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><h3 id="parse-section-grok_pattern">grok_pattern (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><h3 id="parse-section-grok_patterns">grok_patterns ([]GrokSection, optional)</h3><p>Only available when using format: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><h3 id="parse-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="parse-section-local_time">local_time (bool, optional)</h3><p>If true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="parse-section-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>Only available when using format: multiline_grok The regexp to match beginning of multiline.</p><h3 id="parse-section-null_empty_string">null_empty_string (bool, optional)</h3><p>If true, empty string field is replaced with nil</p><h3 id="parse-section-null_value_pattern">null_value_pattern (string, optional)</h3><p>Specify null value pattern.</p><h3 id="parse-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string</p><h3 id="parse-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><h3 id="parse-section-time_type">time_type (string, optional)</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="parse-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="parse-section-type">type (string, optional)</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><h3 id="parse-section-types">types (string, optional)</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><h3 id="parse-section-utc">utc (bool, optional)</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h2 id="grok-section">Grok Section</h2><h3 id="grok-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="grok-section-name">name (string, optional)</h3><p>The name of grok section.</p><h3 id="grok-section-pattern">pattern (string, required)</h3><p>The pattern of grok.</p><h3 id="grok-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string.</p><h3 id="grok-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><p>Default: time</p><h3 id="grok-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">patterns</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">expression</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">type parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">id test_parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">key_name message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">remove_key_name_field true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">reserve_data true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">&lt;parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>@<span style="color:#000">type multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">expression /foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">&lt;/parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b1ababb8fff927a359f5ee10ddd9740d">9 - Prometheus</h1><h1 id="prometheus-filterhttpsgithubcomfluentfluent-plugin-prometheusprometheus-outputfilter-plugin"><a href="https://github.com/fluent/fluent-plugin-prometheus#prometheus-outputfilter-plugin">Prometheus Filter</a></h1><h2 id="overview">Overview</h2><p>Prometheus Filter Plugin to count Incoming Records</p><h2 id="configuration">Configuration</h2><h2 id="prometheusconfig">PrometheusConfig</h2><h3 id="prometheusconfig-labels">labels (Label, optional)</h3><h3 id="prometheusconfig-metrics">metrics ([]MetricSection, optional)</h3><p><a href="#metrics-section">Metrics Section</a></p><h2 id="metrics-section">Metrics Section</h2><h3 id="metrics-section-buckets">buckets (string, optional)</h3><p>Buckets of record for instrumentation</p><h3 id="metrics-section-desc">desc (string, required)</h3><p>Description of metric</p><h3 id="metrics-section-key">key (string, optional)</h3><p>Key name of record for instrumentation.</p><h3 id="metrics-section-labels">labels (Label, optional)</h3><p>Additional labels for this metric</p><h3 id="metrics-section-name">name (string, required)</h3><p>Metrics name</p><h3 id="metrics-section-type">type (string, required)</h3><p>Metrics type <a href="https://github.com/fluent/fluent-plugin-prometheus#counter-type">counter</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#gauge-type">gauge</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#summary-type">summary</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#histogram-type">histogram</a></p><h2 id="example-prometheus-filter-configurations">Example <code>Prometheus</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">prometheus</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">metrics</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">total_counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">desc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">The total number of foo in message.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${hostname}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${tag}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$.kubernetes.namespace</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type prometheus
</span></span><span style="display:flex"><span>    @id logging-demo-flow_2_prometheus
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;metric&gt;</span>
</span></span><span style="display:flex"><span>      desc The total number of foo in message.
</span></span><span style="display:flex"><span>      name total_counter
</span></span><span style="display:flex"><span>      type counter
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&lt;labels&gt;</span>
</span></span><span style="display:flex"><span>        foo bar
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&lt;/labels&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/metric&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;labels&gt;</span>
</span></span><span style="display:flex"><span>      host ${hostname}
</span></span><span style="display:flex"><span>      namespace $.kubernetes.namespace
</span></span><span style="display:flex"><span>      tag ${tag}
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/labels&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">10 - Record Modifier</h1><h1 id="record-modifierhttpsgithubcomrepeatedlyfluent-plugin-record-modifier"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier">Record Modifier</a></h1><h2 id="overview">Overview</h2><p>Modify each event record.</p><h2 id="configuration">Configuration</h2><h2 id="recordmodifier">RecordModifier</h2><h3 id="recordmodifier-char_encoding">char_encoding (string, optional)</h3><p>Fluentd including some plugins treats logs as a BINARY by default to forward. To overide that, use a target encoding or a from:to encoding here.</p><h3 id="recordmodifier-prepare_value">prepare_value (string, optional)</h3><p>Prepare values for filtering in configure phase. Prepared values can be used in <code>&lt;record></code>. You can write any ruby code.</p><h3 id="recordmodifier-records">records ([]Record, optional)</h3><p>Add records. Records are represented as maps: <code>key: value</code>. For details, see <a href="https://github.com/repeatedly/fluent-plugin-record-modifier">https://github.com/repeatedly/fluent-plugin-record-modifier</a>.</p><h3 id="recordmodifier-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><h3 id="recordmodifier-replaces">replaces ([]Replace, optional)</h3><p>Replace specific value for keys</p><h3 id="recordmodifier-whitelist_keys">whitelist_keys (string, optional)</h3><p>This is exclusive with remove_keys</p><h2 id="example-record-modifier-filter-configurations">Example <code>Record Modifier</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">record_modifier</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type record_modifier
</span></span><span style="display:flex"><span>  @id test_record_modifier
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    foo bar
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">Replace Directive</a></h2><p>Specify replace rule. This directive contains three parameters.</p><h3 id="replace-directive-replace_keys_value-expression">expression (string, required)</h3><p>Regular expression</p><h3 id="replace-directive-replace_keys_value-key">key (string, required)</h3><p>Key to search for</p><h3 id="replace-directive-replace_keys_value-replace">replace (string, required)</h3><p>Value to replace with</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2adc391c4bf236f17f4dff5d5236127b">11 - Record Transformer</h1><h1 id="record-transformerhttpsdocsfluentdorgfilterrecord_transformer"><a href="https://docs.fluentd.org/filter/record_transformer">Record Transformer</a></h1><h2 id="overview">Overview</h2><p>Mutates/transforms incoming event streams.</p><h2 id="configuration">Configuration</h2><h2 id="recordtransformer">RecordTransformer</h2><h3 id="recordtransformer-auto_typecast">auto_typecast (bool, optional)</h3><p>Use original value type.</p><p>Default: true</p><h3 id="recordtransformer-enable_ruby">enable_ruby (bool, optional)</h3><p>When set to true, the full Ruby syntax is enabled in the <code>${...}</code> expression.</p><p>Default: false</p><h3 id="recordtransformer-keep_keys">keep_keys (string, optional)</h3><p>A comma-delimited list of keys to keep.</p><h3 id="recordtransformer-records">records ([]Record, optional)</h3><p>Add records docs at: <a href="https://docs.fluentd.org/filter/record_transformer">https://docs.fluentd.org/filter/record_transformer</a> Records are represented as maps: <code>key: value</code></p><h3 id="recordtransformer-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><h3 id="recordtransformer-renew_record">renew_record (bool, optional)</h3><p>Create new Hash to transform incoming data</p><p>Default: false</p><h3 id="recordtransformer-renew_time_key">renew_time_key (string, optional)</h3><p>Specify field name of the record to overwrite the time of events. Its value must be unix time.</p><h2 id="example-record-transformer-filter-configurations">Example <code>Record Transformer</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">record_transformer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type record_transformer
</span></span><span style="display:flex"><span>  @id test_record_transformer
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    foo bar
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-06af9b3099c8f9f37d675b5aee19c604">12 - StdOut</h1><h1 id="stdout-filterhttpsdocsfluentdorgfilterstdout"><a href="https://docs.fluentd.org/filter/stdout">Stdout Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to print events to stdout</p><h2 id="configuration">Configuration</h2><h2 id="stdoutfilterconfig">StdOutFilterConfig</h2><h3 id="stdoutfilterconfig-output_type">output_type (string, optional)</h3><p>This is the option of stdout format.</p><h2 id="example-stdout-filter-configurations">Example <code>StdOut</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">stdout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">output_type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">type stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">id test_stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">output_type json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9f71d81ccc4b25c0f75938abbc9a158d">13 - Tag Normaliser</h1><p>Fluentd Plugin to re-tag based on log metadata. More info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">https://github.com/kube-logging/fluent-plugin-tag-normaliser</a></p><h2 id="available-kubernetes-metadata">Available Kubernetes metadata</h2><table>
<thead>
<tr>
<th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr>
<td><code>${pod_name}</code></td><td>Pod name</td><td>understood-butterfly-logging-demo-7dcdcfdcd7-h7p9n</td></tr><tr>
<td><code>${container_name}</code></td><td>Container name inside the Pod</td><td>logging-demo</td></tr><tr>
<td><code>${namespace_name}</code></td><td>Namespace name</td><td>default</td></tr><tr>
<td><code>${pod_id}</code></td><td>Kubernetes UUID for Pod</td><td>1f50d309-45a6-11e9-b795-025000000001</td></tr><tr>
<td><code>${labels}</code></td><td>Kubernetes Pod labels. This is a nested map. You can access nested attributes via <code>.</code></td><td><code>{"app":"logging-demo", "pod-template-hash":"7dcdcfdcd7" }</code></td></tr><tr>
<td><code>${host}</code></td><td>Node hostname the Pod runs on</td><td>docker-desktop</td></tr><tr>
<td><code>${docker_id}</code></td><td>Docker UUID of the container</td><td>3a38148aa37aa3&mldr;</td></tr></tbody></table><h2 id="configuration">Configuration</h2><h2 id="tag-normaliser-parameters">Tag Normaliser parameters</h2><h3 id="tag-normaliser-parameters-format">format (string, optional)</h3><p>Re-Tag log messages info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">github</a></p><p>Default: ${namespace_name}.${pod_name}.${container_name}</p><h3 id="tag-normaliser-parameters-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: <code>kubernetes.**</code></p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cluster1.${namespace_name}.${pod_name}.${labels.app}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">kubernetes.**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type tag_normaliser
</span></span><span style="display:flex"><span>  @id test_tag_normaliser
</span></span><span style="display:flex"><span>  format cluster1.${namespace_name}.${pod_name}.${labels.app}
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-c86a56fc7e085e5aea4460c0e18e5990">14 - Throttle</h1><h1 id="throttle-filterhttpsgithubcomrubrikincfluent-plugin-throttle"><a href="https://github.com/rubrikinc/fluent-plugin-throttle">Throttle Filter</a></h1><h2 id="overview">Overview</h2><p>A sentry plugin to throttle logs. Logs are grouped by a configurable key. When a group exceeds a configuration rate, logs are dropped for this group.</p><h2 id="configuration">Configuration</h2><h2 id="throttle">Throttle</h2><h3 id="throttle-group_bucket_limit">group_bucket_limit (int, optional)</h3><p>Maximum number logs allowed per groups over the period of group_bucket_period_s</p><p>Default: 6000</p><h3 id="throttle-group_bucket_period_s">group_bucket_period_s (int, optional)</h3><p>This is the period of of time over which group_bucket_limit applies</p><p>Default: 60</p><h3 id="throttle-group_drop_logs">group_drop_logs (bool, optional)</h3><p>When a group reaches its limit, logs will be dropped from further processing if this value is true</p><p>Default: true</p><h3 id="throttle-group_key">group_key (string, optional)</h3><p>Used to group logs. Groups are rate limited independently</p><p>Default: kubernetes.container_name</p><h3 id="throttle-group_reset_rate_s">group_reset_rate_s (int, optional)</h3><p>After a group has exceeded its bucket limit, logs are dropped until the rate per second falls below or equal to group_reset_rate_s.</p><p>Default: group_bucket_limit/group_bucket_period_s</p><h3 id="throttle-group_warning_delay_s">group_warning_delay_s (int, optional)</h3><p>When a group reaches its limit and as long as it is not reset, a warning message with the current log rate of the group is emitted repeatedly. This is the delay between every repetition.</p><p>Default: 10 seconds</p><h2 id="example-throttle-filter-configurations">Example <code>Throttle</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">throttle</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">group_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$.kubernetes.container_name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type throttle
</span></span><span style="display:flex"><span>  @id test_throttle
</span></span><span style="display:flex"><span>  group_key $.kubernetes.container_name
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3610a8928860c8aae138583bea272461">15 - User Agent</h1><h1 id="fluentd-useragent-filter">Fluentd UserAgent filter</h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to parse user-agent
More information at <a href="https://github.com/bungoume/fluent-plugin-ua-parser">https://github.com/bungoume/fluent-plugin-ua-parser</a></p><h2 id="configuration">Configuration</h2><h2 id="useragent">UserAgent</h2><h3 id="useragent-delete_key">delete_key (bool, optional)</h3><p>Delete input key</p><p>Default: false</p><h3 id="useragent-flatten">flatten (bool, optional)</h3><p>Join hashed data by &lsquo;_&rsquo;</p><p>Default: false</p><h3 id="useragent-key_name">key_name (string, optional)</h3><p>Target key name</p><p>Default: user_agent</p><h3 id="useragent-out_key">out_key (string, optional)</h3><p>Output prefix key name</p><p>Default: ua</p><h2 id="example-useragent-filter-configurations">Example <code>UserAgent</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">useragent</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">key_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">my_agent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">delete_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">out_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ua_fields</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flatten</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type ua_parser
</span></span><span style="display:flex"><span>  @id test_useragent
</span></span><span style="display:flex"><span>  key_name my_agent
</span></span><span style="display:flex"><span>  delete_key true
</span></span><span style="display:flex"><span>  out_key ua_fields
</span></span><span style="display:flex"><span>  flatten true
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div></main></div></div><footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class="row">
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
<a class="text-white" target="_blank" rel="noopener" href="https://github.com/kube-logging/logging-operator" aria-label="GitHub">
<i class="fab fa-github"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
<a class="text-white" target="_blank" rel="noopener" href="/docs/community/" aria-label="Slack">
<i class="fab fa-slack"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discord" aria-label="Discord">
<a class="text-white" target="_blank" rel="noopener" href="https://discord.gg/9ACY4RDsYN" aria-label="Discord">
<i class="fab fa-discord"></i>
</a>
</li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class="text-white"><a class="text-white" href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> | </small>
<small class="text-white">&copy; 2023-2025 kube-logging authors | All Rights Reserved</small>
</div></div></div></footer></div><script src="/js/main.min.1b1fdad69306b68b100386e51fceb41fd37721de6a09b1df0495f948dfa59ee7.js" integrity="sha256-Gx/a1pMGtosQA4blH860H9N3Id5qCbHfBJX5SN+lnuc=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>
<script src="/js/tocbot.min.js"></script>
<script type="text/javascript">tocbot.init({tocSelector:".td-toc",contentSelector:".td-content",headingSelector:"h2, h3, h4",ignoreHiddenElements:!0})</script>
<script>(function(){var e=document.querySelector("#td-section-nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</body></html>