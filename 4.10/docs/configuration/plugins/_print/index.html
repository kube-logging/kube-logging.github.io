<!doctype html><html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="https://kube-logging.dev/4.10/docs/configuration/plugins/">
<link rel="alternate" type="text/releases" href="https://kube-logging.dev/4.10/docs/configuration/plugins/releases.releases">
<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/4.10/favicons/favicon.ico">
<link rel="apple-touch-icon" href="/4.10/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/4.10/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/4.10/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/4.10/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/4.10/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/4.10/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/4.10/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/4.10/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/4.10/favicons/android-192x192.png" sizes="192x192">
<title>Supported Plugins | Logging operator</title><meta name="description" content="Documentation for the Logging operator">
<meta property="og:title" content="Supported Plugins">
<meta property="og:description" content="Documentation for the Logging operator">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kube-logging.dev/4.10/docs/configuration/plugins/"><meta property="og:site_name" content="Logging operator">
<meta itemprop="name" content="Supported Plugins">
<meta itemprop="description" content="Documentation for the Logging operator"><meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Supported Plugins">
<meta name="twitter:description" content="Documentation for the Logging operator">
<link rel="preload" href="/4.10/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" as="style">
<link href="/4.10/scss/main.min.86aacb60bddeb293329df2c5300c7ccbb0b5b5c79006869829b192179e011aef.css" rel="stylesheet" integrity>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/4.10/css/prism.css">
<script src="/js/w3.js" type="application/x-javascript"></script>
<link rel="canonical" href="https://kube-logging.dev/docs/configuration/plugins/">
<script src="/pagefind/pagefind-highlight.js" type="application/x-javascript"></script>
<script type="module">
        await import('/pagefind/pagefind-highlight.js');
        new PagefindHighlight({ highlightParam: "highlight" });
    </script>
<script>window.__SJ_MESSAGE__="We collect cookies to analyze our website traffic and performance. We never collect any personal data.",window.__SJ_ACCEPT_BTN_TEXT__="Accept",window.__SJ_REJECT_BTN_TEXT__="Reject"</script>
<script src="https://cdn.jsdelivr.net/gh/sprucejoy/cookie-consent-autoblock-gdpr/cookie-consent.js" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM8C8QXCN7"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LM8C8QXCN7")}</script>
</head><body class="td-section">
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/4.10/"><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 3237.738 490.023" id="svg142" sodipodi:docname="logo-new2.svg" inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs146"/><sodipodi:namedview id="namedview144" pagecolor="#505050" bordercolor="#ffffff" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="1" inkscape:deskcolor="#505050" showgrid="false" inkscape:zoom=".37340884" inkscape:cx="1620.208" inkscape:cy="243.70071" inkscape:window-width="705" inkscape:window-height="480" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg142"/><g id="Group_2068" data-name="Group 2068" transform="translate(-43577.297 -34456.625)"><g id="Group_2067" data-name="Group 2067" transform="translate(27723.789 24565.273)"><path id="Path_4217" data-name="Path 4217" d="M47842.219 34024.414l-276.027 475.07h71.242l240.227-414.1z" transform="translate(-31703.996 -24123.111)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4218" data-name="Path 4218" d="M47831.324 34080.781l166.754 287.355h-333.035z" transform="translate(-31640.254 -24086.76)" fill="#fff" stroke="#fff" stroke-width="10"/><path id="Path_4220" data-name="Path 4220" d="M47668.742 34274.2l-37.727 64.1h442.43l-37.156-64.1z" transform="translate(-31662.199 -23962.018)" fill="#d6d7d9" stroke="#d6d7d9" stroke-width="10"/><path id="Path_4222" data-name="Path 4222" d="M11294.989 10157.944l311.97-.01-156.218-269.074-78.621 135.83z" transform="translate(4740.338 117.39)" fill="#fff"/><path id="Path_4224" data-name="Path 4224" d="M47787.594 34159.125l-54.391 93.035h108.039z" transform="translate(-31596.297 -24036.238)" fill="#13142c" stroke="#13132d" stroke-width="10"/></g><text id="Logging_Operator" data-name="Logging Operator" transform="translate(45475.035 34799.609)" fill="#fff" font-size="267" font-family="Montserrat-Bold, Montserrat" font-weight="700" letter-spacing=".046em"><tspan x="-1339.806" y="0" id="tspan138">Logging Operator</tspan></text></g></svg></span><span class="navbar-brand__name">Logging operator</span>
<span class="font-weight-bold navbar-logo navbar-version">4.10.0</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="https://github.com/kube-logging/logging-operator" title="Go to GitHub project page" target="_blank"><span>Project page</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/4.10/docs/" title="Read the documentation"><span>Documentation</span></a>
</li><li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link" href="/4.10/docs/community/" title="Come chat with us!"><span>Community</span></a>
</li><li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
<div w3-include-html="/docs/configuration/plugins//releases.releases" w3-include-html-default='<a class="dropdown-item" href="/docs/releases.releases">Latest</a>'></div><script type="application/x-javascript">w3.includeHTML()</script>
</div></li></ul></div><div class="navbar-nav d-none d-lg-block">
<div class="main-menu-search">
<a href="/search">
<span class="nav-link"><i class="fa fa-search" aria-hidden="true"></i> Search</span>
</a>
</div></div></nav></header><div class="container-fluid td-outer">
<div class="td-main">
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href="/4.10/docs/configuration/plugins/">Return to the regular view of this page</a>.
</p></div><h1 class="title">Supported Plugins</h1><ul>
<li>1: <a href="#pg-8a164ca77d26df7144202dbce9fc83ed">Security</a></li><li>2: <a href="#pg-417b2dcf5d345902aeedec3805d3b518">Transport</a></li><li>3: <a href="#pg-054b25caf1e92a922927809d3e403385">Fluentd filters</a></li><ul>
<li>3.1: <a href="#pg-349fa261ad6602912c90010a75fa2c8a">Concat</a></li><li>3.2: <a href="#pg-bb097fab5840c448f215a8825f17af78">Dedot</a></li><li>3.3: <a href="#pg-55a61951fa9d47c3fc701c2b0c2534d4">ElasticSearch GenId</a></li><li>3.4: <a href="#pg-d00173400a3863deca0bf67dceca225a">Enhance K8s Metadata</a></li><li>3.5: <a href="#pg-1e14b035cd2fa8152fe231991dc9b922">Exception Detector</a></li><li>3.6: <a href="#pg-91b6e53e4bb1647d0973b03564f40336">Geo IP</a></li><li>3.7: <a href="#pg-d911e67edeb675049a9637d612f14d1a">Grep</a></li><li>3.8: <a href="#pg-4ed899f75f815259c224810fdfb84730">Kubernetes Events Timestamp</a></li><li>3.9: <a href="#pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">Parser</a></li><li>3.10: <a href="#pg-b1ababb8fff927a359f5ee10ddd9740d">Prometheus</a></li><li>3.11: <a href="#pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">Record Modifier</a></li><li>3.12: <a href="#pg-2adc391c4bf236f17f4dff5d5236127b">Record Transformer</a></li><li>3.13: <a href="#pg-06af9b3099c8f9f37d675b5aee19c604">StdOut</a></li><li>3.14: <a href="#pg-e5531904143c5008a8a49d371504912d">SumoLogic</a></li><li>3.15: <a href="#pg-9f71d81ccc4b25c0f75938abbc9a158d">Tag Normaliser</a></li><li>3.16: <a href="#pg-c86a56fc7e085e5aea4460c0e18e5990">Throttle</a></li><li>3.17: <a href="#pg-3610a8928860c8aae138583bea272461">User Agent</a></li></ul><li>4: <a href="#pg-506383d863d6db46f320e08de47fb0c7">Fluentd outputs</a></li><ul>
<li>4.1: <a href="#pg-d52aa3c8a0eb89cb0544a82420222298"></a></li><li>4.2: <a href="#pg-28f1e98e5b5c5f770fb8b2e592e1abf0">Alibaba Cloud</a></li><li>4.3: <a href="#pg-aeea1cd1922e8ddddba7f377f910cc60">Amazon CloudWatch</a></li><li>4.4: <a href="#pg-2b59c5fb4b2ccfdb47e90229617f245a">Amazon Elasticsearch</a></li><li>4.5: <a href="#pg-dec03311d9f65d4bec85b8a63c46e105">Amazon Kinesis</a></li><li>4.6: <a href="#pg-0309d186051d45cea94e4ea4a3d95907">Amazon Kinesis</a></li><li>4.7: <a href="#pg-f6b80b815b14c83b2fe835b820aa13d0">Amazon S3</a></li><li>4.8: <a href="#pg-3fa3b93039c08434aba115eb9ab22b12">Azure Storage</a></li><li>4.9: <a href="#pg-67bcee478125d9574288135a71954591">Buffer</a></li><li>4.10: <a href="#pg-cfa15a5d894da7ae0606dc5571b76531">Datadog</a></li><li>4.11: <a href="#pg-d4855c4f7dc79bc11e74c046473de585">Elasticsearch</a></li><li>4.12: <a href="#pg-11b10c2ba394f448a129e3e87a7da45d">File</a></li><li>4.13: <a href="#pg-ebcbedef5be28c9f30752486b0b2b01b">Format</a></li><li>4.14: <a href="#pg-88fc6991b80563054a472b95a994e01b">Format rfc5424</a></li><li>4.15: <a href="#pg-ed0a10704a55da5f7330009ec393e387">Forward</a></li><li>4.16: <a href="#pg-18e50786ba4697ffac3ab83b4c57e6e5">GELF</a></li><li>4.17: <a href="#pg-a6993ae75e6633de7954ded98992861c">Google Cloud Storage</a></li><li>4.18: <a href="#pg-a56bffbadd1b6a7c1ede4f727316205c">Grafana Loki</a></li><li>4.19: <a href="#pg-ae38f1f9de3603c1e55fe2fb4eeba9b0">Http</a></li><li>4.20: <a href="#pg-1b992ac5779a83a537b40f5defa1bfa5">Kafka</a></li><li>4.21: <a href="#pg-3736a73536ae2ea19873950bfc5c1521">LogDNA</a></li><li>4.22: <a href="#pg-f5b4f39075d38f596892cbc946ca5735">LogZ</a></li><li>4.23: <a href="#pg-683bbb879ced9c27f3943b7a4809b29e">Mattermost</a></li><li>4.24: <a href="#pg-434371d7a3888abd2a15c4cd22f941cc">NewRelic</a></li><li>4.25: <a href="#pg-bb72140946679f3fa6eaf82e404ea444">OpenSearch</a></li><li>4.26: <a href="#pg-ef25dbf7203fc85cd0c4a189a702360a">Redis</a></li><li>4.27: <a href="#pg-67b66da64354abd24b6cf4012f300c3a">Relabel</a></li><li>4.28: <a href="#pg-65dde214a849324898de8fc0878b8ff4">Splunk</a></li><li>4.29: <a href="#pg-f239285458b59ea6270063a2b99b095d">SQS</a></li><li>4.30: <a href="#pg-ae2cf65122129146578f128193f9e75d">SumoLogic</a></li><li>4.31: <a href="#pg-014aa24ff26bb6369dc8484f097d845d">Syslog</a></li><li>4.32: <a href="#pg-1f1e7ebd2a7521c62ebb908f2d9dc6d4">VMware Log Intelligence</a></li><li>4.33: <a href="#pg-0102b64d79d8ea746d1515b5bde58add">VMware LogInsight</a></li><li>4.34: <a href="#pg-3effea023502f5f282b1bcfc984721f7">Secret definition</a></li></ul><li>5: <a href="#pg-f82c0e1c4bdef1d77adef0a24aa2326c">syslog-ng filters</a></li><ul>
<li>5.1: <a href="#pg-ed56f7c86144eb14193213bc7f89126f">Match</a></li><li>5.2: <a href="#pg-4afe8af7a86227831c993a592f328feb">Parser</a></li><li>5.3: <a href="#pg-71055e789d2740b4a21574d9424fd407">Rewrite</a></li></ul><li>6: <a href="#pg-810c80c2dbdca02f7ade52079fd88712">syslog-ng outputs</a></li><ul>
<li>6.1: <a href="#pg-d2c9db8ba7a6ba7639262daaea30cbd6">Authentication for syslog-ng outputs</a></li><li>6.2: <a href="#pg-0125a4a4d818b30d9054879982e084a1">Disk buffer</a></li><li>6.3: <a href="#pg-217fe992275c17196145bd8aca20419a">Elasticsearch</a></li><li>6.4: <a href="#pg-20150d5282a0092eb6c0366d786537b3">Elasticsearch datastream</a></li><li>6.5: <a href="#pg-def8416dfd78030f291e4e2fee600a97">File</a></li><li>6.6: <a href="#pg-f64978e87cfa5c2c0a8c6ad06c690873">HTTP</a></li><li>6.7: <a href="#pg-db09f336e539e97c3a4b6ae4786aded5">Loggly output</a></li><li>6.8: <a href="#pg-18b36b379ed9690f5568e3f8d7088d0f">LogScale</a></li><li>6.9: <a href="#pg-eefbe22dbc8ede1633843ddca2372922">Loki</a></li><li>6.10: <a href="#pg-50ca131a90db80476f6b3ee7bf91ede9">MongoDB</a></li><li>6.11: <a href="#pg-31ea9edde3a649f6c3772919f9e7a156">MQTT</a></li><li>6.12: <a href="#pg-f45875ac7b5bd367d7324b30c22e5503">Openobserve</a></li><li>6.13: <a href="#pg-6d7223a166a300bc7803f652ecf314ae">OpenTelemetry output</a></li><li>6.14: <a href="#pg-d44d1d1ef5ea3fb8124c088fcb9e125f">Redis</a></li><li>6.15: <a href="#pg-a30c0b2e8f92178a45957a767cd80264">S3</a></li><li>6.16: <a href="#pg-ebf6ce972f8f52a488cb4fd3bc510dcb">SplunkHEC</a></li><li>6.17: <a href="#pg-764b7c70899b4d51e51a8ba401f96cd2">Sumo Logic HTTP</a></li><li>6.18: <a href="#pg-1721ec291a25f8230ddeedf2a20018f9">Sumo Logic Syslog</a></li><li>6.19: <a href="#pg-17c2f3cac6d1fd9cb831fa66c2daf727">Syslog (RFC5424) output</a></li><li>6.20: <a href="#pg-56a41f3fbc6007034e66766bff690bfa">TLS config for syslog-ng outputs</a></li></ul></ul><div class="content">
<p>For more information please click on the plugin name</p><center>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th><th>Profile</th><th style="text-align:left">Description</th><th style="text-align:center">Status</th><th style="text-align:right">Version</th></tr></thead><tbody>
<tr>
<td style="text-align:left"><strong><a href="common/security/">Security</a></strong></td><td>common</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="common/transport/">Transport</a></strong></td><td>common</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/concat/">Concat</a></strong></td><td>filters</td><td style="text-align:left">Fluentd Filter plugin to concatenate multiline log separated in multiple events.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-concat">2.5.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/dedot/">Dedot</a></strong></td><td>filters</td><td style="text-align:left">Concatenate multiline log separated in multiple events</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/lunardial/fluent-plugin-dedot_filter">1.0.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/detect_exceptions/">Exception Detector</a></strong></td><td>filters</td><td style="text-align:left">Exception Detector</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions">0.0.14</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/elasticsearch_genid/">ElasticsearchGenId</a></strong></td><td>filters</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:right"><a href></a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/enhance_k8s/">Enhance K8s Metadata</a></strong></td><td>filters</td><td style="text-align:left">Fluentd output plugin to add extra Kubernetes metadata to the events.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/sumologic-kubernetes-collection/tree/main/fluent-plugin-enhance-k8s-metadata">2.0.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/geoip/">Geo IP</a></strong></td><td>filters</td><td style="text-align:left">Fluentd GeoIP filter</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/y-ken/fluent-plugin-geoip">1.3.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/grep/">Grep</a></strong></td><td>filters</td><td style="text-align:left">Grep events by the values</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/grep">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/kube_events_timestamp/">Kubernetes Events Timestamp</a></strong></td><td>filters</td><td style="text-align:left">Fluentd Filter plugin to select particular timestamp into an additional field</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluentd-filter-kube-events-timestamp">0.1.4</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/parser/">Parser</a></strong></td><td>filters</td><td style="text-align:left">Parses a string field in event records and mutates its event record with the parsed result.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/parser">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/prometheus/">Prometheus</a></strong></td><td>filters</td><td style="text-align:left">Prometheus Filter Plugin to count Incoming Records</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-prometheus#prometheus-outputfilter-plugin">2.0.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/record_modifier/">Record Modifier</a></strong></td><td>filters</td><td style="text-align:left">Modify each event record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier">2.1.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/record_transformer/">Record Transformer</a></strong></td><td>filters</td><td style="text-align:left">Mutates/transforms incoming event streams.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/record_transformer">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/stdout/">Stdout</a></strong></td><td>filters</td><td style="text-align:left">Prints events to stdout</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/filter/stdout">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/sumologic/">SumoLogic</a></strong></td><td>filters</td><td style="text-align:left">Sumo Logic collection solution for Kubernetes</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/sumologic-kubernetes-collection">2.3.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/tagnormaliser/">Tag Normaliser</a></strong></td><td>filters</td><td style="text-align:left">Re-tag based on log metadata</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluent-plugin-tag-normaliser">0.1.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="filters/throttle/">Throttle</a></strong></td><td>filters</td><td style="text-align:left">A sentry plugin to throttle logs. Logs are grouped by a configurable key. When a group exceeds a configuration rate, logs are dropped for this group.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/rubrikinc/fluent-plugin-throttle">0.0.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/aws_elasticsearch/">Amazon Elasticsearch</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Elasticsearch</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/atomita/fluent-plugin-aws-elasticsearch-service">2.4.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/azurestore/">Azure Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Azure Storage</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/microsoft/fluent-plugin-azure-storage-append-blob">0.2.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/buffer/">Buffer</a></strong></td><td>outputs</td><td style="text-align:left">Fluentd event buffer</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/configuration/buffer-section">mode info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/cloudwatch/">Amazon CloudWatch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to AWS CloudWatch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs/releases/tag/v0.14.2">0.14.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/datadog/">Datadog</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Datadog</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/DataDog/fluent-plugin-datadog/releases/tag/v0.14.1">0.14.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/elasticsearch/">Elasticsearch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Elasticsearch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/uken/fluent-plugin-elasticsearch/releases/tag/v5.1.4">5.1.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/file/">File</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to files</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/file">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/format/">Format</a></strong></td><td>outputs</td><td style="text-align:left">Specify how to format output record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/configuration/format-section">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/format_rfc5424/">Format rfc5424</a></strong></td><td>outputs</td><td style="text-align:left">Specify how to format output record.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424#format-section">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/forward/">Forward</a></strong></td><td>outputs</td><td style="text-align:left">Forwards events to other fluentd nodes.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/forward">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/gcs/">Google Cloud Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Google Cloud Storage</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/banzaicloud/fluent-plugin-gcs">0.4.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/gelf/">Gelf</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to GELF</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/hotschedules/fluent-plugin-gelf-hs">1.0.8</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/http/">Http</a></strong></td><td>outputs</td><td style="text-align:left">Sends logs to HTTP/HTTPS endpoints.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://docs.fluentd.org/output/http">more info</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kafka/">Kafka</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Kafka</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-kafka/releases/tag/v0.17.5">0.17.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kinesis_firehose/">Amazon Kinesis Firehose</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Kinesis</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/awslabs/aws-fluent-plugin-kinesis/releases/tag/v3.4.2">3.4.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/kinesis_stream/">Amazon Kinesis Stream</a></strong></td><td>outputs</td><td style="text-align:left">Fluent plugin for Amazon Kinesis</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/awslabs/aws-fluent-plugin-kinesis/releases/tag/v3.4.2">3.4.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/logdna/">LogDNA</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to LogDNA</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/logdna/fluent-plugin-logdna/releases/tag/v0.4.0">0.4.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/logz/">LogZ</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in LogZ.io</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/logzio/fluent-plugin-logzio/">0.0.21</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/loki/">Grafana Loki</a></strong></td><td>outputs</td><td style="text-align:left">Transfer logs to Loki</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/grafana/loki/tree/master/fluentd/fluent-plugin-grafana-loki">1.2.17</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/newrelic/">NewRelic Logs</a></strong></td><td>outputs</td><td style="text-align:left">Send logs to New Relic Logs</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/newrelic/newrelic-fluentd-output">1.2.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/opensearch/">OpenSearch</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to OpenSearch</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-opensearch/releases/tag/v1.0.5">1.0.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/oss/">Alibaba Cloud Storage</a></strong></td><td>outputs</td><td style="text-align:left">Store logs the Alibaba Cloud Object Storage Service</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/aliyun/fluent-plugin-oss">0.0.2</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/redis/">Redis</a></strong></td><td>outputs</td><td style="text-align:left">Sends logs to Redis endpoints.</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-redis">0.3.5</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/s3/">Amazon S3</a></strong></td><td>outputs</td><td style="text-align:left">Store logs in Amazon S3</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/fluent/fluent-plugin-s3/releases/tag/v1.6.1">1.6.1</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/splunk_hec/">Splunk Hec</a></strong></td><td>outputs</td><td style="text-align:left">Fluent Plugin Splunk Hec Release</td><td style="text-align:center">GA</td><td style="text-align:right"><a href>1.2.9</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/sqs/">SQS</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes fluent-events as queue messages to Amazon SQS</td><td style="text-align:center">Testing</td><td style="text-align:right"><a href="https://github.com/ixixi/fluent-plugin-sqs">v2.1.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/sumologic/">SumoLogic</a></strong></td><td>outputs</td><td style="text-align:left">Send your logs to Sumologic</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/SumoLogic/fluentd-output-sumologic/releases/tag/1.8.0">1.8.0</a></td></tr><tr>
<td style="text-align:left"><strong><a href="outputs/syslog/">Syslog</a></strong></td><td>outputs</td><td style="text-align:left">Output plugin writes events to syslog</td><td style="text-align:center">GA</td><td style="text-align:right"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424">0.9.0.rc.8</a></td></tr></tbody></table></center>
</div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-8a164ca77d26df7144202dbce9fc83ed">1 - Security</h1><h2 id="security">Security</h2><h3 id="security-allow_anonymous_source">allow_anonymous_source (bool, optional)</h3><p>Allow anonymous source. <client> sections are required if disabled.</p><h3 id="security-self_hostname">self_hostname (string, required)</h3><p>Hostname</p><h3 id="security-shared_key">shared_key (string, required)</h3><p>Shared key for authentication.</p><h3 id="security-user_auth">user_auth (bool, optional)</h3><p>If true, use user based authentication.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-417b2dcf5d345902aeedec3805d3b518">2 - Transport</h1><h2 id="transport">Transport</h2><h3 id="transport-ca_cert_path">ca_cert_path (string, optional)</h3><p>Specify private CA contained path</p><h3 id="transport-ca_path">ca_path (string, optional)</h3><p>Specify path to CA certificate file</p><h3 id="transport-ca_private_key_passphrase">ca_private_key_passphrase (string, optional)</h3><p>private CA private key passphrase contained path</p><h3 id="transport-ca_private_key_path">ca_private_key_path (string, optional)</h3><p>private CA private key contained path</p><h3 id="transport-cert_path">cert_path (string, optional)</h3><p>Specify path to Certificate file</p><h3 id="transport-ciphers">ciphers (string, optional)</h3><p>Ciphers Default: &ldquo;ALL:!aNULL:!eNULL:!SSLv2&rdquo;</p><h3 id="transport-client_cert_auth">client_cert_auth (bool, optional)</h3><p>When this is set Fluentd will check all incoming HTTPS requests for a client certificate signed by the trusted CA, requests that don&rsquo;t supply a valid client certificate will fail.</p><h3 id="transport-insecure">insecure (bool, optional)</h3><p>Use secure connection when use tls) Default: false</p><h3 id="transport-private_key_passphrase">private_key_passphrase (string, optional)</h3><p>public CA private key passphrase contained path</p><h3 id="transport-private_key_path">private_key_path (string, optional)</h3><p>Specify path to private Key file</p><h3 id="transport-protocol">protocol (string, optional)</h3><p>Protocol Default: :tcp</p><h3 id="transport-version">version (string, optional)</h3><p>Version Default: &lsquo;TLSv1_2&rsquo;</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-054b25caf1e92a922927809d3e403385">3 - Fluentd filters</h1><p>You can use the following <strong>Fluentd</strong> filters in your <code>Flow</code> and <code>ClusterFlow</code> CRDs.</p></div><div class="td-content">
<h1 id="pg-349fa261ad6602912c90010a75fa2c8a">3.1 - Concat</h1><h1 id="concat-filterhttpsgithubcomfluent-plugins-nurseryfluent-plugin-concat"><a href="https://github.com/fluent-plugins-nursery/fluent-plugin-concat">Concat Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to concatenate multiline log separated in multiple events.</p><h2 id="configuration">Configuration</h2><h2 id="concat">Concat</h2><h3 id="concat-continuous_line_regexp">continuous_line_regexp (string, optional)</h3><p>The regexp to match continuous lines. This is exclusive with n_lines.</p><h3 id="concat-flush_interval">flush_interval (int, optional)</h3><p>The number of seconds after which the last received event log is flushed. If set to 0, flushing is disabled (wait for next line forever).</p><h3 id="concat-keep_partial_key">keep_partial_key (bool, optional)</h3><p>If true, keep partial_key in concatenated records</p><p>Default: False</p><h3 id="concat-keep_partial_metadata">keep_partial_metadata (string, optional)</h3><p>If true, keep partial metadata</p><h3 id="concat-key">key (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><h3 id="concat-multiline_end_regexp">multiline_end_regexp (string, optional)</h3><p>The regexp to match ending of multiline. This is exclusive with n_lines.</p><h3 id="concat-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>The regexp to match beginning of multiline. This is exclusive with n_lines.</p><h3 id="concat-n_lines">n_lines (int, optional)</h3><p>The number of lines. This is exclusive with multiline_start_regex.</p><h3 id="concat-partial_cri_logtag_key">partial_cri_logtag_key (string, optional)</h3><p>The key name that is referred to concatenate records on cri log</p><h3 id="concat-partial_cri_stream_key">partial_cri_stream_key (string, optional)</h3><p>The key name that is referred to detect stream name on cri log</p><p>Default: stream</p><h3 id="concat-partial_key">partial_key (string, optional)</h3><p>The field name that is the reference to concatenate records</p><h3 id="concat-partial_metadata_format">partial_metadata_format (string, optional)</h3><p>Input format of the partial metadata (fluentd or journald docker log driver)( docker-fluentd, docker-journald, docker-journald-lowercase)</p><h3 id="concat-partial_value">partial_value (string, optional)</h3><p>The value stored in the field specified by partial_key that represent partial log</p><h3 id="concat-separator">separator (*string, optional)</h3><p>The separator of lines. (default: &ldquo;\n&rdquo;)</p><h3 id="concat-stream_identity_key">stream_identity_key (string, optional)</h3><p>The key to determine which stream an event belongs to.</p><h3 id="concat-timeout_label">timeout_label (string, optional)</h3><p>The label name to handle events caused by timeout.</p><h3 id="concat-use_first_timestamp">use_first_timestamp (bool, optional)</h3><p>Use timestamp of first record when buffer is flushed.</p><p>Default: False</p><h3 id="concat-use_partial_cri_logtag">use_partial_cri_logtag (bool, optional)</h3><p>Use cri log tag to concatenate multiple records</p><h3 id="concat-use_partial_metadata">use_partial_metadata (string, optional)</h3><p>Use partial metadata to concatenate multiple records</p><h2 id="example-concat-filter-configurations">Example <code>Concat</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">concat</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">partial_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;partial_message&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">n_lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type concat
</span></span><span style="display:flex"><span>  @id test_concat
</span></span><span style="display:flex"><span>  key message
</span></span><span style="display:flex"><span>  n_lines 10
</span></span><span style="display:flex"><span>  partial_key partial_message
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-bb097fab5840c448f215a8825f17af78">3.2 - Dedot</h1><h1 id="dedot-filterhttpsgithubcomlunardialfluent-plugin-dedot_filter"><a href="https://github.com/lunardial/fluent-plugin-dedot_filter">Dedot Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to de-dot field name for elasticsearch.</p><h2 id="configuration">Configuration</h2><h2 id="dedotfilterconfig">DedotFilterConfig</h2><h3 id="dedotfilterconfig-de_dot_nested">de_dot_nested (bool, optional)</h3><p>Will cause the plugin to recourse through nested structures (hashes and arrays), and remove dots in those key-names too.</p><p>Default: false</p><h3 id="dedotfilterconfig-de_dot_separator">de_dot_separator (string, optional)</h3><p>Separator</p><p>Default: _</p><h2 id="example-dedot-filter-configurations">Example <code>Dedot</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">dedot</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">de_dot_separator</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;-&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">de_dot_nested</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type dedot
</span></span><span style="display:flex"><span>  @id test_dedot
</span></span><span style="display:flex"><span>  de_dot_nested true
</span></span><span style="display:flex"><span>  de_dot_separator -
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-55a61951fa9d47c3fc701c2b0c2534d4">3.3 - ElasticSearch GenId</h1><h2 id="elasticsearchgenid">ElasticsearchGenId</h2><h2 id="example-elasticsearch-genid-filter-configurations">Example <code>Elasticsearch Genid</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#204a87;font-weight:700">elasticsearch_genid</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:700">hash_id_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gen_id</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">   </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd Config Result</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span> @type elasticsearch_genid
</span></span><span style="display:flex"><span> @id test_elasticsearch_genid
</span></span><span style="display:flex"><span> hash_id_key gen_id
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h3 id="elasticsearchgenid-hash_id_key">hash_id_key (string, optional)</h3><p>You can specify generated hash storing key.</p><h3 id="elasticsearchgenid-hash_type">hash_type (string, optional)</h3><p>You can specify hash algorithm. Support algorithms md5, sha1, sha256, sha512. Default: sha1</p><h3 id="elasticsearchgenid-include_tag_in_seed">include_tag_in_seed (bool, optional)</h3><p>You can specify to use tag for hash generation seed.</p><h3 id="elasticsearchgenid-include_time_in_seed">include_time_in_seed (bool, optional)</h3><p>You can specify to use time for hash generation seed.</p><h3 id="elasticsearchgenid-record_keys">record_keys (string, optional)</h3><p>You can specify keys which are record in events for hash generation seed. This parameter should be used with use_record_as_seed parameter in practice.</p><h3 id="elasticsearchgenid-separator">separator (string, optional)</h3><p>You can specify separator charactor to creating seed for hash generation.</p><h3 id="elasticsearchgenid-use_entire_record">use_entire_record (bool, optional)</h3><p>You can specify to use entire record in events for hash generation seed.</p><h3 id="elasticsearchgenid-use_record_as_seed">use_record_as_seed (bool, optional)</h3><p>You can specify to use record in events for hash generation seed. This parameter should be used with record_keys parameter in practice.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d00173400a3863deca0bf67dceca225a">3.4 - Enhance K8s Metadata</h1><h2 id="enhance-k8s-metadatahttpsgithubcomsumologicsumologic-kubernetes-fluentdtreemainfluent-plugin-enhance-k8s-metadata"><a href="https://github.com/SumoLogic/sumologic-kubernetes-fluentd/tree/main/fluent-plugin-enhance-k8s-metadata">Enhance K8s Metadata</a></h2><p>Fluentd Filter plugin to fetch several metadata for a Pod</p><h2 id="configuration">Configuration</h2><h2 id="enhancek8s">EnhanceK8s</h2><h3 id="enhancek8s-api_groups">api_groups ([]string, optional)</h3><p>Kubernetes resources api groups</p><p>Default: <code>["apps/v1", "extensions/v1beta1"]</code></p><h3 id="enhancek8s-bearer_token_file">bearer_token_file (string, optional)</h3><p>Bearer token path</p><p>Default: nil</p><h3 id="enhancek8s-ca_file">ca_file (secret.Secret, optional)</h3><p>Kubernetes API CA file</p><p>Default: nil</p><h3 id="enhancek8s-cache_refresh">cache_refresh (int, optional)</h3><p>Cache refresh</p><p>Default: 60*60</p><h3 id="enhancek8s-cache_refresh_variation">cache_refresh_variation (int, optional)</h3><p>Cache refresh variation</p><p>Default: 60*15</p><h3 id="enhancek8s-cache_size">cache_size (int, optional)</h3><p>Cache size</p><p>Default: 1000</p><h3 id="enhancek8s-cache_ttl">cache_ttl (int, optional)</h3><p>Cache TTL</p><p>Default: 60<em>60</em>2</p><h3 id="enhancek8s-client_cert">client_cert (secret.Secret, optional)</h3><p>Kubernetes API Client certificate</p><p>Default: nil</p><h3 id="enhancek8s-client_key">client_key (secret.Secret, optional)</h3><p>Kubernetes API Client certificate key</p><p>Default: nil</p><h3 id="enhancek8s-core_api_versions">core_api_versions ([]string, optional)</h3><p>Kubernetes core API version (for different Kubernetes versions)</p><p>Default: [&lsquo;v1&rsquo;]</p><h3 id="enhancek8s-data_type">data_type (string, optional)</h3><p>Sumo Logic data type</p><p>Default: metrics</p><h3 id="enhancek8s-in_namespace_path">in_namespace_path ([]string, optional)</h3><p>parameters for read/write record</p><p>Default: <code>['$.namespace']</code></p><h3 id="enhancek8s-in_pod_path">in_pod_path ([]string, optional)</h3><p>Default: <code>['$.pod','$.pod_name']</code></p><h3 id="enhancek8s-kubernetes_url">kubernetes_url (string, optional)</h3><p>Kubernetes API URL</p><p>Default: nil</p><h3 id="enhancek8s-ssl_partial_chain">ssl_partial_chain (*bool, optional)</h3><p>If <code>ca_file</code> is for an intermediate CA, or otherwise we do not have the root CA and want to trust the intermediate CA certs we do have, set this to <code>true</code> - this corresponds to the openssl s_client -partial_chain flag and X509_V_FLAG_PARTIAL_CHAIN</p><p>Default: false</p><h3 id="enhancek8s-secret_dir">secret_dir (string, optional)</h3><p>Service account directory</p><p>Default: /var/run/secrets/kubernetes.io/serviceaccount</p><h3 id="enhancek8s-verify_ssl">verify_ssl (*bool, optional)</h3><p>Verify SSL</p><p>Default: true</p><h2 id="example-enhancek8s-filter-configurations">Example <code>EnhanceK8s</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalFilters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">enhanceK8s</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}</span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type enhance_k8s_metadata
</span></span><span style="display:flex"><span>  @id test_enhanceK8s
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1e14b035cd2fa8152fe231991dc9b922">3.5 - Exception Detector</h1><h1 id="exception-detector">Exception Detector</h1><h2 id="overview">Overview</h2><p>This filter plugin consumes a log stream of JSON objects which contain single-line log messages. If a consecutive sequence of log messages form an exception stack trace, they forwarded as a single, combined JSON object. Otherwise, the input log data is forwarded as is. More info at <a href="https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions">https://github.com/GoogleCloudPlatform/fluent-plugin-detect-exceptions</a></p><blockquote>
<p>Note: As Tag management is not supported yet, this Plugin is <strong>mutually exclusive</strong> with <a href="../tagnormaliser">Tag normaliser</a></p></blockquote><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">java, python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="detectexceptions">DetectExceptions</h2><h3 id="detectexceptions-force_line_breaks">force_line_breaks (bool, optional)</h3><p>Force line breaks between each lines when combining exception stacks.</p><p>Default: false</p><h3 id="detectexceptions-languages">languages ([]string, optional)</h3><p>Programming languages for which to detect exceptions.</p><p>Default: <code>[]</code></p><h3 id="detectexceptions-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: <code>kubernetes.**</code></p><h3 id="detectexceptions-max_bytes">max_bytes (int, optional)</h3><p>Maximum number of bytes to flush (0 means no limit)</p><p>Default: 0</p><h3 id="detectexceptions-max_lines">max_lines (int, optional)</h3><p>Maximum number of lines to flush (0 means no limit)</p><p>Default: 1000</p><h3 id="detectexceptions-message">message (string, optional)</h3><p>The field which contains the raw message text in the input JSON data.</p><p>Default: ""</p><h3 id="detectexceptions-multiline_flush_interval">multiline_flush_interval (string, optional)</h3><p>The interval of flushing the buffer for multiline format.</p><p>Default: nil</p><h3 id="detectexceptions-remove_tag_prefix">remove_tag_prefix (string, optional)</h3><p>The prefix to be removed from the input tag when outputting a record.</p><p>Default: kubernetes</p><h3 id="detectexceptions-stream">stream (string, optional)</h3><p>Separate log streams by this field in the input JSON data.</p><p>Default: ""</p><h2 id="example-exception-detector-filter-configurations">Example <code>Exception Detector</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">detectExceptions</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">multiline_flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">languages</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">java</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#000">python</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">kubernetes.**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type detect_exceptions
</span></span><span style="display:flex"><span>  @id test_detect_exceptions
</span></span><span style="display:flex"><span>  languages [&#34;java&#34;,&#34;python&#34;]
</span></span><span style="display:flex"><span>  multiline_flush_interval 0.1
</span></span><span style="display:flex"><span>  remove_tag_prefix kubernetes
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-91b6e53e4bb1647d0973b03564f40336">3.6 - Geo IP</h1><h1 id="fluentd-geoip-filter">Fluentd GeoIP filter</h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to add information about geographical location of IP addresses with Maxmind GeoIP databases.
More information at <a href="https://github.com/y-ken/fluent-plugin-geoip">https://github.com/y-ken/fluent-plugin-geoip</a></p><h2 id="configuration">Configuration</h2><h2 id="geoip">GeoIP</h2><h3 id="geoip-backend_library">backend_library (string, optional)</h3><p>Specify backend library (geoip2_c, geoip, geoip2_compat)</p><h3 id="geoip-geoip2_database">geoip2_database (string, optional)</h3><p>Specify optional geoip2 database (using bundled GeoLite2-City.mmdb by default)</p><h3 id="geoip-geoip_database">geoip_database (string, optional)</h3><p>Specify optional geoip database (using bundled GeoLiteCity databse by default)</p><h3 id="geoip-geoip_lookup_keys">geoip_lookup_keys (string, optional)</h3><p>Specify one or more geoip lookup field which has ip address</p><p>Default: host</p><h3 id="geoip-records">records ([]Record, optional)</h3><p>Records are represented as maps: <code>key: value</code></p><h3 id="geoip-skip_adding_null_record">skip_adding_null_record (*bool, optional)</h3><p>To avoid get stacktrace error with <code>[null, null]</code> array for elasticsearch.</p><p>Default: true</p><h2 id="example-geoip-filter-configurations">Example <code>GeoIP</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">geoip</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">geoip_lookup_keys</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">remote_addr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">city</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${city.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">location_array</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;&#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">country</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.iso_code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">country_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${country.names.en[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">postal_code</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">${postal.code[&#34;remote_addr&#34;]}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type geoip
</span></span><span style="display:flex"><span>  @id test_geoip
</span></span><span style="display:flex"><span>  geoip_lookup_keys remote_addr
</span></span><span style="display:flex"><span>  skip_adding_null_record true
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    city ${city.names.en[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    country ${country.iso_code[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    country_name ${country.names.en[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>    location_array &#39;[${location.longitude[&#34;remote&#34;]},${location.latitude[&#34;remote&#34;]}]&#39;
</span></span><span style="display:flex"><span>    postal_code ${postal.code[&#34;remote_addr&#34;]}
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d911e67edeb675049a9637d612f14d1a">3.7 - Grep</h1><h2 id="overview">Overview</h2><p><a href="https://docs.fluentd.org/filter/grep">Grep Filter</a></p><p>The grep filter plugin &ldquo;greps&rdquo; events by the values of specified fields.</p><h2 id="configuration">Configuration</h2><h2 id="grepconfig">GrepConfig</h2><h3 id="grepconfig-and">and ([]AndSection, optional)</h3><p><a href="#grepconfig-and">And Directive</a></p><h3 id="grepconfig-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="#grepconfig-exclude">Exclude Directive</a></p><h3 id="grepconfig-or">or ([]OrSection, optional)</h3><p><a href="#grepconfig-or">Or Directive</a></p><h3 id="grepconfig-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="#grepconfig-regexp">Regexp Directive</a></p><h2 id="Regexp-Directive">Regexp Directive</h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-regexp-greater-than-directive">Fluentd documentation</a>). This directive contains two parameters.</p><h3 id="regexp-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><h3 id="regexp-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><h2 id="example-regexp-filter-configurations">Example <code>Regexp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type grep
</span></span><span style="display:flex"><span>    @id demo-flow_1_grep
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>      key first
</span></span><span style="display:flex"><span>      pattern /^5\d\d$/
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="exclude-directive">Exclude Directive</h2><p>Specify filtering rule to reject events (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-exclude-greater-than-directive">Fluentd documentation</a>). This directive contains two parameters.</p><h3 id="exclude-directive-key">key (string, required)</h3><p>Specify field name in the record to parse.</p><h3 id="exclude-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><h2 id="example-exclude-filter-configurations">Example <code>Exclude</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type grep
</span></span><span style="display:flex"><span>    @id demo-flow_0_grep
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>      key first
</span></span><span style="display:flex"><span>      pattern /^5\d\d$/
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="Or-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Or Directive</a></h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Fluentd documentation</a>. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="or-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Exclude Directive</a></p><h3 id="or-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-or-greater-than-directive">Regexp Directive</a></p><h2 id="example-or-filter-configurations">Example <code>Or</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">exclude</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;or&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>	key first
</span></span><span style="display:flex"><span>	pattern /^5\d\d$/
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;exclude&gt;</span>
</span></span><span style="display:flex"><span>	key second
</span></span><span style="display:flex"><span>	pattern /\.css$/
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/exclude&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/or&gt;</span></span></span></code></pre></div><hr>
<h2 id="And-Directive"><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">And Directive</a></h2><p>Specify filtering rule (as described in the <a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Fluentd documentation</a>. This directive contains either <code>regexp</code> or <code>exclude</code> directive.</p><h3 id="and-directive-exclude">exclude ([]ExcludeSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Exclude Directive</a></p><h3 id="and-directive-regexp">regexp ([]RegexpSection, optional)</h3><p><a href="https://docs.fluentd.org/filter/grep#less-than-and-greater-than-directive">Regexp Directive</a></p><h2 id="example-and-filter-configurations">Example <code>And</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">grep</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">and</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/^5\d\d$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">second</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/\.css$/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;and&gt;</span>
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>	    key first
</span></span><span style="display:flex"><span>	    pattern /^5\d\d$/
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;regexp&gt;</span>
</span></span><span style="display:flex"><span>	    key second
</span></span><span style="display:flex"><span>	    pattern /\.css$/
</span></span><span style="display:flex"><span>	  <span style="color:#204a87;font-weight:700">&lt;/regexp&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/and&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4ed899f75f815259c224810fdfb84730">3.8 - Kubernetes Events Timestamp</h1><h1 id="kubernetes-events-timestamp-filterhttpsgithubcomkube-loggingfluentd-filter-kube-events-timestamp"><a href="https://github.com/kube-logging/fluentd-filter-kube-events-timestamp">Kubernetes Events Timestamp Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to select particular timestamp into an additional field</p><h2 id="configuration">Configuration</h2><h2 id="kubeeventstimestampconfig">KubeEventsTimestampConfig</h2><h3 id="kubeeventstimestampconfig-mapped_time_key">mapped_time_key (string, optional)</h3><p>Added time field name</p><p>Default: triggerts</p><h3 id="kubeeventstimestampconfig-timestamp_fields">timestamp_fields ([]string, optional)</h3><p>Time field names in order of relevance</p><p>Default: event.eventTime, event.lastTimestamp, event.firstTimestamp</p><h2 id="example-kubernetes-events-timestamp-filter-configurations">Example <code>Kubernetes Events Timestamp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">es-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">kube_events_timestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">timestamp_fields</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.eventTime&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.lastTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#4e9a06">&#34;event.firstTimestamp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mapped_time_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mytimefield</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">es-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span> @type kube_events_timestamp
</span></span><span style="display:flex"><span> @id test-kube-events-timestamp
</span></span><span style="display:flex"><span> timestamp_fields [&#34;event.eventTime&#34;,&#34;event.lastTimestamp&#34;,&#34;event.firstTimestamp&#34;]
</span></span><span style="display:flex"><span> mapped_time_key mytimefield
</span></span><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-5a6aa7b18aae1acb56e9fd8f8f8cd854">3.9 - Parser</h1><h1 id="parser-filterhttpsdocsfluentdorgfilterparser"><a href="https://docs.fluentd.org/filter/parser">Parser Filter</a></h1><h2 id="overview">Overview</h2><p>Parses a string field in event records and mutates its event record with the parsed result.</p><h2 id="configuration">Configuration</h2><h2 id="parserconfig">ParserConfig</h2><h3 id="parserconfig-emit_invalid_record_to_error">emit_invalid_record_to_error (*bool, optional)</h3><p>Emit invalid record to @ERROR label. Invalid cases are: key not exist, format is not matched, unexpected error</p><h3 id="parserconfig-hash_value_field">hash_value_field (string, optional)</h3><p>Store parsed values as a hash value in a field.</p><h3 id="parserconfig-inject_key_prefix">inject_key_prefix (string, optional)</h3><p>Store parsed values with specified key name prefix.</p><h3 id="parserconfig-key_name">key_name (string, optional)</h3><p>Specify field name in the record to parse. If you leave empty the Container Runtime default will be used.</p><h3 id="parserconfig-parse">parse (ParseSection, optional)</h3><p><a href="#parse-section">Parse Section</a></p><h3 id="parserconfig-parsers">parsers ([]ParseSection, optional)</h3><p>Deprecated, use <code>parse</code> instead</p><h3 id="parserconfig-remove_key_name_field">remove_key_name_field (bool, optional)</h3><p>Remove key_name field when parsing is succeeded</p><h3 id="parserconfig-replace_invalid_sequence">replace_invalid_sequence (bool, optional)</h3><p>If true, invalid string is replaced with safe characters and re-parse it.</p><h3 id="parserconfig-reserve_data">reserve_data (bool, optional)</h3><p>Keep original key-value pair in parsed result.</p><h3 id="parserconfig-reserve_time">reserve_time (bool, optional)</h3><p>Keep original event time in parsed result.</p><h2 id="parse-section">Parse Section</h2><h3 id="parse-section-custom_pattern_path">custom_pattern_path (*secret.Secret, optional)</h3><p>Only available when using type: grok, multiline_grok. File that includes custom grok patterns.</p><h3 id="parse-section-delimiter">delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;\t&rdquo;</p><h3 id="parse-section-delimiter_pattern">delimiter_pattern (string, optional)</h3><p>Only available when using type: ltsv</p><h3 id="parse-section-estimate_current_event">estimate_current_event (bool, optional)</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><h3 id="parse-section-expression">expression (string, optional)</h3><p>Regexp expression to evaluate</p><h3 id="parse-section-format">format (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-format_firstline">format_firstline (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-grok_failure_key">grok_failure_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key has grok failure reason.</p><h3 id="parse-section-grok_name_key">grok_name_key (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><h3 id="parse-section-grok_pattern">grok_pattern (string, optional)</h3><p>Only available when using type: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><h3 id="parse-section-grok_patterns">grok_patterns ([]GrokSection, optional)</h3><p>Only available when using type: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><h3 id="parse-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="parse-section-keys">keys (string, optional)</h3><p>Names for fields on each line. (seperated by coma)</p><h3 id="parse-section-label_delimiter">label_delimiter (string, optional)</h3><p>Only available when using type: ltsv</p><p>Default: &ldquo;:&rdquo;</p><h3 id="parse-section-local_time">local_time (bool, optional)</h3><p>If true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="parse-section-multiline">multiline ([]string, optional)</h3><p>The multiline parser plugin parses multiline logs.</p><h3 id="parse-section-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>Only available when using type: multiline_grok The regexp to match beginning of multiline.</p><h3 id="parse-section-null_empty_string">null_empty_string (bool, optional)</h3><p>If true, empty string field is replaced with nil</p><h3 id="parse-section-null_value_pattern">null_value_pattern (string, optional)</h3><p>Specify null value pattern.</p><h3 id="parse-section-patterns">patterns ([]SingleParseSection, optional)</h3><p>Only available when using type: multi_format <a href="#parse-section">Parse Section</a></p><h3 id="parse-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string</p><h3 id="parse-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><h3 id="parse-section-time_type">time_type (string, optional)</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="parse-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="parse-section-type">type (string, optional)</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><h3 id="parse-section-types">types (string, optional)</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><h3 id="parse-section-utc">utc (bool, optional)</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h2 id="parse-section-single">Parse Section (single)</h2><h3 id="parse-section-custom_pattern_path">custom_pattern_path (*secret.Secret, optional)</h3><p>Only available when using format: grok, multiline_grok. File that includes custom grok patterns.</p><h3 id="parse-section-estimate_current_event">estimate_current_event (bool, optional)</h3><p>If true, use Fluent::EventTime.now(current time) as a timestamp when time_key is specified.</p><h3 id="parse-section-expression">expression (string, optional)</h3><p>Regexp expression to evaluate</p><h3 id="parse-section-format">format (string, optional)</h3><p>Only available when using type: multi_format</p><h3 id="parse-section-grok_failure_key">grok_failure_key (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The key has grok failure reason.</p><h3 id="parse-section-grok_name_key">grok_name_key (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The key name to store grok section&rsquo;s name.</p><h3 id="parse-section-grok_pattern">grok_pattern (string, optional)</h3><p>Only available when using format: grok, multiline_grok. The pattern of grok. You cannot specify multiple grok pattern with this.</p><h3 id="parse-section-grok_patterns">grok_patterns ([]GrokSection, optional)</h3><p>Only available when using format: grok, multiline_grok. <a href="#grok-section">Grok Section</a> Specify grok pattern series set.</p><h3 id="parse-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="parse-section-local_time">local_time (bool, optional)</h3><p>If true, use local time. Otherwise, UTC is used. This is exclusive with utc.</p><p>Default: true</p><h3 id="parse-section-multiline_start_regexp">multiline_start_regexp (string, optional)</h3><p>Only available when using format: multiline_grok The regexp to match beginning of multiline.</p><h3 id="parse-section-null_empty_string">null_empty_string (bool, optional)</h3><p>If true, empty string field is replaced with nil</p><h3 id="parse-section-null_value_pattern">null_value_pattern (string, optional)</h3><p>Specify null value pattern.</p><h3 id="parse-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string</p><h3 id="parse-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><h3 id="parse-section-time_type">time_type (string, optional)</h3><p>Parse/format value according to this type available values: float, unixtime, string</p><p>Default: string</p><h3 id="parse-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><p>Default: nil</p><h3 id="parse-section-type">type (string, optional)</h3><p>Parse type: apache2, apache_error, nginx, syslog, csv, tsv, ltsv, json, multiline, none, logfmt, grok, multiline_grok</p><h3 id="parse-section-types">types (string, optional)</h3><p>Types casting the fields to proper types example: field1:type, field2:type</p><h3 id="parse-section-utc">utc (bool, optional)</h3><p>If true, use UTC. Otherwise, local time is used. This is exclusive with localtime</p><p>Default: false</p><h2 id="grok-section">Grok Section</h2><h3 id="grok-section-keep_time_key">keep_time_key (bool, optional)</h3><p>If true, keep time field in the record.</p><h3 id="grok-section-name">name (string, optional)</h3><p>The name of grok section.</p><h3 id="grok-section-pattern">pattern (string, required)</h3><p>The pattern of grok.</p><h3 id="grok-section-time_format">time_format (string, optional)</h3><p>Process value using specified format. This is available only when time_type is string.</p><h3 id="grok-section-time_key">time_key (string, optional)</h3><p>Specify time field for event time. If the event doesn&rsquo;t have this field, current time is used.</p><p>Default: time</p><h3 id="grok-section-timezone">timezone (string, optional)</h3><p>Use specified timezone. one can parse/format the time value in the specified timezone.</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">patterns</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">expression</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">type parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">id test_parser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">key_name message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">remove_key_name_field true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">reserve_data true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">&lt;parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>@<span style="color:#000">type multi_format</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">expression /foo/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format regexp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">format none</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">&lt;/pattern&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">&lt;/parse&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-b1ababb8fff927a359f5ee10ddd9740d">3.10 - Prometheus</h1><h1 id="prometheus-filterhttpsgithubcomfluentfluent-plugin-prometheusprometheus-outputfilter-plugin"><a href="https://github.com/fluent/fluent-plugin-prometheus#prometheus-outputfilter-plugin">Prometheus Filter</a></h1><h2 id="overview">Overview</h2><p>Prometheus Filter Plugin to count Incoming Records</p><h2 id="configuration">Configuration</h2><h2 id="prometheusconfig">PrometheusConfig</h2><h3 id="prometheusconfig-labels">labels (Label, optional)</h3><h3 id="prometheusconfig-metrics">metrics ([]MetricSection, optional)</h3><p><a href="#metrics-section">Metrics Section</a></p><h2 id="metrics-section">Metrics Section</h2><h3 id="metrics-section-buckets">buckets (string, optional)</h3><p>Buckets of record for instrumentation</p><h3 id="metrics-section-desc">desc (string, required)</h3><p>Description of metric</p><h3 id="metrics-section-key">key (string, optional)</h3><p>Key name of record for instrumentation.</p><h3 id="metrics-section-labels">labels (Label, optional)</h3><p>Additional labels for this metric</p><h3 id="metrics-section-name">name (string, required)</h3><p>Metrics name</p><h3 id="metrics-section-type">type (string, required)</h3><p>Metrics type <a href="https://github.com/fluent/fluent-plugin-prometheus#counter-type">counter</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#gauge-type">gauge</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#summary-type">summary</a>, <a href="https://github.com/fluent/fluent-plugin-prometheus#histogram-type">histogram</a></p><h2 id="example-prometheus-filter-configurations">Example <code>Prometheus</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">remove_key_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">reserve_data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">parse</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">prometheus</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">metrics</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">total_counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">desc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">The total number of foo in message.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">counter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${hostname}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">tag</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${tag}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$.kubernetes.namespace</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type prometheus
</span></span><span style="display:flex"><span>    @id logging-demo-flow_2_prometheus
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;metric&gt;</span>
</span></span><span style="display:flex"><span>      desc The total number of foo in message.
</span></span><span style="display:flex"><span>      name total_counter
</span></span><span style="display:flex"><span>      type counter
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&lt;labels&gt;</span>
</span></span><span style="display:flex"><span>        foo bar
</span></span><span style="display:flex"><span>      <span style="color:#204a87;font-weight:700">&lt;/labels&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/metric&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;labels&gt;</span>
</span></span><span style="display:flex"><span>      host ${hostname}
</span></span><span style="display:flex"><span>      namespace $.kubernetes.namespace
</span></span><span style="display:flex"><span>      tag ${tag}
</span></span><span style="display:flex"><span>    <span style="color:#204a87;font-weight:700">&lt;/labels&gt;</span>
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2c5a900f0f1960d731ab3d2e7e9ae2dd">3.11 - Record Modifier</h1><h1 id="record-modifierhttpsgithubcomrepeatedlyfluent-plugin-record-modifier"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier">Record Modifier</a></h1><h2 id="overview">Overview</h2><p>Modify each event record.</p><h2 id="configuration">Configuration</h2><h2 id="recordmodifier">RecordModifier</h2><h3 id="recordmodifier-char_encoding">char_encoding (string, optional)</h3><p>Fluentd including some plugins treats logs as a BINARY by default to forward. To overide that, use a target encoding or a from:to encoding here.</p><h3 id="recordmodifier-prepare_value">prepare_value (string, optional)</h3><p>Prepare values for filtering in configure phase. Prepared values can be used in <code>&lt;record></code>. You can write any ruby code.</p><h3 id="recordmodifier-records">records ([]Record, optional)</h3><p>Add records. Records are represented as maps: <code>key: value</code>. For details, see <a href="https://github.com/repeatedly/fluent-plugin-record-modifier">https://github.com/repeatedly/fluent-plugin-record-modifier</a>.</p><h3 id="recordmodifier-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><h3 id="recordmodifier-replaces">replaces ([]Replace, optional)</h3><p>Replace specific value for keys</p><h3 id="recordmodifier-whitelist_keys">whitelist_keys (string, optional)</h3><p>This is exclusive with remove_keys</p><h2 id="example-record-modifier-filter-configurations">Example <code>Record Modifier</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">record_modifier</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type record_modifier
</span></span><span style="display:flex"><span>  @id test_record_modifier
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    foo bar
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
<h2 id="replace-directivehttpsgithubcomrepeatedlyfluent-plugin-record-modifierreplace_keys_value"><a href="https://github.com/repeatedly/fluent-plugin-record-modifier#replace_keys_value">Replace Directive</a></h2><p>Specify replace rule. This directive contains three parameters.</p><h3 id="replace-directive-replace_keys_value-expression">expression (string, required)</h3><p>Regular expression</p><h3 id="replace-directive-replace_keys_value-key">key (string, required)</h3><p>Key to search for</p><h3 id="replace-directive-replace_keys_value-replace">replace (string, required)</h3><p>Value to replace with</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2adc391c4bf236f17f4dff5d5236127b">3.12 - Record Transformer</h1><h1 id="record-transformerhttpsdocsfluentdorgfilterrecord_transformer"><a href="https://docs.fluentd.org/filter/record_transformer">Record Transformer</a></h1><h2 id="overview">Overview</h2><p>Mutates/transforms incoming event streams.</p><h2 id="configuration">Configuration</h2><h2 id="recordtransformer">RecordTransformer</h2><h3 id="recordtransformer-auto_typecast">auto_typecast (bool, optional)</h3><p>Use original value type.</p><p>Default: true</p><h3 id="recordtransformer-enable_ruby">enable_ruby (bool, optional)</h3><p>When set to true, the full Ruby syntax is enabled in the <code>${...}</code> expression.</p><p>Default: false</p><h3 id="recordtransformer-keep_keys">keep_keys (string, optional)</h3><p>A comma-delimited list of keys to keep.</p><h3 id="recordtransformer-records">records ([]Record, optional)</h3><p>Add records docs at: <a href="https://docs.fluentd.org/filter/record_transformer">https://docs.fluentd.org/filter/record_transformer</a> Records are represented as maps: <code>key: value</code></p><h3 id="recordtransformer-remove_keys">remove_keys (string, optional)</h3><p>A comma-delimited list of keys to delete</p><h3 id="recordtransformer-renew_record">renew_record (bool, optional)</h3><p>Create new Hash to transform incoming data</p><p>Default: false</p><h3 id="recordtransformer-renew_time_key">renew_time_key (string, optional)</h3><p>Specify field name of the record to overwrite the time of events. Its value must be unix time.</p><h2 id="example-record-transformer-filter-configurations">Example <code>Record Transformer</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">record_transformer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">foo</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;bar&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type record_transformer
</span></span><span style="display:flex"><span>  @id test_record_transformer
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;record&gt;</span>
</span></span><span style="display:flex"><span>    foo bar
</span></span><span style="display:flex"><span>  <span style="color:#204a87;font-weight:700">&lt;/record&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-06af9b3099c8f9f37d675b5aee19c604">3.13 - StdOut</h1><h1 id="stdout-filterhttpsdocsfluentdorgfilterstdout"><a href="https://docs.fluentd.org/filter/stdout">Stdout Filter</a></h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to print events to stdout</p><h2 id="configuration">Configuration</h2><h2 id="stdoutfilterconfig">StdOutFilterConfig</h2><h3 id="stdoutfilterconfig-output_type">output_type (string, optional)</h3><p>This is the option of stdout format.</p><h2 id="example-stdout-filter-configurations">Example <code>StdOut</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">stdout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">output_type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;filter **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">type stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>@<span style="color:#000">id test_stdout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">output_type json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-e5531904143c5008a8a49d371504912d">3.14 - SumoLogic</h1><h1 id="sumo-logic-collection-solution-for-kubernetes">Sumo Logic collection solution for Kubernetes</h1><h2 id="overview">Overview</h2><p>More info at <a href="https://github.com/SumoLogic/sumologic-kubernetes-collection">https://github.com/SumoLogic/sumologic-kubernetes-collection</a></p><h2 id="configuration">Configuration</h2><h2 id="sumologic">SumoLogic</h2><h3 id="sumologic-collector_key_name">collector_key_name (string, optional)</h3><p>CollectorKey Name</p><p>Default: <code>_collector</code></p><h3 id="sumologic-collector_value">collector_value (string, optional)</h3><p>Collector Value</p><p>Default: &ldquo;undefined&rdquo;</p><h3 id="sumologic-exclude_container_regex">exclude_container_regex (string, optional)</h3><p>Exclude Container Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_facility_regex">exclude_facility_regex (string, optional)</h3><p>Exclude Facility Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_host_regex">exclude_host_regex (string, optional)</h3><p>Exclude Host Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_namespace_regex">exclude_namespace_regex (string, optional)</h3><p>Exclude Namespace Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_pod_regex">exclude_pod_regex (string, optional)</h3><p>Exclude Pod Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_priority_regex">exclude_priority_regex (string, optional)</h3><p>Exclude Priority Regex</p><p>Default: ""</p><h3 id="sumologic-exclude_unit_regex">exclude_unit_regex (string, optional)</h3><p>Exclude Unit Regex</p><p>Default: ""</p><h3 id="sumologic-log_format">log_format (string, optional)</h3><p>Log Format</p><p>Default: json</p><h3 id="sumologic-source_category">source_category (string, optional)</h3><p>Source Category</p><p>Default: <code>%{namespace}/%{pod_name}</code></p><h3 id="sumologic-source_category_key_name">source_category_key_name (string, optional)</h3><p>Source CategoryKey Name</p><p>Default: <code>_sourceCategory</code></p><h3 id="sumologic-source_category_prefix">source_category_prefix (string, optional)</h3><p>Source Category Prefix</p><p>Default: kubernetes/</p><h3 id="sumologic-source_category_replace_dash">source_category_replace_dash (string, optional)</h3><p>Source Category Replace Dash</p><p>Default: &ldquo;/&rdquo;</p><h3 id="sumologic-source_host">source_host (string, optional)</h3><p>Source Host</p><p>Default: ""</p><h3 id="sumologic-source_host_key_name">source_host_key_name (string, optional)</h3><p>Source HostKey Name</p><p>Default: <code>_sourceHost</code></p><h3 id="sumologic-source_name">source_name (string, optional)</h3><p>Source Name</p><p>Default: <code>%{namespace}.%{pod}.%{container}</code></p><h3 id="sumologic-source_name_key_name">source_name_key_name (string, optional)</h3><p>Source NameKey Name</p><p>Default: <code>_sourceName</code></p><h3 id="sumologic-tracing_annotation_prefix">tracing_annotation_prefix (string, optional)</h3><p>Tracing Annotation Prefix</p><p>Default: <code>pod_annotation_</code></p><h3 id="sumologic-tracing_container_name">tracing_container_name (string, optional)</h3><p>Tracing Container Name</p><p>Default: &ldquo;container_name&rdquo;</p><h3 id="sumologic-tracing_format">tracing_format (*bool, optional)</h3><p>Tracing Format</p><p>Default: false</p><h3 id="sumologic-tracing_host">tracing_host (string, optional)</h3><p>Tracing Host</p><p>Default: &ldquo;hostname&rdquo;</p><h3 id="sumologic-tracing_label_prefix">tracing_label_prefix (string, optional)</h3><p>Tracing Label Prefix</p><p>Default: <code>pod_label_</code></p><h3 id="sumologic-tracing_namespace">tracing_namespace (string, optional)</h3><p>Tracing Namespace</p><p>Default: &ldquo;namespace&rdquo;</p><h3 id="sumologic-tracing_pod">tracing_pod (string, optional)</h3><p>Tracing Pod</p><p>Default: &ldquo;pod&rdquo;</p><h3 id="sumologic-tracing_pod_id">tracing_pod_id (string, optional)</h3><p>Tracing Pod ID</p><p>Default: &ldquo;pod_id&rdquo;</p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">sumologic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">source_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;elso&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type kubernetes_sumologic
</span></span><span style="display:flex"><span>  @id test_sumologic
</span></span><span style="display:flex"><span>  source_name elso
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-9f71d81ccc4b25c0f75938abbc9a158d">3.15 - Tag Normaliser</h1><p>Fluentd Plugin to re-tag based on log metadata. More info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">https://github.com/kube-logging/fluent-plugin-tag-normaliser</a></p><h2 id="available-kubernetes-metadata">Available Kubernetes metadata</h2><table>
<thead>
<tr>
<th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr>
<td><code>${pod_name}</code></td><td>Pod name</td><td>understood-butterfly-logging-demo-7dcdcfdcd7-h7p9n</td></tr><tr>
<td><code>${container_name}</code></td><td>Container name inside the Pod</td><td>logging-demo</td></tr><tr>
<td><code>${namespace_name}</code></td><td>Namespace name</td><td>default</td></tr><tr>
<td><code>${pod_id}</code></td><td>Kubernetes UUID for Pod</td><td>1f50d309-45a6-11e9-b795-025000000001</td></tr><tr>
<td><code>${labels}</code></td><td>Kubernetes Pod labels. This is a nested map. You can access nested attributes via <code>.</code></td><td><code>{"app":"logging-demo", "pod-template-hash":"7dcdcfdcd7" }</code></td></tr><tr>
<td><code>${host}</code></td><td>Node hostname the Pod runs on</td><td>docker-desktop</td></tr><tr>
<td><code>${docker_id}</code></td><td>Docker UUID of the container</td><td>3a38148aa37aa3&mldr;</td></tr></tbody></table><h2 id="configuration">Configuration</h2><h2 id="tag-normaliser-parameters">Tag Normaliser parameters</h2><h3 id="tag-normaliser-parameters-format">format (string, optional)</h3><p>Re-Tag log messages info at <a href="https://github.com/kube-logging/fluent-plugin-tag-normaliser">github</a></p><p>Default: ${namespace_name}.${pod_name}.${container_name}</p><h3 id="tag-normaliser-parameters-match_tag">match_tag (string, optional)</h3><p>Tag used in match directive.</p><p>Default: <code>kubernetes.**</code></p><h2 id="example-parser-filter-configurations">Example <code>Parser</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">tag_normaliser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cluster1.${namespace_name}.${pod_name}.${labels.app}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">kubernetes.**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type tag_normaliser
</span></span><span style="display:flex"><span>  @id test_tag_normaliser
</span></span><span style="display:flex"><span>  format cluster1.${namespace_name}.${pod_name}.${labels.app}
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-c86a56fc7e085e5aea4460c0e18e5990">3.16 - Throttle</h1><h1 id="throttle-filterhttpsgithubcomrubrikincfluent-plugin-throttle"><a href="https://github.com/rubrikinc/fluent-plugin-throttle">Throttle Filter</a></h1><h2 id="overview">Overview</h2><p>A sentry plugin to throttle logs. Logs are grouped by a configurable key. When a group exceeds a configuration rate, logs are dropped for this group.</p><h2 id="configuration">Configuration</h2><h2 id="throttle">Throttle</h2><h3 id="throttle-group_bucket_limit">group_bucket_limit (int, optional)</h3><p>Maximum number logs allowed per groups over the period of group_bucket_period_s</p><p>Default: 6000</p><h3 id="throttle-group_bucket_period_s">group_bucket_period_s (int, optional)</h3><p>This is the period of of time over which group_bucket_limit applies</p><p>Default: 60</p><h3 id="throttle-group_drop_logs">group_drop_logs (bool, optional)</h3><p>When a group reaches its limit, logs will be dropped from further processing if this value is true</p><p>Default: true</p><h3 id="throttle-group_key">group_key (string, optional)</h3><p>Used to group logs. Groups are rate limited independently</p><p>Default: kubernetes.container_name</p><h3 id="throttle-group_reset_rate_s">group_reset_rate_s (int, optional)</h3><p>After a group has exceeded its bucket limit, logs are dropped until the rate per second falls below or equal to group_reset_rate_s.</p><p>Default: group_bucket_limit/group_bucket_period_s</p><h3 id="throttle-group_warning_delay_s">group_warning_delay_s (int, optional)</h3><p>When a group reaches its limit and as long as it is not reset, a warning message with the current log rate of the group is emitted repeatedly. This is the delay between every repetition.</p><p>Default: 10 seconds</p><h2 id="example-throttle-filter-configurations">Example <code>Throttle</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">throttle</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">group_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$.kubernetes.container_name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type throttle
</span></span><span style="display:flex"><span>  @id test_throttle
</span></span><span style="display:flex"><span>  group_key $.kubernetes.container_name
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3610a8928860c8aae138583bea272461">3.17 - User Agent</h1><h1 id="fluentd-useragent-filter">Fluentd UserAgent filter</h1><h2 id="overview">Overview</h2><p>Fluentd Filter plugin to parse user-agent
More information at <a href="https://github.com/bungoume/fluent-plugin-ua-parser">https://github.com/bungoume/fluent-plugin-ua-parser</a></p><h2 id="configuration">Configuration</h2><h2 id="useragent">UserAgent</h2><h3 id="useragent-delete_key">delete_key (bool, optional)</h3><p>Delete input key</p><p>Default: false</p><h3 id="useragent-flatten">flatten (bool, optional)</h3><p>Join hashed data by &lsquo;_&rsquo;</p><p>Default: false</p><h3 id="useragent-key_name">key_name (string, optional)</h3><p>Target key name</p><p>Default: user_agent</p><h3 id="useragent-out_key">out_key (string, optional)</h3><p>Output prefix key name</p><p>Default: ua</p><h2 id="example-useragent-filter-configurations">Example <code>UserAgent</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">useragent</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">key_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">my_agent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">delete_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">out_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ua_fields</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">flatten</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">selectors</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;filter</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>  @type ua_parser
</span></span><span style="display:flex"><span>  @id test_useragent
</span></span><span style="display:flex"><span>  key_name my_agent
</span></span><span style="display:flex"><span>  delete_key true
</span></span><span style="display:flex"><span>  out_key ua_fields
</span></span><span style="display:flex"><span>  flatten true
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/filter&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-506383d863d6db46f320e08de47fb0c7">4 - Fluentd outputs</h1></div><div class="td-content">
<h1 id="pg-d52aa3c8a0eb89cb0544a82420222298">4.1 - </h1><h1 id="null-output-plugin-for-fluentd">Null output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://docs.fluentd.org/output/null">https://docs.fluentd.org/output/null</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">nullout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">never_flush</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="nulloutputconfig">NullOutputConfig</h2><h3 id="nulloutputconfig-never_flush">never_flush (*bool, optional)</h3><p>The parameter for testing to simulate the output plugin that never succeeds to flush.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-28f1e98e5b5c5f770fb8b2e592e1abf0">4.2 - Alibaba Cloud</h1><h1 id="aliyun-oss-plugin-for-fluentd">Aliyun OSS plugin for Fluentd</h1><h2 id="overview">Overview</h2><p><strong>Fluent OSS output plugin</strong> buffers event logs in local files and uploads them to OSS periodically in background threads.</p><p>This plugin splits events by using the timestamp of event logs. For example, a log &lsquo;2019-04-09 message Hello&rsquo; is reached, and then another log &lsquo;2019-04-10 message World&rsquo; is reached in this order, the former is stored in &ldquo;20190409.gz&rdquo; file, and latter in &ldquo;20190410.gz&rdquo; file.</p><p><strong>Fluent OSS input plugin</strong> reads data from OSS periodically.</p><p>This plugin uses MNS on the same region of the OSS bucket. We must setup MNS and OSS event notification before using this plugin.</p><p><a href="https://help.aliyun.com/document_detail/52656.html">This document</a> shows how to setup MNS and OSS event notification.</p><p>This plugin will poll events from MNS queue and extract object keys from these events, and then will read those objects from OSS. For details, see <a href="https://github.com/aliyun/fluent-plugin-oss">https://github.com/aliyun/fluent-plugin-oss</a>.</p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-access_key_id">access_key_id (*secret.Secret, required)</h3><p>Your access key id <a href="../secret/">Secret</a></p><h3 id="output-config-aaccess_key_secret">access_key_secret (*secret.Secret, required)</h3><p>Your access secret key <a href="../secret/">Secret</a></p><h3 id="output-config-auto_create_bucket">auto_create_bucket (bool, optional)</h3><p>desc &lsquo;Create OSS bucket if it does not exists</p><p>Default: false</p><h3 id="output-config-bucket">bucket (string, required)</h3><p>Your bucket name</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-check_bucket">check_bucket (bool, optional)</h3><p>Check bucket if exists or not</p><p>Default: true</p><h3 id="output-config-check_object">check_object (bool, optional)</h3><p>Check object before creation</p><p>Default: true</p><h3 id="output-config-download_crc_enable">download_crc_enable (bool, optional)</h3><p>Download crc enabled</p><p>Default: true</p><h3 id="output-config-endpoint">endpoint (string, required)</h3><p>OSS endpoint to connect to&rsquo;</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="output-config-hex_random_length">hex_random_length (int, optional)</h3><p>The length of <code>%{hex_random}</code> placeholder(4-16)</p><p>Default: 4</p><h3 id="output-config-index_format">index_format (string, optional)</h3><p><code>sprintf</code> format for <code>%{index}</code></p><p>Default: %d</p><h3 id="output-config-key_format">key_format (string, optional)</h3><p>The format of OSS object keys</p><p>Default: <code>%{path}/%{time_slice}_%{index}_%{thread_id}.%{file_extension}</code></p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Timeout for open connections</p><p>Default: 10</p><h3 id="output-config-oss_sdk_log_dir">oss_sdk_log_dir (string, optional)</h3><p>OSS SDK log directory</p><p>Default: /var/log/td-agent</p><h3 id="output-config-overwrite">overwrite (bool, optional)</h3><p>Overwrite already existing path</p><p>Default: false</p><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on OSS</p><p>Default: fluent/logs</p><h3 id="output-config-read_timeout">read_timeout (int, optional)</h3><p>Timeout for read response</p><p>Default: 120</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="output-config-store_as">store_as (string, optional)</h3><p>Archive format on OSS: gzip, json, text, lzo, lzma2</p><p>Default: gzip</p><h3 id="output-config-upload_crc_enable">upload_crc_enable (bool, optional)</h3><p>Upload crc enabled</p><p>Default: true</p><h3 id="output-config-warn_for_delay">warn_for_delay (string, optional)</h3><p>Given a threshold to treat events as delay, output warning logs if delayed events were put into OSS</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-aeea1cd1922e8ddddba7f377f910cc60">4.3 - Amazon CloudWatch</h1><h1 id="cloudwatch-output-plugin-for-fluentd">CloudWatch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>This plugin outputs logs or metrics to Amazon CloudWatch. For details, see <a href="https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs">https://github.com/fluent-plugins-nursery/fluent-plugin-cloudwatch-logs</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">cloudwatch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsAccessKeyId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">aws_sec_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsSecretAccessKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">log_group_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">operator-log-group</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">log_stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">operator-log-stream</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">auto_create_stream true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-auto_create_stream">auto_create_stream (bool, optional)</h3><p>Create log group and stream automatically.</p><p>Default: false</p><h3 id="output-config-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id <a href="../secret/">Secret</a></p><h3 id="output-config-aws_instance_profile_credentials_retries">aws_instance_profile_credentials_retries (int, optional)</h3><p>Instance Profile Credentials call retries</p><p>Default: nil</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. <a href="../secret/">Secret</a></p><h3 id="output-config-aws_sts_role_arn">aws_sts_role_arn (string, optional)</h3><p>The role ARN to assume when using cross-account sts authentication</p><h3 id="output-config-aws_sts_session_name">aws_sts_session_name (string, optional)</h3><p>The session name to use with sts authentication</p><p>Default: &lsquo;fluentd&rsquo;</p><h3 id="output-config-aws_use_sts">aws_use_sts (bool, optional)</h3><p>Enable AssumeRoleCredentials to authenticate, rather than the default credential hierarchy. See &lsquo;Cross-Account Operation&rsquo; below for more detail.</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-concurrency">concurrency (int, optional)</h3><p>Use to set the number of threads pushing data to CloudWatch.</p><p>Default: 1</p><h3 id="output-config-endpoint">endpoint (string, optional)</h3><p>Use this parameter to connect to the local API endpoint (for testing)</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="output-config-http_proxy">http_proxy (string, optional)</h3><p>Use to set an optional HTTP proxy</p><h3 id="output-config-include_time_key">include_time_key (bool, optional)</h3><p>Include time key as part of the log entry</p><p>Default: UTC</p><h3 id="output-config-json_handler">json_handler (string, optional)</h3><p>Name of the library to be used to handle JSON data. For now, supported libraries are json (default) and yaml</p><h3 id="output-config-localtime">localtime (bool, optional)</h3><p>Use localtime timezone for include_time_key output (overrides UTC default)</p><h3 id="output-config-log_group_aws_tags">log_group_aws_tags (string, optional)</h3><p>Set a hash with keys and values to tag the log group resource</p><h3 id="output-config-log_group_aws_tags_key">log_group_aws_tags_key (string, optional)</h3><p>Specified field of records as AWS tags for the log group</p><h3 id="output-config-log_group_name">log_group_name (string, optional)</h3><p>Name of log group to store logs</p><h3 id="output-config-log_group_name_key">log_group_name_key (string, optional)</h3><p>Specified field of records as log group name</p><h3 id="output-config-log_rejected_request">log_rejected_request (string, optional)</h3><p>Output rejected_log_events_info request log.</p><p>Default: false</p><h3 id="output-config-log_stream_name">log_stream_name (string, optional)</h3><p>Name of log stream to store logs</p><h3 id="output-config-log_stream_name_key">log_stream_name_key (string, optional)</h3><p>Specified field of records as log stream name</p><h3 id="output-config-max_events_per_batch">max_events_per_batch (int, optional)</h3><p>Maximum number of events to send at once</p><p>Default: 10000</p><h3 id="output-config-max_message_length">max_message_length (int, optional)</h3><p>Maximum length of the message</p><h3 id="output-config-message_keys">message_keys (string, optional)</h3><p>Keys to send messages as events</p><h3 id="output-config-put_log_events_disable_retry_limit">put_log_events_disable_retry_limit (bool, optional)</h3><p>If true, put_log_events_retry_limit will be ignored</p><h3 id="output-config-put_log_events_retry_limit">put_log_events_retry_limit (int, optional)</h3><p>Maximum count of retry (if exceeding this, the events will be discarded)</p><h3 id="output-config-put_log_events_retry_wait">put_log_events_retry_wait (string, optional)</h3><p>Time before retrying PutLogEvents (retry interval increases exponentially like put_log_events_retry_wait * (2 ^ retry_count))</p><h3 id="output-config-region">region (string, required)</h3><p>AWS Region</p><h3 id="output-config-remove_log_group_aws_tags_key">remove_log_group_aws_tags_key (string, optional)</h3><p>Remove field specified by log_group_aws_tags_key</p><h3 id="output-config-remove_log_group_name_key">remove_log_group_name_key (string, optional)</h3><p>Remove field specified by log_group_name_key</p><h3 id="output-config-remove_log_stream_name_key">remove_log_stream_name_key (string, optional)</h3><p>Remove field specified by log_stream_name_key</p><h3 id="output-config-remove_retention_in_days">remove_retention_in_days (string, optional)</h3><p>Remove field specified by retention_in_days</p><h3 id="output-config-retention_in_days">retention_in_days (string, optional)</h3><p>Use to set the expiry time for log group when created with auto_create_stream. (default to no expiry)</p><h3 id="output-config-retention_in_days_key">retention_in_days_key (string, optional)</h3><p>Use specified field of records as retention period</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-use_tag_as_group">use_tag_as_group (bool, optional)</h3><p>Use tag as a group name</p><h3 id="output-config-use_tag_as_stream">use_tag_as_stream (bool, optional)</h3><p>Use tag as a stream name</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-2b59c5fb4b2ccfdb47e90229617f245a">4.4 - Amazon Elasticsearch</h1><h1 id="amazon-elasticsearch-output-plugin-for-fluentd">Amazon Elasticsearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/atomita/fluent-plugin-aws-elasticsearch-service">https://github.com/atomita/fluent-plugin-aws-elasticsearch-service</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">awsElasticsearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">logstash_format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">include_tag_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tag_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;@log_name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://CLUSTER_ENDPOINT_URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">eu-west-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">access_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aws-key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">secret_access_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aws_secret</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="amazon-elasticsearch">Amazon Elasticsearch</h2><p>Send your logs to a Amazon Elasticsearch Service</p><h3 id="amazon-elasticsearch-">(*ElasticsearchOutput, optional)</h3><p>ElasticSearch</p><h3 id="amazon-elasticsearch-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="amazon-elasticsearch-endpoint">endpoint (*EndpointCredentials, optional)</h3><p>AWS Endpoint Credentials</p><h3 id="amazon-elasticsearch-flush_interval">flush_interval (string, optional)</h3><p>flush_interval</p><h3 id="amazon-elasticsearch-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h2 id="endpoint-credentials">Endpoint Credentials</h2><p>endpoint</p><h3 id="endpoint-credentials-access_key_id">access_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="endpoint-credentials-assume_role_arn">assume_role_arn (*secret.Secret, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><h3 id="endpoint-credentials-assume_role_session_name">assume_role_session_name (*secret.Secret, optional)</h3><p>AssumeRoleWithWebIdentity <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html</a></p><h3 id="endpoint-credentials-assume_role_web_identity_token_file">assume_role_web_identity_token_file (*secret.Secret, optional)</h3><p>AssumeRoleWithWebIdentity <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html</a></p><h3 id="endpoint-credentials-ecs_container_credentials_relative_uri">ecs_container_credentials_relative_uri (*secret.Secret, optional)</h3><p>Set with AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variable value</p><h3 id="endpoint-credentials-region">region (string, optional)</h3><p>AWS region. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><h3 id="endpoint-credentials-secret_access_key">secret_access_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="endpoint-credentials-sts_credentials_region">sts_credentials_region (*secret.Secret, optional)</h3><p>By default, the AWS Security Token Service (AWS STS) is available as a global service, and all AWS STS requests go to a single endpoint at <a href="https://sts.amazonaws.com">https://sts.amazonaws.com</a>. AWS recommends using Regional AWS STS endpoints instead of the global endpoint to reduce latency, build in redundancy, and increase session token validity. <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html</a></p><h3 id="endpoint-credentials-url">url (string, optional)</h3><p>AWS connection url.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-dec03311d9f65d4bec85b8a63c46e105">4.5 - Amazon Kinesis</h1><h1 id="kinesis-firehose-output-plugin-for-fluentd">Kinesis Firehose output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_firehose">https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_firehose</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kinesisFirehose</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">delivery_stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example-stream-name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kinesisfirehose">KinesisFirehose</h2><p>Send your logs to a Kinesis Firehose</p><h3 id="kinesisfirehose-aws_iam_retries">aws_iam_retries (int, optional)</h3><p>The number of attempts to make (with exponential backoff) when loading instance profile credentials from the EC2 metadata service using an IAM role. Defaults to 5 retries.</p><h3 id="kinesisfirehose-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisfirehose-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisfirehose-aws_ses_token">aws_ses_token (*secret.Secret, optional)</h3><p>AWS session token. This parameter is optional, but can be provided if using MFA or temporary credentials when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisfirehose-append_new_line">append_new_line (*bool, optional)</h3><p>If it is enabled, the plugin adds new line character (\n) to each serialized record. Before appending \n, plugin calls chomp and removes separator from the end of each record as chomp_record is true. Therefore, you don&rsquo;t need to enable chomp_record option when you use kinesis_firehose output with default configuration (append_new_line is true). If you want to set append_new_line false, you can choose chomp_record false (default) or true (compatible format with plugin v2). (Default:true)</p><h3 id="kinesisfirehose-assume_role_credentials">assume_role_credentials (*KinesisFirehoseAssumeRoleCredentials, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><h3 id="kinesisfirehose-batch_request_max_count">batch_request_max_count (int, optional)</h3><p>Integer, default 500. The number of max count of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><h3 id="kinesisfirehose-batch_request_max_size">batch_request_max_size (int, optional)</h3><p>Integer. The number of max size of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><h3 id="kinesisfirehose-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="kinesisfirehose-delivery_stream_name">delivery_stream_name (string, required)</h3><p>Name of the delivery stream to put data.</p><h3 id="kinesisfirehose-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="kinesisfirehose-process_credentials">process_credentials (*KinesisFirehoseProcessCredentials, optional)</h3><p>This loads AWS access credentials from an external process.</p><h3 id="kinesisfirehose-region">region (string, optional)</h3><p>AWS region of your stream. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><h3 id="kinesisfirehose-reset_backoff_if_success">reset_backoff_if_success (bool, optional)</h3><p>Boolean, default true. If enabled, when after retrying, the next retrying checks the number of succeeded records on the former batch request and reset exponential backoff if there is any success. Because batch request could be composed by requests across shards, simple exponential backoff for the batch request wouldn&rsquo;t work some cases.</p><h3 id="kinesisfirehose-retries_on_batch_request">retries_on_batch_request (int, optional)</h3><p>The plugin will put multiple records to Amazon Kinesis Data Streams in batches using PutRecords. A set of records in a batch may fail for reasons documented in the Kinesis Service API Reference for PutRecords. Failed records will be retried retries_on_batch_request times</p><h3 id="kinesisfirehose-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="assume-role-credentials-duration_seconds">duration_seconds (string, optional)</h3><p>The duration, in seconds, of the role session (900-3600)</p><h3 id="assume-role-credentials-external_id">external_id (string, optional)</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><h3 id="assume-role-credentials-policy">policy (string, optional)</h3><p>An IAM policy in JSON format</p><h3 id="role_arn-string-required-assume-role-credentials-role_arn">role_arn (string, required) {#assume role credentials-role_arn}</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><h3 id="assume-role-credentials-role_session_name">role_session_name (string, required)</h3><p>An identifier for the assumed role session</p><h2 id="process-credentials">Process Credentials</h2><p>process_credentials</p><h3 id="process-credentials-process">process (string, required)</h3><p>Command more info: <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-0309d186051d45cea94e4ea4a3d95907">4.6 - Amazon Kinesis</h1><h1 id="kinesis-stream-output-plugin-for-fluentd">Kinesis Stream output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_streams">https://github.com/awslabs/aws-fluent-plugin-kinesis#configuration-kinesis_streams</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kinesisStream</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">stream_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example-stream-name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kinesisstream">KinesisStream</h2><p>Send your logs to a Kinesis Stream</p><h3 id="kinesisstream-aws_iam_retries">aws_iam_retries (int, optional)</h3><p>The number of attempts to make (with exponential backoff) when loading instance profile credentials from the EC2 metadata service using an IAM role. Defaults to 5 retries.</p><h3 id="kinesisstream-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisstream-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisstream-aws_ses_token">aws_ses_token (*secret.Secret, optional)</h3><p>AWS session token. This parameter is optional, but can be provided if using MFA or temporary credentials when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="kinesisstream-assume_role_credentials">assume_role_credentials (*KinesisStreamAssumeRoleCredentials, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><h3 id="kinesisstream-batch_request_max_count">batch_request_max_count (int, optional)</h3><p>Integer, default 500. The number of max count of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><h3 id="kinesisstream-batch_request_max_size">batch_request_max_size (int, optional)</h3><p>Integer. The number of max size of making batch request from record chunk. It can&rsquo;t exceed the default value because it&rsquo;s API limit.</p><h3 id="kinesisstream-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="kinesisstream-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="kinesisstream-partition_key">partition_key (string, optional)</h3><p>A key to extract partition key from JSON object. Default nil, which means partition key will be generated randomly.</p><h3 id="kinesisstream-process_credentials">process_credentials (*KinesisStreamProcessCredentials, optional)</h3><p>This loads AWS access credentials from an external process.</p><h3 id="kinesisstream-region">region (string, optional)</h3><p>AWS region of your stream. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><h3 id="kinesisstream-reset_backoff_if_success">reset_backoff_if_success (bool, optional)</h3><p>Boolean, default true. If enabled, when after retrying, the next retrying checks the number of succeeded records on the former batch request and reset exponential backoff if there is any success. Because batch request could be composed by requests across shards, simple exponential backoff for the batch request wouldn&rsquo;t work some cases.</p><h3 id="kinesisstream-retries_on_batch_request">retries_on_batch_request (int, optional)</h3><p>The plugin will put multiple records to Amazon Kinesis Data Streams in batches using PutRecords. A set of records in a batch may fail for reasons documented in the Kinesis Service API Reference for PutRecords. Failed records will be retried retries_on_batch_request times</p><h3 id="kinesisstream-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="kinesisstream-stream_name">stream_name (string, required)</h3><p>Name of the stream to put data.</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="assume-role-credentials-duration_seconds">duration_seconds (string, optional)</h3><p>The duration, in seconds, of the role session (900-3600)</p><h3 id="assume-role-credentials-external_id">external_id (string, optional)</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><h3 id="assume-role-credentials-policy">policy (string, optional)</h3><p>An IAM policy in JSON format</p><h3 id="assume-role-credentials-role_arn">role_arn (string, required)</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><h3 id="assume-role-credentials-role_session_name">role_session_name (string, required)</h3><p>An identifier for the assumed role session</p><h2 id="process-credentials">Process Credentials</h2><p>process_credentials</p><h3 id="process-credentials-process">process (string, required)</h3><p>Command more info: <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/ProcessCredentials.html</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f6b80b815b14c83b2fe835b820aa13d0">4.7 - Amazon S3</h1><h1 id="amazon-s3-plugin-for-fluentd">Amazon S3 plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>The <strong>s3</strong> output plugin buffers event logs in local file and upload it to S3 periodically. This plugin splits files exactly by using the time of event logs (not the time when the logs are received). For example, a log &lsquo;2011-01-02 message B&rsquo; is reached, and then another log &lsquo;2011-01-03 message B&rsquo; is reached in this order, the former one is stored in &ldquo;20110102.gz&rdquo; file, and latter one in &ldquo;20110103.gz&rdquo; file.</p><p>For a detailed example, see <a href="../../../../quickstarts/example-s3/">S3 Output Deployment</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">s3</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsAccessKeyId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">aws_sec_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">awsSecretAccessKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">s3_bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-amazon-s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">s3_region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">eu-central-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logs/${tag}/%Y/%m/%d/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-acl">acl (string, optional)</h3><p>Permission for the object in S3</p><h3 id="output-config-assume_role_credentials">assume_role_credentials (*S3AssumeRoleCredentials, optional)</h3><p><a href="#assume-role-credentials">Assume Role Credentials</a></p><h3 id="output-config-auto_create_bucket">auto_create_bucket (string, optional)</h3><p>Create S3 bucket if it does not exists</p><h3 id="aws_key_id-secretsecret-optional-output-config-aws_key_id">aws_key_id (*secret.Secret, optional) {#output config-aws_key_id}</h3><p>AWS access key id <a href="../secret/">Secret</a></p><h3 id="output-config-aws_iam_retries">aws_iam_retries (string, optional)</h3><p>The number of attempts to load instance profile credentials from the EC2 metadata service using IAM role</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key. <a href="../secret/">Secret</a></p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-check_apikey_on_start">check_apikey_on_start (string, optional)</h3><p>Check AWS key on start</p><h3 id="output-config-check_bucket">check_bucket (string, optional)</h3><p>Check bucket if exists or not</p><h3 id="output-config-check_object">check_object (string, optional)</h3><p>Check object before creation</p><h3 id="output-config-clustername">clustername (string, optional)</h3><p>Custom cluster name</p><p>Default: one-eye</p><h3 id="output-config-compress">compress (*Compress, optional)</h3><p>Parquet compressor</p><h3 id="output-config-compute_checksums">compute_checksums (string, optional)</h3><p>AWS SDK uses MD5 for API request/response by default</p><h3 id="output-config-enable_transfer_acceleration">enable_transfer_acceleration (string, optional)</h3><p>If true, S3 Transfer Acceleration will be enabled for uploads. IMPORTANT: You must first enable this feature on your destination S3 bucket</p><h3 id="output-config-force_path_style">force_path_style (string, optional)</h3><p>If true, the bucket name is always left in the request URI and never moved to the host as a sub-domain</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="output-config-grant_full_control">grant_full_control (string, optional)</h3><p>Allows grantee READ, READ_ACP, and WRITE_ACP permissions on the object</p><h3 id="output-config-grant_read">grant_read (string, optional)</h3><p>Allows grantee to read the object data and its metadata</p><h3 id="output-config-grant_read_acp">grant_read_acp (string, optional)</h3><p>Allows grantee to read the object ACL</p><h3 id="output-config-grant_write_acp">grant_write_acp (string, optional)</h3><p>Allows grantee to write the ACL for the applicable object</p><h3 id="output-config-hex_random_length">hex_random_length (string, optional)</h3><p>The length of <code>%{hex_random}</code> placeholder(4-16)</p><h3 id="output-config-index_format">index_format (string, optional)</h3><p><code>sprintf</code> format for <code>%{index}</code></p><h3 id="output-config-instance_profile_credentials">instance_profile_credentials (*S3InstanceProfileCredentials, optional)</h3><p><a href="#instance-profile-credentials">Instance Profile Credentials</a></p><h3 id="output-config-oneeye_format">oneeye_format (bool, optional)</h3><p>One-eye format trigger</p><p>Default: false</p><h3 id="output-config-overwrite">overwrite (string, optional)</h3><p>Overwrite already existing path</p><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on S3</p><h3 id="output-config-proxy_uri">proxy_uri (string, optional)</h3><p>URI of proxy environment</p><h3 id="output-config-s3_bucket">s3_bucket (string, required)</h3><p>S3 bucket name</p><h3 id="output-config-s3_endpoint">s3_endpoint (string, optional)</h3><p>Custom S3 endpoint (like minio)</p><h3 id="output-config-s3_metadata">s3_metadata (string, optional)</h3><p>Arbitrary S3 metadata headers to set for the object</p><h3 id="output-config-s3_object_key_format">s3_object_key_format (string, optional)</h3><p>The format of S3 object keys (default: <code>%{path}%{time_slice}_%{uuid_hash}_%{index}.%{file_extension}</code>)</p><p>Default: %{path}%{time_slice}<em>%{uuid_hash}</em>%{index}.%{file_extension}</p><h3 id="output-config-s3_region">s3_region (string, optional)</h3><p>S3 region name</p><h3 id="output-config-shared_credentials">shared_credentials (*S3SharedCredentials, optional)</h3><p><a href="#shared-credentials">Shared Credentials</a></p><h3 id="output-config-signature_version">signature_version (string, optional)</h3><p>Signature version for API Request (s3,v4)</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-sse_customer_algorithm">sse_customer_algorithm (string, optional)</h3><p>Specifies the algorithm to use to when encrypting the object</p><h3 id="output-config-sse_customer_key">sse_customer_key (string, optional)</h3><p>Specifies the customer-provided encryption key for Amazon S3 to use in encrypting data</p><h3 id="output-config-sse_customer_key_md5">sse_customer_key_md5 (string, optional)</h3><p>Specifies the 128-bit MD5 digest of the encryption key according to RFC 1321</p><h3 id="ssekms_key_id-string-optional-output-config-ssekms_key_id">ssekms_key_id (string, optional) {#output config-ssekms_key_id}</h3><p>Specifies the AWS KMS key ID to use for object encryption</p><h3 id="ssl_verify_peer-string-optional-output-config-ssl_verify_peer">ssl_verify_peer (string, optional) {#output config-ssl_verify_peer}</h3><p>If false, the certificate of endpoint will not be verified</p><h3 id="output-config-storage_class">storage_class (string, optional)</h3><p>The type of storage to use for the object, for example STANDARD, REDUCED_REDUNDANCY, STANDARD_IA, ONEZONE_IA, INTELLIGENT_TIERING, GLACIER, DEEP_ARCHIVE, OUTPOSTS, GLACIER_IR For a complete list of possible values, see the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html#AmazonS3-PutObject-request-header-StorageClass">Amazon S3 API reference</a>.</p><h3 id="output-config-store_as">store_as (string, optional)</h3><p>Archive format on S3</p><h3 id="output-config-use_bundled_cert">use_bundled_cert (string, optional)</h3><p>Use aws-sdk-ruby bundled cert</p><h3 id="output-config-use_server_side_encryption">use_server_side_encryption (string, optional)</h3><p>The Server-side encryption algorithm used when storing this object in S3 (AES256, aws:kms)</p><h3 id="output-config-warn_for_delay">warn_for_delay (string, optional)</h3><p>Given a threshold to treat events as delay, output warning logs if delayed events were put into s3</p><h2 id="assume-role-credentials">Assume Role Credentials</h2><p>assume_role_credentials</p><h3 id="duration_seconds-string-optional-assume-role-credentials-duration_seconds">duration_seconds (string, optional) {#assume role-credentials-duration_seconds}</h3><p>The duration, in seconds, of the role session (900-3600)</p><h3 id="external_id-string-optional-assume-role-credentials-external_id">external_id (string, optional) {#assume role-credentials-external_id}</h3><p>A unique identifier that is used by third parties when assuming roles in their customers&rsquo; accounts.</p><h3 id="policy-string-optional-assume-role-credentials-policy">policy (string, optional) {#assume role-credentials-policy}</h3><p>An IAM policy in JSON format</p><h3 id="role_arn-string-required-assume-role-credentials-role_arn">role_arn (string, required) {#assume role-credentials-role_arn}</h3><p>The Amazon Resource Name (ARN) of the role to assume</p><h3 id="role_session_name-string-required-assume-role-credentials-role_session_name">role_session_name (string, required) {#assume role-credentials-role_session_name}</h3><p>An identifier for the assumed role session</p><h2 id="instance-profile-credentials">Instance Profile Credentials</h2><p>instance_profile_credentials</p><h3 id="http_open_timeout-string-optional-instance-profile-credentials-http_open_timeout">http_open_timeout (string, optional) {#instance profile-credentials-http_open_timeout}</h3><p>Number of seconds to wait for the connection to open</p><h3 id="http_read_timeout-string-optional-instance-profile-credentials-http_read_timeout">http_read_timeout (string, optional) {#instance profile-credentials-http_read_timeout}</h3><p>Number of seconds to wait for one block to be read</p><h3 id="ip_address-string-optional-instance-profile-credentials-ip_address">ip_address (string, optional) {#instance profile-credentials-ip_address}</h3><p>IP address</p><p>Default: 169.254.169.254</p><h3 id="port-string-optional-instance-profile-credentials-port">port (string, optional) {#instance profile-credentials-port}</h3><p>Port number</p><p>Default: 80</p><h3 id="retries-string-optional-instance-profile-credentials-retries">retries (string, optional) {#instance profile-credentials-retries}</h3><p>Number of times to retry when retrieving credentials</p><h2 id="shared-credentials">Shared Credentials</h2><p>shared_credentials</p><h3 id="shared-credentials-path">path (string, optional)</h3><p>Path to the shared file.</p><p>Default: $HOME/.aws/credentials</p><h3 id="shared-credentials-profile_name">profile_name (string, optional)</h3><p>Profile name. Default to &lsquo;default&rsquo; or ENV[&lsquo;AWS_PROFILE&rsquo;]</p><h2 id="parquet-compressor">Parquet compressor</h2><p>parquet compressor</p><h3 id="parquet-compressor-parquet_compression_codec">parquet_compression_codec (string, optional)</h3><p>Parquet compression codec. (uncompressed, snappy, gzip, lzo, brotli, lz4, zstd)</p><p>Default: snappy</p><h3 id="parquet-compressor-parquet_page_size">parquet_page_size (string, optional)</h3><p>Parquet file page size.</p><p>Default: 8192 bytes</p><h3 id="parquet-compressor-parquet_row_group_size">parquet_row_group_size (string, optional)</h3><p>Parquet file row group size.</p><p>Default: 128 MB</p><h3 id="parquet-compressor-record_type">record_type (string, optional)</h3><p>Record data format type. (avro csv jsonl msgpack tsv msgpack json)</p><p>Default: msgpack</p><h3 id="parquet-compressor-schema_file">schema_file (string, optional)</h3><p>Path to schema file.</p><h3 id="parquet-compressor-schema_type">schema_type (string, optional)</h3><p>Schema type. (avro, bigquery)</p><p>Default: avro</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3fa3b93039c08434aba115eb9ab22b12">4.8 - Azure Storage</h1><h1 id="azure-storage-output-plugin-for-fluentd">Azure Storage output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Azure Storage output plugin buffers logs in local file and upload them to Azure Storage periodically.
More info at <a href="https://github.com/microsoft/fluent-plugin-azure-storage-append-blob">https://github.com/microsoft/fluent-plugin-azure-storage-append-blob</a></p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-auto_create_container">auto_create_container (bool, optional)</h3><p>Automatically create container if not exists</p><p>Default: true</p><h3 id="output-config-azure_cloud">azure_cloud (string, optional)</h3><p>Available in Logging operator version 4.5 and later. Azure Cloud to use, for example, AzurePublicCloud, AzureChinaCloud, AzureGermanCloud, AzureUSGovernmentCloud, AZURESTACKCLOUD (in uppercase). This field is supported only if the fluentd plugin honors it, for example, <a href="https://github.com/elsesiy/fluent-plugin-azure-storage-append-blob-lts">https://github.com/elsesiy/fluent-plugin-azure-storage-append-blob-lts</a></p><h3 id="output-config-azure_container">azure_container (string, required)</h3><p>Your azure storage container</p><h3 id="output-config-azure_imds_api_version">azure_imds_api_version (string, optional)</h3><p>Azure Instance Metadata Service API Version</p><h3 id="output-config-azure_object_key_format">azure_object_key_format (string, optional)</h3><p>Object key format</p><p>Default: %{path}%{time_slice}_%{index}.%{file_extension}</p><h3 id="output-config-azure_storage_access_key">azure_storage_access_key (*secret.Secret, optional)</h3><p>Your azure storage access key <a href="../secret/">Secret</a></p><h3 id="output-config-azure_storage_account">azure_storage_account (*secret.Secret, required)</h3><p>Your azure storage account <a href="../secret/">Secret</a></p><h3 id="output-config-azure_storage_sas_token">azure_storage_sas_token (*secret.Secret, optional)</h3><p>Your azure storage sas token <a href="../secret/">Secret</a></p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-format">format (string, optional)</h3><p>Compat format type: out_file, json, ltsv (default: out_file)</p><p>Default: json</p><h3 id="output-config-path">path (string, optional)</h3><p>Path prefix of the files on Azure</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-67bcee478125d9574288135a71954591">4.9 - Buffer</h1><h2 id="buffer">Buffer</h2><h3 id="buffer-chunk_full_threshold">chunk_full_threshold (string, optional)</h3><p>The percentage of chunk size threshold for flushing. output plugin will flush the chunk when actual size reaches chunk_limit_size * chunk_full_threshold (== 8MB * 0.95 in default)</p><h3 id="buffer-chunk_limit_records">chunk_limit_records (int, optional)</h3><p>The max number of events that each chunks can store in it</p><h3 id="buffer-chunk_limit_size">chunk_limit_size (string, optional)</h3><p>The max size of each chunks: events will be written into chunks until the size of chunks become this size</p><p>Default: 8MB</p><h3 id="buffer-compress">compress (string, optional)</h3><p>If you set this option to gzip, you can get Fluentd to compress data records before writing to buffer chunks.</p><h3 id="buffer-delayed_commit_timeout">delayed_commit_timeout (string, optional)</h3><p>The timeout seconds until output plugin decides that async write operation fails</p><h3 id="buffer-disable_chunk_backup">disable_chunk_backup (bool, optional)</h3><p>Instead of storing unrecoverable chunks in the backup directory, just discard them. This option is new in Fluentd v1.2.6.</p><h3 id="buffer-disabled">disabled (bool, optional)</h3><p>Disable buffer section (default: false)</p><p>Default: false,hidden</p><h3 id="buffer-flush_at_shutdown">flush_at_shutdown (bool, optional)</h3><p>The value to specify to flush/write all buffer chunks at shutdown, or not</p><h3 id="buffer-flush_interval">flush_interval (string, optional)</h3><p>Default: 60s</p><h3 id="buffer-flush_mode">flush_mode (string, optional)</h3><p>Default: default (equals to lazy if time is specified as chunk key, interval otherwise) lazy: flush/write chunks once per timekey interval: flush/write chunks per specified time via flush_interval immediate: flush/write chunks immediately after events are appended into chunks</p><h3 id="buffer-flush_thread_burst_interval">flush_thread_burst_interval (string, optional)</h3><p>The sleep interval seconds of threads between flushes when output plugin flushes waiting chunks next to next</p><h3 id="buffer-flush_thread_count">flush_thread_count (int, optional)</h3><p>The number of threads of output plugins, which is used to write chunks in parallel</p><h3 id="buffer-flush_thread_interval">flush_thread_interval (string, optional)</h3><p>The sleep interval seconds of threads to wait next flush trial (when no chunks are waiting)</p><h3 id="buffer-overflow_action">overflow_action (string, optional)</h3><p>How output plugin behaves when its buffer queue is full throw_exception: raise exception to show this error in log block: block processing of input plugin to emit events into that buffer drop_oldest_chunk: drop/purge oldest chunk to accept newly incoming chunk</p><h3 id="buffer-path">path (string, optional)</h3><p>The path where buffer chunks are stored. The &lsquo;*&rsquo; is replaced with random characters. It&rsquo;s highly recommended to leave this default.</p><p>Default: operator generated</p><h3 id="buffer-queue_limit_length">queue_limit_length (int, optional)</h3><p>The queue length limitation of this buffer plugin instance</p><h3 id="buffer-queued_chunks_limit_size">queued_chunks_limit_size (int, optional)</h3><p>Limit the number of queued chunks. If you set smaller flush_interval, e.g. 1s, there are lots of small queued chunks in buffer. This is not good with file buffer because it consumes lots of fd resources when output destination has a problem. This parameter mitigates such situations.</p><h3 id="buffer-retry_exponential_backoff_base">retry_exponential_backoff_base (string, optional)</h3><p>The base number of exponential backoff for retries</p><h3 id="buffer-retry_forever">retry_forever (*bool, optional)</h3><p>If true, plugin will ignore retry_timeout and retry_max_times options and retry flushing forever</p><p>Default: true</p><h3 id="buffer-retry_max_interval">retry_max_interval (string, optional)</h3><p>The maximum interval seconds for exponential backoff between retries while failing</p><h3 id="buffer-retry_max_times">retry_max_times (int, optional)</h3><p>The maximum number of times to retry to flush while failing</p><h3 id="buffer-retry_randomize">retry_randomize (bool, optional)</h3><p>If true, output plugin will retry after randomized interval not to do burst retries</p><h3 id="buffer-retry_secondary_threshold">retry_secondary_threshold (string, optional)</h3><p>The ratio of retry_timeout to switch to use secondary while failing (Maximum valid value is 1.0)</p><h3 id="buffer-retry_timeout">retry_timeout (string, optional)</h3><p>The maximum seconds to retry to flush while failing, until plugin discards buffer chunks</p><h3 id="buffer-retry_type">retry_type (string, optional)</h3><p>exponential_backoff: wait seconds will become large exponentially per failures periodic: output plugin will retry periodically with fixed intervals (configured via retry_wait)</p><h3 id="buffer-retry_wait">retry_wait (string, optional)</h3><p>Seconds to wait before next retry to flush, or constant factor of exponential backoff</p><h3 id="buffer-tags">tags (*string, optional)</h3><p>When tag is specified as buffer chunk key, output plugin writes events into chunks separately per tags.</p><p>Default: tag,time</p><h3 id="buffer-timekey">timekey (string, required)</h3><p>Output plugin will flush chunks per specified time (enabled when time is specified in chunk keys)</p><p>Default: 10m</p><h3 id="buffer-timekey_use_utc">timekey_use_utc (bool, optional)</h3><p>Output plugin decides to use UTC or not to format placeholders using timekey</p><h3 id="buffer-timekey_wait">timekey_wait (string, optional)</h3><p>Output plugin writes chunks after timekey_wait seconds later after timekey expiration</p><p>Default: 1m</p><h3 id="buffer-timekey_zone">timekey_zone (string, optional)</h3><p>The timezone (-0700 or Asia/Tokyo) string for formatting timekey placeholders</p><h3 id="buffer-total_limit_size">total_limit_size (string, optional)</h3><p>The size limitation of this buffer plugin instance. Once the total size of stored buffer reached this threshold, all append operations will fail with error (and data will be lost)</p><h3 id="buffer-type">type (string, optional)</h3><p>Fluentd core bundles memory and file plugins. 3rd party plugins are also available when installed.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-cfa15a5d894da7ae0606dc5571b76531">4.10 - Datadog</h1><h1 id="datadog-output-plugin-for-fluentd">Datadog output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>It mainly contains a proper JSON formatter and a socket handler that streams logs directly to Datadog - so no need to use a log shipper if you don&rsquo;t want to.
For details, see <a href="https://github.com/DataDog/fluent-plugin-datadog">https://github.com/DataDog/fluent-plugin-datadog</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">datadog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">api_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;YOUR_API_KEY&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># For referencing a secret, see https://kube-logging.dev/docs/configuration/plugins/outputs/secret/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_source</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;INTEGRATION_NAME&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;KEY1:VALUE1&gt;,&lt;KEY2:VALUE2&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">dd_sourcecategory</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&lt;YOUR_SOURCE_CATEGORY&gt;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-api_key">api_key (*secret.Secret, required)</h3><p>This parameter is required in order to authenticate your fluent agent.</p><p>Default: nil</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-compression_level">compression_level (string, optional)</h3><p>Set the log compression level for HTTP (1 to 9, 9 being the best ratio)</p><p>Default: &ldquo;6&rdquo;</p><h3 id="output-config-dd_hostname">dd_hostname (string, optional)</h3><p>Used by Datadog to identify the host submitting the logs.</p><p>Default: &ldquo;hostname -f&rdquo;</p><h3 id="output-config-dd_source">dd_source (string, optional)</h3><p>This tells Datadog what integration it is</p><p>Default: nil</p><h3 id="output-config-dd_sourcecategory">dd_sourcecategory (string, optional)</h3><p>Multiple value attribute. Can be used to refine the source attribute</p><p>Default: nil</p><h3 id="output-config-dd_tags">dd_tags (string, optional)</h3><p>Custom tags with the following format &ldquo;key1:value1, key2:value2&rdquo;</p><p>Default: nil</p><h3 id="output-config-host">host (string, optional)</h3><p>Proxy endpoint when logs are not directly forwarded to Datadog</p><p>Default: &ldquo;http-intake.logs.datadoghq.com&rdquo;</p><h3 id="output-config-include_tag_key">include_tag_key (bool, optional)</h3><p>Automatically include the Fluentd tag in the record.</p><p>Default: false</p><h3 id="output-config-max_backoff">max_backoff (string, optional)</h3><p>The maximum time waited between each retry in seconds</p><p>Default: &ldquo;30&rdquo;</p><h3 id="output-config-max_retries">max_retries (string, optional)</h3><p>The number of retries before the output plugin stops. Set to -1 for unlimited retries</p><p>Default: &ldquo;-1&rdquo;</p><h3 id="output-config-no_ssl_validation">no_ssl_validation (bool, optional)</h3><p>Disable SSL validation (useful for proxy forwarding)</p><p>Default: false</p><h3 id="output-config-port">port (string, optional)</h3><p>Proxy port when logs are not directly forwarded to Datadog and ssl is not used</p><p>Default: &ldquo;80&rdquo;</p><h3 id="output-config-service">service (string, optional)</h3><p>Used by Datadog to correlate between logs, traces and metrics.</p><p>Default: nil</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-ssl_port">ssl_port (string, optional)</h3><p>Port used to send logs over a SSL encrypted connection to Datadog. If use_http is disabled, use 10516 for the US region and 443 for the EU region.</p><p>Default: &ldquo;443&rdquo;</p><h3 id="output-config-tag_key">tag_key (string, optional)</h3><p>Where to store the Fluentd tag.</p><p>Default: &ldquo;tag&rdquo;</p><h3 id="output-config-timestamp_key">timestamp_key (string, optional)</h3><p>Name of the attribute which will contain timestamp of the log event. If nil, timestamp attribute is not added.</p><p>Default: &ldquo;@timestamp&rdquo;</p><h3 id="output-config-use_compression">use_compression (bool, optional)</h3><p>Enable log compression for HTTP</p><p>Default: true</p><h3 id="output-config-use_http">use_http (bool, optional)</h3><p>Enable HTTP forwarding. If you disable it, make sure to change the port to 10514 or ssl_port to 10516</p><p>Default: true</p><h3 id="output-config-use_json">use_json (bool, optional)</h3><p>Event format, if true, the event is sent in json format. Othwerwise, in plain text.</p><p>Default: true</p><h3 id="output-config-use_ssl">use_ssl (bool, optional)</h3><p>If true, the agent initializes a secure connection to Datadog. In clear TCP otherwise.</p><p>Default: true</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d4855c4f7dc79bc11e74c046473de585">4.11 - Elasticsearch</h1><h1 id="elasticsearch-output-plugin-for-fluentd">Elasticsearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/uken/fluent-plugin-elasticsearch">https://github.com/uken/fluent-plugin-elasticsearch</a>.</p><p>Example Deployment: <a href="../../../../quickstarts/es-nginx/">Save all logs to Elasticsearch</a></p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">elasticsearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elasticsearch-elasticsearch-cluster.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9200</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_version</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">TLSv1_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="elasticsearch">Elasticsearch</h2><p>Send your logs to Elasticsearch</p><h3 id="elasticsearch-api_key">api_key (*secret.Secret, optional)</h3><p>api_key parameter adds authentication header.</p><h3 id="elasticsearch-application_name">application_name (*string, optional)</h3><p>Specify the application name for the rollover index to be created.</p><p>Default: default</p><h3 id="elasticsearch-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="elasticsearch-bulk_message_request_threshold">bulk_message_request_threshold (string, optional)</h3><p>Configure bulk_message request splitting threshold size. Default value is 20MB. (20 * 1024 * 1024) If you specify this size as negative number, bulk_message request splitting feature will be disabled.</p><p>Default: 20MB</p><h3 id="elasticsearch-compression_level">compression_level (string, optional)</h3><p>Option for compressing the output data using gzip. Valid options: default_compression, best_compression, best_speed, no_compression.</p><p>Default: no_compression</p><h3 id="elasticsearch-content_type">content_type (string, optional)</h3><p>With content_type application/x-ndjson, elasticsearch plugin adds application/x-ndjson as Content-Profile in payload.</p><p>Default: application/json</p><h3 id="elasticsearch-custom_headers">custom_headers (string, optional)</h3><p>This parameter adds additional headers to request. Example: {&ldquo;token&rdquo;:&ldquo;secret&rdquo;}</p><p>Default: {}</p><h3 id="elasticsearch-customize_template">customize_template (string, optional)</h3><p>Specify the string and its value to be replaced in form of hash. Can contain multiple key value pair that would be replaced in the specified template_file. This setting only creates template and to add rollover index please check the rollover_index configuration.</p><h3 id="elasticsearch-data_stream_enable">data_stream_enable (*bool, optional)</h3><p>Use @type elasticsearch_data_stream</p><h3 id="elasticsearch-data_stream_ilm_name">data_stream_ilm_name (string, optional)</h3><p>Specify an existing ILM policy to be applied to the data stream. If not present, either the specified template&rsquo;s or a new ILM default policy is applied. Further details here <a href="https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream">https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream</a></p><p>Default: data_stream_name</p><h3 id="elasticsearch-data_stream_ilm_policy">data_stream_ilm_policy (string, optional)</h3><p>Specify data stream ILM policy contents as Hash.</p><h3 id="elasticsearch-data_stream_ilm_policy_overwrite">data_stream_ilm_policy_overwrite (bool, optional)</h3><p>Specify whether overwriting data stream ilm policy or not.</p><h3 id="elasticsearch-data_stream_name">data_stream_name (string, optional)</h3><p>You can specify Elasticsearch data stream name by this parameter. This parameter is mandatory for elasticsearch_data_stream. There are some limitations about naming rule. For more details <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-create-data-stream.html#indices-create-data-stream-api-path-params">https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-create-data-stream.html#indices-create-data-stream-api-path-params</a></p><h3 id="elasticsearch-data_stream_template_name">data_stream_template_name (string, optional)</h3><p>Specify an existing index template for the data stream. If not present, a new template is created and named after the data stream. Further details here <a href="https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream">https://github.com/uken/fluent-plugin-elasticsearch#configuration---elasticsearch-output-data-stream</a></p><p>Default: data_stream_name</p><h3 id="elasticsearch-default_elasticsearch_version">default_elasticsearch_version (string, optional)</h3><p>This parameter changes that ES plugin assumes default Elasticsearch version.</p><p>Default: 5</p><h3 id="elasticsearch-deflector_alias">deflector_alias (string, optional)</h3><p>Specify the deflector alias which would be assigned to the rollover index created. This is useful in case of using the Elasticsearch rollover API</p><h3 id="elasticsearch-enable_ilm">enable_ilm (bool, optional)</h3><p>Enable Index Lifecycle Management (ILM).</p><h3 id="elasticsearch-exception_backup">exception_backup (*bool, optional)</h3><p>Indicates whether to backup chunk when ignore exception occurs. (default: true)</p><p>Default: true</p><h3 id="elasticsearch-fail_on_detecting_es_version_retry_exceed">fail_on_detecting_es_version_retry_exceed (*bool, optional)</h3><p>fail_on_detecting_es_version_retry_exceed (default: true)</p><p>Default: true</p><h3 id="elasticsearch-fail_on_putting_template_retry_exceed">fail_on_putting_template_retry_exceed (*bool, optional)</h3><p>Indicates whether to fail when max_retry_putting_template is exceeded. If you have multiple output plugin, you could use this property to do not fail on fluentd statup.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-flatten_hashes">flatten_hashes (bool, optional)</h3><p>Elasticsearch will complain if you send object and concrete values to the same field. For example, you might have logs that look this, from different places: {&ldquo;people&rdquo; => 100} {&ldquo;people&rdquo; => {&ldquo;some&rdquo; => &ldquo;thing&rdquo;}} The second log line will be rejected by the Elasticsearch parser because objects and concrete values can&rsquo;t live in the same field. To combat this, you can enable hash flattening.</p><h3 id="elasticsearch-flatten_hashes_separator">flatten_hashes_separator (string, optional)</h3><p>Flatten separator</p><h3 id="elasticsearch-host">host (string, optional)</h3><p>You can specify the Elasticsearch host using this parameter.</p><p>Default: localhost</p><h3 id="elasticsearch-hosts">hosts (string, optional)</h3><p>You can specify multiple Elasticsearch hosts with separator &ldquo;,&rdquo;. If you specify the <code>hosts</code> option, the <code>host</code> and <code>port</code> options are ignored.</p><h3 id="elasticsearch-http_backend">http_backend (string, optional)</h3><p>With http_backend typhoeus, elasticsearch plugin uses typhoeus faraday http backend. Typhoeus can handle HTTP keepalive.</p><p>Default: excon</p><h3 id="elasticsearch-id_key">id_key (string, optional)</h3><p><a href="https://github.com/uken/fluent-plugin-elasticsearch#id_key">https://github.com/uken/fluent-plugin-elasticsearch#id_key</a></p><h3 id="elasticsearch-ignore_exceptions">ignore_exceptions (string, optional)</h3><p>A list of exception that will be ignored - when the exception occurs the chunk will be discarded and the buffer retry mechanism won&rsquo;t be called. It is possible also to specify classes at higher level in the hierarchy. For example <code>ignore_exceptions ["Elasticsearch::Transport::Transport::ServerError"]</code> will match all subclasses of ServerError - Elasticsearch::Transport::Transport::Errors::BadRequest, Elasticsearch::Transport::Transport::Errors::ServiceUnavailable, etc.</p><h3 id="elasticsearch-ilm_policy">ilm_policy (string, optional)</h3><p>Specify ILM policy contents as Hash.</p><h3 id="elasticsearch-ilm_policy_id">ilm_policy_id (string, optional)</h3><p>Specify ILM policy id.</p><h3 id="elasticsearch-ilm_policy_overwrite">ilm_policy_overwrite (bool, optional)</h3><p>Specify whether overwriting ilm policy or not.</p><h3 id="elasticsearch-include_index_in_url">include_index_in_url (bool, optional)</h3><p>With this option set to true, Fluentd manifests the index name in the request URL (rather than in the request body). You can use this option to enforce an URL-based access control.</p><h3 id="elasticsearch-include_tag_key">include_tag_key (bool, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: false</p><h3 id="elasticsearch-include_timestamp">include_timestamp (bool, optional)</h3><p>Adds a @timestamp field to the log, following all settings logstash_format does, except without the restrictions on index_name. This allows one to log to an alias in Elasticsearch and utilize the rollover API.</p><p>Default: false</p><h3 id="elasticsearch-index_date_pattern">index_date_pattern (*string, optional)</h3><p>Specify this to override the index date pattern for creating a rollover index.</p><p>Default: now/d</p><h3 id="elasticsearch-index_name">index_name (string, optional)</h3><p>The index name to write events to</p><p>Default: fluentd</p><h3 id="elasticsearch-index_prefix">index_prefix (string, optional)</h3><p>Specify the index prefix for the rollover index to be created.</p><p>Default: logstash</p><h3 id="elasticsearch-log_es_400_reason">log_es_400_reason (bool, optional)</h3><p>By default, the error logger won&rsquo;t record the reason for a 400 error from the Elasticsearch API unless you set log_level to debug. However, this results in a lot of log spam, which isn&rsquo;t desirable if all you want is the 400 error reasons. You can set this true to capture the 400 error reasons without all the other debug logs.</p><p>Default: false</p><h3 id="elasticsearch-logstash_dateformat">logstash_dateformat (string, optional)</h3><p>Set the Logstash date format.</p><p>Default: %Y.%m.%d</p><h3 id="elasticsearch-logstash_format">logstash_format (bool, optional)</h3><p>Enable Logstash log format.</p><p>Default: false</p><h3 id="elasticsearch-logstash_prefix">logstash_prefix (string, optional)</h3><p>Set the Logstash prefix.</p><p>Default: logstash</p><h3 id="elasticsearch-logstash_prefix_separator">logstash_prefix_separator (string, optional)</h3><p>Set the Logstash prefix separator.</p><p>Default: -</p><h3 id="elasticsearch-max_retry_get_es_version">max_retry_get_es_version (string, optional)</h3><p>You can specify the number of times to retry fetching the Elasticsearch version.</p><p>Default: 15</p><h3 id="elasticsearch-max_retry_putting_template">max_retry_putting_template (string, optional)</h3><p>You can specify times of retry putting template.</p><p>Default: 10</p><h3 id="elasticsearch-password">password (*secret.Secret, optional)</h3><p>Password for HTTP Basic authentication. <a href="../secret/">Secret</a></p><h3 id="elasticsearch-path">path (string, optional)</h3><p>Path for HTTP Basic authentication.</p><h3 id="elasticsearch-pipeline">pipeline (string, optional)</h3><p>This param is to set a pipeline id of your elasticsearch to be added into the request, you can configure ingest node.</p><h3 id="elasticsearch-port">port (int, optional)</h3><p>You can specify the Elasticsearch port using this parameter.</p><p>Default: 9200</p><h3 id="elasticsearch-prefer_oj_serializer">prefer_oj_serializer (bool, optional)</h3><p>With default behavior, Elasticsearch client uses Yajl as JSON encoder/decoder. Oj is the alternative high performance JSON encoder/decoder. When this parameter sets as true, Elasticsearch client uses Oj as JSON encoder/decoder.</p><p>Default: false</p><h3 id="elasticsearch-reconnect_on_error">reconnect_on_error (bool, optional)</h3><p>Indicates that the plugin should reset connection on any error (reconnect on next send). By default it will reconnect only on &ldquo;host unreachable exceptions&rdquo;. We recommended to set this true in the presence of elasticsearch shield.</p><p>Default: false</p><h3 id="elasticsearch-reload_after">reload_after (string, optional)</h3><p>When <code>reload_connections</code> is true, this is the integer number of operations after which the plugin will reload the connections. The default value is 10000.</p><h3 id="elasticsearch-reload_connections">reload_connections (*bool, optional)</h3><p>You can tune how the elasticsearch-transport host reloading feature works.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-reload_on_failure">reload_on_failure (bool, optional)</h3><p>Indicates that the elasticsearch-transport will try to reload the nodes addresses if there is a failure while making the request. This can be useful to quickly remove a dead node from the list of addresses.</p><p>Default: false</p><h3 id="elasticsearch-remove_keys">remove_keys (string, optional)</h3><p><a href="https://github.com/uken/fluent-plugin-elasticsearch#remove_keys">https://github.com/uken/fluent-plugin-elasticsearch#remove_keys</a></p><h3 id="elasticsearch-remove_keys_on_update">remove_keys_on_update (string, optional)</h3><p>Remove keys on update will not update the configured keys in elasticsearch when a record is being updated. This setting only has any effect if the write operation is update or upsert.</p><h3 id="elasticsearch-remove_keys_on_update_key">remove_keys_on_update_key (string, optional)</h3><p>This setting allows remove_keys_on_update to be configured with a key in each record, in much the same way as target_index_key works.</p><h3 id="elasticsearch-request_timeout">request_timeout (string, optional)</h3><p>You can specify HTTP request timeout.</p><p>Default: 5s</p><h3 id="elasticsearch-resurrect_after">resurrect_after (string, optional)</h3><p>You can set in the elasticsearch-transport how often dead connections from the elasticsearch-transport&rsquo;s pool will be resurrected.</p><p>Default: 60s</p><h3 id="elasticsearch-retry_tag">retry_tag (string, optional)</h3><p>This setting allows custom routing of messages in response to bulk request failures. The default behavior is to emit failed records using the same tag that was provided.</p><h3 id="elasticsearch-rollover_index">rollover_index (bool, optional)</h3><p>Specify this as true when an index with rollover capability needs to be created. <a href="https://github.com/uken/fluent-plugin-elasticsearch#rollover_index">https://github.com/uken/fluent-plugin-elasticsearch#rollover_index</a></p><p>Default: false</p><h3 id="elasticsearch-routing_key">routing_key (string, optional)</h3><p>Similar to parent_key config, will add _routing into elasticsearch command if routing_key is set and the field does exist in input event.</p><h3 id="elasticsearch-ca_file">ca_file (*secret.Secret, optional)</h3><p>CA certificate</p><h3 id="elasticsearch-client_cert">client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><h3 id="elasticsearch-client_key">client_key (*secret.Secret, optional)</h3><p>Client certificate key</p><h3 id="elasticsearch-client_key_pass">client_key_pass (*secret.Secret, optional)</h3><p>Client key password</p><h3 id="elasticsearch-scheme">scheme (string, optional)</h3><p>Connection scheme</p><p>Default: http</p><h3 id="elasticsearch-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="elasticsearch-sniffer_class_name">sniffer_class_name (string, optional)</h3><p>The default Sniffer used by the Elasticsearch::Transport class works well when Fluentd has a direct connection to all of the Elasticsearch servers and can make effective use of the _nodes API. This doesn&rsquo;t work well when Fluentd must connect through a load balancer or proxy. The parameter sniffer_class_name gives you the ability to provide your own Sniffer class to implement whatever connection reload logic you require. In addition, there is a new Fluent::Plugin::ElasticsearchSimpleSniffer class which reuses the hosts given in the configuration, which is typically the hostname of the load balancer or proxy. <a href="https://github.com/uken/fluent-plugin-elasticsearch#sniffer-class-name">https://github.com/uken/fluent-plugin-elasticsearch#sniffer-class-name</a></p><h3 id="elasticsearch-ssl_max_version">ssl_max_version (string, optional)</h3><p>Specify min/max SSL/TLS version</p><h3 id="elasticsearch-ssl_min_version">ssl_min_version (string, optional)</h3><h3 id="elasticsearch-ssl_verify">ssl_verify (*bool, optional)</h3><p>Skip ssl verification (default: true)</p><p>Default: true</p><h3 id="elasticsearch-ssl_version">ssl_version (string, optional)</h3><p>If you want to configure SSL/TLS version, you can specify ssl_version parameter. [SSLv23, TLSv1, TLSv1_1, TLSv1_2]</p><h3 id="elasticsearch-suppress_doc_wrap">suppress_doc_wrap (bool, optional)</h3><p>By default, record body is wrapped by &lsquo;doc&rsquo;. This behavior can not handle update script requests. You can set this to suppress doc wrapping and allow record body to be untouched.</p><p>Default: false</p><h3 id="elasticsearch-suppress_type_name">suppress_type_name (*bool, optional)</h3><p>Suppress type name to avoid warnings in Elasticsearch 7.x</p><h3 id="elasticsearch-tag_key">tag_key (string, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: tag</p><h3 id="elasticsearch-target_index_key">target_index_key (string, optional)</h3><p>Tell this plugin to find the index name to write to in the record under this key in preference to other mechanisms. Key can be specified as path to nested record using dot (&rsquo;.&rsquo;) as a separator. <a href="https://github.com/uken/fluent-plugin-elasticsearch#target_index_key">https://github.com/uken/fluent-plugin-elasticsearch#target_index_key</a></p><h3 id="elasticsearch-target_type_key">target_type_key (string, optional)</h3><p>Similar to target_index_key config, find the type name to write to in the record under this key (or nested record). If key not found in record - fallback to type_name.</p><p>Default: fluentd</p><h3 id="elasticsearch-template_file">template_file (*secret.Secret, optional)</h3><p>The path to the file containing the template to install. <a href="../secret/">Secret</a></p><h3 id="elasticsearch-template_name">template_name (string, optional)</h3><p>The name of the template to define. If a template by the name given is already present, it will be left unchanged, unless template_overwrite is set, in which case the template will be updated.</p><h3 id="elasticsearch-template_overwrite">template_overwrite (bool, optional)</h3><p>Always update the template, even if it already exists.</p><p>Default: false</p><h3 id="elasticsearch-templates">templates (string, optional)</h3><p>Specify index templates in form of hash. Can contain multiple templates.</p><h3 id="elasticsearch-time_key">time_key (string, optional)</h3><p>By default, when inserting records in Logstash format, @timestamp is dynamically created with the time at log ingestion. If you&rsquo;d like to use a custom time, include an @timestamp with your record.</p><h3 id="elasticsearch-time_key_format">time_key_format (string, optional)</h3><p>The format of the time stamp field (@timestamp or what you specify with time_key). This parameter only has an effect when logstash_format is true as it only affects the name of the index we write to.</p><h3 id="elasticsearch-time_parse_error_tag">time_parse_error_tag (string, optional)</h3><p>With logstash_format true, elasticsearch plugin parses timestamp field for generating index name. If the record has invalid timestamp value, this plugin emits an error event to @ERROR label with time_parse_error_tag configured tag.</p><h3 id="elasticsearch-time_precision">time_precision (string, optional)</h3><p>Should the record not include a time_key, define the degree of sub-second time precision to preserve from the time portion of the routed event.</p><h3 id="elasticsearch-type_name">type_name (string, optional)</h3><p>Set the index type for elasticsearch. This is the fallback if <code>target_type_key</code> is missing.</p><p>Default: fluentd</p><h3 id="elasticsearch-unrecoverable_error_types">unrecoverable_error_types (string, optional)</h3><p>Default unrecoverable_error_types parameter is set up strictly. Because es_rejected_execution_exception is caused by exceeding Elasticsearch&rsquo;s thread pool capacity. Advanced users can increase its capacity, but normal users should follow default behavior. If you want to increase it and forcibly retrying bulk request, please consider to change unrecoverable_error_types parameter from default value. Change default value of thread_pool.bulk.queue_size in elasticsearch.yml)</p><h3 id="elasticsearch-use_legacy_template">use_legacy_template (*bool, optional)</h3><p>If set to true, the output uses the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.13/indices-templates-v1.html">legacy index template format</a>. Otherwise, it uses the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.13/index-templates.html">composable index template</a> format.</p><p>Default: true</p><h3 id="elasticsearch-user">user (string, optional)</h3><p>User for HTTP Basic authentication. This plugin will escape required URL encoded characters within <code>%{}</code> placeholders, for example, <code>%{demo+}</code></p><h3 id="elasticsearch-utc_index">utc_index (*bool, optional)</h3><p>By default, the records inserted into index logstash-YYMMDD with UTC (Coordinated Universal Time). This option allows to use local time if you describe utc_index to false.(default: true)</p><p>Default: true</p><h3 id="elasticsearch-validate_client_version">validate_client_version (bool, optional)</h3><p>When you use mismatched Elasticsearch server and client libraries, fluent-plugin-elasticsearch cannot send data into Elasticsearch.</p><p>Default: false</p><h3 id="elasticsearch-verify_es_version_at_startup">verify_es_version_at_startup (*bool, optional)</h3><p>Because Elasticsearch plugin should change behavior each of Elasticsearch major versions. For example, Elasticsearch 6 starts to prohibit multiple type_names in one index, and Elasticsearch 7 will handle only _doc type_name in index. If you want to disable to verify Elasticsearch version at start up, set it as false. When using the following configuration, ES plugin intends to communicate into Elasticsearch 6. (default: true)</p><p>Default: true</p><h3 id="elasticsearch-with_transporter_log">with_transporter_log (bool, optional)</h3><p>This is debugging purpose option to enable to obtain transporter layer log.</p><p>Default: false</p><h3 id="elasticsearch-write_operation">write_operation (string, optional)</h3><p>The write_operation can be any of: (index,create,update,upsert)</p><p>Default: index</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-11b10c2ba394f448a129e3e87a7da45d">4.12 - File</h1><h1 id="file-outputhttpsdocsfluentdorgoutputfile"><a href="https://docs.fluentd.org/output/file">File Output</a></h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs or metrics to File.</p><h2 id="configuration">Configuration</h2><h2 id="fileoutputconfig">FileOutputConfig</h2><h3 id="fileoutputconfig-add_path_suffix">add_path_suffix (*bool, optional)</h3><p>Add path suffix(default: true)</p><p>Default: true</p><h3 id="fileoutputconfig-append">append (bool, optional)</h3><p>The flushed chunk is appended to existence file or not. The default is not appended.</p><h3 id="fileoutputconfig-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="fileoutputconfig-compress">compress (string, optional)</h3><p>Compresses flushed files using gzip. No compression is performed by default.</p><h3 id="fileoutputconfig-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="fileoutputconfig-path">path (string, required)</h3><p>The Path of the file. The actual path is path + time + &ldquo;.log&rdquo; by default.</p><h3 id="fileoutputconfig-path_suffix">path_suffix (string, optional)</h3><p>The suffix of output result.</p><p>Default: &ldquo;.log&rdquo;</p><h3 id="fileoutputconfig-recompress">recompress (bool, optional)</h3><p>Performs compression again even if the buffer chunk is already compressed.</p><p>Default: false</p><h3 id="fileoutputconfig-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="fileoutputconfig-symlink_path">symlink_path (bool, optional)</h3><p>Create symlink to temporary buffered file when buffer_type is file. This is useful for tailing file content to check logs.</p><p>Default: false</p><h2 id="example-file-output-configurations">Example <code>File</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/tmp/logs/${tag}/%Y/%m/%d.%H.%M</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">append</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>	@type file
</span></span><span style="display:flex"><span>	@id test_file
</span></span><span style="display:flex"><span>	add_path_suffix true
</span></span><span style="display:flex"><span>	append true
</span></span><span style="display:flex"><span>	path /tmp/logs/${tag}/%Y/%m/%d.%H.%M
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;buffer</span> <span style="color:#a40000">tag,time</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>	  @type file
</span></span><span style="display:flex"><span>	  path /buffers/test_file.*.buffer
</span></span><span style="display:flex"><span>	  retry_forever true
</span></span><span style="display:flex"><span>	  timekey 1m
</span></span><span style="display:flex"><span>	  timekey_use_utc true
</span></span><span style="display:flex"><span>	  timekey_wait 30s
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/buffer&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ebcbedef5be28c9f30752486b0b2b01b">4.13 - Format</h1><h1 id="format-output-records">Format output records</h1><h2 id="overview">Overview</h2><p>Specify how to format output records. For details, see <a href="https://docs.fluentd.org/configuration/format-section">https://docs.fluentd.org/configuration/format-section</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/tmp/logs/${tag}/%Y/%m/%d.%H.%M</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">single_value</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">add_newline</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">message_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">msg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="format">Format</h2><h3 id="format-add_newline">add_newline (*bool, optional)</h3><p>When type is single_value add &lsquo;\n&rsquo; to the end of the message</p><p>Default: true</p><h3 id="format-message_key">message_key (string, optional)</h3><p>When type is single_value specify the key holding information</p><h3 id="format-type">type (string, optional)</h3><p>Output line formatting: out_file,json,ltsv,csv,msgpack,hash,single_value</p><p>Default: json</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-88fc6991b80563054a472b95a994e01b">4.14 - Format rfc5424</h1><h2 id="formatrfc5424">FormatRfc5424</h2><h3 id="formatrfc5424-app_name_field">app_name_field (string, optional)</h3><p>Sets app name in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: app_name</p><h3 id="formatrfc5424-hostname_field">hostname_field (string, optional)</h3><p>Sets host name in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: hostname</p><h3 id="formatrfc5424-log_field">log_field (string, optional)</h3><p>Sets log in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: log</p><h3 id="formatrfc5424-message_id_field">message_id_field (string, optional)</h3><p>Sets msg id in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: message_id</p><h3 id="formatrfc5424-proc_id_field">proc_id_field (string, optional)</h3><p>Sets proc id in syslog from field in fluentd, delimited by &lsquo;.&rsquo;</p><p>Default: proc_id</p><h3 id="formatrfc5424-rfc6587_message_size">rfc6587_message_size (*bool, optional)</h3><p>Prepends message length for syslog transmission</p><p>Default: true</p><h3 id="formatrfc5424-structured_data_field">structured_data_field (string, optional)</h3><p>Sets structured data in syslog from field in fluentd, delimited by &lsquo;.&rsquo; (default structured_data)</p><h3 id="formatrfc5424-type">type (string, optional)</h3><p>Output line formatting: out_file,json,ltsv,csv,msgpack,hash,single_value</p><p>Default: json</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ed0a10704a55da5f7330009ec393e387">4.15 - Forward</h1><h2 id="forwardoutput">ForwardOutput</h2><h3 id="forwardoutput-ack_response_timeout">ack_response_timeout (int, optional)</h3><p>This option is used when require_ack_response is true. This default value is based on popular tcp_syn_retries.</p><p>Default: 190</p><h3 id="forwardoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="forwardoutput-connect_timeout">connect_timeout (int, optional)</h3><p>The timeout time for socket connect. When the connection timed out during establishment, Errno::ETIMEDOUT is raised.</p><h3 id="forwardoutput-dns_round_robin">dns_round_robin (bool, optional)</h3><p>Enable client-side DNS round robin. Uniform randomly pick an IP address to send data when a hostname has several IP addresses. <code>heartbeat_type udp</code> is not available with <code>dns_round_robin true</code>. Use <code>heartbeat_type tcp</code> or <code>heartbeat_type none</code>.</p><h3 id="forwardoutput-expire_dns_cache">expire_dns_cache (int, optional)</h3><p>Set TTL to expire DNS cache in seconds. Set 0 not to use DNS Cache.</p><p>Default: 0</p><h3 id="forwardoutput-hard_timeout">hard_timeout (int, optional)</h3><p>The hard timeout used to detect server failure. The default value is equal to the send_timeout parameter.</p><p>Default: 60</p><h3 id="forwardoutput-heartbeat_interval">heartbeat_interval (int, optional)</h3><p>The interval of the heartbeat packer.</p><p>Default: 1</p><h3 id="forwardoutput-heartbeat_type">heartbeat_type (string, optional)</h3><p>The transport protocol to use for heartbeats. Set &ldquo;none&rdquo; to disable heartbeat. [transport, tcp, udp, none]</p><h3 id="forwardoutput-ignore_network_errors_at_startup">ignore_network_errors_at_startup (bool, optional)</h3><p>Ignore DNS resolution and errors at startup time.</p><h3 id="forwardoutput-keepalive">keepalive (bool, optional)</h3><p>Enable keepalive connection.</p><p>Default: false</p><h3 id="forwardoutput-keepalive_timeout">keepalive_timeout (int, optional)</h3><p>Expired time of keepalive. Default value is nil, which means to keep connection as long as possible.</p><p>Default: 0</p><h3 id="forwardoutput-phi_failure_detector">phi_failure_detector (bool, optional)</h3><p>Use the &ldquo;Phi accrual failure detector&rdquo; to detect server failure.</p><p>Default: true</p><h3 id="forwardoutput-phi_threshold">phi_threshold (int, optional)</h3><p>The threshold parameter used to detect server faults. <code>phi_threshold</code> is deeply related to <code>heartbeat_interval</code>. If you are using longer <code>heartbeat_interval</code>, please use the larger <code>phi_threshold</code>. Otherwise you will see frequent detachments of destination servers. The default value 16 is tuned for <code>heartbeat_interval</code> 1s.</p><p>Default: 16</p><h3 id="forwardoutput-recover_wait">recover_wait (int, optional)</h3><p>The wait time before accepting a server fault recovery.</p><p>Default: 10</p><h3 id="forwardoutput-require_ack_response">require_ack_response (bool, optional)</h3><p>Change the protocol to at-least-once. The plugin waits the ack from destination&rsquo;s in_forward plugin.</p><h3 id="forwardoutput-security">security (*common.Security, optional)</h3><p><a href="../../common/security/">Security</a></p><h3 id="forwardoutput-send_timeout">send_timeout (int, optional)</h3><p>The timeout time when sending event logs.</p><p>Default: 60</p><h3 id="forwardoutput-servers">servers ([]FluentdServer, required)</h3><p>Server definitions at least one is required <a href="#fluentd-server">Server</a></p><h3 id="forwardoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="forwardoutput-time_as_integer">time_as_integer (bool, optional)</h3><p>Format forwarded events time as an epoch Integer with second resolution. Useful when forwarding to old ( &lt;= 0.12 ) Fluentd servers.</p><h3 id="forwardoutput-tls_allow_self_signed_cert">tls_allow_self_signed_cert (bool, optional)</h3><p>Allow self signed certificates or not.</p><p>Default: false</p><h3 id="forwardoutput-tls_cert_logical_store_name">tls_cert_logical_store_name (string, optional)</h3><p>The certificate logical store name on Windows system certstore. This parameter is for Windows only.</p><h3 id="forwardoutput-tls_cert_path">tls_cert_path (*secret.Secret, optional)</h3><p>The additional CA certificate path for TLS.</p><h3 id="forwardoutput-tls_cert_thumbprint">tls_cert_thumbprint (string, optional)</h3><p>The certificate thumbprint for searching from Windows system certstore This parameter is for Windows only.</p><h3 id="forwardoutput-tls_cert_use_enterprise_store">tls_cert_use_enterprise_store (bool, optional)</h3><p>Enable to use certificate enterprise store on Windows system certstore. This parameter is for Windows only.</p><h3 id="forwardoutput-tls_ciphers">tls_ciphers (string, optional)</h3><p>The cipher configuration of TLS transport.</p><p>Default: ALL:!aNULL:!eNULL:!SSLv2</p><h3 id="forwardoutput-tls_client_cert_path">tls_client_cert_path (*secret.Secret, optional)</h3><p>The client certificate path for TLS</p><h3 id="forwardoutput-tls_client_private_key_passphrase">tls_client_private_key_passphrase (*secret.Secret, optional)</h3><p>The client private key passphrase for TLS.</p><h3 id="forwardoutput-tls_client_private_key_path">tls_client_private_key_path (*secret.Secret, optional)</h3><p>The client private key path for TLS.</p><h3 id="forwardoutput-tls_insecure_mode">tls_insecure_mode (bool, optional)</h3><p>Skip all verification of certificates or not.</p><p>Default: false</p><h3 id="forwardoutput-tls_verify_hostname">tls_verify_hostname (bool, optional)</h3><p>Verify hostname of servers and certificates or not in TLS transport.</p><p>Default: true</p><h3 id="forwardoutput-tls_version">tls_version (string, optional)</h3><p>The default version of TLS transport. [TLSv1_1, TLSv1_2]</p><p>Default: TLSv1_2</p><h3 id="forwardoutput-transport">transport (string, optional)</h3><p>The transport protocol to use [ tcp, tls ]</p><h3 id="forwardoutput-verify_connection_at_startup">verify_connection_at_startup (bool, optional)</h3><p>Verify that a connection can be made with one of out_forward nodes at the time of startup.</p><p>Default: false</p><h2 id="fluentd-server">Fluentd Server</h2><p>server</p><h3 id="fluentd-server-host">host (string, required)</h3><p>The IP address or host name of the server.</p><h3 id="fluentd-server-name">name (string, optional)</h3><p>The name of the server. Used for logging and certificate verification in TLS transport (when host is address).</p><h3 id="fluentd-server-password">password (*secret.Secret, optional)</h3><p>The password for authentication.</p><h3 id="fluentd-server-port">port (int, optional)</h3><p>The port number of the host. Note that both TCP packets (event stream) and UDP packets (heartbeat message) are sent to this port.</p><p>Default: 24224</p><h3 id="fluentd-server-shared_key">shared_key (*secret.Secret, optional)</h3><p>The shared key per server.</p><h3 id="fluentd-server-standby">standby (bool, optional)</h3><p>Marks a node as the standby node for an Active-Standby model between Fluentd nodes. When an active node goes down, the standby node is promoted to an active node. The standby node is not used by the out_forward plugin until then.</p><h3 id="fluentd-server-username">username (*secret.Secret, optional)</h3><p>The username for authentication.</p><h3 id="fluentd-server-weight">weight (int, optional)</h3><p>The load balancing weight. If the weight of one server is 20 and the weight of the other server is 30, events are sent in a 2:3 ratio.</p><p>Default: 60</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-18e50786ba4697ffac3ab83b4c57e6e5">4.16 - GELF</h1><h1 id="gelf-outputhttpsgithubcomhotschedulesfluent-plugin-gelf-hs"><a href="https://github.com/hotschedules/fluent-plugin-gelf-hs">GELF Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for GELF. For details, see <a href="https://github.com/bmichalkiewicz/fluent-plugin-gelf-best">https://github.com/bmichalkiewicz/fluent-plugin-gelf-best</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">gelf</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gelf-host</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">12201</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="buffer-buffer-optional-output-config-buffer">buffer (*Buffer, optional) {#output config-buffer}</h3><p>Available since ghcr.io/kube-logging/fluentd:v1.16-full-build.139 <a href="../buffer/">Buffer</a></p><h3 id="host-string-required-output-config-host">host (string, required) {#output config-host}</h3><p>Destination host</p><h3 id="max_bytes-int-optional-output-config-max_bytes">max_bytes (int, optional) {#output config-max_bytes}</h3><p>MaxBytes specifies the maximum size, in bytes, of each individual log message. For details, see <a href="https://github.com/Graylog2/graylog2-server/issues/873">https://github.com/Graylog2/graylog2-server/issues/873</a> Available since ghcr.io/kube-logging/fluentd:v1.16-4.10-full</p><p>Default: 3200</p><h3 id="output-config-port">port (int, required)</h3><p>Destination host port</p><h3 id="output-config-protocol">protocol (string, optional)</h3><p>Transport Protocol</p><p>Default: &ldquo;udp&rdquo;</p><h3 id="output-config-tls">tls (*bool, optional)</h3><p>Enable TlS</p><p>Default: false</p><h3 id="output-config-tls_options">tls_options (map[string]string, optional)</h3><p>TLS Options. For details, see <a href="https://github.com/graylog-labs/gelf-rb/blob/72916932b789f7a6768c3cdd6ab69a3c942dbcef/lib/gelf/transport/tcp_tls.rb#L7-L12">https://github.com/graylog-labs/gelf-rb/blob/72916932b789f7a6768c3cdd6ab69a3c942dbcef/lib/gelf/transport/tcp_tls.rb#L7-L12</a>.</p><p>Default: {}</p><h2 id="example-gelf-output-configurations">Example <code>GELF</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gelf-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">gelf</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">gelf-host</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">12201</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>	@type gelf
</span></span><span style="display:flex"><span>	@id test_gelf
</span></span><span style="display:flex"><span>	host gelf-host
</span></span><span style="display:flex"><span>	port 12201
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-a6993ae75e6633de7954ded98992861c">4.17 - Google Cloud Storage</h1><h2 id="overview">Overview</h2><p>Store logs in Google Cloud Storage. For details, see <a href="https://github.com/kube-logging/fluent-plugin-gcs">https://github.com/kube-logging/fluent-plugin-gcs</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">gcs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">project</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-example</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">banzai-log-test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logs/${tag}/%Y/%m/%d/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="gcsoutput">GCSOutput</h2><h3 id="gcsoutput-acl">acl (string, optional)</h3><p>Permission for the object in GCS: <code>auth_read</code> <code>owner_full</code> <code>owner_read</code> <code>private</code> <code>project_private</code> <code>public_read</code></p><h3 id="gcsoutput-auto_create_bucket">auto_create_bucket (bool, optional)</h3><p>Create GCS bucket if it does not exists</p><p>Default: true</p><h3 id="gcsoutput-bucket">bucket (string, required)</h3><p>Name of a GCS bucket</p><h3 id="gcsoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="gcsoutput-client_retries">client_retries (int, optional)</h3><p>Number of times to retry requests on server error</p><h3 id="gcsoutput-client_timeout">client_timeout (int, optional)</h3><p>Default timeout to use in requests</p><h3 id="gcsoutput-credentials_json">credentials_json (*secret.Secret, optional)</h3><p>GCS service account credentials in JSON format <a href="../secret/">Secret</a></p><h3 id="gcsoutput-encryption_key">encryption_key (string, optional)</h3><p>Customer-supplied, AES-256 encryption key</p><h3 id="gcsoutput-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="gcsoutput-hex_random_length">hex_random_length (int, optional)</h3><p>Max length of <code>%{hex_random}</code> placeholder(4-16)</p><p>Default: 4</p><h3 id="gcsoutput-keyfile">keyfile (string, optional)</h3><p>Path of GCS service account credentials JSON file</p><h3 id="gcsoutput-object_key_format">object_key_format (string, optional)</h3><p>Format of GCS object keys</p><p>Default: <code>%{path}%{time_slice}_%{index}.%{file_extension}</code></p><h3 id="gcsoutput-object_metadata">object_metadata ([]ObjectMetadata, optional)</h3><p>User provided web-safe keys and arbitrary string values that will returned with requests for the file as &ldquo;x-goog-meta-&rdquo; response headers. <a href="#objectmetadata">Object Metadata</a></p><h3 id="gcsoutput-overwrite">overwrite (bool, optional)</h3><p>Overwrite already existing path</p><p>Default: false</p><h3 id="gcsoutput-path">path (string, optional)</h3><p>Path prefix of the files on GCS</p><h3 id="gcsoutput-project">project (string, required)</h3><p>Project identifier for GCS</p><h3 id="gcsoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="gcsoutput-storage_class">storage_class (string, optional)</h3><p>Storage class of the file: <code>dra</code> <code>nearline</code> <code>coldline</code> <code>multi_regional</code> <code>regional</code> <code>standard</code></p><h3 id="gcsoutput-store_as">store_as (string, optional)</h3><p>Archive format on GCS: gzip json text</p><p>Default: gzip</p><h3 id="gcsoutput-transcoding">transcoding (bool, optional)</h3><p>Enable the decompressive form of transcoding</p><h2 id="objectmetadata">ObjectMetadata</h2><h3 id="objectmetadata-key">key (string, required)</h3><p>Key</p><h3 id="objectmetadata-value">value (string, required)</h3><p>Value</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-a56bffbadd1b6a7c1ede4f727316205c">4.18 - Grafana Loki</h1><h1 id="loki-output-plugin">Loki output plugin</h1><h2 id="overview">Overview</h2><p>Fluentd output plugin to ship logs to a Loki server. For details, see <a href="https://grafana.com/docs/loki/latest/clients/fluentd/">https://grafana.com/docs/loki/latest/clients/fluentd/</a>.</p><p>For a detailed example, see <a href="../../../../quickstarts/loki-nginx/">Store Nginx Access Logs in Grafana Loki with Logging Operator</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">loki</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://loki:3100</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-ca_cert">ca_cert (*secret.Secret, optional)</h3><p>TLS: CA certificate file for server certificate verification <a href="../secret/">Secret</a></p><h3 id="output-config-cert">cert (*secret.Secret, optional)</h3><p>TLS: parameters for presenting a client certificate <a href="../secret/">Secret</a></p><h3 id="output-config-configure_kubernetes_labels">configure_kubernetes_labels (*bool, optional)</h3><p>Configure Kubernetes metadata in a Prometheus like format</p><p>Default: false</p><h3 id="output-config-drop_single_key">drop_single_key (*bool, optional)</h3><p>If a record only has 1 key, then just set the log line to the value and discard the key.</p><p>Default: false</p><h3 id="output-config-extra_labels">extra_labels (map[string]string, optional)</h3><p>Set of extra labels to include with every Loki stream.</p><h3 id="output-config-extract_kubernetes_labels">extract_kubernetes_labels (*bool, optional)</h3><p>Extract kubernetes labels as loki labels</p><p>Default: false</p><h3 id="output-config-include_thread_label">include_thread_label (*bool, optional)</h3><p>whether to include the fluentd_thread label when multiple threads are used for flushing.</p><p>Default: true</p><h3 id="output-config-insecure_tls">insecure_tls (*bool, optional)</h3><p>TLS: disable server certificate verification</p><p>Default: false</p><h3 id="output-config-key">key (*secret.Secret, optional)</h3><p>TLS: parameters for presenting a client certificate <a href="../secret/">Secret</a></p><h3 id="output-config-labels">labels (Label, optional)</h3><p>Set of labels to include with every Loki stream.</p><h3 id="output-config-line_format">line_format (string, optional)</h3><p>Format to use when flattening the record to a log line: json, key_value (default: key_value)</p><p>Default: json</p><h3 id="output-config-password">password (*secret.Secret, optional)</h3><p>Specify password if the Loki server requires authentication. <a href="../secret/">Secret</a></p><h3 id="output-config-remove_keys">remove_keys ([]string, optional)</h3><p>Comma separated list of needless record keys to remove</p><p>Default: []</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="output-config-tenant">tenant (string, optional)</h3><p>Loki is a multi-tenant log storage platform and all requests sent must include a tenant.</p><h3 id="output-config-url">url (string, optional)</h3><p>The url of the Loki server to send logs to.</p><p>Default: <code>https://logs-us-west1.grafana.net</code></p><h3 id="output-config-username">username (*secret.Secret, optional)</h3><p>Specify a username if the Loki server requires authentication. <a href="../secret/">Secret</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ae38f1f9de3603c1e55fe2fb4eeba9b0">4.19 - Http</h1><h1 id="http-plugin-for-fluentd">Http plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to HTTP/HTTPS endpoints. For details, see <a href="https://docs.fluentd.org/output/http">https://docs.fluentd.org/output/http</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://logserver.com:9000/api</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-auth">auth (*HTTPAuth, optional)</h3><p><a href="#http-auth-config">HTTP auth</a></p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-content_type">content_type (string, optional)</h3><p>Content-Profile for HTTP request.</p><h3 id="output-config-endpoint">endpoint (string, required)</h3><p>Endpoint for HTTP request.</p><h3 id="output-config-error_response_as_unrecoverable">error_response_as_unrecoverable (*bool, optional)</h3><p>Raise UnrecoverableError when the response code is non success, 1xx/3xx/4xx/5xx. If false, the plugin logs error message instead of raising UnrecoverableError.</p><p>Default: true</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="http_method-string-optional-output-config-http_method">http_method (string, optional) {#output config-http_method}</h3><p>Method for HTTP request. [post, put]</p><p>Default: post</p><h3 id="output-config-headers">headers (map[string]string, optional)</h3><p>Additional headers for HTTP request.</p><h3 id="output-config-json_array">json_array (bool, optional)</h3><p>Using array format of JSON. This parameter is used and valid only for json format. When json_array as true, Content-Profile should be application/json and be able to use JSON data for the HTTP request body.</p><p>Default: false</p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Connection open timeout in seconds.</p><h3 id="output-config-proxy">proxy (string, optional)</h3><p>Proxy for HTTP request.</p><h3 id="output-config-read_timeout">read_timeout (int, optional)</h3><p>Read timeout in seconds.</p><h3 id="output-config-retryable_response_codes">retryable_response_codes ([]int, optional)</h3><p>List of retryable response codes. If the response code is included in this list, the plugin retries the buffer flush. Since Fluentd v2 the Status code 503 is going to be removed from default.</p><p>Default: [503]</p><h3 id="output-config-ssl_timeout">ssl_timeout (int, optional)</h3><p>TLS timeout in seconds.</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-tls_ca_cert_path">tls_ca_cert_path (*secret.Secret, optional)</h3><p>The CA certificate path for TLS.</p><h3 id="output-config-tls_ciphers">tls_ciphers (string, optional)</h3><p>The cipher configuration of TLS transport.</p><p>Default: ALL:!aNULL:!eNULL:!SSLv2</p><h3 id="output-config-tls_client_cert_path">tls_client_cert_path (*secret.Secret, optional)</h3><p>The client certificate path for TLS.</p><h3 id="output-config-tls_private_key_passphrase">tls_private_key_passphrase (*secret.Secret, optional)</h3><p>The client private key passphrase for TLS.</p><h3 id="output-config-tls_private_key_path">tls_private_key_path (*secret.Secret, optional)</h3><p>The client private key path for TLS.</p><h3 id="output-config-tls_verify_mode">tls_verify_mode (string, optional)</h3><p>The verify mode of TLS. [peer, none]</p><p>Default: peer</p><h3 id="output-config-tls_version">tls_version (string, optional)</h3><p>The default version of TLS transport. [TLSv1_1, TLSv1_2]</p><p>Default: TLSv1_2</p><h2 id="http-auth-config">HTTP auth config</h2><p>http_auth</p><h3 id="password-secretsecret-required-http-auth-config-password">password (*secret.Secret, required) {#http auth-config-password}</h3><p>Password for basic authentication. <a href="../secret/">Secret</a></p><h3 id="username-secretsecret-required-http-auth-config-username">username (*secret.Secret, required) {#http auth-config-username}</h3><p>Username for basic authentication. <a href="../secret/">Secret</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1b992ac5779a83a537b40f5defa1bfa5">4.20 - Kafka</h1><h1 id="kafka-output-plugin-for-fluentd">Kafka output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/fluent/fluent-plugin-kafka">https://github.com/fluent/fluent-plugin-kafka</a>.</p><p>For an example deployment, see <a href="../../../../quickstarts/kafka-nginx/">Transport Nginx Access Logs into Kafka with Logging Operator</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">kafka</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">brokers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kafka-headless.kafka.svc.cluster.local:29092</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">default_topic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">topic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">sasl_over_ssl</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">topic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="kafka">Kafka</h2><p>Send your logs to Kafka. Set <code>use_rdkafka</code> to <code>true</code> to use the rdkafka2 client, which offers higher performance than ruby-kafka. (Note: requires fluentd image version v1.16-4.9-full or higher)
-<a href="https://github.com/fluent/fluent-plugin-kafka#output-plugin">more info</a></p><h3 id="kafka-ack_timeout">ack_timeout (int, optional)</h3><p>How long the producer waits for acks. The unit is seconds</p><p>Default: nil => Uses default of ruby-kafka library</p><h3 id="kafka-brokers">brokers (string, required)</h3><p>The list of all seed brokers, with their host and port information.</p><h3 id="kafka-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="kafka-client_id">client_id (string, optional)</h3><p>Client ID</p><p>Default: &ldquo;kafka&rdquo;</p><h3 id="kafka-compression_codec">compression_codec (string, optional)</h3><p>The codec the producer uses to compress messages . The available options are gzip and snappy.</p><p>Default: nil</p><h3 id="kafka-default_message_key">default_message_key (string, optional)</h3><p>The name of default message key .</p><p>Default: nil</p><h3 id="kafka-default_partition_key">default_partition_key (string, optional)</h3><p>The name of default partition key .</p><p>Default: nil</p><h3 id="kafka-default_topic">default_topic (string, optional)</h3><p>The name of default topic .</p><p>Default: nil</p><h3 id="kafka-discard_kafka_delivery_failed">discard_kafka_delivery_failed (bool, optional)</h3><p>Discard the record where Kafka DeliveryFailed occurred</p><p>Default: false</p><h3 id="kafka-exclude_partion_key">exclude_partion_key (bool, optional)</h3><p>Exclude Partition key</p><p>Default: false</p><h3 id="kafka-exclude_topic_key">exclude_topic_key (bool, optional)</h3><p>Exclude Topic key</p><p>Default: false</p><h3 id="kafka-format">format (*Format, required)</h3><p><a href="../format/">Format</a></p><h3 id="kafka-get_kafka_client_log">get_kafka_client_log (bool, optional)</h3><p>Get Kafka Client log</p><p>Default: false</p><h3 id="kafka-headers">headers (map[string]string, optional)</h3><p>Headers</p><p>Default: {}</p><h3 id="kafka-headers_from_record">headers_from_record (map[string]string, optional)</h3><p>Headers from Record</p><p>Default: {}</p><h3 id="kafka-idempotent">idempotent (bool, optional)</h3><p>Idempotent</p><p>Default: false</p><h3 id="kafka-kafka_agg_max_bytes">kafka_agg_max_bytes (int, optional)</h3><p>Maximum value of total message size to be included in one batch transmission. .</p><p>Default: 4096</p><h3 id="kafka-kafka_agg_max_messages">kafka_agg_max_messages (int, optional)</h3><p>Maximum number of messages to include in one batch transmission. .</p><p>Default: nil</p><h3 id="kafka-keytab">keytab (*secret.Secret, optional)</h3><h3 id="kafka-max_send_limit_bytes">max_send_limit_bytes (int, optional)</h3><p>Max byte size to send message to avoid MessageSizeTooLarge. Messages over the limit will be dropped</p><p>Default: no limit</p><h3 id="kafka-max_send_retries">max_send_retries (int, optional)</h3><p>Number of times to retry sending of messages to a leader</p><p>Default: 1</p><h3 id="kafka-message_key_key">message_key_key (string, optional)</h3><p>Message Key</p><p>Default: &ldquo;message_key&rdquo;</p><h3 id="kafka-partition_key">partition_key (string, optional)</h3><p>Partition</p><p>Default: &ldquo;partition&rdquo;</p><h3 id="kafka-partition_key_key">partition_key_key (string, optional)</h3><p>Partition Key</p><p>Default: &ldquo;partition_key&rdquo;</p><h3 id="kafka-password">password (*secret.Secret, optional)</h3><p>Password when using PLAIN/SCRAM SASL authentication</p><h3 id="kafka-principal">principal (string, optional)</h3><h3 id="kafka-required_acks">required_acks (int, optional)</h3><p>The number of acks required per request .</p><p>Default: -1</p><h3 id="kafka-ssl_ca_cert">ssl_ca_cert (*secret.Secret, optional)</h3><p>CA certificate</p><h3 id="kafka-ssl_ca_certs_from_system">ssl_ca_certs_from_system (*bool, optional)</h3><p>System&rsquo;s CA cert store</p><p>Default: false</p><h3 id="kafka-ssl_client_cert">ssl_client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><h3 id="kafka-ssl_client_cert_chain">ssl_client_cert_chain (*secret.Secret, optional)</h3><p>Client certificate chain</p><h3 id="kafka-ssl_client_cert_key">ssl_client_cert_key (*secret.Secret, optional)</h3><p>Client certificate key</p><h3 id="kafka-ssl_verify_hostname">ssl_verify_hostname (*bool, optional)</h3><p>Verify certificate hostname</p><h3 id="kafka-sasl_over_ssl">sasl_over_ssl (*bool, optional)</h3><p>SASL over SSL</p><p>Default: true</p><h3 id="kafka-scram_mechanism">scram_mechanism (string, optional)</h3><p>If set, use SCRAM authentication with specified mechanism. When unset, default to PLAIN authentication</p><h3 id="kafka-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="kafka-topic_key">topic_key (string, optional)</h3><p>Topic Key</p><p>Default: &ldquo;topic&rdquo;</p><h3 id="kafka-use_default_for_unknown_topic">use_default_for_unknown_topic (bool, optional)</h3><p>Use default for unknown topics</p><p>Default: false</p><h3 id="kafka-use_rdkafka">use_rdkafka (bool, optional)</h3><p>Use rdkafka2 instead of the legacy kafka2 output plugin. This plugin requires fluentd image version v1.16-4.9-full or higher.</p><h3 id="kafka-username">username (*secret.Secret, optional)</h3><p>Username when using PLAIN/SCRAM SASL authentication</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3736a73536ae2ea19873950bfc5c1521">4.21 - LogDNA</h1><h1 id="logdna-outputhttpsgithubcomlogdnafluent-plugin-logdna"><a href="https://github.com/logdna/fluent-plugin-logdna">LogDNA Output</a></h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs to LogDNA.</p><h2 id="configuration">Configuration</h2><h2 id="logdna">LogDNA</h2><p>Send your logs to LogDNA</p><h3 id="logdna-api_key">api_key (string, required)</h3><p>LogDNA Api key</p><h3 id="logdna-app">app (string, optional)</h3><p>Application name</p><h3 id="logdna-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="logdna-hostname">hostname (string, required)</h3><p>Hostname</p><h3 id="logdna-ingester_domain">ingester_domain (string, optional)</h3><p>Custom Ingester URL, Optional</p><p>Default: <code>https://logs.logdna.com</code></p><h3 id="logdna-ingester_endpoint">ingester_endpoint (string, optional)</h3><p>Custom Ingester Endpoint, Optional</p><p>Default: /logs/ingest</p><h3 id="logdna-request_timeout">request_timeout (string, optional)</h3><p>HTTPS POST Request Timeout, Optional. Supports s and ms Suffices</p><p>Default: 30 s</p><h3 id="logdna-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="logdna-tags">tags (string, optional)</h3><p>Comma-Separated List of Tags, Optional</p><h2 id="example-logdna-filter-configurations">Example <code>LogDNA</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logdna-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">logdna</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">api_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">xxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hostname</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-operator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">my-app</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">web,dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">ingester_domain https://logs.logdna.com</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">ingester_endpoint /logs/ingest</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">&lt;match **&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>@<span style="color:#000">type logdna</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>@<span style="color:#000">id test_logdna</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#000">api_key xxxxxxxxxxxxxxxxxxxxxxxxxxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#000">app my-app</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span><span style="color:#000">hostname logging-operator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f5b4f39075d38f596892cbc946ca5735">4.22 - LogZ</h1><h1 id="logz-output-plugin-for-fluentd">LogZ output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/tarokkk/fluent-plugin-logzio">https://github.com/tarokkk/fluent-plugin-logzio</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">logz</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://listener.logz.io</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">8071</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">token</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logz-token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">output_include_tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">output_include_time</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">file</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_mode</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_thread_count</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">5s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">chunk_limit_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">16m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">queue_limit_length</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4096</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="logzio">Logzio</h2><p>LogZ Send your logs to LogZ.io</p><h3 id="logzio-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="logzio-bulk_limit">bulk_limit (int, optional)</h3><p>Limit to the size of the Logz.io upload bulk. Defaults to 1000000 bytes leaving about 24kB for overhead.</p><h3 id="logzio-bulk_limit_warning_limit">bulk_limit_warning_limit (int, optional)</h3><p>Limit to the size of the Logz.io warning message when a record exceeds bulk_limit to prevent a recursion when Fluent warnings are sent to the Logz.io output.</p><h3 id="logzio-endpoint">endpoint (*Endpoint, required)</h3><p>Define LogZ endpoint URL</p><h3 id="logzio-gzip">gzip (bool, optional)</h3><p>Should the plugin ship the logs in gzip compression. Default is false.</p><h3 id="logzio-http_idle_timeout">http_idle_timeout (int, optional)</h3><p>Timeout in seconds that the http persistent connection will stay open without traffic.</p><h3 id="logzio-output_include_tags">output_include_tags (bool, optional)</h3><p>Should the appender add the fluentd tag to the document, called &ldquo;fluentd_tag&rdquo;</p><h3 id="logzio-output_include_time">output_include_time (bool, optional)</h3><p>Should the appender add a timestamp to your logs on their process time (recommended).</p><h3 id="logzio-retry_count">retry_count (int, optional)</h3><p>How many times to resend failed bulks.</p><h3 id="logzio-retry_sleep">retry_sleep (int, optional)</h3><p>How long to sleep initially between retries, exponential step-off.</p><h3 id="logzio-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h2 id="endpoint">Endpoint</h2><p>Endpoint defines connection details for LogZ.io.</p><h3 id="endpoint-port">port (int, optional)</h3><p>Port over which to connect to LogZ URL.</p><p>Default: 8071</p><h3 id="endpoint-token">token (*secret.Secret, optional)</h3><p>LogZ API Token. <a href="../secret/">Secret</a></p><h3 id="endpoint-url">url (string, optional)</h3><p>LogZ URL.</p><p>Default: <a href="https://listener.logz.io">https://listener.logz.io</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-683bbb879ced9c27f3943b7a4809b29e">4.23 - Mattermost</h1><h1 id="mattermost-plugin-for-fluentd">Mattermost plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to Mattermost via webhooks.
For details, see <a href="https://github.com/levigo-systems/fluent-plugin-mattermost">https://github.com/levigo-systems/fluent-plugin-mattermost</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">mattermost</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">webhook_url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://xxx.xx/hooks/xxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">channel_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">xxxxxxxxxxxxxxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">message_color</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;#FFA500&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">enable_tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-ca_path">ca_path (*secret.Secret, optional)</h3><p>The path of the CA certificates.</p><h3 id="output-config-channel_id">channel_id (string, optional)</h3><p>The ID of the channel where you want to receive the information.</p><h3 id="output-config-enable_tls">enable_tls (*bool, optional)</h3><p>You can set the communication channel if it uses TLS.</p><p>Default: true</p><h3 id="output-config-message">message (string, optional)</h3><p>The message you want to send. It can be a static message, which you add at this point, or you can receive the Fluentd infos with the %s</p><h3 id="output-config-message_color">message_color (string, optional)</h3><p>Color of the message you are sending, in hexadecimal format.</p><p>Default: #A9A9A9</p><h3 id="output-config-message_title">message_title (string, optional)</h3><p>The title you want to add to the message.</p><p>Default: fluent_title_default</p><h3 id="output-config-webhook_url">webhook_url (*secret.Secret, required)</h3><p>Incoming Webhook URI (Required for Incoming Webhook mode).</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-434371d7a3888abd2a15c4cd22f941cc">4.24 - NewRelic</h1><h1 id="new-relic-logs-plugin-for-fluentd">New Relic Logs plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Output plugin send log data to New Relic Logs</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">newrelic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">license_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging-newrelic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">licenseKey</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-api_key">api_key (*secret.Secret, optional)</h3><p>New Relic API Insert key <a href="../secret/">Secret</a></p><h3 id="output-config-base_uri">base_uri (string, optional)</h3><p>New Relic ingestion endpoint <a href="../secret/">Secret</a></p><p>Default: <code>https://log-api.newrelic.com/log/v1</code></p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="output-config-license_key">license_key (*secret.Secret, optional)</h3><p>New Relic License Key (recommended) <a href="../secret/">Secret</a>.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-bb72140946679f3fa6eaf82e404ea444">4.25 - OpenSearch</h1><h1 id="opensearch-output-plugin-for-fluentd">OpenSearch output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/fluent/fluent-plugin-opensearch">https://github.com/fluent/fluent-plugin-opensearch</a>.</p><p>For an example deployment, see <a href="../../../../quickstarts/es-nginx/">Save all logs to OpenSearch</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">opensearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">opensearch-cluster.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9200</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_version</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">TLSv1_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="opensearch">OpenSearch</h2><p>Send your logs to OpenSearch</p><h3 id="opensearch-application_name">application_name (*string, optional)</h3><p>Specify the application name for the rollover index to be created.</p><p>Default: default</p><h3 id="opensearch-buffer">buffer (*Buffer, optional)</h3><h3 id="opensearch-bulk_message_request_threshold">bulk_message_request_threshold (string, optional)</h3><p>Configure bulk_message request splitting threshold size. Default value is 20MB. (20 * 1024 * 1024) If you specify this size as negative number, bulk_message request splitting feature will be disabled.</p><p>Default: 20MB</p><h3 id="opensearch-catch_transport_exception_on_retry">catch_transport_exception_on_retry (*bool, optional)</h3><p>catch_transport_exception_on_retry (default: true)</p><p>Default: true</p><h3 id="opensearch-compression_level">compression_level (string, optional)</h3><p>compression_level</p><h3 id="opensearch-custom_headers">custom_headers (string, optional)</h3><p>This parameter adds additional headers to request. Example: <code>{"token":"secret"}</code></p><p>Default: {}</p><h3 id="opensearch-customize_template">customize_template (string, optional)</h3><p>Specify the string and its value to be replaced in form of hash. Can contain multiple key value pair that would be replaced in the specified template_file. This setting only creates template and to add rollover index please check the rollover_index configuration.</p><h3 id="opensearch-data_stream_enable">data_stream_enable (*bool, optional)</h3><p>Use @type opensearch_data_stream</p><h3 id="opensearch-data_stream_name">data_stream_name (string, optional)</h3><p>You can specify Opensearch data stream name by this parameter. This parameter is mandatory for opensearch_data_stream.</p><h3 id="opensearch-data_stream_template_name">data_stream_template_name (string, optional)</h3><p>Specify an existing index template for the data stream. If not present, a new template is created and named after the data stream.</p><p>Default: data_stream_name</p><h3 id="opensearch-default_opensearch_version">default_opensearch_version (int, optional)</h3><p>max_retry_get_os_version</p><p>Default: 1</p><h3 id="opensearch-emit_error_for_missing_id">emit_error_for_missing_id (bool, optional)</h3><p>emit_error_for_missing_id</p><p>Default: false</p><h3 id="opensearch-emit_error_label_event">emit_error_label_event (*bool, optional)</h3><p>emit_error_label_event (default: true)</p><p>Default: true</p><h3 id="opensearch-endpoint">endpoint (*OpenSearchEndpointCredentials, optional)</h3><p>AWS Endpoint Credentials</p><h3 id="opensearch-exception_backup">exception_backup (*bool, optional)</h3><p>Indicates whether to backup chunk when ignore exception occurs.</p><p>Default: true</p><h3 id="opensearch-fail_on_detecting_os_version_retry_exceed">fail_on_detecting_os_version_retry_exceed (*bool, optional)</h3><p>fail_on_detecting_os_version_retry_exceed (default: true)</p><p>Default: true</p><h3 id="opensearch-fail_on_putting_template_retry_exceed">fail_on_putting_template_retry_exceed (*bool, optional)</h3><p>Indicates whether to fail when max_retry_putting_template is exceeded. If you have multiple output plugin, you could use this property to do not fail on Fluentd statup.(default: true)</p><p>Default: true</p><h3 id="opensearch-flatten_hashes">flatten_hashes (bool, optional)</h3><p><a href="https://github.com/fluent/fluent-plugin-opensearch#hash-flattening">https://github.com/fluent/fluent-plugin-opensearch#hash-flattening</a></p><h3 id="opensearch-flatten_hashes_separator">flatten_hashes_separator (string, optional)</h3><p>Flatten separator</p><h3 id="opensearch-host">host (string, optional)</h3><p>You can specify OpenSearch host by this parameter.</p><p>Default: localhost</p><h3 id="opensearch-hosts">hosts (string, optional)</h3><p>You can specify multiple OpenSearch hosts with separator &ldquo;,&rdquo;. If you specify hosts option, host and port options are ignored.</p><h3 id="opensearch-http_backend">http_backend (string, optional)</h3><p>With http_backend typhoeus, the opensearch plugin uses typhoeus faraday http backend. Typhoeus can handle HTTP keepalive.</p><p>Default: excon</p><h3 id="opensearch-http_backend_excon_nonblock">http_backend_excon_nonblock (*bool, optional)</h3><p>http_backend_excon_nonblock</p><p>Default: true</p><h3 id="opensearch-id_key">id_key (string, optional)</h3><p>Field on your data to identify the data uniquely</p><h3 id="opensearch-ignore_exceptions">ignore_exceptions (string, optional)</h3><p>A list of exception that will be ignored - when the exception occurs the chunk will be discarded and the buffer retry mechanism won&rsquo;t be called. It is possible also to specify classes at higher level in the hierarchy.</p><h3 id="opensearch-include_index_in_url">include_index_in_url (bool, optional)</h3><p>With this option set to true, Fluentd manifests the index name in the request URL (rather than in the request body). You can use this option to enforce an URL-based access control.</p><h3 id="opensearch-include_tag_key">include_tag_key (bool, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: false</p><h3 id="opensearch-include_timestamp">include_timestamp (bool, optional)</h3><p>Adds a @timestamp field to the log, following all settings logstash_format does, except without the restrictions on index_name. This allows one to log to an alias in OpenSearch and utilize the rollover API.</p><p>Default: false</p><h3 id="opensearch-index_date_pattern">index_date_pattern (*string, optional)</h3><p>Specify this to override the index date pattern for creating a rollover index.</p><p>Default: now/d</p><h3 id="opensearch-index_name">index_name (string, optional)</h3><p>The index name to write events to</p><p>Default: fluentd</p><h3 id="opensearch-index_separator">index_separator (string, optional)</h3><p>index_separator</p><p>Default: -</p><h3 id="opensearch-log_os_400_reason">log_os_400_reason (bool, optional)</h3><p>log_os_400_reason</p><p>Default: false</p><h3 id="opensearch-logstash_dateformat">logstash_dateformat (string, optional)</h3><p>Set the Logstash date format.</p><p>Default: %Y.%m.%d</p><h3 id="opensearch-logstash_format">logstash_format (bool, optional)</h3><p>Enable Logstash log format.</p><p>Default: false</p><h3 id="opensearch-logstash_prefix">logstash_prefix (string, optional)</h3><p>Set the Logstash prefix.</p><p>Default: logstash</p><h3 id="opensearch-logstash_prefix_separator">logstash_prefix_separator (string, optional)</h3><p>Set the Logstash prefix separator.</p><p>Default: -</p><h3 id="opensearch-max_retry_get_os_version">max_retry_get_os_version (int, optional)</h3><p>max_retry_get_os_version</p><p>Default: 15</p><h3 id="opensearch-max_retry_putting_template">max_retry_putting_template (string, optional)</h3><p>You can specify times of retry putting template.</p><p>Default: 10</p><h3 id="opensearch-parent_key">parent_key (string, optional)</h3><p>parent_key</p><h3 id="opensearch-password">password (*secret.Secret, optional)</h3><p>Password for HTTP Basic authentication. <a href="../secret/">Secret</a></p><h3 id="opensearch-path">path (string, optional)</h3><p>Path for HTTP Basic authentication.</p><h3 id="opensearch-pipeline">pipeline (string, optional)</h3><p>This param is to set a pipeline ID of your OpenSearch to be added into the request, you can configure ingest node.</p><h3 id="opensearch-port">port (int, optional)</h3><p>You can specify OpenSearch port by this parameter.</p><p>Default: 9200</p><h3 id="opensearch-prefer_oj_serializer">prefer_oj_serializer (bool, optional)</h3><p>With default behavior, OpenSearch client uses Yajl as JSON encoder/decoder. Oj is the alternative high performance JSON encoder/decoder. When this parameter sets as true, OpenSearch client uses Oj as JSON encoder/decoder.</p><p>Default: false</p><h3 id="opensearch-reconnect_on_error">reconnect_on_error (bool, optional)</h3><p>Indicates that the plugin should reset connection on any error (reconnect on next send). By default it will reconnect only on &ldquo;host unreachable exceptions&rdquo;. We recommended to set this true in the presence of OpenSearch shield.</p><p>Default: false</p><h3 id="opensearch-reload_after">reload_after (string, optional)</h3><p>When reload_connections true, this is the integer number of operations after which the plugin will reload the connections. The default value is 10000.</p><h3 id="opensearch-reload_connections">reload_connections (*bool, optional)</h3><p>You can tune how the OpenSearch-transport host reloading feature works.(default: true)</p><p>Default: true</p><h3 id="opensearch-reload_on_failure">reload_on_failure (bool, optional)</h3><p>Indicates that the OpenSearch-transport will try to reload the nodes addresses if there is a failure while making the request, this can be useful to quickly remove a dead node from the list of addresses.</p><p>Default: false</p><h3 id="opensearch-remove_keys_on_update">remove_keys_on_update (string, optional)</h3><p>Remove keys on update will not update the configured keys in OpenSearch when a record is being updated. This setting only has any effect if the write operation is update or upsert.</p><h3 id="opensearch-remove_keys_on_update_key">remove_keys_on_update_key (string, optional)</h3><p>This setting allows remove_keys_on_update to be configured with a key in each record, in much the same way as target_index_key works.</p><h3 id="opensearch-request_timeout">request_timeout (string, optional)</h3><p>You can specify HTTP request timeout.</p><p>Default: 5s</p><h3 id="opensearch-resurrect_after">resurrect_after (string, optional)</h3><p>You can set in the OpenSearch-transport how often dead connections from the OpenSearch-transport&rsquo;s pool will be resurrected.</p><p>Default: 60s</p><h3 id="opensearch-retry_tag">retry_tag (string, optional)</h3><p>This setting allows custom routing of messages in response to bulk request failures. The default behavior is to emit failed records using the same tag that was provided.</p><h3 id="opensearch-routing_key">routing_key (string, optional)</h3><p>routing_key</p><h3 id="opensearch-ca_file">ca_file (*secret.Secret, optional)</h3><p>CA certificate</p><h3 id="opensearch-client_cert">client_cert (*secret.Secret, optional)</h3><p>Client certificate</p><h3 id="opensearch-client_key">client_key (*secret.Secret, optional)</h3><p>Client certificate key</p><h3 id="opensearch-client_key_pass">client_key_pass (*secret.Secret, optional)</h3><p>Client key password</p><h3 id="opensearch-scheme">scheme (string, optional)</h3><p>Connection scheme</p><p>Default: http</p><h3 id="opensearch-selector_class_name">selector_class_name (string, optional)</h3><p>selector_class_name</p><h3 id="opensearch-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="opensearch-sniffer_class_name">sniffer_class_name (string, optional)</h3><p>The default Sniffer used by the OpenSearch::Transport class works well when Fluentd has a direct connection to all of the OpenSearch servers and can make effective use of the _nodes API. This doesn&rsquo;t work well when Fluentd must connect through a load balancer or proxy. The <code>sniffer_class_name</code> parameter gives you the ability to provide your own Sniffer class to implement whatever connection reload logic you require. In addition, there is a new Fluent::Plugin::OpenSearchSimpleSniffer class which reuses the hosts given in the configuration, which is typically the hostname of the load balancer or proxy. For example, a configuration like this would cause connections to logging-os to reload every 100 operations: <a href="https://github.com/fluent/fluent-plugin-opensearch#sniffer-class-name">https://github.com/fluent/fluent-plugin-opensearch#sniffer-class-name</a>.</p><h3 id="opensearch-ssl_verify">ssl_verify (*bool, optional)</h3><p>Skip ssl verification (default: true)</p><p>Default: true</p><h3 id="opensearch-ssl_version">ssl_version (string, optional)</h3><p>If you want to configure SSL/TLS version, you can specify ssl_version parameter. [SSLv23, TLSv1, TLSv1_1, TLSv1_2]</p><h3 id="opensearch-suppress_doc_wrap">suppress_doc_wrap (bool, optional)</h3><p>By default, record body is wrapped by &lsquo;doc&rsquo;. This behavior can not handle update script requests. You can set this to suppress doc wrapping and allow record body to be untouched.</p><p>Default: false</p><h3 id="opensearch-suppress_type_name">suppress_type_name (*bool, optional)</h3><p>Suppress type name to avoid warnings in OpenSearch</p><h3 id="opensearch-tag_key">tag_key (string, optional)</h3><p>This will add the Fluentd tag in the JSON record.</p><p>Default: tag</p><h3 id="opensearch-target_index_affinity">target_index_affinity (bool, optional)</h3><p>target_index_affinity</p><p>Default: false</p><h3 id="opensearch-target_index_key">target_index_key (string, optional)</h3><p>Tell this plugin to find the index name to write to in the record under this key in preference to other mechanisms. Key can be specified as path to nested record using dot (&rsquo;.&rsquo;) as a separator.</p><h3 id="opensearch-template_file">template_file (*secret.Secret, optional)</h3><p>The path to the file containing the template to install. <a href="../secret/">Secret</a></p><h3 id="opensearch-template_name">template_name (string, optional)</h3><p>The name of the template to define. If a template by the name given is already present, it will be left unchanged, unless template_overwrite is set, in which case the template will be updated.</p><h3 id="opensearch-template_overwrite">template_overwrite (bool, optional)</h3><p>Always update the template, even if it already exists.</p><p>Default: false</p><h3 id="opensearch-templates">templates (string, optional)</h3><p>Specify index templates in form of hash. Can contain multiple templates.</p><h3 id="opensearch-time_key">time_key (string, optional)</h3><p>By default, when inserting records in Logstash format, @timestamp is dynamically created with the time at log ingestion. If you&rsquo;d like to use a custom time, include an @timestamp with your record.</p><h3 id="opensearch-time_key_exclude_timestamp">time_key_exclude_timestamp (bool, optional)</h3><p>time_key_exclude_timestamp</p><p>Default: false</p><h3 id="opensearch-time_key_format">time_key_format (string, optional)</h3><p>The format of the time stamp field (@timestamp or what you specify with <code>time_key</code>). This parameter only has an effect when logstash_format is true as it only affects the name of the index we write to.</p><h3 id="opensearch-time_parse_error_tag">time_parse_error_tag (string, optional)</h3><p>With logstash_format true, OpenSearch plugin parses timestamp field for generating index name. If the record has invalid timestamp value, this plugin emits an error event to @ERROR label with <code>time_parse_error_tag</code> configured tag.</p><h3 id="opensearch-time_precision">time_precision (string, optional)</h3><p>Should the record not include a time_key, define the degree of sub-second time precision to preserve from the time portion of the routed event.</p><h3 id="opensearch-truncate_caches_interval">truncate_caches_interval (string, optional)</h3><p>truncate_caches_interval</p><h3 id="opensearch-unrecoverable_error_types">unrecoverable_error_types (string, optional)</h3><p>Default unrecoverable_error_types parameter is set up strictly. Because rejected_execution_exception is caused by exceeding OpenSearch&rsquo;s thread pool capacity. Advanced users can increase its capacity, but normal users should follow default behavior.</p><h3 id="opensearch-unrecoverable_record_types">unrecoverable_record_types (string, optional)</h3><p>unrecoverable_record_types</p><h3 id="opensearch-use_legacy_template">use_legacy_template (*bool, optional)</h3><p>Specify wether to use legacy template or not.</p><p>Default: true</p><h3 id="opensearch-user">user (string, optional)</h3><p>User for HTTP Basic authentication. This plugin will escape required URL encoded characters within %{} placeholders. e.g. <code>%{demo+}</code></p><h3 id="opensearch-utc_index">utc_index (*bool, optional)</h3><p>By default, the records inserted into index logstash-YYMMDD with UTC (Coordinated Universal Time). This option allows to use local time if you describe <code>utc_index</code> to false.</p><p>Default: true</p><h3 id="opensearch-validate_client_version">validate_client_version (bool, optional)</h3><p>When you use mismatched OpenSearch server and client libraries, fluent-plugin-opensearch cannot send data into OpenSearch.</p><p>Default: false</p><h3 id="opensearch-verify_os_version_at_startup">verify_os_version_at_startup (*bool, optional)</h3><p>verify_os_version_at_startup (default: true)</p><p>Default: true</p><h3 id="opensearch-with_transporter_log">with_transporter_log (bool, optional)</h3><p>This is debugging purpose option to enable to obtain transporter layer log.</p><p>Default: false</p><h3 id="opensearch-write_operation">write_operation (string, optional)</h3><p>The write_operation can be any of: (index,create,update,upsert)</p><p>Default: index</p><h2 id="opensearchendpointcredentials">OpenSearchEndpointCredentials</h2><h3 id="opensearchendpointcredentials-access_key_id">access_key_id (*secret.Secret, optional)</h3><p>AWS access key id. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="opensearchendpointcredentials-assume_role_arn">assume_role_arn (*secret.Secret, optional)</h3><p>Typically, you can use AssumeRole for cross-account access or federation.</p><h3 id="opensearchendpointcredentials-assume_role_session_name">assume_role_session_name (*secret.Secret, optional)</h3><p><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity</a></p><h3 id="opensearchendpointcredentials-assume_role_web_identity_token_file">assume_role_web_identity_token_file (*secret.Secret, optional)</h3><p><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity</a></p><h3 id="opensearchendpointcredentials-ecs_container_credentials_relative_uri">ecs_container_credentials_relative_uri (*secret.Secret, optional)</h3><p>Set with AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variable value</p><h3 id="opensearchendpointcredentials-region">region (string, optional)</h3><p>AWS region. It should be in form like us-east-1, us-west-2. Default nil, which means try to find from environment variable AWS_REGION.</p><h3 id="opensearchendpointcredentials-secret_access_key">secret_access_key (*secret.Secret, optional)</h3><p>AWS secret key. This parameter is required when your agent is not running on EC2 instance with an IAM Role.</p><h3 id="opensearchendpointcredentials-sts_credentials_region">sts_credentials_region (*secret.Secret, optional)</h3><p>By default, the AWS Security Token Service (AWS STS) is available as a global service, and all AWS STS requests go to a single endpoint at <a href="https://sts.amazonaws.com">https://sts.amazonaws.com</a>. AWS recommends using Regional AWS STS endpoints instead of the global endpoint to reduce latency, build in redundancy, and increase session token validity. <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html</a></p><h3 id="opensearchendpointcredentials-url">url (string, required)</h3><p>AWS connection url.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ef25dbf7203fc85cd0c4a189a702360a">4.26 - Redis</h1><h1 id="redis-plugin-for-fluentd">Redis plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>Sends logs to Redis endpoints. For details, see <a href="https://github.com/fluent-plugins-nursery/fluent-plugin-redis">https://github.com/fluent-plugins-nursery/fluent-plugin-redis</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">redis</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis-master.prod.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">tags</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-allow_duplicate_key">allow_duplicate_key (bool, optional)</h3><p>Allow inserting key duplicate. It will work as update values.</p><p>Default: false</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-db_number">db_number (int, optional)</h3><p>DbNumber database number is optional.</p><p>Default: 0</p><h3 id="output-config-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="output-config-host">host (string, optional)</h3><p>Host Redis endpoint</p><p>Default: localhost</p><h3 id="output-config-insert_key_prefix">insert_key_prefix (string, optional)</h3><p>insert_key_prefix</p><p>Default: &ldquo;${tag}&rdquo;</p><h3 id="output-config-password">password (*secret.Secret, optional)</h3><p>Redis Server password</p><h3 id="output-config-port">port (int, optional)</h3><p>Port of the Redis server</p><p>Default: 6379</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, Fluentd logs a warning message and increases the <code>fluentd_output_status_slow_flush_count</code> metric.</p><h3 id="output-config-strftime_format">strftime_format (string, optional)</h3><p>Users can set strftime format.</p><p>Default: &ldquo;%s&rdquo;</p><h3 id="output-config-ttl">ttl (int, optional)</h3><p>If 0 or negative value is set, ttl is not set in each key.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-67b66da64354abd24b6cf4012f300c3a">4.27 - Relabel</h1><p>Available in Logging Operator version 4.2 and later.</p><p>The relabel output uses the <a href="https://docs.fluentd.org/output/relabel">relabel output plugin of Fluentd</a> to route events back to a specific Flow, where they can be processed again.</p><p>This is useful, for example, if you need to preprocess a subset of logs differently, but then do the same processing on all messages at the end. In this case, you can create multiple flows for preprocessing based on specific log matchers and then aggregate everything into a single final flow for postprocessing.</p><p>The value of the <code>label</code> parameter of the relabel output must be the same as the value of the <code>flowLabel</code> parameter of the Flow (or ClusterFlow) where you want to send the messages.</p><p>For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">relabel</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">label</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;@final-flow&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">serviceFlow1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">namespace1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">serviceFlow2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">namespace2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">globalOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">final-relabel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">select</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">app</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">final-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">flowLabel</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;@final-flow&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">includeLabelInRouter</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:700">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Using the relabel output also makes it possible to pass the messages emitted by the <a href="/4.10/docs/configuration/plugins/filters/concat/">Concat</a> plugin in case of a timeout. Set the <code>timeout_label</code> of the concat plugin to the flowLabel of the flow where you want to send the timeout messages.</p><h2 id="output-config">Output Config</h2><h3 id="label-string-required-output-config-label">label (string, required) {#output config-label}</h3><p>Specifies new label for events</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-65dde214a849324898de8fc0878b8ff4">4.28 - Splunk</h1><h1 id="splunk-via-hec-output-plugin-for-fluentd">Splunk via Hec output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>For details, see <a href="https://github.com/splunk/fluent-plugin-splunk-hec">https://github.com/splunk/fluent-plugin-splunk-hec</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">splunkHec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hec_host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">splunk.default.svc.cluster.local</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">hec_port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">8088</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">protocol</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="splunkhecoutput">SplunkHecOutput</h2><p>SplunkHecOutput sends your logs to Splunk via Hec</p><h3 id="splunkhecoutput-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="splunkhecoutput-ca_file">ca_file (*secret.Secret, optional)</h3><p>The path to a file containing a PEM-format CA certificate. <a href="../secret/">Secret</a></p><h3 id="splunkhecoutput-ca_path">ca_path (*secret.Secret, optional)</h3><p>The path to a directory containing CA certificates in PEM format. <a href="../secret/">Secret</a></p><h3 id="splunkhecoutput-client_cert">client_cert (*secret.Secret, optional)</h3><p>The path to a file containing a PEM-format CA certificate for this client. <a href="../secret/">Secret</a></p><h3 id="splunkhecoutput-client_key">client_key (*secret.Secret, optional)</h3><p>The private key for this client.&rsquo; <a href="../secret/">Secret</a></p><h3 id="splunkhecoutput-coerce_to_utf8">coerce_to_utf8 (*bool, optional)</h3><p>Indicates whether to allow non-UTF-8 characters in user logs. If set to true, any non-UTF-8 character is replaced by the string specified in non_utf8_replacement_string. If set to false, the Ingest API errors out any non-UTF-8 characters. .</p><p>Default: true</p><h3 id="splunkhecoutput-data_type">data_type (string, optional)</h3><p>The type of data that will be sent to Sumo Logic, either event or metric</p><p>Default: event</p><h3 id="splunkhecoutput-fields">fields (Fields, optional)</h3><p>In this case, parameters inside <code>&lt;fields></code> are used as indexed fields and removed from the original input events</p><h3 id="splunkhecoutput-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="splunkhecoutput-hec_host">hec_host (string, required)</h3><p>You can specify SplunkHec host by this parameter.</p><h3 id="splunkhecoutput-hec_port">hec_port (int, optional)</h3><p>The port number for the Hec token or the Hec load balancer.</p><p>Default: 8088</p><h3 id="splunkhecoutput-hec_token">hec_token (*secret.Secret, required)</h3><p>Identifier for the Hec token. <a href="../secret/">Secret</a></p><h3 id="splunkhecoutput-host">host (string, optional)</h3><p>The host location for events. Cannot set both host and host_key parameters at the same time. (Default:hostname)</p><h3 id="splunkhecoutput-host_key">host_key (string, optional)</h3><p>Key for the host location. Cannot set both host and host_key parameters at the same time.</p><h3 id="splunkhecoutput-idle_timeout">idle_timeout (int, optional)</h3><p>If a connection has not been used for this number of seconds it will automatically be reset upon the next use to avoid attempting to send to a closed connection. nil means no timeout.</p><h3 id="splunkhecoutput-index">index (string, optional)</h3><p>Identifier for the Splunk index to be used for indexing events. If this parameter is not set, the indexer is chosen by HEC. Cannot set both index and index_key parameters at the same time.</p><h3 id="splunkhecoutput-index_key">index_key (string, optional)</h3><p>The field name that contains the Splunk index name. Cannot set both index and index_key parameters at the same time.</p><h3 id="splunkhecoutput-insecure_ssl">insecure_ssl (*bool, optional)</h3><p>Indicates if insecure SSL connection is allowed</p><p>Default: false</p><h3 id="splunkhecoutput-keep_keys">keep_keys (bool, optional)</h3><p>By default, all the fields used by the *_key parameters are removed from the original input events. To change this behavior, set this parameter to true. This parameter is set to false by default. When set to true, all fields defined in <code>index_key</code>, <code>host_key</code>, <code>source_key</code>, <code>sourcetype_key</code>, <code>metric_name_key</code>, and <code>metric_value_key</code> are saved in the original event.</p><h3 id="splunkhecoutput-metric_name_key">metric_name_key (string, optional)</h3><p>Field name that contains the metric name. This parameter only works in conjunction with the metrics_from_event parameter. When this prameter is set, the <code>metrics_from_event</code> parameter is automatically set to false.</p><p>Default: true</p><h3 id="splunkhecoutput-metric_value_key">metric_value_key (string, optional)</h3><p>Field name that contains the metric value, this parameter is required when <code>metric_name_key</code> is configured.</p><h3 id="splunkhecoutput-metrics_from_event">metrics_from_event (*bool, optional)</h3><p>When data_type is set to &ldquo;metric&rdquo;, the ingest API will treat every key-value pair in the input event as a metric name-value pair. Set metrics_from_event to false to disable this behavior and use <code>metric_name_key</code> and <code>metric_value_key</code> to define metrics. (Default:true)</p><h3 id="splunkhecoutput-non_utf8_replacement_string">non_utf8_replacement_string (string, optional)</h3><p>If coerce_to_utf8 is set to true, any non-UTF-8 character is replaced by the string you specify in this parameter. .</p><p>Default: &rsquo; '</p><h3 id="splunkhecoutput-open_timeout">open_timeout (int, optional)</h3><p>The amount of time to wait for a connection to be opened.</p><h3 id="splunkhecoutput-protocol">protocol (string, optional)</h3><p>This is the protocol to use for calling the Hec API. Available values are: http, https.</p><p>Default: https</p><h3 id="splunkhecoutput-read_timeout">read_timeout (int, optional)</h3><p>The amount of time allowed between reading two chunks from the socket.</p><h3 id="splunkhecoutput-ssl_ciphers">ssl_ciphers (string, optional)</h3><p>List of SSL ciphers allowed.</p><h3 id="splunkhecoutput-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="splunkhecoutput-source">source (string, optional)</h3><p>The source field for events. If this parameter is not set, the source will be decided by HEC. Cannot set both source and source_key parameters at the same time.</p><h3 id="splunkhecoutput-source_key">source_key (string, optional)</h3><p>Field name to contain source. Cannot set both source and source_key parameters at the same time.</p><h3 id="splunkhecoutput-sourcetype">sourcetype (string, optional)</h3><p>The sourcetype field for events. When not set, the sourcetype is decided by HEC. Cannot set both source and <code>source_key</code> parameters at the same time.</p><h3 id="splunkhecoutput-sourcetype_key">sourcetype_key (string, optional)</h3><p>Field name that contains the sourcetype. Cannot set both source and source_key parameters at the same time.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f239285458b59ea6270063a2b99b095d">4.29 - SQS</h1><h1 id="sqs-outputhttpsgithubcomixixifluent-plugin-sqs"><a href="https://github.com/ixixi/fluent-plugin-sqs">SQS Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for SQS.</p><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-aws_key_id">aws_key_id (*secret.Secret, optional)</h3><p>AWS access key id</p><h3 id="output-config-aws_sec_key">aws_sec_key (*secret.Secret, optional)</h3><p>AWS secret key</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-create_queue">create_queue (*bool, optional)</h3><p>Create SQS queue</p><p>Default: true</p><h3 id="output-config-delay_seconds">delay_seconds (int, optional)</h3><p>Delivery delay seconds</p><p>Default: 0</p><h3 id="output-config-include_tag">include_tag (*bool, optional)</h3><p>Include tag</p><p>Default: true</p><h3 id="output-config-message_group_id">message_group_id (string, optional)</h3><p>Message group id for FIFO queue</p><h3 id="output-config-queue_name">queue_name (string, optional)</h3><p>SQS queue name - required if sqs_url is not set</p><h3 id="output-config-region">region (string, optional)</h3><p>AWS region</p><p>Default: ap-northeast-1</p><h3 id="sqs_url-string-optional-output-config-sqs_url">sqs_url (string, optional) {#output config-sqs_url}</h3><p>SQS queue url e.g. <code>https://sqs.us-west-2.amazonaws.com/123456789012/myqueue</code></p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-tag_property_name">tag_property_name (string, optional)</h3><p>Tags property name in json</p><p>Default: &lsquo;__tag&rsquo;</p><h2 id="example-sqs-output-configurations">Example <code>SQS</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sqs-output-sample</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">sqs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">queue_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">some-aws-sqs-queue</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">create_queue</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">region</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us-east-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>    @type sqs
</span></span><span style="display:flex"><span>    @id test_sqs
</span></span><span style="display:flex"><span>    queue_name some-aws-sqs-queue
</span></span><span style="display:flex"><span>    create_queue false
</span></span><span style="display:flex"><span>    region us-east-1
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span>
</span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ae2cf65122129146578f128193f9e75d">4.30 - SumoLogic</h1><h1 id="sumologic-output-plugin-for-fluentd">SumoLogic output plugin for Fluentd</h1><h2 id="overview">Overview</h2><p>This plugin has been designed to output logs or metrics to SumoLogic via a HTTP collector endpoint
For details, see <a href="https://github.com/SumoLogic/fluentd-output-sumologic">https://github.com/SumoLogic/fluentd-output-sumologic</a>.</p><h2 id="example-secret-for-http-input-url">Example secret for HTTP input URL:</h2><pre tabindex="0"><code>export URL=&#39;https://endpoint1.collection.eu.sumologic.com/receiver/v1/http/&#39;
kubectl create secret generic sumo-output --from-literal &#34;endpoint=$URL&#34;
</code></pre><h2 id="example-clusteroutput">Example ClusterOutput</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ClusterOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">sumologic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_mode</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">compress</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">endpoint</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">source_name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="output-config">Output Config</h2><h3 id="output-config-add_timestamp">add_timestamp (bool, optional)</h3><p>Add timestamp (or timestamp_key) field to logs before sending to SumoLogic</p><p>Default: true</p><h3 id="output-config-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="output-config-compress">compress (*bool, optional)</h3><p>Compress payload</p><p>Default: false</p><h3 id="output-config-compress_encoding">compress_encoding (string, optional)</h3><p>Encoding method of compression (either gzip or deflate)</p><p>Default: gzip</p><h3 id="output-config-custom_dimensions">custom_dimensions (string, optional)</h3><p>Dimensions string (eg &ldquo;cluster=payment, service=credit_card&rdquo;) which is going to be added to every metric record.</p><h3 id="output-config-custom_fields">custom_fields ([]string, optional)</h3><p>Comma-separated key=value list of fields to apply to every log. <a href="https://help.sumologic.com/Manage/Fields#http-source-fields">More information</a></p><h3 id="output-config-data_type">data_type (string, optional)</h3><p>The type of data that will be sent to Sumo Logic, either logs or metrics</p><p>Default: logs</p><h3 id="output-config-delimiter">delimiter (string, optional)</h3><p>Delimiter</p><p>Default: .</p><h3 id="disable_cookies-bool-optional-output-config-disable_cookies">disable_cookies (bool, optional) {#output config-disable_cookies}</h3><p>Option to disable cookies on the HTTP Client.</p><p>Default: false</p><h3 id="output-config-endpoint">endpoint (*secret.Secret, required)</h3><p>SumoLogic HTTP Collector URL</p><h3 id="output-config-log_format">log_format (string, optional)</h3><p>Format to post logs into Sumo.</p><p>Default: json</p><h3 id="output-config-log_key">log_key (string, optional)</h3><p>Used to specify the key when merging json or sending logs in text format</p><p>Default: message</p><h3 id="output-config-metric_data_format">metric_data_format (string, optional)</h3><p>The format of metrics you will be sending, either graphite or carbon2 or prometheus</p><p>Default: graphite</p><h3 id="output-config-open_timeout">open_timeout (int, optional)</h3><p>Set timeout seconds to wait until connection is opened.</p><p>Default: 60</p><h3 id="output-config-proxy_uri">proxy_uri (string, optional)</h3><p>Add the uri of the proxy environment if present.</p><h3 id="output-config-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="output-config-source_category">source_category (string, optional)</h3><p>Set _sourceCategory metadata field within SumoLogic</p><p>Default: nil</p><h3 id="output-config-source_host">source_host (string, optional)</h3><p>Set _sourceHost metadata field within SumoLogic</p><p>Default: nil</p><h3 id="output-config-source_name">source_name (string, required)</h3><p>Set _sourceName metadata field within SumoLogic - overrides source_name_key (default is nil)</p><h3 id="output-config-source_name_key">source_name_key (string, optional)</h3><p>Set as source::path_key&rsquo;s value so that the source_name can be extracted from Fluentd&rsquo;s buffer</p><p>Default: source_name</p><h3 id="output-config-sumo_client">sumo_client (string, optional)</h3><p>Name of sumo client which is send as X-Sumo-Client header</p><p>Default: fluentd-output</p><h3 id="output-config-timestamp_key">timestamp_key (string, optional)</h3><p>Field name when add_timestamp is on</p><p>Default: timestamp</p><h3 id="output-config-verify_ssl">verify_ssl (bool, optional)</h3><p>Verify ssl certificate.</p><p>Default: true</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-014aa24ff26bb6369dc8484f097d845d">4.31 - Syslog</h1><h1 id="syslog-outputhttpsgithubcomcloudfoundryfluent-plugin-syslog_rfc5424"><a href="https://github.com/cloudfoundry/fluent-plugin-syslog_rfc5424">Syslog Output</a></h1><h2 id="overview">Overview</h2><p>Fluentd output plugin for remote syslog with RFC5424 headers logs.</p><h2 id="configuration">Configuration</h2><h2 id="syslogoutputconfig">SyslogOutputConfig</h2><h3 id="syslogoutputconfig-allow_self_signed_cert">allow_self_signed_cert (*bool, optional)</h3><p>allow_self_signed_cert for mutual tls</p><p>Default: false</p><h3 id="syslogoutputconfig-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="syslogoutputconfig-client_cert_path">client_cert_path (*secret.Secret, optional)</h3><p>file path for private_key_path</p><h3 id="syslogoutputconfig-enable_system_cert_store">enable_system_cert_store (*bool, optional)</h3><p>cert_store to set ca_certificate for ssl context</p><h3 id="syslogoutputconfig-format">format (*FormatRfc5424, optional)</h3><p><a href="../format_rfc5424/">Format</a></p><h3 id="syslogoutputconfig-fqdn">fqdn (string, optional)</h3><p>Fqdn</p><p>Default: &ldquo;nil&rdquo;</p><h3 id="syslogoutputconfig-host">host (string, required)</h3><p>Destination host address</p><h3 id="syslogoutputconfig-insecure">insecure (*bool, optional)</h3><p>skip ssl validation</p><p>Default: false</p><h3 id="syslogoutputconfig-port">port (int, optional)</h3><p>Destination host port</p><p>Default: &ldquo;514&rdquo;</p><h3 id="syslogoutputconfig-private_key_passphrase">private_key_passphrase (*secret.Secret, optional)</h3><p>PrivateKeyPassphrase for private key</p><p>Default: &ldquo;nil&rdquo;</p><h3 id="syslogoutputconfig-private_key_path">private_key_path (*secret.Secret, optional)</h3><p>file path for private_key_path</p><h3 id="syslogoutputconfig-slow_flush_log_threshold">slow_flush_log_threshold (string, optional)</h3><p>The threshold for chunk flush performance check. Parameter type is float, not time, default: 20.0 (seconds) If chunk flush takes longer time than this threshold, fluentd logs warning message and increases metric fluentd_output_status_slow_flush_count.</p><h3 id="syslogoutputconfig-transport">transport (string, optional)</h3><p>Transport Protocol</p><p>Default: &ldquo;tls&rdquo;</p><h3 id="syslogoutputconfig-trusted_ca_path">trusted_ca_path (*secret.Secret, optional)</h3><p>file path to ca to trust</p><h3 id="syslogoutputconfig-verify_fqdn">verify_fqdn (*bool, optional)</h3><p>verify_fqdn</p><p>Default: nil</p><h3 id="syslogoutputconfig-version">version (string, optional)</h3><p>TLS Version</p><p>Default: &ldquo;TLSv1_2&rdquo;</p><h2 id="example-file-output-configurations">Example <code>File</code> output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SYSLOG-HOST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">123</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">format</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">app_name_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example.custom_field_1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">proc_id_field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">example.custom_field_2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_wait</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">timekey_use_utc</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><p>Fluentd config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;match</span> <span style="color:#a40000">**</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>	@type syslog_rfc5424
</span></span><span style="display:flex"><span>	@id test_syslog
</span></span><span style="display:flex"><span>	host SYSLOG-HOST
</span></span><span style="display:flex"><span>	port 123
</span></span><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;format&gt;</span>
</span></span><span style="display:flex"><span>   @type syslog_rfc5424
</span></span><span style="display:flex"><span>   app_name_field example.custom_field_1
</span></span><span style="display:flex"><span>   proc_id_field example.custom_field_2
</span></span><span style="display:flex"><span> <span style="color:#204a87;font-weight:700">&lt;/format&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;buffer</span> <span style="color:#a40000">tag,time</span><span style="color:#204a87;font-weight:700">&gt;</span>
</span></span><span style="display:flex"><span>	  @type file
</span></span><span style="display:flex"><span>	  path /buffers/test_file.*.buffer
</span></span><span style="display:flex"><span>	  retry_forever true
</span></span><span style="display:flex"><span>	  timekey 1m
</span></span><span style="display:flex"><span>	  timekey_use_utc true
</span></span><span style="display:flex"><span>	  timekey_wait 30s
</span></span><span style="display:flex"><span>	<span style="color:#204a87;font-weight:700">&lt;/buffer&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#204a87;font-weight:700">&lt;/match&gt;</span></span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1f1e7ebd2a7521c62ebb908f2d9dc6d4">4.32 - VMware Log Intelligence</h1><h2 id="overview">Overview</h2><p>VMware Log Intelligence output plugin for Fluentd. For details, see <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence">https://github.com/vmware/fluent-plugin-vmware-log-intelligence</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">vmwarelogintelligence</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">endpoint_url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://data.upgrade.symphony-dev.com/le-mans/v1/streams/ingestion-pipeline-stream</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">verify_ssl</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">http_compress</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">content_type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">authorization</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">vmware-log-intelligence-token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">authorization</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">structure</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">simple</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">chunk_limit_records</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">300</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">flush_interval</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">retry_max_times</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="vmwarelogintelligence">VMwareLogIntelligence</h2><h3 id="vmwarelogintelligence-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="vmwarelogintelligence-endpoint_url">endpoint_url (string, required)</h3><p>Log Intelligence endpoint to send logs to <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-endpoint_url">https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-endpoint_url</a></p><h3 id="vmwarelogintelligence-format">format (*Format, optional)</h3><p><a href="../format/">Format</a></p><h3 id="vmwarelogintelligence-http_compress">http_compress (*bool, optional)</h3><p>Compress http request <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-http_compress">https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-http_compress</a></p><h3 id="vmwarelogintelligence-headers">headers (LogIntelligenceHeaders, required)</h3><p>Required headers for sending logs to VMware Log Intelligence <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-3Cheaders-3E">https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-3Cheaders-3E</a></p><h3 id="vmwarelogintelligence-verify_ssl">verify_ssl (*bool, required)</h3><p>Verify SSL (default: true) <a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-verify_ssl">https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-verify_ssl</a></p><p>Default: true</p><h2 id="vmwarelogintelligenceheaders">VMwareLogIntelligenceHeaders</h2><p>headers
<a href="https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-3Cheaders-3E">https://github.com/vmware/fluent-plugin-vmware-log-intelligence?tab=readme-ov-file#label-3Cheaders-3E</a></p><h3 id="vmwarelogintelligenceheaders-authorization">authorization (*secret.Secret, required)</h3><p>Authorization Bearer token for http request to VMware Log Intelligence <a href="../secret/">Secret</a></p><h3 id="vmwarelogintelligenceheaders-content_type">content_type (string, required)</h3><p>Content Type for http request to VMware Log Intelligence</p><p>Default: application/json</p><h3 id="vmwarelogintelligenceheaders-structure">structure (string, required)</h3><p>Structure for http request to VMware Log Intelligence</p><p>Default: simple</p><h2 id="logintelligenceheadersout">LogIntelligenceHeadersOut</h2><p>LogIntelligenceHeadersOut is used to convert the input LogIntelligenceHeaders to a fluentd
output that uses the correct key names for the VMware Log Intelligence plugin. This allows the
Ouput to accept the config is snake_case (as other output plugins do) but output the fluentd
<headers> config with the proper key names (ie. content_type -> Content-Type)</p><h3 id="logintelligenceheadersout-authorization">Authorization (*secret.Secret, required)</h3><p>Authorization Bearer token for http request to VMware Log Intelligence</p><h3 id="logintelligenceheadersout-content-type">Content-Type (string, required)</h3><p>Content Type for http request to VMware Log Intelligence</p><p>Default: application/json</p><h3 id="logintelligenceheadersout-structure">structure (string, required)</h3><p>Structure for http request to VMware Log Intelligence</p><p>Default: simple</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-0102b64d79d8ea746d1515b5bde58add">4.33 - VMware LogInsight</h1><h2 id="overview">Overview</h2><p>VMware LogInsight output plugin for Fluentd. For details, see <a href="https://github.com/vmware/fluent-plugin-vmware-loginsight">https://github.com/vmware/fluent-plugin-vmware-loginsight</a>.</p><h2 id="example-output-configurations">Example output configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">vmwareLogInsight</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">scheme</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">ssl_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">MY_LOGINSIGHT_HOST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">9543</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">agent_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">log_text_keys</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">msg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">	</span>- <span style="color:#000">message</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">http_conn_debug</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="vmwareloginsight">VMwareLogInsight</h2><p>Send your logs to VMware LogInsight</p><h3 id="vmwareloginsight-agent_id">agent_id (string, optional)</h3><p>agent_id generated by your LI</p><p>Default: 0</p><h3 id="vmwareloginsight-authentication">authentication (*string, optional)</h3><p>Type of authentication to use (nil,basic)</p><p>Default: nil</p><h3 id="vmwareloginsight-buffer">buffer (*Buffer, optional)</h3><p><a href="../buffer/">Buffer</a></p><h3 id="vmwareloginsight-ca_file">ca_file (*secret.Secret, optional)</h3><p><a href="../secret/">Secret</a></p><h3 id="vmwareloginsight-config_param">config_param (map[string]string, optional)</h3><p>Rename fields names</p><p>Default: {&ldquo;source&rdquo; => &ldquo;log_source&rdquo;}</p><h3 id="vmwareloginsight-flatten_hashes">flatten_hashes (*bool, optional)</h3><p>Flatten hashes to create one key/val pair w/o losing log data</p><p>Default: true</p><h3 id="vmwareloginsight-flatten_hashes_separator">flatten_hashes_separator (string, optional)</h3><p>Separator to use for joining flattened keys</p><p>Default: _</p><h3 id="vmwareloginsight-http_conn_debug">http_conn_debug (bool, optional)</h3><p>If set, enables debug logs for http connection</p><p>Default: false</p><h3 id="vmwareloginsight-http_method">http_method (string, optional)</h3><p>HTTP method (post)</p><p>Default: post</p><h3 id="vmwareloginsight-host">host (string, optional)</h3><p>VMware Aria Operations For Logs Host ex. localhost</p><h3 id="vmwareloginsight-log_text_keys">log_text_keys ([]string, optional)</h3><p>Keys from log event whose values should be added as log message/text to VMware Aria Operations For Logs. These key/value pairs won&rsquo;t be expanded/flattened and won&rsquo;t be added as metadata/fields.</p><p>Default: [&ldquo;log&rdquo;, &ldquo;message&rdquo;, &ldquo;msg&rdquo;]</p><h3 id="vmwareloginsight-max_batch_size">max_batch_size (int, optional)</h3><p>Number of bytes per post request</p><p>Default: 4000000</p><h3 id="vmwareloginsight-password">password (*secret.Secret, optional)</h3><p><a href="../secret/">Secret</a></p><h3 id="vmwareloginsight-path">path (string, optional)</h3><p>VMware Aria Operations For Logs ingestion api path ex. &lsquo;api/v1/events/ingest&rsquo;</p><p>Default: api/v1/events/ingest</p><h3 id="vmwareloginsight-port">port (int, optional)</h3><p>VMware Aria Operations For Logs port ex. 9000</p><p>Default: 80</p><h3 id="vmwareloginsight-raise_on_error">raise_on_error (bool, optional)</h3><p>Raise errors that were rescued during HTTP requests?</p><p>Default: false</p><h3 id="vmwareloginsight-rate_limit_msec">rate_limit_msec (int, optional)</h3><p>Simple rate limiting: ignore any records within <code>rate_limit_msec</code> since the last one</p><p>Default: 0</p><h3 id="vmwareloginsight-request_retries">request_retries (int, optional)</h3><p>Number of retries</p><p>Default: 3</p><h3 id="vmwareloginsight-request_timeout">request_timeout (int, optional)</h3><p>http connection ttl for each request</p><p>Default: 5</p><h3 id="vmwareloginsight-ssl_verify">ssl_verify (*bool, optional)</h3><p>SSL verification flag</p><p>Default: true</p><h3 id="vmwareloginsight-scheme">scheme (string, optional)</h3><p>HTTP scheme (http,https)</p><p>Default: http</p><h3 id="vmwareloginsight-serializer">serializer (string, optional)</h3><p>Serialization (json)</p><p>Default: json</p><h3 id="vmwareloginsight-shorten_keys">shorten_keys (map[string]string, optional)</h3><p>Keys from log event to rewrite for instance from &lsquo;kubernetes_namespace&rsquo; to &lsquo;k8s_namespace&rsquo; tags will be rewritten with substring substitution and applied in the order present in the hash. Hashes enumerate their values in the order that the corresponding keys were inserted, see: <a href="https://ruby-doc.org/core-2.2.2/Hash.html">https://ruby-doc.org/core-2.2.2/Hash.html</a></p><p>Default: { &lsquo;kubernetes_&rsquo;:&lsquo;k8s_&rsquo;, &rsquo;namespace&rsquo;:&rsquo;ns&rsquo;, &rsquo;labels_&rsquo;:&rsquo;&rsquo;, &lsquo;_name&rsquo;:&rsquo;&rsquo;, &lsquo;<em>hash&rsquo;:&rsquo;&rsquo;, &lsquo;container</em>&rsquo;:&rsquo;&rsquo; }</p><h3 id="vmwareloginsight-username">username (*secret.Secret, optional)</h3><p><a href="../secret/">Secret</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-3effea023502f5f282b1bcfc984721f7">4.34 - Secret definition</h1><h2 id="define-secret-value">Define secret value</h2><p>Secrets can be used in logging-operator <code>Output</code> definitions.</p><blockquote>
<p>Secrets <em>MUST</em> be in the <em>SAME</em> namespace as the <code>Output</code> or <code>ClusterOutput</code> custom resource</p></blockquote><p><strong>Example secret definition</strong></p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-name&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-key&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>For debug purposes you can define secret values directly. However this is <em>NOT</em> recommended in production.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">aws_key_id</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;secretvalue&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="define-secret-mount">Define secret mount</h2><p>There are cases when you can&rsquo;t inject secret into the configuration because the plugin need a file to read from. For this cases you can use <code>mountFrom</code>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">tls_cert_path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-name&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;kubernetes-secret-key&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>The operator will collect the secret and copy it to the <code>fluentd-output</code> secret. The fluentd configuration will contain the secret path.</p><p><strong>Example rendered configuration</strong></p><pre tabindex="0"><code>&lt;match **&gt;
    @type forward
    tls_cert_path /fluentd/etc/secret/default-fluentd-tls-tls.crt
    ...
&lt;/match&gt;
</code></pre><h3 id="how-it-works">How it works?</h3><p>Behind the scene the operator marks the secret with an annotation and watches it for changes as long as the annotation is present.</p><p><strong>Example annotated secret</strong></p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Opaque</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">annotations</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">logging.banzaicloud.io/default</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">watched</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">fluentd-tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">data</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">tls.crt</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SGVsbG8gV29ybGQ=</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><blockquote>
<p>The annotation format is <code>logging.banzaicloud.io/&lt;loggingRef>: watched</code>. Since the <code>name</code> part of the an annotation can&rsquo;t be empty the <code>default</code> applies to empty <code>loggingRef</code> value as well.</p></blockquote><p>The mount path is generated from the secret information</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>/fluentd/etc/secret/<span style="color:#000">$namespace</span>-<span style="color:#000">$secret_name</span>-<span style="color:#000">$secret_key</span>
</span></span></code></pre></div></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f82c0e1c4bdef1d77adef0a24aa2326c">5 - syslog-ng filters</h1><p>You can use the following <strong>syslog-ng</strong> filters in your <code>SyslogNGFlow</code> and <code>SyslogNGClusterFlow</code> resources.</p></div><div class="td-content">
<h1 id="pg-ed56f7c86144eb14193213bc7f89126f">5.1 - Match</h1><p>Match filters can be used to select the log records to process. These filters have the same options and syntax as <a href="/4.10/docs/configuration/plugins/syslog-ng-filters/match/">syslog-ng flow match expressions</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">or</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">apache</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json.kubernetes.labels.app.kubernetes.io/name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">nginx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">string</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="matchexpr">MatchExpr</h2><h3 id="matchexpr-and">and ([]MatchExpr, optional)</h3><h3 id="matchexpr-not">not (*MatchExpr, optional)</h3><h3 id="matchexpr-or">or ([]MatchExpr, optional)</h3><h3 id="matchexpr-regexp">regexp (*RegexpMatchExpr, optional)</h3><p><a href="#Regexp-Directive">Regexp Directive</a></p><h2 id="Regexp-Directive">Regexp Directive</h2><p>Specify filtering rule. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/customizing-message-format/reference-template-functions/#template-function-list">AxoSyslog Core documentation</a></p><h3 id="regexp-directive-flags">flags ([]string, optional)</h3><p>Pattern flags. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/regular-expressions/reference-regexp-types/regexp-flags-options/">AxoSyslog Core documentation</a></p><h3 id="regexp-directive-pattern">pattern (string, required)</h3><p>Pattern expression to evaluate</p><h3 id="regexp-directive-template">template (string, optional)</h3><p>Specify a template of the record fields to match against.</p><h3 id="regexp-directive-type">type (string, optional)</h3><p>Pattern type. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/regular-expressions/reference-regexp-types/regexp-type-options/">AxoSyslog Core documentation</a></p><h3 id="regexp-directive-value">value (string, optional)</h3><p>Specify a field name of the record to match against the value of.</p><h2 id="example-regexp-filter-configurations">Example <code>Regexp</code> filter configurations</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">demo-flow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">first</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">^5\d\d$</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">match</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">localOutputRefs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#000">demo-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>syslog-ng config result:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>log <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>    source<span style="color:#ce5c00;font-weight:700">(</span>main_input<span style="color:#ce5c00;font-weight:700">)</span><span style="color:#000;font-weight:700">;</span>
</span></span><span style="display:flex"><span>    filter <span style="color:#ce5c00;font-weight:700">{</span>
</span></span><span style="display:flex"><span>      match<span style="color:#ce5c00;font-weight:700">(</span><span style="color:#4e9a06">&#34;^5\d\d</span>$<span style="color:#4e9a06">&#34;</span> value<span style="color:#ce5c00;font-weight:700">(</span><span style="color:#4e9a06">&#34;first&#34;</span><span style="color:#ce5c00;font-weight:700">))</span><span style="color:#000;font-weight:700">;</span>
</span></span><span style="display:flex"><span>    <span style="color:#ce5c00;font-weight:700">}</span><span style="color:#000;font-weight:700">;</span>
</span></span><span style="display:flex"><span>    destination<span style="color:#ce5c00;font-weight:700">(</span>output_default_demo-output<span style="color:#ce5c00;font-weight:700">)</span><span style="color:#000;font-weight:700">;</span>
</span></span><span style="display:flex"><span><span style="color:#ce5c00;font-weight:700">}</span><span style="color:#000;font-weight:700">;</span>
</span></span></code></pre></div><hr>
</div><div class="td-content" style="page-break-before:always">
<h1 id="pg-4afe8af7a86227831c993a592f328feb">5.2 - Parser</h1><p>Parser filters can be used to extract key-value pairs from message data. Logging operator currently supports the following parsers:</p><ul>
<li><a href="#metricsprobe">metrics-probe</a></li><li><a href="#regexp">regexp</a></li><li><a href="#syslog">syslog-parser</a></li></ul><h2 id="regexp">Regexp parser</h2><p>The regexp parser can use regular expressions to parse fields from a message.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">regexp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">patterns</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#4e9a06">&#34;.*test_field -&gt; (?&lt;test_field&gt;.*)$&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">prefix</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">.regexp.</span></span></span></code></pre></div><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="syslog">Syslog parser</h2><p>The syslog parser can parse syslog messages. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-syslog/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">syslog-parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}</span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="parserhttpsaxoflowcomdocsaxosyslog-corechapter-parsers"><a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/">Parser</a></h2><h3 id="parser-metrics-probe">metrics-probe (*MetricsProbe, optional)</h3><p>Counts the messages that pass through the flow, and creates labeled stats counters based on the fields of the passing messages. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/metrics-probe/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="regexp-parser-patterns">regexp ([]string, required)</h3><p>The regular expression patterns that you want to find a match. <code>regexp-parser()</code> supports multiple patterns, and stops the processing at the first successful match. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/#patterns">regexp-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="parser-syslog-parser">syslog-parser (*SyslogParser, optional)</h3><p>Parse message as a <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-syslog/">syslog message</a>.</p><h2 id="regexp-parserhttpsaxoflowcomdocsaxosyslog-corechapter-parsersparser-regexp"><a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/">Regexp parser</a></h2><h3 id="regexp-parser-flags">flags ([]string, optional)</h3><p>Flags to influence the behavior of the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/">regexp-parser()</a>. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/#flags">regexp-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="regexp-parser-patterns">patterns ([]string, required)</h3><p>The regular expression patterns that you want to find a match. <code>regexp-parser()</code> supports multiple patterns, and stops the processing at the first successful match. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/#patterns">regexp-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="regexp-parser-prefix">prefix (string, optional)</h3><p>Insert a prefix before the name part of the parsed name-value pairs to help further processing. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/#prefix">regexp-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="regexp-parser-template">template (string, optional)</h3><p>Specify a template of the record fields to match against. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-regexp/parser-regexp-options/#template">regexp-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="syslogparser">SyslogParser</h2><p>Parse message as a <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-syslog/">syslog message</a>.</p><h3 id="syslogparser-flags">flags ([]string, optional)</h3><p>Flags to influence the behavior of the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-syslog/parser-syslog-options/">syslog-parser()</a>. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/parser-syslog/parser-syslog-options/#flags">syslog-parser() documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="metricsprobe">MetricsProbe</h2><p>Counts the messages that pass through the flow, and creates labeled stats counters based on the fields of the passing messages. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-parsers/metrics-probe/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGFlow</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">flow-mertrics-probe</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">parser</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">metrics-probe</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;flow_events&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;${json.kubernetes.namespace_name}&#34;</span></span></span></code></pre></div><h3 id="metricsprobe-key">key (string, optional)</h3><p>The name of the counter to create. Note that the value of this option is always prefixed with <code>syslogng_</code>, so for example <code>key("my-custom-key")</code> becomes <code>syslogng_my-custom-key</code>.</p><h3 id="metricsprobe-labels">labels (ArrowMap, optional)</h3><p>The labels used to create separate counters, based on the fields of the messages processed by <code>metrics-probe()</code>. The keys of the map are the name of the label, and the values are syslog-ng templates.</p><h3 id="metricsprobe-level">level (int, optional)</h3><p>Sets the stats level of the generated metrics (default 0).</p><h3 id="metricsprobe--">- (struct{}, required)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-71055e789d2740b4a21574d9424fd407">5.3 - Rewrite</h1><p>Rewrite filters can be used to modify record contents. Logging operator currently supports the following rewrite functions:</p><ul>
<li><a href="#groupunset">group_unset</a></li><li><a href="#rename">rename</a></li><li><a href="#set">set</a></li><li><a href="#subst">substitute</a></li><li><a href="#unset">unset</a></li></ul><blockquote>
<p>Note: All rewrite functions support an optional <code>condition</code> which has the same syntax as the <a href="../match/">match filter</a>.</p></blockquote><p>For details on how rewrite rules work in syslog-ng, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="groupunset">Group unset</h2><p>The <code>group_unset</code> function removes from the record a group of fields matching a pattern.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">group_unset</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.annotations.*&#34;</span></span></span></code></pre></div><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-unset/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="rename">Rename</h2><p>The <code>rename</code> function changes the name of an existing field name.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">rename</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">oldName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.labels.app&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">newName</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.labels.app.kubernetes.io/name&#34;</span></span></span></code></pre></div><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-rename/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="set">Set</h2><p>The <code>set</code> function sets the value of a field.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">set</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.cluster&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">value</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;prod-us&#34;</span></span></span></code></pre></div><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-set/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="subst">Substitute (subst)</h2><p>The <code>subst</code> function replaces parts of a field with a replacement value based on a pattern.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">subst</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">pattern</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;\d\d\d\d-\d\d\d\d-\d\d\d\d-\d\d\d\d&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">replace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[redacted bank card number]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;MESSAGE&#34;</span></span></span></code></pre></div><p>The function also supports the <code>type</code> and <code>flags</code> fields for specifying pattern type and flags as described in the <a href="../match/">match expression regexp function</a>.</p><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-replace/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="unset">Unset</h2><p>You can unset macros or fields of the message.</p><blockquote>
<p>Note: Unsetting a field completely deletes any previous value of the field.</p></blockquote><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">filters</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:700">rewrite</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">unset</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">field</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;json.kubernetes.cluster&#34;</span></span></span></code></pre></div><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-unset/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h2 id="rewriteconfig">RewriteConfig</h2><h3 id="rewriteconfig-group_unset">group_unset (*GroupUnsetConfig, optional)</h3><h3 id="rewriteconfig-rename">rename (*RenameConfig, optional)</h3><h3 id="rewriteconfig-set">set (*SetConfig, optional)</h3><h3 id="rewriteconfig-subst">subst (*SubstituteConfig, optional)</h3><h3 id="rewriteconfig-unset">unset (*UnsetConfig, optional)</h3><h2 id="renameconfig">RenameConfig</h2><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-rename/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="renameconfig-condition">condition (*MatchExpr, optional)</h3><h3 id="renameconfig-newname">newName (string, required)</h3><h3 id="renameconfig-oldname">oldName (string, required)</h3><h2 id="setconfig">SetConfig</h2><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-set/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="setconfig-condition">condition (*MatchExpr, optional)</h3><h3 id="setconfig-field">field (string, required)</h3><h3 id="setconfig-value">value (string, required)</h3><h2 id="substituteconfig">SubstituteConfig</h2><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-set/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="substituteconfig-condition">condition (*MatchExpr, optional)</h3><h3 id="substituteconfig-field">field (string, required)</h3><h3 id="substituteconfig-flags">flags ([]string, optional)</h3><h3 id="substituteconfig-pattern">pattern (string, required)</h3><h3 id="substituteconfig-replace">replace (string, required)</h3><h3 id="substituteconfig-type">type (string, optional)</h3><h2 id="unsetconfig">UnsetConfig</h2><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-unset/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="unsetconfig-condition">condition (*MatchExpr, optional)</h3><h3 id="unsetconfig-field">field (string, required)</h3><h2 id="groupunsetconfig">GroupUnsetConfig</h2><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/modifying-messages/rewrite-unset/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="groupunsetconfig-condition">condition (*MatchExpr, optional)</h3><h3 id="groupunsetconfig-pattern">pattern (string, required)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-810c80c2dbdca02f7ade52079fd88712">6 - syslog-ng outputs</h1><p>SyslogNGOutput and SyslogNGClusterOutput resources have almost the same structure as Output and ClusterOutput resources, with the main difference being the number and kind of supported destinations.</p><p>You can use the following <strong>syslog-ng</strong> outputs in your <code>SyslogNGOutput</code> and <code>SyslogNGClusterOutput</code> resources.</p></div><div class="td-content">
<h1 id="pg-d2c9db8ba7a6ba7639262daaea30cbd6">6.1 - Authentication for syslog-ng outputs</h1><h2 id="overview">Overview</h2><p>GRPC-based outputs use this configuration instead of the simple <code>tls</code> field found at most HTTP based destinations. For details, see the documentation of a related syslog-ng destination, for example, <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-loki/#auth">Grafana Loki</a>.</p><h2 id="configuration">Configuration</h2><h2 id="auth">Auth</h2><p>Authentication settings. Only one authentication method can be set. Default: Insecure</p><h3 id="auth-adc">adc (*ADC, optional)</h3><p>Application Default Credentials (ADC).</p><h3 id="auth-alts">alts (*ALTS, optional)</h3><p>Application Layer Transport Security (ALTS) is a simple to use authentication, only available within Google’s infrastructure.</p><h3 id="auth-insecure">insecure (*Insecure, optional)</h3><p>This is the default method, authentication is disabled (<code>auth(insecure())</code>).</p><h3 id="auth-tls">tls (*GrpcTLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="adc">ADC</h2><h2 id="insecure">Insecure</h2><h2 id="alts">ALTS</h2><h3 id="alts-target-service-accounts">target-service-accounts ([]string, optional)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-0125a4a4d818b30d9054879982e084a1">6.2 - Disk buffer</h1><p>The parameters of the syslog-ng disk buffer. Using a disk buffer on the output helps avoid message loss in case of a system failure on the destination side.
For details on how <a href="https://axoflow.com/docs/axosyslog-core/chapter-routing-filters/concepts-diskbuffer/">syslog-ng disk buffers work, see the documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="diskbuffer-compaction">compaction (*bool, optional)</h3><p>Prunes the unused space in the LogMessage representation</p><h3 id="diskbuffer-dir">dir (string, optional)</h3><p>Description: Defines the folder where the disk-buffer files are stored.</p><h3 id="diskbuffer-disk_buf_size">disk_buf_size (int64, required)</h3><p>This is a required option. The maximum size of the disk-buffer in bytes. The minimum value is 1048576 bytes.</p><h3 id="diskbuffer-mem_buf_length">mem_buf_length (*int64, optional)</h3><p>Use this option if the option reliable() is set to no. This option contains the number of messages stored in overflow queue.</p><h3 id="diskbuffer-mem_buf_size">mem_buf_size (*int64, optional)</h3><p>Use this option if the option reliable() is set to yes. This option contains the size of the messages in bytes that is used in the memory part of the disk buffer.</p><h3 id="diskbuffer-q_out_size">q_out_size (*int64, optional)</h3><p>The number of messages stored in the output buffer of the destination.</p><h3 id="diskbuffer-reliable">reliable (bool, required)</h3><p>If set to yes, syslog-ng OSE cannot lose logs in case of reload/restart, unreachable destination or syslog-ng OSE crash. This solution provides a slower, but reliable disk-buffer option.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-217fe992275c17196145bd8aca20419a">6.3 - Elasticsearch</h1><h2 id="overview">Overview</h2><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-elasticsearch-http/">ElasticSearch destination of AxoSyslog core</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elasticsearch</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">elasticsearch</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://elastic-search-endpoint:9200/_bulk&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">index</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;indexname&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">type</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">user</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">password</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elastic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h3 id="elasticsearchoutput-">(HTTPOutput, required)</h3><h3 id="elasticsearchoutput-custom_id">custom_id (string, optional)</h3><p>The document ID. If no ID is specified, a document ID is automatically generated.</p><h3 id="elasticsearchoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="elasticsearchoutput-index">index (string, optional)</h3><p>Name of the data stream, index, or index alias to perform the action on.</p><h3 id="elasticsearchoutput-logstash_prefix">logstash_prefix (string, optional)</h3><p>Set the prefix for logs in logstash format. If set, then the Index field will be ignored.</p><h3 id="elasticsearchoutput-logstash_prefix_separator">logstash_prefix_separator (string, optional)</h3><p>Set the separator between LogstashPrefix and LogStashDateformat. Default: &ldquo;-&rdquo;</p><h3 id="elasticsearchoutput-logstash_suffix">logstash_suffix (string, optional)</h3><p>Set the suffix for logs in logstash format.</p><p>Default: <code>${YEAR}.${MONTH}.${DAY}</code>### type (*string, optional) {#elasticsearchoutput-type}</p><p>The document type associated with the operation. Elasticsearch indices now support a single document type: <code>_doc</code></p><h3 id="elasticsearchoutput-template">template (string, optional)</h3><p>The template to format the record itself inside the payload body</p><h3 id="elasticsearchoutput-type">type (*string, optional)</h3><p>The document type associated with the operation. Elasticsearch indices now support a single document type: <code>_doc</code></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-20150d5282a0092eb6c0366d786537b3">6.4 - Elasticsearch datastream</h1><h2 id="overview">Overview</h2><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-elasticsearch-datastream/">ElasticSearch datastream destination of AxoSyslog</a>.</p><p>Available in Logging operator version 4.9 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elasticsearch-datastream</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">elasticsearch-datastream</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://elastic-endpoint:9200/my-data-stream/_bulk&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">user</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">password</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elastic</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="elasticsearchdatastreamoutput">ElasticsearchDatastreamOutput</h2><h3 id="elasticsearchdatastreamoutput-">(HTTPOutput, required)</h3><h3 id="elasticsearchdatastreamoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="elasticsearchdatastreamoutput-record">record (string, optional)</h3><p>Arguments to the <code>$format-json()</code> template function. Default: <code>"--scope rfc5424 --exclude DATE --key ISODATE @timestamp=${ISODATE}"</code></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-def8416dfd78030f291e4e2fee600a97">6.5 - File</h1><p>The <code>file</code> output stores log records in a plain text file.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">path</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/mnt/archive/logs/${YEAR}/${MONTH}/${DAY}/app.log</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">create_dirs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-file/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><p>For available macros like <code>${YEAR}/${MONTH}/${DAY}</code> see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/customizing-message-format/reference-macros/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h2 id="fileoutput">FileOutput</h2><h3 id="fileoutput-create_dirs">create_dirs (bool, optional)</h3><p>Enable creating non-existing directories.</p><p>Default: false</p><h3 id="fileoutput-dir_group">dir_group (string, optional)</h3><p>The group of the directories created by syslog-ng. To preserve the original properties of an existing directory, use the option without specifying an attribute: <code>dir-group()</code>.</p><p>Default: Use the global settings</p><h3 id="fileoutput-dir_owner">dir_owner (string, optional)</h3><p>The owner of the directories created by syslog-ng. To preserve the original properties of an existing directory, use the option without specifying an attribute: <code>dir-owner()</code>.</p><p>Default: Use the global settings</p><h3 id="fileoutput-dir_perm">dir_perm (int, optional)</h3><p>The permission mask of directories created by syslog-ng. Log directories are only created if a file after macro expansion refers to a non-existing directory, and directory creation is enabled (see also the <code>create-dirs()</code> option). For octal numbers prefix the number with 0, for example, use <code>0755</code> for <code>rwxr-xr-x</code>.</p><p>Default: Use the global settings</p><h3 id="fileoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="fileoutput-path">path (string, required)</h3><p>Path where the file is stored.</p><h3 id="fileoutput-persist_name">persist_name (string, optional)</h3><h3 id="fileoutput-template">template (string, optional)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f64978e87cfa5c2c0a8c6ad06c690873">6.6 - HTTP</h1><p>Sends messages over HTTP. For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="example">Example</h2><p>A simple example sending logs over HTTP to a fluentbit HTTP endpoint:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic">#URL of the ingest endpoint</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://fluentbit-endpoint:8080/tag</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">method</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">POST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;Content-type: application/json&#34;</span></span></span></code></pre></div><p>A more complex example to demonstrate sending logs to OpenObserve
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">openobserve</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic">#URL of the ingest endpoint</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://openobserve-endpoint/api/default/log-generator/_json</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">user</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">password</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">openobserve</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">method</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">POST</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Parameters for sending logs in batches</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">5000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-bytes</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4096</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-timeout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">300</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;Connection: keep-alive&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Disable TLS peer verification for demo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">peer_verify</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;no&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">body-prefix</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">body-suffix</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">delimiter</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;,&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">body</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;${MESSAGE}&#34;</span></span></span></code></pre></div></p><p>For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h3 id="httpoutput-">(Batch, required)</h3><p>Batching parameters</p><h3 id="httpoutput-body">body (string, optional)</h3><p>The body of the HTTP request, for example, <code>body("${ISODATE} ${MESSAGE}")</code>. You can use strings, macros, and template functions in the body. If not set, it will contain the message received from the source by default.</p><h3 id="httpoutput-body-prefix">body-prefix (string, optional)</h3><p>The string syslog-ng OSE puts at the beginning of the body of the HTTP request, before the log message.</p><h3 id="httpoutput-body-suffix">body-suffix (string, optional)</h3><p>The string syslog-ng OSE puts to the end of the body of the HTTP request, after the log message.</p><h3 id="httpoutput-delimiter">delimiter (string, optional)</h3><p>By default, syslog-ng OSE separates the log messages of the batch with a newline character.</p><h3 id="httpoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="httpoutput-headers">headers ([]string, optional)</h3><p>Custom HTTP headers to include in the request, for example, <code>headers("HEADER1: header1", "HEADER2: header2")</code>.</p><p>Default: empty</p><h3 id="httpoutput-log-fifo-size">log-fifo-size (int, optional)</h3><p>The number of messages that the output queue can store.</p><h3 id="httpoutput-method">method (string, optional)</h3><p>Specifies the HTTP method to use when sending the message to the server. <code>POST | PUT</code></p><h3 id="httpoutput-password">password (secret.Secret, optional)</h3><p>The password that syslog-ng OSE uses to authenticate on the server where it sends the messages.</p><h3 id="httpoutput-persist_name">persist_name (string, optional)</h3><p>If you receive the following error message during syslog-ng startup, set the <code>persist-name()</code> option of the duplicate drivers: <code>Error checking the uniqueness of the persist names, please override it with persist-name option. Shutting down.</code> See the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/reference-destination-http-nonjava/#persist-name">documentation of the AxoSyslog syslog-ng distribution</a> for more information.</p><h3 id="httpoutput-response-action">response-action (filter.RawArrowMap, optional)</h3><p>Specifies what syslog-ng does with the log message, based on the response code received from the HTTP server. See the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/reference-destination-http-nonjava/#response-action">documentation of the AxoSyslog syslog-ng distribution</a> for more information.</p><h3 id="httpoutput-retries">retries (int, optional)</h3><p>The number of times syslog-ng OSE attempts to send a message to this destination. If syslog-ng OSE could not send a message, it will try again until the number of attempts reaches <code>retries</code>, then drops the message.</p><h3 id="httpoutput-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="httpoutput-timeout">timeout (int, optional)</h3><p>Sets the maximum number of messages sent to the destination per second. Use this output-rate-limiting functionality only when using disk-buffer as well to avoid the risk of losing messages. Specifying 0 or a lower value sets the output limit to unlimited.</p><h3 id="httpoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="httpoutput-url">url (string, optional)</h3><p>Specifies the hostname or IP address and optionally the port number of the web service that can receive log data via HTTP. Use a colon (:) after the address to specify the port number of the server. For example: <code>http://127.0.0.1:8000</code></p><h3 id="httpoutput-user">user (string, optional)</h3><p>The username that syslog-ng OSE uses to authenticate on the server where it sends the messages.</p><h3 id="httpoutput-user-agent">user-agent (string, optional)</h3><p>The value of the USER-AGENT header in the messages sent to the server.</p><h3 id="httpoutput-workers">workers (int, optional)</h3><p>Specifies the number of worker threads (at least 1) that syslog-ng OSE uses to send messages to the server. Increasing the number of worker threads can drastically improve the performance of the destination.</p><h2 id="batch">Batch</h2><h3 id="batch-batch-bytes">batch-bytes (int, optional)</h3><p>Description: Sets the maximum size of payload in a batch. If the size of the messages reaches this value, syslog-ng OSE sends the batch to the destination even if the number of messages is less than the value of the <code>batch-lines()</code> option. Note that if the <code>batch-timeout()</code> option is enabled and the queue becomes empty, syslog-ng OSE flushes the messages only if <code>batch-timeout()</code> expires, or the batch reaches the limit set in <code>batch-bytes()</code>.</p><h3 id="batch-batch-lines">batch-lines (int, optional)</h3><p>Description: Specifies how many lines are flushed to a destination in one batch. The syslog-ng OSE application waits for this number of lines to accumulate and sends them off in a single batch. Increasing this number increases throughput as more messages are sent in a single batch, but also increases message latency. For example, if you set <code>batch-lines()</code> to 100, syslog-ng OSE waits for 100 messages.</p><h3 id="batch-batch-timeout">batch-timeout (int, optional)</h3><p>Description: Specifies the time syslog-ng OSE waits for lines to accumulate in the output buffer. The syslog-ng OSE application sends batches to the destinations evenly. The timer starts when the first message arrives to the buffer, so if only few messages arrive, syslog-ng OSE sends messages to the destination at most once every <code>batch-timeout()</code> milliseconds.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-db09f336e539e97c3a4b6ae4786aded5">6.7 - Loggly output</h1><h2 id="overview">Overview</h2><p>The <code>loggly()</code> destination sends log messages to the <a href="https://www.loggly.com/">Loggly</a> Logging-as-a-Service provider.
You can send log messages over TCP, or encrypted with <a href="/docs/configuration/plugins/syslog-ng-outputs/tls/">TLS for syslog-ng outputs</a>.</p><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-loggly/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="prerequisites">Prerequisites</h2><p>You need a Loggly account and your user token to use this output.</p><h2 id="configuration">Configuration</h2><h3 id="loggly-">(SyslogOutput, required)</h3><p>syslog output configuration</p><h3 id="loggly-host">host (string, optional)</h3><p>Address of the destination host.</p><h3 id="loggly-tag">tag (string, optional)</h3><p>Event tag. For details, see the <a href="https://documentation.solarwinds.com/en/success_center/loggly/content/admin/tags.htm">Loggy documentation</a></p><h3 id="loggly-token">token (*secret.Secret, required)</h3><p>Your Customer Token that you received from Loggly. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-loggly/">documentation of the AxoSyslog syslog-ng distribution</a></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-18b36b379ed9690f5568e3f8d7088d0f">6.8 - LogScale</h1><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/crowdstrike-falcon/">LogScale destination of AxoSyslog core</a>. Sends log records over HTTP to Falcon&rsquo;s LogScale.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test-logscale</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">logscale</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">token</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logscale-token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timezone</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;UTC&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch_lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disk_buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">disk_buf_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">512000000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">dir</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/buffers</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">reliable</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><h2 id="logscaleoutput">LogScaleOutput</h2><h3 id="logscaleoutput-attributes">attributes (string, optional)</h3><p>A JSON object representing key-value pairs for the Event. These key-value pairs adds structure to Events, making it easier to search. Attributes can be nested JSON objects, however, we recommend limiting the amount of nesting.</p><p>Default: <code>"--scope rfc5424 --exclude MESSAGE --exclude DATE --leave-initial-dot"</code></p><h3 id="logscaleoutput-batch_bytes">batch_bytes (int, optional)</h3><h3 id="logscaleoutput-batch_lines">batch_lines (int, optional)</h3><h3 id="logscaleoutput-batch_timeout">batch_timeout (int, optional)</h3><h3 id="logscaleoutput-body">body (string, optional)</h3><h3 id="logscaleoutput-content_type">content_type (string, optional)</h3><p>This field specifies the content type of the log records being sent to Falcon&rsquo;s LogScale.</p><p>Default: <code>"application/json"</code></p><h3 id="logscaleoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="logscaleoutput-extra_headers">extra_headers (string, optional)</h3><p>This field represents additional headers that can be included in the HTTP request when sending log records to Falcon&rsquo;s LogScale.</p><p>Default: empty</p><h3 id="logscaleoutput-persist_name">persist_name (string, optional)</h3><h3 id="logscaleoutput-rawstring">rawstring (string, optional)</h3><p>The raw string representing the Event. The default display for an Event in LogScale is the rawstring. If you do not provide the rawstring field, then the response defaults to a JSON representation of the attributes field.</p><p>Default: empty</p><h3 id="logscaleoutput-timezone">timezone (string, optional)</h3><p>The timezone is only required if you specify the timestamp in milliseconds. The timezone specifies the local timezone for the event. Note that you must still specify the timestamp in UTC time.</p><h3 id="logscaleoutput-token">token (*secret.Secret, optional)</h3><p>An <a href="https://library.humio.com/data-analysis/ingesting-data-tokens.html">Ingest Token</a> is a unique string that identifies a repository and allows you to send data to that repository.</p><p>Default: empty</p><h3 id="logscaleoutput-url">url (*secret.Secret, optional)</h3><p>Ingester URL is the URL of the Humio cluster you want to send data to.</p><p>Default: <code>https://cloud.humio.com</code></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-eefbe22dbc8ede1633843ddca2372922">6.9 - Loki</h1><p>Sends messages to Grafana Loki over gRPC, based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-loki/">Loki destination of AxoSyslog Core</a>.</p><p>Available in Logging operator version 4.4 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">loki-output</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">loki</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;loki.loki:8000&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">2000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-timeout</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">workers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">log-fifo-size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">labels</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">&#34;app&#34;: </span><span style="color:#4e9a06">&#34;$PROGRAM&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">&#34;host&#34;: </span><span style="color:#4e9a06">&#34;$HOST&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">timestamp</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;msg&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">template</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$ISODATE $HOST $MSGHDR$MSG&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">auth</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">insecure</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}</span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-loki/">documentation of the AxoSyslog syslog-ng distribution</a>. For available macros like <code>$PROGRAM</code> and <code>$HOST</code> see <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/customizing-message-format/reference-macros/">https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/customizing-message-format/reference-macros/</a></p><h2 id="configuration">Configuration</h2><h3 id="lokioutput-auth">auth (*Auth, optional)</h3><p>Authentication configuration, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-loki/#auth">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="lokioutput-batch-lines">batch-lines (int, optional)</h3><p>Description: Specifies how many lines are flushed to a destination in one batch. The syslog-ng OSE application waits for this number of lines to accumulate and sends them off in a single batch. Increasing this number increases throughput as more messages are sent in a single batch, but also increases message latency. For example, if you set batch-lines() to 100, syslog-ng OSE waits for 100 messages.</p><h3 id="lokioutput-batch-timeout">batch-timeout (int, optional)</h3><p>Description: Specifies the time syslog-ng OSE waits for lines to accumulate in the output buffer. The syslog-ng OSE application sends batches to the destinations evenly. The timer starts when the first message arrives to the buffer, so if only few messages arrive, syslog-ng OSE sends messages to the destination at most once every batch-timeout() milliseconds.</p><h3 id="lokioutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="lokioutput-labels">labels (filter.ArrowMap, optional)</h3><p>Using the Labels map, Kubernetes label to Loki label mapping can be configured. Example: <code>{"app" : "$PROGRAM"}</code></p><h3 id="lokioutput-log-fifo-size">log-fifo-size (int, optional)</h3><p>The number of messages that the output queue can store.</p><h3 id="lokioutput-persist_name">persist_name (string, optional)</h3><p>If you receive the following error message during AxoSyslog startup, set the persist-name() option of the duplicate drivers: <code>Error checking the uniqueness of the persist names, please override it with persist-name option. Shutting down.</code> See <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/reference-destination-http-nonjava/#persist-name">syslog-ng docs</a> for more information.</p><h3 id="lokioutput-retries">retries (int, optional)</h3><p>The number of times syslog-ng OSE attempts to send a message to this destination. If syslog-ng OSE could not send a message, it will try again until the number of attempts reaches retries, then drops the message.</p><h3 id="lokioutput-template">template (string, optional)</h3><p>Template for customizing the log message format.</p><h3 id="lokioutput-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="lokioutput-timestamp">timestamp (string, optional)</h3><p>The timestamp that will be applied to the outgoing messages (possible values: current|received|msg default: current). Loki does not accept events, in which the timestamp is not monotonically increasing.</p><h3 id="lokioutput-url">url (string, optional)</h3><p>Specifies the hostname or IP address and optionally the port number of the service that can receive log data via gRPC. Use a colon (:) after the address to specify the port number of the server. For example: <code>grpc://127.0.0.1:8000</code></p><h3 id="lokioutput-workers">workers (int, optional)</h3><p>Specifies the number of worker threads (at least 1) that syslog-ng OSE uses to send messages to the server. Increasing the number of worker threads can drastically improve the performance of the destination.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-50ca131a90db80476f6b3ee7bf91ede9">6.10 - MongoDB</h1><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-mongodb/">MongoDB destination of the AxoSyslog syslog-ng distribution</a>.</p><p>Available in Logging operator version 4.4 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mongodb</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">mongodb</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">collection</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">uri</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;mongodb://mongodb-endpoint/syslog?wtimeoutMS=60000&amp;socketTimeoutMS=60000&amp;connectTimeoutMS=60000&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">value_pairs</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">scope(&#34;selected-macros&#34; &#34;nv-pairs&#34;)</span></span></span></code></pre></div><p>For more information, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-mongodb/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h3 id="mongodb-">(Batch, required)</h3><p>Batching parameters</p><h3 id="mongodb-">(Bulk, required)</h3><p>Bulk operation related options</p><h3 id="mongodb-collection">collection (string, required)</h3><p>The name of the MongoDB collection where the log messages are stored (collections are similar to SQL tables). Note that the name of the collection must not start with a dollar sign ($), and that it may contain dot (.) characters.</p><h3 id="mongodb-dir">dir (string, optional)</h3><p>Defines the folder where the disk-buffer files are stored.</p><h3 id="mongodb-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="mongodb-log-fifo-size">log-fifo-size (int, optional)</h3><p>The number of messages that the output queue can store.</p><h3 id="mongodb-persist_name">persist_name (string, optional)</h3><p>If you receive the following error message during syslog-ng startup, set the <code>persist-name()</code> option of the duplicate drivers: <code>Error checking the uniqueness of the persist names, please override it with persist-name option. Shutting down.</code> See the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/reference-destination-http-nonjava/#persist-name">documentation of the AxoSyslog syslog-ng distribution</a> for more information.</p><h3 id="mongodb-retries">retries (int, optional)</h3><p>The number of times syslog-ng OSE attempts to send a message to this destination. If syslog-ng OSE could not send a message, it will try again until the number of attempts reaches retries, then drops the message.</p><h3 id="mongodb-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="mongodb-uri">uri (*secret.Secret, optional)</h3><p>Connection string used for authentication. See the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-mongodb/reference-destination-mongodb/#mongodb-option-uri">documentation of the AxoSyslog syslog-ng distribution</a></p><p>Default: <code>mongodb://127.0.0.1:27017/syslog?wtimeoutMS=60000&socketTimeoutMS=60000&connectTimeoutMS=60000</code></p><h3 id="mongodb-value_pairs">value_pairs (ValuePairs, optional)</h3><p>Creates structured name-value pairs from the data and metadata of the log message.</p><p>Default: <code>"scope("selected-macros" "nv-pairs")"</code></p><h3 id="mongodb-write_concern">write_concern (RawString, optional)</h3><p>Description: Sets the write concern mode of the MongoDB operations, for both bulk and single mode. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-mongodb/reference-destination-mongodb/#mongodb-option-write-concern">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="bulk">Bulk</h2><p>Bulk operation related options. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-mongodb/reference-destination-mongodb/#mongodb-option-bulk">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="bulk-bulk">bulk (*bool, optional)</h3><p>Enables bulk insert mode. If disabled, each messages is inserted individually.</p><p>Default: yes</p><h3 id="bulk-bulk_bypass_validation">bulk_bypass_validation (*bool, optional)</h3><p>If set to yes, it disables MongoDB bulk operations validation mode.</p><p>Default: no</p><h3 id="bulk-bulk_unordered">bulk_unordered (*bool, optional)</h3><p>Description: Enables unordered bulk operations mode.</p><p>Default: no</p><h2 id="valuepairs">ValuePairs</h2><p>TODO move this to a common module once it is used in more places</p><h3 id="valuepairs-exclude">exclude (RawString, optional)</h3><h3 id="valuepairs-key">key (RawString, optional)</h3><h3 id="valuepairs-pair">pair (RawString, optional)</h3><h3 id="valuepairs-scope">scope (RawString, optional)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-31ea9edde3a649f6c3772919f9e7a156">6.11 - MQTT</h1><h2 id="overview">Overview</h2><p>Sends messages from a local network to an MQTT broker. For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-mqtt-intro/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mqtt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">mqtt</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">address</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tcp://mosquitto:1883</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">topic</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test/demo</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="mqtt">MQTT</h2><h3 id="mqtt-address">address (string, optional)</h3><p>Address of the destination host</p><h3 id="mqtt-fallback-topic">fallback-topic (string, optional)</h3><p>fallback-topic is used when syslog-ng cannot post a message to the originally defined topic (which can include invalid characters coming from templates).</p><h3 id="mqtt-qos">qos (int, optional)</h3><p>qos stands for quality of service and can take three values in the MQTT world. Its default value is 0, where there is no guarantee that the message is ever delivered.</p><h3 id="mqtt-template">template (string, optional)</h3><p>Template where you can configure the message template sent to the MQTT broker. By default, the template is: <code>$ISODATE $HOST $MSGHDR$MSG</code></p><h3 id="mqtt-topic">topic (string, optional)</h3><p>Topic defines in which topic syslog-ng stores the log message. You can also use templates here, and use, for example, the $HOST macro in the topic name hierarchy.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-f45875ac7b5bd367d7324b30c22e5503">6.12 - Openobserve</h1><h2 id="overview">Overview</h2><p>Send messages to <a href="https://openobserve.ai/docs/api/ingestion/logs/json/">OpenObserve</a> using its <a href="https://openobserve.ai/docs/api/ingestion/logs/json/">Logs Ingestion - JSON API</a>. This API accepts multiple records in batch in JSON format.</p><p>Available in Logging operator version 4.5 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">openobserve</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">openobserve</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://some-openobserve-endpoint&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">5080</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">organization</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;default&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">stream</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;default&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">user</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">password</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">openobserve</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/openobserve/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h2 id="openobserveoutput">OpenobserveOutput</h2><h3 id="openobserveoutput-">(HTTPOutput, required)</h3><h3 id="openobserveoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="openobserveoutput-organization">organization (string, optional)</h3><p>Name of the organization in OpenObserve.</p><h3 id="openobserveoutput-port">port (int, optional)</h3><p>The port number of the OpenObserve server. Specify it here instead of appending it to the URL.</p><p>Default: 5080</p><h3 id="openobserveoutput-record">record (string, optional)</h3><p>Arguments to the <code>$format-json()</code> template function. Default: <code>"--scope rfc5424 --exclude DATE --key ISODATE @timestamp=${ISODATE}"</code></p><h3 id="openobserveoutput-stream">stream (string, optional)</h3><p>Name of the stream in OpenObserve.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-6d7223a166a300bc7803f652ecf314ae">6.13 - OpenTelemetry output</h1><h2 id="overview">Overview</h2><p>Sends messages over OpenTelemetry GRPC. For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/opentelemetry/">documentation of AxoSyslog</a>.</p><p>Available in Logging operator version 4.9 and later.</p><h2 id="example">Example</h2><p>A simple example sending logs over OpenTelemetry GRPC to a remote OpenTelemetry endpoint:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">otlp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">opentelemetry</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">otel-server</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">4379</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="opentelemetryoutput">OpenTelemetryOutput</h2><h3 id="opentelemetryoutput-">(Batch, required)</h3><p>Batching parameters</p><h3 id="opentelemetryoutput-auth">auth (*Auth, optional)</h3><p>Authentication configuration, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-syslog-ng-otlp/#auth">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="opentelemetryoutput-channel_args">channel_args (filter.ArrowMap, optional)</h3><p>Add GRPC Channel arguments <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/opentelemetry/#channel-args">https://axoflow.com/docs/axosyslog-core/chapter-destinations/opentelemetry/#channel-args</a></p><h3 id="opentelemetryoutput-compression">compression (*bool, optional)</h3><p>Enable or disable compression.</p><p>Default: false</p><h3 id="opentelemetryoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="opentelemetryoutput-url">url (string, required)</h3><p>Specifies the hostname or IP address and optionally the port number of the web service that can receive log data via HTTP. Use a colon (:) after the address to specify the port number of the server. For example: <code>http://127.0.0.1:8000</code></p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-d44d1d1ef5ea3fb8124c088fcb9e125f">6.14 - Redis</h1><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-redis/">Redis destination of AxoSyslog core</a>.</p><p>Available in Logging operator version 4.4 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">redis</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">127.0.0.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">6379</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">retries</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">throttle</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">time-reopen</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">60</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">workers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"> </span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-redis/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h3 id="redisoutput-">(Batch, required)</h3><p>Batching parameters</p><h3 id="redisoutput-auth">auth (*secret.Secret, optional)</h3><p>The password used for authentication on a password-protected Redis server.</p><h3 id="redisoutput-command">command (StringList, optional)</h3><p>Internal rendered form of the CommandAndArguments field</p><h3 id="redisoutput-command_and_arguments">command_and_arguments ([]string, optional)</h3><p>The Redis command to execute, for example, LPUSH, INCR, or HINCRBY. Using the HINCRBY command with an increment value of 1 allows you to create various statistics. For example, the <code>command("HINCRBY" "${HOST}/programs" "${PROGRAM}" "1")</code> command counts the number of log messages on each host for each program.</p><p>Default: ""</p><h3 id="redisoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="redisoutput-host">host (string, optional)</h3><p>The hostname or IP address of the Redis server.</p><p>Default: 127.0.0.1</p><h3 id="redisoutput-log-fifo-size">log-fifo-size (int, optional)</h3><p>The number of messages that the output queue can store.</p><h3 id="redisoutput-persist_name">persist_name (string, optional)</h3><p>Persistname</p><h3 id="redisoutput-port">port (int, optional)</h3><p>The port number of the Redis server.</p><p>Default: 6379</p><h3 id="redisoutput-retries">retries (int, optional)</h3><p>If syslog-ng OSE cannot send a message, it will try again until the number of attempts reaches <code>retries()</code>.</p><p>Default: 3</p><h3 id="redisoutput-throttle">throttle (int, optional)</h3><p>Sets the maximum number of messages sent to the destination per second. Use this output-rate-limiting functionality only when using disk-buffer as well to avoid the risk of losing messages. Specifying 0 or a lower value sets the output limit to unlimited.</p><p>Default: 0</p><h3 id="redisoutput-time-reopen">time-reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="redisoutput-workers">workers (int, optional)</h3><p>Specifies the number of worker threads (at least 1) that syslog-ng OSE uses to send messages to the server. Increasing the number of worker threads can drastically improve the performance of the destination.</p><p>Default: 1</p><h2 id="stringlist">StringList</h2><h3 id="stringlist-string-list">string-list ([]string, optional)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-a30c0b2e8f92178a45957a767cd80264">6.15 - S3</h1><p>Sends messages from a local network to a S3 (compatible) server. For more information, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-s3/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><p>Available in Logging operator version 4.4 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">s3</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://some-s3-compatible-endpoint:8088&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">bucket</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;s3bucket-name&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">access_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">access-key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">secret_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">s3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">secret-key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">object_key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;path/to/my-logs/${HOST}&#34;</span></span></span></code></pre></div><p>For available macros like <code>$PROGRAM</code> and <code>$HOST</code>, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-manipulating-messages/customizing-message-format/reference-macros/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="s3output">S3Output</h2><h3 id="s3output-access_key">access_key (*secret.Secret, optional)</h3><p>The access_key for the S3 server.</p><h3 id="s3output-bucket">bucket (string, optional)</h3><p>The bucket name of the S3 server.</p><h3 id="s3output-canned_acl">canned_acl (string, optional)</h3><p>Set the canned_acl option.</p><h3 id="s3output-chunk_size">chunk_size (int, optional)</h3><p>Set the chunk size.</p><p>Default: 5MiB</p><h3 id="s3output-compresslevel">compresslevel (int, optional)</h3><p>Set the compression level (1-9).</p><p>Default: 9</p><h3 id="s3output-compression">compression (*bool, optional)</h3><p>Enable or disable compression.</p><p>Default: false</p><h3 id="s3output-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="s3output-flush_grace_period">flush_grace_period (int, optional)</h3><p>Set the number of seconds for flush period.</p><p>Default: 60</p><h3 id="s3output-log-fifo-size">log-fifo-size (int, optional)</h3><p>The number of messages that the output queue can store.</p><h3 id="s3output-max_object_size">max_object_size (int, optional)</h3><p>Set the maximum object size size.</p><p>Default: 5120GiB</p><h3 id="s3output-max_pending_uploads">max_pending_uploads (int, optional)</h3><p>Set the maximum number of pending uploads.</p><p>Default: 32</p><h3 id="s3output-object_key">object_key (string, optional)</h3><p>The object_key for the S3 server.</p><h3 id="s3output-object_key_timestamp">object_key_timestamp (RawString, optional)</h3><p>Set object_key_timestamp</p><h3 id="s3output-persist_name">persist_name (string, optional)</h3><p>Persistname</p><h3 id="s3output-region">region (string, optional)</h3><p>Set the region option.</p><h3 id="s3output-retries">retries (int, optional)</h3><p>The number of times syslog-ng OSE attempts to send a message to this destination. If syslog-ng OSE could not send a message, it will try again until the number of attempts reaches retries, then drops the message.</p><h3 id="s3output-secret_key">secret_key (*secret.Secret, optional)</h3><p>The secret_key for the S3 server.</p><h3 id="s3output-storage_class">storage_class (string, optional)</h3><p>Set the storage_class option.</p><h3 id="s3output-template">template (RawString, optional)</h3><p>Template</p><h3 id="s3output-throttle">throttle (int, optional)</h3><p>Sets the maximum number of messages sent to the destination per second. Use this output-rate-limiting functionality only when using disk-buffer as well to avoid the risk of losing messages. Specifying 0 or a lower value sets the output limit to unlimited.</p><p>Default: 0</p><h3 id="s3output-upload_threads">upload_threads (int, optional)</h3><p>Set the number of upload threads.</p><p>Default: 8</p><h3 id="s3output-url">url (string, optional)</h3><p>The hostname or IP address of the S3 server.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-ebf6ce972f8f52a488cb4fd3bc510dcb">6.16 - SplunkHEC</h1><p>Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/syslog-ng-with-splunk/">Splunk destination of AxoSyslog core</a>.</p><p>Available in Logging operator version 4.4 and later.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">splunkhec</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">splunk_hec_event</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">url</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://splunk-endpoint&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">token</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">splunk-hec</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span></span></span></code></pre></div><h2 id="configuration">Configuration</h2><h2 id="splunkhecoutput">SplunkHECOutput</h2><h3 id="splunkhecoutput-">(HTTPOutput, required)</h3><h3 id="splunkhecoutput-content_type">content_type (string, optional)</h3><p>Additional HTTP request content-type option.</p><h3 id="splunkhecoutput-default_index">default_index (string, optional)</h3><p>Fallback option for index field. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/syslog-ng-with-splunk/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="splunkhecoutput-default_source">default_source (string, optional)</h3><p>Fallback option for source field.</p><h3 id="splunkhecoutput-default_sourcetype">default_sourcetype (string, optional)</h3><p>Fallback option for sourcetype field.</p><h3 id="splunkhecoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="splunkhecoutput-event">event (string, optional)</h3><p>event() accepts a template, which declares the content of the log message sent to Splunk. Default value: <code>${MSG}</code></p><h3 id="splunkhecoutput-extra_headers">extra_headers ([]string, optional)</h3><p>Additional HTTP request headers.</p><h3 id="splunkhecoutput-extra_queries">extra_queries ([]string, optional)</h3><p>Additional HTTP request query options.</p><h3 id="splunkhecoutput-fields">fields (string, optional)</h3><p>Additional indexing metadata for Splunk.</p><h3 id="splunkhecoutput-host">host (string, optional)</h3><p>Sets the host field.</p><h3 id="splunkhecoutput-index">index (string, optional)</h3><p>Splunk index where the messages will be stored.</p><h3 id="splunkhecoutput-source">source (string, optional)</h3><p>Sets the source field.</p><h3 id="splunkhecoutput-sourcetype">sourcetype (string, optional)</h3><p>Sets the sourcetype field.</p><h3 id="splunkhecoutput-time">time (string, optional)</h3><p>Sets the time field.</p><h3 id="splunkhecoutput-token">token (secret.Secret, optional)</h3><p>The token that syslog-ng OSE uses to authenticate on the event collector.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-764b7c70899b4d51e51a8ba401f96cd2">6.17 - Sumo Logic HTTP</h1><p>The <code>sumologic-http</code> output sends log records over HTTP to Sumo Logic. For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-sumologic-intro/destination-sumologic-options/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="prerequisites">Prerequisites</h2><p>You need a Sumo Logic account to use this output. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-sumologic-intro/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="example">Example</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test-sumo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">sumologic-http</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">batch-lines</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">1000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disk_buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">disk_buf_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">512000000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">dir</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/buffers</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">reliable</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">body</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(format-json
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --subkeys json.
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.annotations.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.annotations=literal($(format-flat-json --subkeys json.kubernetes.annotations.))
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.labels.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.labels=literal($(format-flat-json --subkeys json.kubernetes.labels.)))&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">collector</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">valueFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">token</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sumo-collector</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">deployment</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">us2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">headers</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">&#39;X-Sumo-Name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">source-name&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:700">&#39;X-Sumo-Category</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">source-category&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">use-system-cert-store</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-sumologic-intro/destination-sumologic-http/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h2 id="sumologichttpoutput">SumologicHTTPOutput</h2><h3 id="sumologichttpoutput-batch-bytes">batch-bytes (int, optional)</h3><h3 id="sumologichttpoutput-batch-lines">batch-lines (int, optional)</h3><h3 id="sumologichttpoutput-batch-timeout">batch-timeout (int, optional)</h3><h3 id="sumologichttpoutput-body">body (string, optional)</h3><h3 id="sumologichttpoutput-collector">collector (*secret.Secret, optional)</h3><p>The Cloud Syslog Cloud Token that you received from the Sumo Logic service while configuring your cloud syslog source.</p><p>Default: empty</p><h3 id="sumologichttpoutput-deployment">deployment (string, optional)</h3><p>This option specifies your <a href="https://help.sumologic.com/APIs/General-API-Information/Sumo-Logic-Endpoints-by-Deployment-and-Firewall-Security">Sumo Logic deployment</a>.</p><p>Default: empty</p><h3 id="sumologichttpoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="sumologichttpoutput-headers">headers ([]string, optional)</h3><p>Custom HTTP headers to include in the request, for example, <code>headers("HEADER1: header1", "HEADER2: header2")</code>.</p><p>Default: empty</p><h3 id="sumologichttpoutput-persist_name">persist_name (string, optional)</h3><h3 id="sumologichttpoutput-time_reopen">time_reopen (int, optional)</h3><p>The time to wait in seconds before a dead connection is reestablished.</p><p>Default: 60</p><h3 id="sumologichttpoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><p>Default: -</p><h3 id="sumologichttpoutput-url">url (*secret.Secret, optional)</h3></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-1721ec291a25f8230ddeedf2a20018f9">6.18 - Sumo Logic Syslog</h1><p>The <code>sumologic-syslog</code> output sends log records over HTTP to Sumo Logic. For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-sumologic-intro/destination-sumologic-options/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="prerequisites">Prerequisites</h2><p>You need a Sumo Logic account to use this output. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/destination-sumologic-intro/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h2 id="sumologicsyslogoutput">SumologicSyslogOutput</h2><h3 id="sumologicsyslogoutput-deployment">deployment (string, optional)</h3><p>This option specifies your <a href="https://help.sumologic.com/APIs/General-API-Information/Sumo-Logic-Endpoints-by-Deployment-and-Firewall-Security">Sumo Logic deployment</a>.</p><p>Default: empty</p><h3 id="sumologicsyslogoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>This option enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><p>Default: false</p><h3 id="sumologicsyslogoutput-persist_name">persist_name (string, optional)</h3><h3 id="sumologicsyslogoutput-port">port (int, optional)</h3><p>This option sets the port number of the Sumo Logic server to connect to.</p><p>Default: 6514</p><h3 id="sumologicsyslogoutput-tag">tag (string, optional)</h3><p>This option specifies the list of tags to add as the tags fields of Sumo Logic messages. If not specified, syslog-ng OSE automatically adds the tags already assigned to the message. If you set the tag() option, only the tags you specify will be added to the messages.</p><p>Default: tag</p><h3 id="sumologicsyslogoutput-token">token (int, optional)</h3><p>The Cloud Syslog Cloud Token that you received from the Sumo Logic service while configuring your cloud syslog source. <a href="https://help.sumologic.com/03Send-Data/Sources/02Sources-for-Hosted-Collectors/Cloud-Syslog-Source#configure-a-cloud%C2%A0syslog%C2%A0source">https://help.sumologic.com/03Send-Data/Sources/02Sources-for-Hosted-Collectors/Cloud-Syslog-Source#configure-a-cloud%C2%A0syslog%C2%A0source</a></p><h3 id="sumologicsyslogoutput-tls">tls (*TLS, optional)</h3><p>This option sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. TLS can be used only with tcp-based transport protocols. For details, see <a href="../tls/">TLS for syslog-ng outputs</a> and the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/">documentation of the AxoSyslog syslog-ng distribution</a>.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-17c2f3cac6d1fd9cb831fa66c2daf727">6.19 - Syslog (RFC5424) output</h1><p>The <code>syslog</code> output sends log records over a socket using the Syslog protocol (RFC 5424). Based on the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/">syslog destination of AxoSyslog core</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10.12.34.56</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">transport</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">ca_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">cert_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls-secret</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span></span></span></code></pre></div><p>The following example also configures disk-based buffering for the output. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#204a87;font-weight:700">apiVersion</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">logging.banzaicloud.io/v1beta1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">kind</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SyslogNGOutput</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">metadata</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">namespace</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:700">spec</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:700">syslog</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">host</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">10.20.9.89</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">port</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">601</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">disk_buffer</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">disk_buf_size</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:700">512000000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">dir</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/buffer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">reliable</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:700">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">template</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(format-json
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --subkeys json.
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                --exclude json.kubernetes.labels.*
</span></span></span><span style="display:flex"><span><span style="color:#4e9a06">                json.kubernetes.labels=literal($(format-flat-json --subkeys json.kubernetes.labels.)))\n&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">tls</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">ca_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">cert_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:700">key_file</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:700">mountFrom</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:700">secretKeyRef</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">key</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:700">name</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">syslog-tls-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:700">transport</span><span style="color:#000;font-weight:700">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls</span></span></span></code></pre></div><p>For details on the available options of the output, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h2 id="configuration">Configuration</h2><h3 id="syslogoutput-close_on_input">close_on_input (*bool, optional)</h3><p>By default, syslog-ng OSE closes destination sockets if it receives any input from the socket (for example, a reply). If this option is set to no, syslog-ng OSE just ignores the input, but does not close the socket. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#close-on-input">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-disk_buffer">disk_buffer (*DiskBuffer, optional)</h3><p>Enables putting outgoing messages into the disk buffer of the destination to avoid message loss in case of a system failure on the destination side. For details, see the <a href="../disk_buffer/">Syslog-ng DiskBuffer options</a>.</p><h3 id="syslogoutput-flags">flags ([]string, optional)</h3><p>Flags influence the behavior of the destination driver. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#flags">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-flush_lines">flush_lines (int, optional)</h3><p>Specifies how many lines are flushed to a destination at a time. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#flush-lines">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-host">host (string, optional)</h3><p>Address of the destination host</p><h3 id="syslogoutput-persist_name">persist_name (string, optional)</h3><p>Unique name for the syslog-ng driver. If you receive the following error message during syslog-ng startup, set the <code>persist-name()</code> option of the duplicate drivers: <code>Error checking the uniqueness of the persist names, please override it with persist-name option. Shutting down.</code> See the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-http-nonjava/reference-destination-http-nonjava/#persist-name">documentation of the AxoSyslog syslog-ng distribution</a> for more information.</p><h3 id="syslogoutput-port">port (int, optional)</h3><p>The port number to connect to. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#port-or-destport">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-so_keepalive">so_keepalive (*bool, optional)</h3><p>Enables keep-alive messages, keeping the socket open. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#so-keepalive">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-suppress">suppress (int, optional)</h3><p>Specifies the number of seconds syslog-ng waits for identical messages. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#suppress">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-template">template (string, optional)</h3><p>Specifies a template defining the logformat to be used in the destination. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#template">documentation of the AxoSyslog syslog-ng distribution</a>.</p><p>Default: 0</p><h3 id="syslogoutput-template_escape">template_escape (*bool, optional)</h3><p>Turns on escaping for the &lsquo;, &ldquo;, and backspace characters in templated output files. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#template-escape">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-tls">tls (*TLS, optional)</h3><p>Sets various options related to TLS encryption, for example, key/certificate files and trusted CA locations. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#tls">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-transport">transport (string, optional)</h3><p>Specifies the protocol used to send messages to the destination server. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#transport">documentation of the AxoSyslog syslog-ng distribution</a>.</p><h3 id="syslogoutput-ts_format">ts_format (string, optional)</h3><p>Override the global timestamp format (set in the global ts-format() parameter) for the specific destination. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-destinations/configuring-destinations-syslog/reference-destination-syslog-chapter/#ts-format">documentation of the AxoSyslog syslog-ng distribution</a>.</p></div><div class="td-content" style="page-break-before:always">
<h1 id="pg-56a41f3fbc6007034e66766bff690bfa">6.20 - TLS config for syslog-ng outputs</h1><p>For details on how TLS configuration works in syslog-ng, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/">AxoSyslog Core documentation</a>.</p><h2 id="configuration">Configuration</h2><h3 id="tls-ca_dir">ca_dir (*secret.Secret, optional)</h3><p>The name of a directory that contains a set of trusted CA certificates in PEM format. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#ca-dir">AxoSyslog Core documentation</a>.</p><h3 id="tls-ca_file">ca_file (*secret.Secret, optional)</h3><p>The name of a file that contains a set of trusted CA certificates in PEM format. (Optional) For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#ca-file">AxoSyslog Core documentation</a>.</p><h3 id="tls-cert_file">cert_file (*secret.Secret, optional)</h3><p>Name of a file, that contains an X.509 certificate (or a certificate chain) in PEM format, suitable as a TLS certificate, matching the private key set in the key-file() option. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#cert-file">AxoSyslog Core documentation</a>.</p><h3 id="tls-cipher-suite">cipher-suite (string, optional)</h3><p>Description: Specifies the cipher, hash, and key-exchange algorithms used for the encryption, for example, ECDHE-ECDSA-AES256-SHA384. The list of available algorithms depends on the version of OpenSSL used to compile syslog-ng.</p><h3 id="tls-key_file">key_file (*secret.Secret, optional)</h3><p>The name of a file that contains an unencrypted private key in PEM format, suitable as a TLS key. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#key-file">AxoSyslog Core documentation</a>.</p><h3 id="tls-peer_verify">peer_verify (*bool, optional)</h3><p>Verification method of the peer. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#tls-options-peer-verify">AxoSyslog Core documentation</a>.</p><h3 id="tls-ssl_version">ssl_version (string, optional)</h3><p>Configure required TLS version. Accepted values: [sslv3, tlsv1, tlsv1_0, tlsv1_1, tlsv1_2, tlsv1_3]</p><h3 id="tls-use-system-cert-store">use-system-cert-store (*bool, optional)</h3><p>Use the certificate store of the system for verifying HTTPS certificates. For details, see the <a href="https://curl.se/docs/sslcerts.html">AxoSyslog Core documentation</a>.</p><h2 id="grpctls">GrpcTLS</h2><h3 id="grpctls-ca_file">ca_file (*secret.Secret, optional)</h3><p>The name of a file that contains a set of trusted CA certificates in PEM format. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#ca-file">AxoSyslog Core documentation</a>.</p><h3 id="grpctls-cert_file">cert_file (*secret.Secret, optional)</h3><p>Name of a file that contains an X.509 certificate (or a certificate chain) in PEM format, suitable as a TLS certificate, matching the private key set in the key-file() option. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#cert-file">AxoSyslog Core documentation</a>.</p><h3 id="grpctls-key_file">key_file (*secret.Secret, optional)</h3><p>The name of a file that contains an unencrypted private key in PEM format, suitable as a TLS key. For details, see the <a href="https://axoflow.com/docs/axosyslog-core/chapter-encrypted-transport-tls/tlsoptions/#key-file">AxoSyslog Core documentation</a>.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class="row">
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
<a class="text-white" target="_blank" rel="noopener" href="https://github.com/kube-logging/logging-operator" aria-label="GitHub">
<i class="fab fa-github"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
<a class="text-white" target="_blank" rel="noopener" href="/docs/community/" aria-label="Slack">
<i class="fab fa-slack"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discord" aria-label="Discord">
<a class="text-white" target="_blank" rel="noopener" href="https://discord.gg/9ACY4RDsYN" aria-label="Discord">
<i class="fab fa-discord"></i>
</a>
</li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class="text-white"><a class="text-white" href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> | </small>
<small class="text-white">&copy; 2025 kube-logging authors | All Rights Reserved</small>
</div></div></div></footer></div><script src="/4.10/js/main.min.8a95aa7e2d8d9eef50403c6b32e59ad14b7fbf74c438eef4b46bbb472b58dcc9.js" integrity="sha256-ipWqfi2Nnu9QQDxrMuWa0Ut/v3TEOO70tGu7RytY3Mk=" crossorigin="anonymous"></script>
<script src='/4.10/js/prism.js'></script>
<script src='/4.10/js/tabpane-persist.js'></script>
<script src="/js/tocbot.min.js"></script>
<script type="text/javascript">tocbot.init({tocSelector:".td-toc",contentSelector:".td-content",headingSelector:"h2, h3, h4",ignoreHiddenElements:!0})</script>
<script>(function(){var e=document.querySelector("#td-section-nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</body></html>